import{a as e,j as r}from"./query-Caj74EYQ.js";import{b as t,a as i}from"./index-BuAcXaay.js";import s from"./MemberHeader-CHJmR2ZT.js";import{K as n,O as a,F as o,T as l,g as d,q as g}from"./icons-eh0tbLFx.js";import"./vendor-router-B2AaIOtG.js";import"./charts-QHQg_ypW.js";/* empty css                  */const c=()=>{const{user:c}=t(),[m,f]=e.useState([]),[x,h]=e.useState(!0),[b,u]=e.useState(null);e.useEffect(()=>{(null==c?void 0:c.email)&&j()},[null==c?void 0:c.email]);const j=async()=>{var e;h(!0);try{const r=(null==c?void 0:c.email)||"tom@example.com",t=await fetch(`/mitglieder/by-email/${encodeURIComponent(r)}`);if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=await t.json();u(s);const n=await i.get(`/vertraege?mitglied_id=${s.mitglied_id}`),a=Array.isArray(null==(e=n.data)?void 0:e.data)?n.data.data.filter(e=>e.mitglied_id===s.mitglied_id):Array.isArray(n.data)?n.data.filter(e=>e.mitglied_id===s.mitglied_id):[];f(a)}catch(r){console.error("Fehler beim Laden der Zahlungsdaten:",r)}finally{h(!1)}},p=e=>e?new Date(e).toLocaleDateString("de-DE"):"Nicht festgelegt",y=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e);if(x)return r.jsxs("div",{className:"dashboard-container",children:[r.jsx(s,{}),r.jsx("div",{className:"dashboard-content",children:r.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#ffd700"},children:[r.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 1rem",border:"3px solid rgba(255, 215, 0, 0.3)",borderTopColor:"#ffd700",width:"40px",height:"40px"}}),r.jsx("p",{children:"Lade Zahlungsdaten..."})]})})]});const v=m.filter(e=>"aktiv"===e.status).reduce((e,r)=>e+parseFloat(r.monatlicher_betrag||0),0),z=m.filter(e=>"aktiv"===e.status).length;return r.jsxs("div",{className:"dashboard-container",children:[r.jsx(s,{}),r.jsx("div",{className:"dashboard-content",style:{padding:"2rem"},children:r.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[r.jsx(n,{size:32,style:{color:"#ffd700"}}),r.jsx("h1",{style:{color:"#ffd700",margin:0},children:"Meine BeitrÃ¤ge"})]}),r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",margin:0},children:"Ãœbersicht Ã¼ber deine VertrÃ¤ge und Zahlungen"})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:[r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"16px",padding:"1.5rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2.5rem",color:"#ffd700",marginBottom:"0.5rem"},children:r.jsx(a,{size:40})}),r.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffd700",marginBottom:"0.5rem"},children:y(v)}),r.jsx("h3",{style:{color:"#ffffff",margin:0,fontSize:"1rem"},children:"Monatlich"})]}),r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"16px",padding:"1.5rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2.5rem",color:"#ffd700",marginBottom:"0.5rem"},children:r.jsx(o,{size:40})}),r.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#ffd700",marginBottom:"0.5rem"},children:z}),r.jsx("h3",{style:{color:"#ffffff",margin:0,fontSize:"1rem"},children:"Aktive VertrÃ¤ge"})]}),m.length>0&&r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"16px",padding:"1.5rem",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"2.5rem",color:"#ffd700",marginBottom:"0.5rem"},children:r.jsx(n,{size:40})}),r.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffd700",marginBottom:"0.5rem"},children:"lastschrift"===m[0].zahlungsart?"Lastschrift":"Ã¼berweisung"===m[0].zahlungsart?"Ãœberweisung":m[0].zahlungsart||"Nicht festgelegt"}),r.jsx("h3",{style:{color:"#ffffff",margin:0,fontSize:"1rem"},children:"Zahlungsart"})]})]}),r.jsxs("div",{children:[r.jsx("h2",{style:{color:"#ffd700",marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Meine VertrÃ¤ge"}),0===m.length?r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"16px",padding:"3rem",textAlign:"center"},children:[r.jsx(l,{size:48,style:{color:"#ffd700",margin:"0 auto 1rem"}}),r.jsx("h3",{style:{color:"#ffd700",marginBottom:"0.5rem"},children:"Keine VertrÃ¤ge gefunden"}),r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)"},children:"Es wurden keine Vertragsdaten gefunden."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:m.map(e=>{const t=(e=>"aktiv"===e.status?{icon:r.jsx(d,{size:20}),text:"Aktiv",color:"#10b981",bgColor:"rgba(16, 185, 129, 0.2)"}:"gekÃ¼ndigt"===e.status?{icon:r.jsx(l,{size:20}),text:"GekÃ¼ndigt",color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.2)"}:"pausiert"===e.status?{icon:r.jsx(g,{size:20}),text:"Pausiert",color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.2)"}:{icon:r.jsx(g,{size:20}),text:e.status,color:"rgba(255, 255, 255, 0.7)",bgColor:"rgba(255, 255, 255, 0.1)"})(e);return r.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid "+("aktiv"===e.status?"rgba(255, 215, 0, 0.2)":"rgba(255, 255, 255, 0.15)"),borderRadius:"16px",padding:"1.5rem",transition:"all 0.3s ease"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.borderColor="aktiv"===e.status?"#ffd700":"rgba(255, 255, 255, 0.3)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.borderColor="aktiv"===e.status?"rgba(255, 215, 0, 0.2)":"rgba(255, 255, 255, 0.15)"},children:r.jsxs("div",{style:{display:"flex",gap:"1.5rem",alignItems:"flex-start"},children:[r.jsx("div",{style:{fontSize:"3rem",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"80px",height:"80px",background:t.bgColor,borderRadius:"12px"},children:"ðŸ“„"}),r.jsxs("div",{style:{flex:1},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("h3",{style:{color:"#ffd700",margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:["Vertrag #",e.vertrag_id]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx("div",{style:{color:t.color},children:t.icon}),r.jsx("span",{style:{padding:"0.25rem 0.75rem",background:t.bgColor,color:t.color,borderRadius:"6px",fontSize:"0.85rem",fontWeight:"500"},children:t.text})]})]}),r.jsxs("div",{style:{textAlign:"right"},children:[r.jsx("div",{style:{fontSize:"1.75rem",fontWeight:"bold",color:"#ffd700"},children:y(e.monatlicher_betrag)}),r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem"},children:"pro Monat"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem",padding:"1rem",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"Start"}),r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},children:p(e.start_datum)})]}),e.ende_datum&&r.jsxs("div",{children:[r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"Ende"}),r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},children:p(e.ende_datum)})]}),e.naechste_zahlung&&r.jsxs("div",{children:[r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"NÃ¤chste Zahlung"}),r.jsx("div",{style:{color:"#ffd700",fontWeight:"500"},children:p(e.naechste_zahlung)})]}),r.jsxs("div",{children:[r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem",marginBottom:"0.25rem"},children:"Zahlungsart"}),r.jsx("div",{style:{color:"rgba(255, 255, 255, 0.9)",fontWeight:"500",textTransform:"capitalize"},children:e.zahlungsart||"Nicht festgelegt"})]})]})]})]})},e.vertrag_id)})})]})]})}),r.jsx("style",{children:"\n        .loading-spinner {\n          border: 3px solid rgba(255, 255, 255, 0.1);\n          border-top: 3px solid #ffd700;\n          border-radius: 50%;\n          width: 40px;\n          height: 40px;\n          animation: spin 1s linear infinite;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})};export{c as default};
