import{a as e,j as a}from"./query-Caj74EYQ.js";import{b as s,u as n,e as i,g as r,i as d,j as t,k as l,a as c}from"./index-NPitIXjM.js";import{j as o}from"./index-CkXcCt97.js";import{D as h,S as m,T as u,A as v}from"./TrialBanner-CCMdT2m9.js";import p from"./MemberDashboard-Clcb0cwj.js";import"./index-wRQyZq66.js";/* empty css                          *//* empty css                         *//* empty css                       *//* empty css                                   *//* empty css                        */import{d as b,u as j,O as g}from"./vendor-router-B2AaIOtG.js";import"./icons-eh0tbLFx.js";import"./charts-QHQg_ypW.js";import"./MemberHeader-ClHDFSBp.js";/* empty css                  *//* empty css                      */function x(){var x;const N=b(),f=j(),{token:k,logout:w}=s(),{getDojoFilterParam:y,selectedDojo:E}=n(),{standorte:S}=i(),{updateTrigger:C}=r(),[z,M]=e.useState({mitglieder:0,anwesenheit:0,kurse:0,trainer:0,beitraege:0,checkins_heute:0,stile:0,termine:0,inventar:0,personal:0,buddy_gruppen:0,tarife:0,zahlungszyklen:0}),[D,P]=e.useState([]),[T,L]=e.useState(!1),[A,F]=e.useState(""),[U,_]=e.useState(""),[B,V]=e.useState("checkin");let R="mitglied";try{if(k){R=o(k).role||"mitglied"}}catch(Z){console.error("Fehler beim Dekodieren des Tokens:",Z)}const I=async()=>{L(!0),F("");try{const e=y(),a=await d(k,e);if(M({...a.stats,checkins_heute:a.stats.checkins_heute||0,stile:a.stats.stile||0,termine:a.stats.termine||0,inventar:a.stats.inventar||0,personal:a.stats.personal||0,buddy_gruppen:a.stats.buddy_gruppen||0,tarife:a.stats.tarife||0,zahlungszyklen:a.stats.zahlungszyklen||0}),a.activities){const e=a.activities.activities||a.activities||[];P(e)}}catch(e){console.error("Fehler beim Laden der Dashboard-Statistiken:",e),F("Fehler beim Laden der Statistiken: "+e.message);try{const e=y(),[a,s]=await Promise.all([t(k,e),l(k,e)]);M({...a,checkins_heute:a.checkins_heute||0,stile:a.stile||0,termine:a.termine||0,inventar:a.inventar||0,personal:a.personal||0,buddy_gruppen:a.buddy_gruppen||0,tarife:a.tarife||0,zahlungszyklen:a.zahlungszyklen||0});const n=s.activities||s||[];P(n),F("")}catch(a){console.error("Fallback fehlgeschlagen:",a)}}finally{L(!1)}};e.useEffect(()=>{k&&I()},[k,y,C]),e.useEffect(()=>{(async()=>{try{if(k){const a=o(k);if("admin"===a.role)_(a.username||"Admin");else if(a.email)try{const e=await c.get(`/mitglieder/by-email/${encodeURIComponent(a.email)}`);if(e.data){const s=`${e.data.vorname||""} ${e.data.nachname||""}`.trim();_(s||a.username||"Mitglied")}}catch(e){console.error("Fehler beim Laden des Mitgliedsnamens:",e),_(a.username||"Mitglied")}}}catch(Z){console.error("Fehler beim Dekodieren des Tokens:",Z)}})()},[k]);const K=e=>{if("/dashboard/stundenplan"===e)try{f(e)}catch(Z){console.error("Stundenplan Navigation Fehler:",Z),window.location.href=e}else f(e)},G=[{id:"checkin",label:"Check-in Systeme",icon:"üì±"},{id:"mitglieder",label:"Mitgliederverwaltung",icon:"üë•"},{id:"pruefungswesen",label:"Pr√ºfungswesen",icon:"üèÜ"},{id:"events",label:"Events",icon:"üìÖ"},{id:"finanzen",label:"Finanzen",icon:"üí∞"},{id:"artikelverwaltung",label:"Artikelverwaltung",icon:"üì¶"},{id:"verwaltung",label:"Dojo-Verwaltung",icon:"üîß"},{id:"personal",label:"Personal",icon:"üë®‚Äçüè´"},{id:"berichte",label:"Berichte",icon:"üìä"},{id:"einstellungen",label:"Einstellungen",icon:"‚öôÔ∏è"},{id:"schnellaktionen",label:"Schnellaktionen",icon:"‚ö°"},{id:"support",label:"Support",icon:"üé´"},{id:"wunschliste",label:"Wunschliste",icon:"üí°"},{id:"info",label:"Info",icon:"‚ÑπÔ∏è"}],q=e=>0===e?"0":e.toLocaleString("de-DE"),Q="/dashboard-tda-vib"===N.pathname||"/dashboard"===N.pathname,$="admin"===R?"Dojo Admin Dashboard":"Mitglieder Dashboard",O=[{icon:"üë•",title:"Mitglieder",description:"Verwalten Sie alle Dojo-Mitglieder",path:"/dashboard/mitglieder",count:z.mitglieder},{icon:"üë•",title:"Buddy-Gruppen",description:"Freunde-Einladungen und Gruppenverwaltung",path:"/dashboard/buddy-gruppen",badge:"NEU",featured:!0,count:z.buddy_gruppen||0},{icon:"üìß",title:"Newsletter & Benachrichtigungen",description:"Email-Versand, Push-Nachrichten",path:"/dashboard/notifications",badge:"NEU",featured:!0},{icon:"üëã",title:"Ehemalige",description:"Ehemalige Mitglieder verwalten",path:"/dashboard/ehemalige",badge:"NEU",count:z.ehemalige||0},{icon:"üíº",title:"Interessenten",description:"Potenzielle Mitglieder und Leads",path:"/dashboard/interessenten",badge:"NEU",count:z.interessenten||0}],W=[{icon:"ü•ã",title:"Kurse",description:"Kurse und Gruppen verwalten",path:"/dashboard/kurse",count:z.kurse},{icon:"üìã",title:"Stundenplan",description:"Stundenplan und Kurszeiten",path:"/dashboard/stundenplan",featured:!0},{icon:"üéñÔ∏è",title:"Stil-Verwaltung",description:"Kampfkunst-Stile & Pr√ºfungen",path:"/dashboard/stile",badge:"NEU",featured:!0,count:z.stile||0},{icon:"üë•",title:"Gruppen",description:"Trainingsgruppen verwalten",path:"/dashboard/gruppen"},{icon:"üìç",title:"Standorte",description:"Standorte & Filialen",path:"/dashboard/standorte",count:(null==S?void 0:S.length)||0}],H=[{icon:"üë®‚Äçüè´",title:"Trainer",description:"Trainer und Qualifikationen",path:"/dashboard/trainer",count:z.trainer},{icon:"üßë‚Äçüíº",title:"Personal",description:"Mitarbeiter & Personalverwaltung",path:"/dashboard/personal",count:z.personal,badge:"NEU",featured:!0}],J=[{icon:"üìä",title:"Finanzcockpit",description:"√úbersicht Finanzkennzahlen",path:"/dashboard/finanzcockpit",featured:!0},{icon:"üí∞",title:"Beitr√§ge",description:"Mitgliedsbeitr√§ge",path:"/dashboard/beitraege",count:z.beitraege,featured:!0},{icon:"üßæ",title:"Rechnungen",description:"Rechnungen verwalten",path:"/dashboard/rechnungen",featured:!0},{icon:"üí≥",title:"Lastschriftlauf",description:"SEPA-Lastschriften",path:"/dashboard/lastschriftlauf",featured:!0},{icon:"üìã",title:"SEPA-Mandate",description:"Einzugserm√§chtigungen",path:"/dashboard/sepa-mandate",featured:!0},{icon:"‚ö†Ô∏è",title:"Mahnwesen",description:"Offene Rechnungen",path:"/dashboard/mahnwesen",featured:!0},{icon:"üéØ",title:"Tarife & Preise",description:"Mitgliedschaftstarife",path:"/dashboard/tarife",featured:!0}];return"admin"!==R&&Q?a.jsx(p,{}):a.jsxs("div",{className:"dashboard-container dashboard-tda-vib",children:[a.jsxs("header",{className:"dashboard-header",children:[a.jsxs("div",{className:"dashboard-header-left",children:[a.jsx("img",{src:"/dojo-logo.png",alt:"DojoSoftware Logo",className:"dashboard-logo dojo-software-logo"}),a.jsx("h2",{children:$})]}),a.jsxs("div",{className:"dashboard-header-right",children:["admin"===R&&a.jsx(h,{}),"admin"===R&&a.jsx(m,{}),!Q&&a.jsx("button",{onClick:()=>f("/dashboard-tda-vib"),className:"dashboard-button",children:"‚Üê Dashboard"}),U&&a.jsxs("div",{className:"user-display",children:[a.jsx("span",{className:"user-greeting",children:"Willkommen"}),a.jsx("span",{className:"user-name",children:U})]}),a.jsx("button",{className:"logout-button",onClick:()=>{w(),f("/login")},children:a.jsx("span",{className:"logout-text",children:"Logout"})})]})]}),a.jsx("div",{className:"dashboard-content",children:a.jsx("main",{className:"dashboard-main",children:Q?a.jsxs("div",{className:"content-card",children:[A&&a.jsxs("div",{className:"error-message",children:["‚ö†Ô∏è ",A,a.jsx("button",{onClick:I,className:"btn btn-neutral btn-small",style:{marginLeft:"10px"},children:"üîÑ Erneut versuchen"})]}),a.jsx(u,{stats:z}),"admin"===R&&a.jsx("div",{className:"dashboard-tabs",children:G.map(e=>a.jsxs("button",{className:"dashboard-tab "+(B===e.id?"active":""),onClick:()=>V(e.id),children:[a.jsx("span",{className:"tab-icon",children:e.icon}),a.jsx("span",{className:"tab-label",children:e.label})]},e.id))}),a.jsx("div",{className:"dashboard-navigation",children:"admin"===R&&a.jsxs("div",{className:"tab-content",children:["checkin"===B&&a.jsxs("div",{className:"nav-cards",children:[a.jsxs("div",{onClick:()=>K("/dashboard/checkin"),className:"nav-card clickable featured",children:[a.jsx("div",{className:"nav-badge live",children:"LIVE"}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:"üì±"}),a.jsxs("h3",{children:["Mitglieder Check-in ",a.jsxs("span",{className:"nav-count",children:["(",q(z.checkins_heute),")"]})]})]}),a.jsx("p",{children:"Touch & QR-Code Check-in f√ºr Mitglieder"})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),a.jsxs("div",{onClick:()=>K("/dashboard/anwesenheit"),className:"nav-card clickable",children:[a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:"‚úÖ"}),a.jsxs("h3",{children:["Anwesenheit ",a.jsxs("span",{className:"nav-count",children:["(",q(z.anwesenheit),")"]})]})]}),a.jsx("p",{children:"Anwesenheitsverfolgung und Statistiken"})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),a.jsxs("div",{onClick:()=>K("/dashboard/personal-checkin"),className:"nav-card clickable featured",children:[a.jsx("div",{className:"nav-badge new",children:"NEU"}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:"üë•"}),a.jsx("h3",{children:"Personal Check-in"})]}),a.jsx("p",{children:"Arbeitszeit-Erfassung f√ºr Personal"})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),a.jsxs("div",{onClick:()=>K("/dashboard/kasse"),className:"nav-card clickable featured",children:[a.jsx("div",{className:"nav-badge new",children:"NEU"}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:"üí∞"}),a.jsx("h3",{children:"Barverkauf"})]}),a.jsx("p",{children:"Touch-Kasse f√ºr Verk√§ufe und Barzahlungen"})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),a.jsxs("div",{onClick:()=>K("/dashboard/tresen"),className:"nav-card clickable featured",children:[a.jsx("div",{className:"nav-badge live",children:"LIVE"}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:"üè™"}),a.jsx("h3",{children:"Tresen-√úbersicht"})]}),a.jsx("p",{children:"Empfang, Checkin & Tages√ºbersicht"})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]})]}),"mitglieder"===B&&a.jsx("div",{className:"nav-cards",children:O.map((e,s)=>a.jsxs("div",{onClick:()=>K(e.path),className:"nav-card clickable "+(e.featured?"featured":""),children:[e.badge&&a.jsx("div",{className:"nav-badge "+("NEU"===e.badge?"new":"live"),children:e.badge}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:e.icon}),a.jsxs("h3",{children:[e.title," ",void 0!==e.count&&a.jsxs("span",{className:"nav-count",children:["(",q(e.count),")"]})]})]}),a.jsx("p",{children:e.description})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"verwaltung"===B&&a.jsx("div",{className:"nav-cards",children:W.map((e,s)=>a.jsxs("div",{onClick:()=>K(e.path),className:"nav-card clickable "+(e.featured?"featured":""),children:[e.badge&&a.jsx("div",{className:"nav-badge "+("NEU"===e.badge?"new":"live"),children:e.badge}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:e.icon}),a.jsxs("h3",{children:[e.title," ",void 0!==e.count&&a.jsxs("span",{className:"nav-count",children:["(",q(e.count),")"]})]})]}),a.jsx("p",{children:e.description})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"personal"===B&&a.jsx("div",{className:"nav-cards",children:H.map((e,s)=>a.jsxs("div",{onClick:()=>K(e.path),className:"nav-card clickable "+(e.featured?"featured":""),children:[e.badge&&a.jsx("div",{className:"nav-badge "+("NEU"===e.badge?"new":"live"),children:e.badge}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:e.icon}),a.jsxs("h3",{children:[e.title," ",void 0!==e.count&&a.jsxs("span",{className:"nav-count",children:["(",q(e.count),")"]})]})]}),a.jsx("p",{children:e.description})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"finanzen"===B&&a.jsx("div",{className:"nav-cards",children:J.map((e,s)=>a.jsxs("div",{onClick:()=>K(e.path),className:"nav-card clickable "+(e.featured?"featured":""),children:[e.badge&&a.jsx("div",{className:"nav-badge "+("NEU"===e.badge?"new":"live"),children:e.badge}),a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:e.icon}),a.jsxs("h3",{children:[e.title," ",void 0!==e.count&&a.jsxs("span",{className:"nav-count",children:["(",q(e.count),")"]})]})]}),a.jsx("p",{children:e.description})]}),a.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"schnellaktionen"===B&&a.jsxs("div",{className:"nav-section",children:[a.jsx("h2",{className:"section-header",children:"Schnellaktionen"}),a.jsx("div",{className:"quick-actions",children:[{label:"‚ûï Neues Mitglied",path:"/dashboard/mitglieder/neu",className:"primary"},{label:"üéñÔ∏è Neuen Stil anlegen",path:"/dashboard/stile/neu",className:"info"},{label:"‚úÖ Anwesenheit erfassen",path:"/dashboard/anwesenheit",className:"secondary"},{label:"ü•ã Pr√ºfung verwalten",path:"/dashboard/stile/pruefungen",className:"warning"},{label:"üë• Buddy-Gruppe erstellen",path:"/dashboard/buddy-gruppen",className:"success"},{label:"üí∞ Barverkauf",path:"/dashboard/kasse",className:"primary"}].map((e,s)=>a.jsx("button",{onClick:()=>K(e.path),className:`quick-action-btn ${e.className}`,children:e.label},s))}),a.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:a.jsxs("button",{onClick:I,className:"quick-action-btn info",disabled:T,children:["üîÑ ",T?"L√§dt...":"Statistiken aktualisieren"]})})]}),["pruefungswesen","events","artikelverwaltung","berichte","einstellungen"].includes(B)&&a.jsx("div",{className:"nav-cards",children:a.jsx("div",{className:"nav-card",children:a.jsxs("div",{className:"nav-content",children:[a.jsxs("div",{className:"nav-card-header",children:[a.jsx("span",{className:"nav-icon",children:"üîß"}),a.jsx("h3",{children:null==(x=G.find(e=>e.id===B))?void 0:x.label})]}),a.jsx("p",{children:"Dieser Bereich ist in der Demo-Ansicht verf√ºgbar"})]})})})]})})]}):a.jsx("div",{className:"content-card",children:a.jsx(g,{})})})}),"admin"===R&&a.jsx(v,{})]})}export{x as default};
