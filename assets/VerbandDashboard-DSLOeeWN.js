import{a as e,j as t}from"./query-Caj74EYQ.js";import{b as s,a as n,l as i}from"./index-lGWqIYMX.js";import{R as a,A as l,a2 as r,N as o,U as d,O as c,T as p,aX as h,c as g,aY as u,_ as x,a9 as b,a3 as j,a5 as m,C as f,K as y,F as v,X as k,a7 as z,b as _,aZ as S,ab as C,M as w,ak as N,aj as B,G as I,Q as T,aQ as D,d as M,a_ as R,q as A,V as L,J as F,o as G,aE as E,n as V,ae as W,aq as $,g as P,a0 as H,l as K,r as O,z as U}from"./icons-C9nQ4cWf.js";import J from"./ArtikelVerwaltung-2NHdMAGc.js";import{Z}from"./ZieleEntwicklung-Dqivz008.js";import X from"./SupportTickets-BcNd_UpV.js";import{u as q}from"./vendor-router-B2AaIOtG.js";const Y=()=>{var L,F,G,E;const{token:V,user:W}=s(),$="admin"===(null==W?void 0:W.rolle)||"admin"===(null==W?void 0:W.role),[P,H]=e.useState("dojos"),[K,O]=e.useState([]),[U,J]=e.useState([]),[Z,X]=e.useState({}),[q,Y]=e.useState(!0),[ee,te]=e.useState(""),[se,ne]=e.useState(""),[ie,ae]=e.useState(""),[le,re]=e.useState([]),[oe,de]=e.useState(!1),[ce,pe]=e.useState("typen"),[he,ge]=e.useState({}),[ue,xe]=e.useState(!1),[be,je]=e.useState({}),[me,fe]=e.useState([]),[ye,ve]=e.useState(!1),[ke,ze]=e.useState(null),[_e,Se]=e.useState(!1),[Ce,we]=e.useState({code:"",name:"",beschreibung:"",kategorie:"person",preis_netto:0,steuersatz:19,laufzeit_monate:12,kuendigungsfrist_monate:3,auto_verlaengerung:!0,ist_standard:!1,aktiv:!0,sortierung:0}),[Ne,Be]=e.useState(null),[Ie,Te]=e.useState(!1),[De,Me]=e.useState({titel:"",beschreibung:"",gilt_fuer:"beide",rabatt_typ:"prozent",rabatt_wert:0,kategorie:"sonstige",aktiv:!0}),[Re,Ae]=e.useState(!1),[Le,Fe]=e.useState(!1),[Ge,Ee]=e.useState(!1),[Ve,We]=e.useState(!1),[$e,Pe]=e.useState(!1),[He,Ke]=e.useState(null),[Oe,Ue]=e.useState([]),[Je,Ze]=e.useState("info"),[Xe,qe]=e.useState({iban:"",bic:"",kontoinhaber:""}),[Ye,Qe]=e.useState([]),[et,tt]=e.useState([]),[st,nt]=e.useState(null),it=e.useRef(null),[at,lt]=e.useState(!1),[rt,ot]=e.useState(null),[dt,ct]=e.useState({agb:!1,dsgvo:!1,widerruf:!1}),[pt,ht]=e.useState({typ:"dojo",dojo_id:"",neues_dojo:!1,neues_dojo_name:"",neues_dojo_inhaber:"",neues_dojo_email:"",neues_dojo_strasse:"",neues_dojo_plz:"",neues_dojo_ort:"",neues_dojo_land:"Deutschland",person_vorname:"",person_nachname:"",person_email:"",person_telefon:"",person_strasse:"",person_plz:"",person_ort:"",person_land:"Deutschland",person_geburtsdatum:"",zahlungsart:"rechnung",notizen:"",beitragsfrei:!1}),gt=n.create({baseURL:"/api",headers:{Authorization:`Bearer ${V}`}}),ut=async()=>{Y(!0),te("");try{const[e,t,s]=await Promise.all([gt.get("/verbandsmitgliedschaften"),gt.get("/verbandsmitgliedschaften/stats"),gt.get("/verbandsmitgliedschaften/vorteile/liste")]),n=e.data.mitgliedschaften||e.data;O(Array.isArray(n)?n:[]);const i=t.data.stats||t.data;X(i),J(s.data)}catch(e){console.error("Fehler beim Laden:",e),te("Fehler beim Laden der Daten")}finally{Y(!1)}},xt=async()=>{de(!0);try{const e=await gt.get("/verbandsmitgliedschaften/einstellungen/alle");re(e.data),ge({})}catch(e){console.error("Fehler beim Laden der Einstellungen:",e)}finally{de(!1)}},bt=async()=>{try{const e=await gt.get("/verbandsmitgliedschaften/einstellungen-config");je(e.data)}catch(e){console.error("Fehler beim Laden der Konfiguration:",e)}},jt=(e,t)=>{ge(s=>({...s,[e]:t}))},mt=e=>{if(he.hasOwnProperty(e))return he[e];const t=le.find(t=>t.einstellung_key===e);return(null==t?void 0:t.einstellung_value)??""},ft=async()=>{ve(!0);try{const e=await gt.get("/verbandsmitgliedschaften/mitgliedschaftstypen");fe(e.data)}catch(e){console.error("Fehler beim Laden der Mitgliedschaftstypen:",e)}finally{ve(!1)}},yt=(e=null)=>{e?(ze(e),we({code:e.code,name:e.name,beschreibung:e.beschreibung||"",kategorie:e.kategorie,preis_netto:e.preis_netto,steuersatz:e.steuersatz,laufzeit_monate:e.laufzeit_monate,kuendigungsfrist_monate:e.kuendigungsfrist_monate,auto_verlaengerung:e.auto_verlaengerung,ist_standard:e.ist_standard,aktiv:e.aktiv,sortierung:e.sortierung})):(ze(null),we({code:"",name:"",beschreibung:"",kategorie:"person",preis_netto:0,steuersatz:19,laufzeit_monate:12,kuendigungsfrist_monate:3,auto_verlaengerung:!0,ist_standard:!1,aktiv:!0,sortierung:0})),Se(!0)},vt=async()=>{try{const e=await gt.get("/verbandsmitgliedschaften/vorteile");J(e.data)}catch(e){console.error("Fehler beim Laden der Vorteile:",e)}},kt=(e=null)=>{e?(Be(e),Me({titel:e.titel,beschreibung:e.beschreibung||"",gilt_fuer:e.gilt_fuer,rabatt_typ:e.rabatt_typ,rabatt_wert:e.rabatt_wert,kategorie:e.kategorie,aktiv:e.aktiv})):(Be(null),Me({titel:"",beschreibung:"",gilt_fuer:"beide",rabatt_typ:"prozent",rabatt_wert:0,kategorie:"sonstige",aktiv:!0})),Te(!0)};e.useEffect(()=>{ut(),bt()},[]),e.useEffect(()=>{Re&&"dojo"===pt.typ&&(async()=>{try{const e=await gt.get("/verbandsmitgliedschaften/dojos-ohne-mitgliedschaft");Ue(e.data)}catch(e){console.error("Fehler beim Laden der Dojos:",e)}})()},[Re,pt.typ]),e.useEffect(()=>{(Ge||$e)&&setTimeout(()=>Ct(),100)},[Ge,$e]),e.useEffect(()=>{"einstellungen"===P&&("typen"===ce?ft():xt())},[P,ce]);const zt=()=>{ht({typ:"dojo",dojo_id:"",neues_dojo:!1,neues_dojo_name:"",neues_dojo_inhaber:"",neues_dojo_email:"",neues_dojo_strasse:"",neues_dojo_plz:"",neues_dojo_ort:"",neues_dojo_land:"Deutschland",person_vorname:"",person_nachname:"",person_email:"",person_telefon:"",person_strasse:"",person_plz:"",person_ort:"",person_land:"Deutschland",person_geburtsdatum:"",zahlungsart:"rechnung",notizen:"",beitragsfrei:!1})},_t=async e=>{try{const t=await gt.get(`/verbandsmitgliedschaften/${e}/sepa`);Qe(t.data)}catch(t){console.error("Fehler beim Laden der SEPA-Mandate:",t)}},St=async e=>{try{const t=await gt.get(`/verbandsmitgliedschaften/dokumente/${e}`);nt(t.data),We(!0)}catch(t){alert("Dokument nicht gefunden")}},Ct=()=>{const e=it.current;if(!e)return;const t=e.getContext("2d");t.fillStyle="#fff",t.fillRect(0,0,e.width,e.height),t.strokeStyle="#000",t.lineWidth=2,t.lineCap="round"},wt=e=>{var t,s,n,i;const a=it.current,l=a.getContext("2d"),r=a.getBoundingClientRect(),o=(e.clientX||(null==(s=null==(t=e.touches)?void 0:t[0])?void 0:s.clientX))-r.left,d=(e.clientY||(null==(i=null==(n=e.touches)?void 0:n[0])?void 0:i.clientY))-r.top;l.beginPath(),l.moveTo(o,d),lt(!0)},Nt=e=>{var t,s,n,i;if(!at)return;const a=it.current,l=a.getContext("2d"),r=a.getBoundingClientRect(),o=(e.clientX||(null==(s=null==(t=e.touches)?void 0:t[0])?void 0:s.clientX))-r.left,d=(e.clientY||(null==(i=null==(n=e.touches)?void 0:n[0])?void 0:i.clientY))-r.top;l.lineTo(o,d),l.stroke()},Bt=()=>{if(at){lt(!1);const e=it.current;ot(e.toDataURL("image/png"))}},It=()=>{Ct(),ot(null)},Tt=async e=>{try{const[t,s]=await Promise.all([gt.get(`/verbandsmitgliedschaften/${e.id}`),gt.get(`/verbandsmitgliedschaften/${e.id}/zahlungen`)]);Ke({...t.data,zahlungen:s.data}),Ze("info"),_t(e.id),(async()=>{try{const e=await gt.get("/verbandsmitgliedschaften/dokumente/liste");tt(e.data)}catch(e){console.error("Fehler beim Laden der Dokumente:",e)}})(),Fe(!0)}catch(t){alert("Fehler beim Laden der Details")}},Dt=K.filter(e=>{var t;if("dojos"===P&&"dojo"!==e.typ)return!1;if("einzelpersonen"===P&&"einzelperson"!==e.typ)return!1;if(ie&&e.status!==ie)return!1;if(se){const s=se.toLowerCase();if(!("dojo"===e.typ?e.dojo_name||"":`${e.person_vorname||""} ${e.person_nachname||""}`).toLowerCase().includes(s)&&!(null==(t=e.mitgliedsnummer)?void 0:t.toLowerCase().includes(s)))return!1}return!0}),Mt=e=>{const s={aktiv:{color:"#10b981",bg:"rgba(16, 185, 129, 0.15)",icon:b,label:"Aktiv"},ausstehend:{color:"#f59e0b",bg:"rgba(245, 158, 11, 0.15)",icon:A,label:"Ausstehend"},abgelaufen:{color:"#ef4444",bg:"rgba(239, 68, 68, 0.15)",icon:p,label:"Abgelaufen"},gekuendigt:{color:"#6b7280",bg:"rgba(107, 114, 128, 0.15)",icon:x,label:"GekÃ¼ndigt"},vertragsfrei:{color:"#8b5cf6",bg:"rgba(139, 92, 246, 0.15)",icon:M,label:"Vertragsfrei"}},n=s[e]||s.ausstehend,i=n.icon;return t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",background:n.bg,color:n.color,fontSize:"0.8rem",fontWeight:"600"},children:[t.jsx(i,{size:14}),n.label]})},Rt=e=>{if(!e)return"-";try{const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("de-DE")}catch(t){return"-"}},At=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e);return q?t.jsx("div",{style:Q.container,children:t.jsxs("div",{style:Q.loading,children:[t.jsx(a,{size:32,className:"spin"}),t.jsx("span",{children:"Lade Verbandsmitglieder..."})]})}):t.jsxs("div",{style:Q.container,children:[t.jsxs("div",{style:Q.header,children:[t.jsxs("div",{children:[t.jsxs("h1",{style:Q.title,children:[t.jsx(l,{size:28,color:"#ffd700"}),"TDA Verbandsmitglieder"]}),t.jsx("p",{style:Q.subtitle,children:"Dojo- und Einzelmitgliedschaften verwalten"})]}),t.jsxs("button",{style:Q.primaryButton,onClick:()=>Ae(!0),children:[t.jsx(r,{size:18}),"Neue Mitgliedschaft"]})]}),t.jsxs("div",{style:Q.statsGrid,children:[t.jsxs("div",{style:Q.statCard,children:[t.jsx(o,{size:24,color:"#3b82f6"}),t.jsxs("div",{children:[t.jsx("div",{style:Q.statValue,children:Z.dojos||0}),t.jsx("div",{style:Q.statLabel,children:"Dojo-Mitglieder"})]})]}),t.jsxs("div",{style:Q.statCard,children:[t.jsx(d,{size:24,color:"#10b981"}),t.jsxs("div",{children:[t.jsx("div",{style:Q.statValue,children:Z.einzelpersonen||0}),t.jsx("div",{style:Q.statLabel,children:"Einzelmitglieder"})]})]}),t.jsxs("div",{style:Q.statCard,children:[t.jsx(c,{size:24,color:"#ffd700"}),t.jsxs("div",{children:[t.jsx("div",{style:Q.statValue,children:At(Z.jahresumsatz||0)}),t.jsx("div",{style:Q.statLabel,children:"Jahresumsatz"})]})]}),t.jsxs("div",{style:Q.statCard,children:[t.jsx(p,{size:24,color:"#f59e0b"}),t.jsxs("div",{children:[t.jsx("div",{style:Q.statValue,children:Z.auslaufend||0}),t.jsx("div",{style:Q.statLabel,children:"Laufen aus (30 Tage)"})]})]})]}),t.jsxs("div",{style:Q.tabs,children:[t.jsxs("button",{style:{...Q.tab,..."dojos"===P?Q.tabActive:{}},onClick:()=>H("dojos"),children:[t.jsx(o,{size:16}),"Dojos (",K.filter(e=>"dojo"===e.typ).length,")"]}),t.jsxs("button",{style:{...Q.tab,..."einzelpersonen"===P?Q.tabActive:{}},onClick:()=>H("einzelpersonen"),children:[t.jsx(d,{size:16}),"Einzelpersonen (",K.filter(e=>"einzelperson"===e.typ).length,")"]}),t.jsxs("button",{style:{...Q.tab,..."vorteile"===P?Q.tabActive:{}},onClick:()=>H("vorteile"),children:[t.jsx(h,{size:16}),"Vorteile & Rabatte"]}),t.jsxs("button",{style:{...Q.tab,..."einstellungen"===P?Q.tabActive:{}},onClick:()=>H("einstellungen"),children:[t.jsx(g,{size:16}),"Einstellungen"]})]}),"vorteile"===P&&t.jsxs("div",{style:Q.vorteileContainer,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t.jsx("h3",{style:{...Q.sectionTitle,margin:0},children:"Mitgliedschaftsvorteile & Rabatte"}),t.jsxs("button",{onClick:()=>kt(),style:Q.submitButton,children:[t.jsx(r,{size:16})," Neuer Vorteil"]})]}),t.jsxs("div",{style:Q.vorteileGrid,children:[U.map(e=>t.jsxs("div",{style:{...Q.vorteilCard,opacity:e.aktiv?1:.5},children:[t.jsxs("div",{style:Q.vorteilHeader,children:[t.jsx(u,{size:20,color:"#ffd700"}),t.jsx("span",{style:Q.vorteilTitel,children:e.titel}),!e.aktiv&&t.jsx("span",{style:{background:"#ef4444",color:"#fff",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",marginLeft:"8px"},children:"INAKTIV"})]}),t.jsx("p",{style:Q.vorteilBeschreibung,children:e.beschreibung}),t.jsxs("div",{style:Q.vorteilMeta,children:[t.jsxs("span",{style:Q.vorteilRabatt,children:["prozent"===e.rabatt_typ?`${e.rabatt_wert}%`:`${e.rabatt_wert}â‚¬`," Rabatt"]}),t.jsx("span",{style:Q.vorteilKategorie,children:e.kategorie}),t.jsx("span",{style:{...Q.vorteilGilt,background:"dojo"===e.gilt_fuer?"rgba(59, 130, 246, 0.2)":"einzelperson"===e.gilt_fuer?"rgba(16, 185, 129, 0.2)":"rgba(255, 215, 0, 0.2)"},children:"beide"===e.gilt_fuer?"Alle":"dojo"===e.gilt_fuer?"Dojos":"Einzelpersonen"})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"12px"},children:[t.jsx("button",{onClick:()=>(async e=>{try{await gt.post(`/verbandsmitgliedschaften/vorteile/${e}/toggle-aktiv`),vt()}catch(t){alert("Fehler beim Umschalten")}})(e.id),style:{...Q.iconButton,background:e.aktiv?"rgba(239,68,68,0.2)":"rgba(16,185,129,0.2)",color:e.aktiv?"#ef4444":"#10b981",flex:1},children:e.aktiv?t.jsxs(t.Fragment,{children:[t.jsx(x,{size:14})," Deaktivieren"]}):t.jsxs(t.Fragment,{children:[t.jsx(b,{size:14})," Aktivieren"]})}),t.jsxs("button",{onClick:()=>kt(e),style:{...Q.iconButton,flex:1},children:[t.jsx(j,{size:14})," Bearbeiten"]}),t.jsx("button",{onClick:()=>(async e=>{var t,s;if(confirm("Vorteil wirklich lÃ¶schen?"))try{await gt.delete(`/verbandsmitgliedschaften/vorteile/${e}`),alert("GelÃ¶scht!"),vt()}catch(n){alert((null==(s=null==(t=n.response)?void 0:t.data)?void 0:s.error)||"Fehler beim LÃ¶schen")}})(e.id),style:{...Q.iconButton,color:"#ef4444"},children:t.jsx(m,{size:14})})]})]},e.id)),0===U.length&&t.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888",gridColumn:"1 / -1"},children:"Keine Vorteile vorhanden. Erstellen Sie einen neuen Vorteil."})]})]}),"einstellungen"===P&&t.jsxs("div",{style:Q.einstellungenContainer,children:[t.jsx("div",{style:Q.einstellungenTabs,children:[{key:"typen",label:"Mitgliedschaftstypen",icon:g},{key:"preise",label:"Preise",icon:c},{key:"laufzeiten",label:"Laufzeiten",icon:f},{key:"zahlungen",label:"Zahlungen",icon:y},{key:"nummern",label:"Nummern",icon:v},{key:"verband",label:"Verband",icon:o}].map(({key:e,label:s,icon:n})=>t.jsxs("button",{style:{...Q.einstellungenTab,...ce===e?Q.einstellungenTabActive:{}},onClick:()=>pe(e),children:[t.jsx(n,{size:16}),s]},e))}),"typen"===ce&&t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsx("h3",{style:{margin:0,color:"#fff"},children:"Mitgliedschaftstypen verwalten"}),t.jsxs("button",{onClick:()=>yt(),style:Q.submitButton,children:[t.jsx(r,{size:16})," Neuer Typ"]})]}),ye?t.jsxs("div",{style:Q.loading,children:[t.jsx(a,{size:24,className:"spin"}),t.jsx("span",{children:"Lade Typen..."})]}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[me.map(e=>{var s;return t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",padding:"16px",display:"grid",gridTemplateColumns:"1fr auto",gap:"16px",alignItems:"center",opacity:e.aktiv?1:.6},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[t.jsx("span",{style:{background:"dojo"===e.kategorie?"rgba(59,130,246,0.2)":"rgba(16,185,129,0.2)",color:"dojo"===e.kategorie?"#60a5fa":"#34d399",padding:"2px 8px",borderRadius:"4px",fontSize:"11px",textTransform:"uppercase"},children:e.kategorie}),t.jsx("strong",{style:{color:"#fff",fontSize:"16px"},children:e.name}),t.jsxs("code",{style:{color:"#888",fontSize:"12px"},children:["(",e.code,")"]}),e.ist_standard&&t.jsx("span",{style:{background:"#fbbf24",color:"#000",padding:"2px 6px",borderRadius:"4px",fontSize:"10px"},children:"STANDARD"}),!e.aktiv&&t.jsx("span",{style:{background:"#ef4444",color:"#fff",padding:"2px 6px",borderRadius:"4px",fontSize:"10px"},children:"INAKTIV"})]}),t.jsx("p",{style:{color:"#aaa",margin:"4px 0 8px",fontSize:"13px"},children:e.beschreibung||"-"}),t.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",fontSize:"13px",color:"#ccc"},children:[t.jsxs("span",{children:[t.jsx(c,{size:14,style:{marginRight:"4px"}}),t.jsxs("strong",{children:[null==(s=e.preis_brutto)?void 0:s.toFixed(2),"â‚¬"]})," brutto (",e.preis_netto,"â‚¬ netto)"]}),t.jsxs("span",{children:[t.jsx(u,{size:14,style:{marginRight:"4px"}}),e.steuersatz,"% MwSt"]}),t.jsxs("span",{children:[t.jsx(f,{size:14,style:{marginRight:"4px"}}),e.laufzeit_monate," Monate Laufzeit"]}),t.jsx("span",{children:e.auto_verlaengerung?"ðŸ”„ Auto-VerlÃ¤ngerung":"ðŸ“… Einmalig"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsx("button",{onClick:()=>(async e=>{try{await gt.post(`/verbandsmitgliedschaften/mitgliedschaftstypen/${e}/toggle-aktiv`),ft()}catch(t){alert("Fehler beim Umschalten")}})(e.id),style:{...Q.iconButton,background:e.aktiv?"rgba(239,68,68,0.2)":"rgba(16,185,129,0.2)",color:e.aktiv?"#ef4444":"#10b981"},title:e.aktiv?"Deaktivieren":"Aktivieren",children:e.aktiv?t.jsx(x,{size:16}):t.jsx(b,{size:16})}),t.jsx("button",{onClick:()=>yt(e),style:Q.iconButton,title:"Bearbeiten",children:t.jsx(j,{size:16})}),t.jsx("button",{onClick:()=>(async e=>{var t,s;if(confirm("Mitgliedschaftstyp wirklich lÃ¶schen?"))try{await gt.delete(`/verbandsmitgliedschaften/mitgliedschaftstypen/${e}`),alert("GelÃ¶scht!"),ft()}catch(n){alert((null==(s=null==(t=n.response)?void 0:t.data)?void 0:s.error)||"Fehler beim LÃ¶schen")}})(e.id),style:{...Q.iconButton,color:"#ef4444"},title:"LÃ¶schen",children:t.jsx(m,{size:16})})]})]},e.id)}),0===me.length&&t.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888"},children:"Keine Mitgliedschaftstypen vorhanden. Erstellen Sie einen neuen Typ."})]})]}),"typen"!==ce&&oe?t.jsxs("div",{style:Q.loading,children:[t.jsx(a,{size:24,className:"spin"}),t.jsx("span",{children:"Lade Einstellungen..."})]}):"typen"!==ce&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:Q.einstellungenGrid,children:le.filter(e=>e.kategorie===ce).map(e=>t.jsxs("div",{style:Q.einstellungItem,children:[t.jsxs("label",{style:Q.einstellungLabel,children:[e.label,e.beschreibung&&t.jsx("span",{style:Q.einstellungHint,children:e.beschreibung})]}),"boolean"===e.einstellung_typ?t.jsxs("label",{style:Q.toggleLabel,children:[t.jsx("input",{type:"checkbox",checked:!0===mt(e.einstellung_key),onChange:t=>jt(e.einstellung_key,t.target.checked),style:Q.toggleInput}),t.jsx("span",{style:{...Q.toggleSwitch,background:mt(e.einstellung_key)?"#10b981":"#ef4444"},children:t.jsx("span",{style:{position:"absolute",top:"2px",left:"2px",width:"20px",height:"20px",background:"#fff",borderRadius:"50%",transition:"transform 0.2s",transform:mt(e.einstellung_key)?"translateX(24px)":"translateX(0)"}})}),t.jsx("span",{style:{...Q.toggleText,color:mt(e.einstellung_key)?"#10b981":"#ef4444",fontWeight:"600"},children:mt(e.einstellung_key)?"Aktiv":"Inaktiv"})]}):"number"===e.einstellung_typ?t.jsx("input",{type:"number",value:mt(e.einstellung_key),onChange:t=>jt(e.einstellung_key,parseFloat(t.target.value)||0),style:Q.einstellungInput,step:e.einstellung_key.includes("preis")||e.einstellung_key.includes("mwst")?"0.01":"1"}):"json"===e.einstellung_typ?t.jsx("textarea",{value:"object"==typeof mt(e.einstellung_key)?JSON.stringify(mt(e.einstellung_key),null,2):mt(e.einstellung_key),onChange:t=>{try{jt(e.einstellung_key,JSON.parse(t.target.value))}catch{}},style:{...Q.einstellungInput,minHeight:"80px",fontFamily:"monospace"}}):t.jsx("input",{type:"text",value:mt(e.einstellung_key),onChange:t=>jt(e.einstellung_key,t.target.value),style:Q.einstellungInput}),he.hasOwnProperty(e.einstellung_key)&&t.jsx("span",{style:Q.changedBadge,children:"GeÃ¤ndert"})]},e.einstellung_key))}),Object.keys(he).length>0&&t.jsxs("div",{style:Q.einstellungenFooter,children:[t.jsxs("span",{style:Q.changesCount,children:[Object.keys(he).length," Ã„nderung(en)"]}),t.jsx("button",{style:Q.cancelButton,onClick:()=>{ge({}),xt()},children:"Verwerfen"}),t.jsx("button",{style:Q.submitButton,onClick:async()=>{xe(!0);try{const e=Object.entries(he).map(([e,t])=>({key:e,value:t}));if(0===e.length)return void alert("Keine Ã„nderungen vorhanden");await gt.put("/verbandsmitgliedschaften/einstellungen",{einstellungen:e}),alert("Einstellungen gespeichert!"),ge({}),xt(),bt()}catch(e){alert("Fehler beim Speichern")}finally{xe(!1)}},disabled:ue,children:ue?t.jsxs(t.Fragment,{children:[t.jsx(a,{size:16,className:"spin"})," Speichern..."]}):t.jsxs(t.Fragment,{children:[t.jsx(k,{size:16})," Speichern"]})})]})]})]}),"vorteile"!==P&&"einstellungen"!==P&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:Q.filterBar,children:[t.jsxs("div",{style:Q.searchBox,children:[t.jsx(z,{size:18,color:"#888"}),t.jsx("input",{type:"text",placeholder:"Suchen...",value:se,onChange:e=>ne(e.target.value),style:Q.searchInput})]}),t.jsxs("select",{value:ie,onChange:e=>ae(e.target.value),style:Q.select,children:[t.jsx("option",{value:"",children:"Alle Status"}),t.jsx("option",{value:"aktiv",children:"Aktiv"}),t.jsx("option",{value:"ausstehend",children:"Ausstehend"}),t.jsx("option",{value:"abgelaufen",children:"Abgelaufen"}),t.jsx("option",{value:"gekuendigt",children:"GekÃ¼ndigt"})]}),t.jsx("button",{style:Q.iconButton,onClick:ut,children:t.jsx(a,{size:18})})]}),t.jsx("div",{style:Q.list,children:0===Dt.length?t.jsxs("div",{style:Q.emptyState,children:[t.jsx(o,{size:48,color:"#666"}),t.jsx("p",{children:"Keine Mitgliedschaften gefunden"})]}):Dt.map(e=>t.jsxs("div",{style:Q.listItem,onClick:()=>Tt(e),children:[t.jsx("div",{style:Q.listItemIcon,children:"dojo"===e.typ?t.jsx(o,{size:24,color:"#3b82f6"}):t.jsx(d,{size:24,color:"#10b981"})}),t.jsxs("div",{style:Q.listItemContent,children:[t.jsxs("div",{style:Q.listItemHeader,children:[t.jsx("span",{style:Q.listItemName,children:"dojo"===e.typ?e.dojo_name:`${e.person_vorname} ${e.person_nachname}`}),Mt(e.status)]}),t.jsxs("div",{style:Q.listItemMeta,children:[t.jsxs("span",{children:[t.jsx(v,{size:12})," ",e.mitgliedsnummer]}),t.jsxs("span",{children:[t.jsx(f,{size:12})," Bis: ",Rt(e.gueltig_bis)]}),t.jsxs("span",{children:[t.jsx(c,{size:12})," ",At(e.jahresbeitrag),"/Jahr"]})]})]}),t.jsx(_,{size:20,color:"#888"})]},e.id))})]}),Re&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>Ae(!1),children:t.jsxs("div",{style:Q.modal,onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsx("h2",{style:Q.modalTitle,children:"Neue Mitgliedschaft"}),t.jsx("button",{style:Q.closeButton,onClick:()=>Ae(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("form",{onSubmit:async e=>{var t,s,n;if(e.preventDefault(),"dojo"===pt.typ){if(!pt.neues_dojo&&!pt.dojo_id)return void alert("Bitte wÃ¤hle ein Dojo aus oder lege ein neues an.");if(pt.neues_dojo&&(!pt.neues_dojo_name||!pt.neues_dojo_email))return void alert("Bitte Dojo-Name und E-Mail ausfÃ¼llen.")}if("einzelperson"!==pt.typ||pt.person_vorname&&pt.person_nachname&&pt.person_email)try{let e={...pt};if("dojo"===pt.typ&&pt.neues_dojo){const s=await gt.post("/admin/dojos",{dojoname:pt.neues_dojo_name,inhaber:pt.neues_dojo_inhaber,email:pt.neues_dojo_email,strasse:pt.neues_dojo_strasse,plz:pt.neues_dojo_plz,ort:pt.neues_dojo_ort,land:pt.neues_dojo_land});e.dojo_id=s.data.dojo_id||s.data.id||(null==(t=s.data.dojo)?void 0:t.id),e.neues_dojo=!1}await gt.post("/verbandsmitgliedschaften",e),Ae(!1),zt(),ut()}catch(i){alert((null==(n=null==(s=i.response)?void 0:s.data)?void 0:n.error)||"Fehler beim Anlegen")}else alert("Bitte Vorname, Nachname und E-Mail ausfÃ¼llen.")},children:[t.jsxs("div",{style:Q.typSelector,children:[t.jsxs("button",{type:"button",style:{...Q.typButton,..."dojo"===pt.typ?Q.typButtonActive:{}},onClick:()=>ht({...pt,typ:"dojo"}),children:[t.jsx(o,{size:24}),t.jsx("span",{children:"Dojo"}),t.jsxs("span",{style:Q.typPrice,children:[At(be.preis_dojo_mitgliedschaft||99),"/Jahr"]})]}),t.jsxs("button",{type:"button",style:{...Q.typButton,..."einzelperson"===pt.typ?Q.typButtonActiveGreen:{}},onClick:()=>ht({...pt,typ:"einzelperson"}),children:[t.jsx(d,{size:24}),t.jsx("span",{children:"Einzelperson"}),t.jsxs("span",{style:Q.typPrice,children:[At(be.preis_einzel_mitgliedschaft||49),"/Jahr"]})]})]}),"dojo"===pt.typ&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:pt.neues_dojo?"Modus: Neues Dojo anlegen":"Dojo *"}),pt.neues_dojo?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx("span",{style:{padding:"10px 15px",background:"rgba(255, 215, 0, 0.2)",borderRadius:"8px",color:"#ffd700",fontWeight:"600",flex:1},children:"âž• Neues Dojo wird angelegt"}),t.jsx("button",{type:"button",onClick:()=>ht({...pt,neues_dojo:!1,dojo_id:""}),style:{padding:"10px 15px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",cursor:"pointer"},children:"Abbrechen"})]}):t.jsxs("select",{value:pt.dojo_id,onChange:e=>{"neu"===e.target.value?ht({...pt,neues_dojo:!0,dojo_id:""}):ht({...pt,neues_dojo:!1,dojo_id:e.target.value})},style:Q.input,children:[t.jsx("option",{value:"",children:"-- Dojo wÃ¤hlen --"}),Oe.map(e=>t.jsxs("option",{value:e.id,children:[e.name," ",e.ort?`(${e.ort})`:""]},e.id)),t.jsx("option",{value:"neu",style:{fontWeight:"bold",borderTop:"1px solid #ccc"},children:"âž• Neues Dojo anlegen..."})]})]}),$&&t.jsx("div",{style:{...Q.formGroup,marginTop:"0.5rem"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",padding:"10px 15px",background:pt.beitragsfrei?"rgba(34, 197, 94, 0.15)":"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:pt.beitragsfrei?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 255, 255, 0.1)"},children:[t.jsx("input",{type:"checkbox",checked:pt.beitragsfrei,onChange:e=>ht({...pt,beitragsfrei:e.target.checked}),style:{width:"18px",height:"18px",cursor:"pointer"}}),t.jsx("span",{style:{color:pt.beitragsfrei?"#22c55e":"rgba(255, 255, 255, 0.8)"},children:"ðŸŽ Beitragsfrei stellen (keine GebÃ¼hren)"})]})}),pt.neues_dojo&&t.jsxs("div",{style:{...Q.card,background:"rgba(255, 215, 0, 0.1)",marginBottom:"1rem"},children:[t.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#ffd700"},children:"Neues Dojo anlegen"}),t.jsxs("div",{style:Q.formRow,children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Dojo-Name *"}),t.jsx("input",{type:"text",value:pt.neues_dojo_name,onChange:e=>ht({...pt,neues_dojo_name:e.target.value}),style:Q.input,placeholder:"z.B. Kampfsportschule Muster"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Inhaber *"}),t.jsx("input",{type:"text",value:pt.neues_dojo_inhaber,onChange:e=>ht({...pt,neues_dojo_inhaber:e.target.value}),style:Q.input,placeholder:"Vor- und Nachname"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"E-Mail *"}),t.jsx("input",{type:"email",value:pt.neues_dojo_email,onChange:e=>ht({...pt,neues_dojo_email:e.target.value}),style:Q.input,placeholder:"info@dojo.de"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"StraÃŸe"}),t.jsx("input",{type:"text",value:pt.neues_dojo_strasse,onChange:e=>ht({...pt,neues_dojo_strasse:e.target.value}),style:Q.input,placeholder:"MusterstraÃŸe 123"})]}),t.jsxs("div",{style:Q.formRow,children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"PLZ"}),t.jsx("input",{type:"text",value:pt.neues_dojo_plz,onChange:e=>ht({...pt,neues_dojo_plz:e.target.value}),style:Q.input,placeholder:"12345"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Ort"}),t.jsx("input",{type:"text",value:pt.neues_dojo_ort,onChange:e=>ht({...pt,neues_dojo_ort:e.target.value}),style:Q.input,placeholder:"Musterstadt"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Land"}),t.jsx("input",{type:"text",value:pt.neues_dojo_land,onChange:e=>ht({...pt,neues_dojo_land:e.target.value}),style:Q.input})]})]})]})]}),"einzelperson"===pt.typ&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:Q.formRow,children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Vorname *"}),t.jsx("input",{type:"text",value:pt.person_vorname,onChange:e=>ht({...pt,person_vorname:e.target.value}),style:Q.input})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Nachname *"}),t.jsx("input",{type:"text",value:pt.person_nachname,onChange:e=>ht({...pt,person_nachname:e.target.value}),style:Q.input})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"E-Mail *"}),t.jsx("input",{type:"email",value:pt.person_email,onChange:e=>ht({...pt,person_email:e.target.value}),style:Q.input})]}),t.jsxs("div",{style:Q.formRow,children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Telefon"}),t.jsx("input",{type:"tel",value:pt.person_telefon,onChange:e=>ht({...pt,person_telefon:e.target.value}),style:Q.input})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Geburtsdatum"}),t.jsx("input",{type:"date",value:pt.person_geburtsdatum,onChange:e=>ht({...pt,person_geburtsdatum:e.target.value}),style:Q.input})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"StraÃŸe"}),t.jsx("input",{type:"text",value:pt.person_strasse,onChange:e=>ht({...pt,person_strasse:e.target.value}),style:Q.input})]}),t.jsxs("div",{style:Q.formRow,children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"PLZ"}),t.jsx("input",{type:"text",value:pt.person_plz,onChange:e=>ht({...pt,person_plz:e.target.value}),style:Q.input})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Ort"}),t.jsx("input",{type:"text",value:pt.person_ort,onChange:e=>ht({...pt,person_ort:e.target.value}),style:Q.input})]})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Zahlungsart"}),t.jsxs("select",{value:pt.zahlungsart,onChange:e=>ht({...pt,zahlungsart:e.target.value}),style:Q.input,children:[t.jsx("option",{value:"rechnung",children:"Rechnung"}),t.jsx("option",{value:"lastschrift",children:"SEPA-Lastschrift"}),t.jsx("option",{value:"paypal",children:"PayPal"}),t.jsx("option",{value:"ueberweisung",children:"Ãœberweisung"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Notizen"}),t.jsx("textarea",{value:pt.notizen,onChange:e=>ht({...pt,notizen:e.target.value}),style:{...Q.input,minHeight:"80px"}})]}),t.jsxs("div",{style:Q.modalFooter,children:[t.jsx("button",{type:"button",style:Q.cancelButton,onClick:()=>Ae(!1),children:"Abbrechen"}),t.jsxs("button",{type:"submit",style:Q.submitButton,children:[t.jsx(b,{size:18}),"Mitgliedschaft anlegen"]})]})]})]})}),Le&&He&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>Fe(!1),children:t.jsxs("div",{style:{...Q.modal,maxWidth:"800px"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsx("h2",{style:Q.modalTitle,children:"dojo"===He.typ?t.jsxs(t.Fragment,{children:[t.jsx(o,{size:24,color:"#3b82f6"})," ",He.dojo_name]}):t.jsxs(t.Fragment,{children:[t.jsx(d,{size:24,color:"#10b981"})," ",He.person_vorname," ",He.person_nachname]})}),t.jsx("button",{style:Q.closeButton,onClick:()=>Fe(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("div",{style:Q.detailTabs,children:[t.jsxs("button",{style:{...Q.detailTab,..."info"===Je?Q.detailTabActive:{}},onClick:()=>Ze("info"),children:[t.jsx(d,{size:16})," Info"]}),t.jsxs("button",{style:{...Q.detailTab,..."vertrag"===Je?Q.detailTabActive:{}},onClick:()=>Ze("vertrag"),children:[t.jsx(v,{size:16})," Vertrag"]}),t.jsxs("button",{style:{...Q.detailTab,..."sepa"===Je?Q.detailTabActive:{}},onClick:()=>Ze("sepa"),children:[t.jsx(S,{size:16})," SEPA"]}),t.jsxs("button",{style:{...Q.detailTab,..."historie"===Je?Q.detailTabActive:{}},onClick:()=>Ze("historie"),children:[t.jsx(C,{size:16})," Historie"]})]}),t.jsxs("div",{style:Q.detailContent,children:["info"===Je&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:Q.detailRow,children:[t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"Mitgliedsnummer"}),t.jsx("span",{style:Q.detailValue,children:He.mitgliedsnummer})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"Status"}),t.jsxs("select",{value:He.status,onChange:e=>(async(e,t)=>{var s,n;try{if(await gt.put(`/verbandsmitgliedschaften/${e}/status`,{status:t}),ut(),He){const e=await gt.get(`/verbandsmitgliedschaften/${He.id}`);Ke(e.data)}}catch(i){alert((null==(n=null==(s=i.response)?void 0:s.data)?void 0:n.error)||"Fehler beim Status Ã¤ndern")}})(He.id,e.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",background:"aktiv"===He.status?"rgba(16, 185, 129, 0.2)":"ausstehend"===He.status?"rgba(245, 158, 11, 0.2)":"vertragsfrei"===He.status?"rgba(107, 114, 128, 0.2)":"rgba(239, 68, 68, 0.2)",color:"aktiv"===He.status?"#10b981":"ausstehend"===He.status?"#f59e0b":"vertragsfrei"===He.status?"#6b7280":"#ef4444",fontWeight:"600",cursor:"pointer"},children:[t.jsx("option",{value:"ausstehend",children:"Ausstehend"}),t.jsx("option",{value:"aktiv",children:"Aktiv"}),t.jsx("option",{value:"gekuendigt",children:"GekÃ¼ndigt"}),t.jsx("option",{value:"abgelaufen",children:"Abgelaufen"}),t.jsx("option",{value:"vertragsfrei",children:"Vertragsfrei"})]})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"Vertrag"}),He.unterschrift_digital?t.jsxs("span",{style:{color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(b,{size:14})," Unterschrieben"]}):t.jsxs("span",{style:{color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},children:[t.jsx(p,{size:14})," Ausstehend"]})]})]}),t.jsxs("div",{style:Q.detailRow,children:[t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"GÃ¼ltig von"}),t.jsx("span",{style:Q.detailValue,children:Rt(He.gueltig_von)})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"GÃ¼ltig bis"}),t.jsx("span",{style:Q.detailValue,children:Rt(He.gueltig_bis)})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"Jahresbeitrag"}),t.jsx("span",{style:Q.detailValue,children:At(He.jahresbeitrag)})]})]}),$&&t.jsxs("div",{style:{padding:"12px 16px",background:He.beitragsfrei?"rgba(34, 197, 94, 0.15)":"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:He.beitragsfrei?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"1rem"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[t.jsx(h,{size:18,color:He.beitragsfrei?"#22c55e":"#6b7280"}),t.jsx("span",{style:{color:He.beitragsfrei?"#22c55e":"rgba(255, 255, 255, 0.8)"},children:He.beitragsfrei?"Beitragsfrei":"RegulÃ¤rer Beitrag"})]}),t.jsx("button",{type:"button",onClick:async()=>{var e,t;const s=!He.beitragsfrei;if(confirm(s?"Mitgliedschaft auf beitragsfrei setzen? Offene Zahlungen werden storniert.":"Beitragsfrei aufheben? Der normale Jahresbeitrag wird wieder berechnet."))try{const e=await gt.post(`/verbandsmitgliedschaften/${He.id}/beitragsfrei`,{beitragsfrei:s});alert(e.data.message),ut();const t=await gt.get(`/verbandsmitgliedschaften/${He.id}`);Ke(t.data)}catch(n){alert((null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.error)||"Fehler beim Umstellen")}},style:{padding:"6px 12px",background:He.beitragsfrei?"rgba(239, 68, 68, 0.2)":"rgba(34, 197, 94, 0.2)",border:He.beitragsfrei?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"6px",color:He.beitragsfrei?"#ef4444":"#22c55e",cursor:"pointer",fontSize:"0.85rem",fontWeight:"500"},children:He.beitragsfrei?"Beitragsfrei aufheben":"Beitragsfrei stellen"})]}),He.beitragsfrei&&t.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.6)"},children:"Diese Mitgliedschaft ist von BeitrÃ¤gen befreit. Bei VerlÃ¤ngerung werden keine Zahlungen erstellt."})]}),"einzelperson"===He.typ&&t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Kontaktdaten"}),t.jsxs("div",{style:Q.detailRow,children:[t.jsxs("div",{style:Q.detailItem,children:[t.jsx(w,{size:14}),t.jsx("span",{children:He.person_email||"-"})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx(N,{size:14}),t.jsx("span",{children:He.person_telefon||"-"})]})]}),He.person_strasse&&t.jsxs("div",{style:Q.detailItem,children:[t.jsx(B,{size:14}),t.jsxs("span",{children:[He.person_strasse,", ",He.person_plz," ",He.person_ort]})]})]}),"dojo"===He.typ&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Dojo-Kontaktdaten"}),t.jsxs("div",{style:Q.detailRow,children:[t.jsxs("div",{style:Q.detailItem,children:[t.jsx(w,{size:14}),t.jsx("span",{children:He.dojo_email||"-"})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx(N,{size:14}),t.jsx("span",{children:He.dojo_telefon||"-"})]})]}),He.dojo_strasse&&t.jsxs("div",{style:Q.detailItem,children:[t.jsx(B,{size:14}),t.jsxs("span",{children:[He.dojo_strasse,", ",He.dojo_plz," ",He.dojo_ort,He.dojo_land&&"Deutschland"!==He.dojo_land&&`, ${He.dojo_land}`]})]}),He.dojo_website&&t.jsxs("div",{style:Q.detailItem,children:[t.jsx(I,{size:14}),t.jsx("a",{href:He.dojo_website.startsWith("http")?He.dojo_website:`https://${He.dojo_website}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#3b82f6",textDecoration:"none"},children:He.dojo_website})]})]}),t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Dojo-Informationen"}),t.jsxs("div",{style:Q.detailRow,children:[t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"Inhaber"}),t.jsx("span",{style:Q.detailValue,children:He.dojo_inhaber||"-"})]}),t.jsxs("div",{style:Q.detailItem,children:[t.jsx("span",{style:Q.detailLabel,children:"Mitglieder"}),t.jsx("span",{style:Q.detailValue,children:He.dojo_mitglieder_anzahl||"-"})]})]})]}),(He.person_vorname||He.person_nachname)&&t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Ansprechpartner"}),t.jsx("div",{style:Q.detailRow,children:t.jsxs("div",{style:Q.detailItem,children:[t.jsx(d,{size:14}),t.jsxs("span",{children:[He.person_vorname," ",He.person_nachname]})]})}),t.jsxs("div",{style:Q.detailRow,children:[He.person_email&&t.jsxs("div",{style:Q.detailItem,children:[t.jsx(w,{size:14}),t.jsx("span",{children:He.person_email})]}),He.person_telefon&&t.jsxs("div",{style:Q.detailItem,children:[t.jsx(N,{size:14}),t.jsx("span",{children:He.person_telefon})]})]})]})]}),"vertragsfrei"!==He.status&&t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Zahlungen"}),0===(null==(L=He.zahlungen)?void 0:L.length)?t.jsx("p",{style:Q.hint,children:"Keine Zahlungen vorhanden"}):t.jsx("div",{style:Q.zahlungenList,children:null==(F=He.zahlungen)?void 0:F.map(e=>t.jsxs("div",{style:Q.zahlungItem,children:[t.jsxs("div",{style:Q.zahlungMain,children:[t.jsx("span",{style:Q.zahlungNummer,children:e.rechnungsnummer}),t.jsx("span",{style:Q.zahlungBetrag,children:At(e.betrag_brutto)}),t.jsx("span",{style:{...Q.zahlungStatus,color:"bezahlt"===e.status?"#10b981":"offen"===e.status?"#f59e0b":"#ef4444"},children:"bezahlt"===e.status?"Bezahlt":"offen"===e.status?"Offen":e.status})]}),t.jsxs("div",{style:Q.zahlungMeta,children:[t.jsxs("span",{children:["FÃ¤llig: ",Rt(e.faellig_am)]}),e.bezahlt_am&&t.jsxs("span",{children:["Bezahlt: ",Rt(e.bezahlt_am)]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:["offen"===e.status&&t.jsxs("button",{style:Q.smallButton,onClick:()=>(async e=>{try{if(await gt.post(`/verbandsmitgliedschaften/zahlungen/${e}/bezahlt`),ut(),He){const e=await gt.get(`/verbandsmitgliedschaften/${He.id}`);Ke(e.data)}}catch(t){alert("Fehler beim Markieren als bezahlt")}})(e.id),children:[t.jsx(b,{size:14})," Als bezahlt markieren"]}),("offen"===e.status||"bezahlt"===e.status)&&t.jsxs("button",{style:{...Q.smallButton,backgroundColor:"#ef4444",color:"#fff"},onClick:()=>(async e=>{if(window.confirm("MÃ¶chten Sie diese Zahlung wirklich stornieren?"))try{if(await gt.post(`/verbandsmitgliedschaften/zahlungen/${e}/stornieren`,{grund:"Manuelle Stornierung"}),ut(),He){const e=await gt.get(`/verbandsmitgliedschaften/${He.id}`);Ke(e.data)}}catch(t){alert("Fehler beim Stornieren der Zahlung")}})(e.id),children:[t.jsx(x,{size:14})," Stornieren"]}),t.jsxs("button",{style:{...Q.smallButton,backgroundColor:"#3b82f6",color:"#fff"},onClick:()=>(async(e,t)=>{try{const s=(await n.get(`/verbandsmitgliedschaften/zahlungen/${e}/pdf`,{responseType:"blob"})).data,i=window.URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download=`Rechnung_${t||e}.pdf`,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i)}catch(s){console.error("PDF Download Fehler:",s),alert("Fehler beim Download der Rechnung")}})(e.id,e.rechnungsnummer),children:[t.jsx(T,{size:14})," Rechnung PDF"]})]})]},e.id))})]}),He.notizen&&t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Notizen"}),t.jsx("p",{style:Q.notizen,children:He.notizen})]})]}),"vertrag"===Je&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:Q.vertragActions,children:[t.jsxs("button",{style:Q.actionButton,onClick:()=>(async e=>{try{window.open(`/api/verbandsmitgliedschaften/${e}/pdf`,"_blank")}catch(t){alert("Fehler beim Download")}})(He.id),children:[t.jsx(T,{size:18}),"Vertrag als PDF"]}),!He.unterschrift_digital&&t.jsxs("button",{style:{...Q.actionButton,...Q.actionButtonPrimary},onClick:()=>Pe(!0),children:[t.jsx(D,{size:18}),"Jetzt unterschreiben"]})]}),t.jsxs("div",{style:Q.vertragInfo,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Vertragsstatus"}),t.jsxs("div",{style:Q.vertragStatusGrid,children:[t.jsxs("div",{style:Q.vertragStatusItem,children:[t.jsx(M,{size:20,color:He.agb_akzeptiert?"#10b981":"#666"}),t.jsx("span",{children:"AGB akzeptiert"}),He.agb_akzeptiert?t.jsx(b,{size:16,color:"#10b981"}):t.jsx(x,{size:16,color:"#666"})]}),t.jsxs("div",{style:Q.vertragStatusItem,children:[t.jsx(R,{size:20,color:He.dsgvo_akzeptiert?"#10b981":"#666"}),t.jsx("span",{children:"DSGVO akzeptiert"}),He.dsgvo_akzeptiert?t.jsx(b,{size:16,color:"#10b981"}):t.jsx(x,{size:16,color:"#666"})]}),t.jsxs("div",{style:Q.vertragStatusItem,children:[t.jsx(v,{size:20,color:He.widerrufsrecht_akzeptiert?"#10b981":"#666"}),t.jsx("span",{children:"Widerrufsbelehrung"}),He.widerrufsrecht_akzeptiert?t.jsx(b,{size:16,color:"#10b981"}):t.jsx(x,{size:16,color:"#666"})]}),t.jsxs("div",{style:Q.vertragStatusItem,children:[t.jsx(D,{size:20,color:He.unterschrift_digital?"#10b981":"#666"}),t.jsx("span",{children:"Unterschrieben"}),He.unterschrift_digital?t.jsx(b,{size:16,color:"#10b981"}):t.jsx(x,{size:16,color:"#666"})]})]}),He.unterschrift_datum&&t.jsxs("p",{style:Q.hint,children:["Unterschrieben am: ",Rt(He.unterschrift_datum)]})]}),t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Rechtliche Dokumente"}),t.jsxs("div",{style:Q.dokumenteListe,children:[t.jsxs("button",{style:Q.dokumentButton,onClick:()=>St("agb"),children:[t.jsx(M,{size:16})," AGB ansehen"]}),t.jsxs("button",{style:Q.dokumentButton,onClick:()=>St("dsgvo"),children:[t.jsx(R,{size:16})," DSGVO ansehen"]}),t.jsxs("button",{style:Q.dokumentButton,onClick:()=>St("widerrufsbelehrung"),children:[t.jsx(v,{size:16})," Widerrufsbelehrung"]}),t.jsxs("button",{style:Q.dokumentButton,onClick:()=>St("beitragsordnung"),children:[t.jsx(c,{size:16})," Beitragsordnung"]})]})]})]}),"sepa"===Je&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:Q.vertragActions,children:t.jsxs("button",{style:{...Q.actionButton,...Q.actionButtonPrimary},onClick:()=>Ee(!0),children:[t.jsx(r,{size:18}),"Neues SEPA-Mandat"]})}),0===Ye.length?t.jsxs("div",{style:Q.emptyState,children:[t.jsx(S,{size:48,color:"#666"}),t.jsx("p",{children:"Kein SEPA-Mandat vorhanden"}),t.jsx("p",{style:Q.hint,children:"Mit einem SEPA-Mandat kÃ¶nnen BeitrÃ¤ge automatisch eingezogen werden."})]}):t.jsx("div",{style:Q.sepaListe,children:Ye.map(e=>t.jsxs("div",{style:Q.sepaItem,children:[t.jsxs("div",{style:Q.sepaHeader,children:[t.jsx("span",{style:Q.sepaMandatsref,children:e.mandatsreferenz}),t.jsx("span",{style:{...Q.sepaStatus,background:"aktiv"===e.status?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:"aktiv"===e.status?"#10b981":"#ef4444"},children:"aktiv"===e.status?"Aktiv":"Inaktiv"})]}),t.jsxs("div",{style:Q.sepaDetails,children:[t.jsxs("div",{children:[t.jsx("strong",{children:"IBAN:"})," ",e.iban]}),e.bic&&t.jsxs("div",{children:[t.jsx("strong",{children:"BIC:"})," ",e.bic]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Kontoinhaber:"})," ",e.kontoinhaber]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Erstellt:"})," ",Rt(e.erstellt_am)]})]}),e.unterschrift_digital&&t.jsxs("div",{style:Q.sepaSignedBadge,children:[t.jsx(b,{size:14})," Digital unterschrieben"]})]},e.id))})]}),"historie"===Je&&t.jsx(t.Fragment,{children:t.jsxs("div",{style:Q.detailSection,children:[t.jsx("h4",{style:Q.detailSectionTitle,children:"Vertragshistorie"}),t.jsx("div",{style:Q.historieListe,children:(null==(G=He.historie)?void 0:G.length)>0?He.historie.map((e,s)=>t.jsxs("div",{style:Q.historieItem,children:[t.jsx("div",{style:Q.historieDatum,children:new Date(e.created_at).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),t.jsx("div",{style:Q.historieText,children:e.beschreibung})]},e.id||s)):t.jsx("p",{style:Q.hint,children:"Noch keine Historie-EintrÃ¤ge vorhanden."})})]})})]}),t.jsxs("div",{style:Q.modalFooter,children:[$&&t.jsxs("button",{style:{...Q.dangerButton,backgroundColor:"#450a0a",borderColor:"#7f1d1d"},onClick:()=>(async e=>{var t,s;const n="dojo"===e.typ?e.dojo_name||"Unbenannt":`${e.person_vorname||""} ${e.person_nachname||""}`.trim()||"Unbenannt";if(!confirm(`Mitgliedschaft "${n}" wirklich DAUERHAFT lÃ¶schen?\n\nDies kann NICHT rÃ¼ckgÃ¤ngig gemacht werden!`))return;if(prompt(`Zur BestÃ¤tigung bitte "${n}" eingeben:`)===n)try{await gt.delete(`/verbandsmitgliedschaften/${e.id}/permanent`),alert("Mitgliedschaft wurde dauerhaft gelÃ¶scht."),ut(),Fe(!1)}catch(i){alert((null==(s=null==(t=i.response)?void 0:t.data)?void 0:s.error)||"Fehler beim LÃ¶schen")}else alert("Name stimmt nicht Ã¼berein. LÃ¶schen abgebrochen.")})(He),title:"Mitgliedschaft dauerhaft lÃ¶schen",children:[t.jsx(m,{size:16})," Dauerhaft lÃ¶schen"]}),$&&"vertragsfrei"!==He.status&&t.jsxs("button",{style:{...Q.dangerButton,backgroundColor:"#7f1d1d"},onClick:()=>(async e=>{var t,s;if(confirm('Mitgliedschaft auf "vertragsfrei" setzen?'))try{await gt.delete(`/verbandsmitgliedschaften/${e}/vertragsfrei`),ut();const t=await gt.get(`/verbandsmitgliedschaften/${e}`);Ke(t.data)}catch(n){alert((null==(s=null==(t=n.response)?void 0:t.data)?void 0:s.error)||"Fehler beim LÃ¶schen")}})(He.id),children:[t.jsx(m,{size:16})," Vertragsfrei"]}),"gekuendigt"!==He.status&&"vertragsfrei"!==He.status&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{style:Q.dangerButton,onClick:()=>(async e=>{var t,s;if(confirm("Mitgliedschaft wirklich kÃ¼ndigen?"))try{await gt.put(`/verbandsmitgliedschaften/${e}/status`,{status:"gekuendigt"}),ut(),Fe(!1)}catch(n){alert((null==(s=null==(t=n.response)?void 0:t.data)?void 0:s.error)||"Fehler beim KÃ¼ndigen")}})(He.id),children:[t.jsx(m,{size:16})," KÃ¼ndigen"]}),t.jsxs("button",{style:Q.submitButton,onClick:()=>(async e=>{var t,s;if(confirm("Mitgliedschaft um ein Jahr verlÃ¤ngern?"))try{await gt.post(`/verbandsmitgliedschaften/${e}/verlaengern`),ut(),Fe(!1)}catch(n){alert((null==(s=null==(t=n.response)?void 0:t.data)?void 0:s.error)||"Fehler bei VerlÃ¤ngerung")}})(He.id),children:[t.jsx(a,{size:16})," VerlÃ¤ngern"]})]})]})]})}),_e&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>Se(!1),children:t.jsxs("div",{style:{...Q.modal,maxWidth:"600px"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsxs("h2",{style:Q.modalTitle,children:[t.jsx(g,{size:24,color:"#ffd700"}),ke?"Mitgliedschaftstyp bearbeiten":"Neuer Mitgliedschaftstyp"]}),t.jsx("button",{style:Q.closeButton,onClick:()=>Se(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("div",{style:{padding:"1.5rem",maxHeight:"70vh",overflowY:"auto"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Code (technisch) *"}),t.jsx("input",{type:"text",value:Ce.code,onChange:e=>we({...Ce,code:e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")}),style:Q.input,placeholder:"z.B. premium_dojo",disabled:!!ke})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Name *"}),t.jsx("input",{type:"text",value:Ce.name,onChange:e=>we({...Ce,name:e.target.value}),style:Q.input,placeholder:"z.B. Premium Dojo-Mitgliedschaft"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Beschreibung"}),t.jsx("textarea",{value:Ce.beschreibung,onChange:e=>we({...Ce,beschreibung:e.target.value}),style:{...Q.input,minHeight:"80px"},placeholder:"Beschreibung fÃ¼r Kunden..."})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Kategorie"}),t.jsxs("select",{value:Ce.kategorie,onChange:e=>we({...Ce,kategorie:e.target.value}),style:Q.input,children:[t.jsx("option",{value:"dojo",children:"Dojo"}),t.jsx("option",{value:"person",children:"Person"}),t.jsx("option",{value:"sonstige",children:"Sonstige"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Preis (Netto) â‚¬"}),t.jsx("input",{type:"number",value:Ce.preis_netto,onChange:e=>we({...Ce,preis_netto:parseFloat(e.target.value)||0}),style:Q.input,step:"0.01",min:"0"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Steuersatz %"}),t.jsx("input",{type:"number",value:Ce.steuersatz,onChange:e=>we({...Ce,steuersatz:parseFloat(e.target.value)||0}),style:Q.input,step:"0.01",min:"0",max:"100"})]})]}),t.jsxs("div",{style:{background:"rgba(255,215,0,0.1)",border:"1px solid rgba(255,215,0,0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",textAlign:"center"},children:[t.jsx("span",{style:{color:"#888"},children:"Bruttopreis: "}),t.jsxs("strong",{style:{color:"#ffd700",fontSize:"18px"},children:[(Ce.preis_netto*(1+Ce.steuersatz/100)).toFixed(2),"â‚¬"]}),t.jsxs("span",{style:{color:"#888",marginLeft:"8px"},children:["(inkl. ",(Ce.preis_netto*Ce.steuersatz/100).toFixed(2),"â‚¬ MwSt)"]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Laufzeit (Monate)"}),t.jsx("input",{type:"number",value:Ce.laufzeit_monate,onChange:e=>we({...Ce,laufzeit_monate:parseInt(e.target.value)||12}),style:Q.input,min:"1"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"KÃ¼ndigungsfrist (Monate)"}),t.jsx("input",{type:"number",value:Ce.kuendigungsfrist_monate,onChange:e=>we({...Ce,kuendigungsfrist_monate:parseInt(e.target.value)||0}),style:Q.input,min:"0"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginTop:"16px"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:Ce.auto_verlaengerung,onChange:e=>we({...Ce,auto_verlaengerung:e.target.checked})}),t.jsx("span",{style:{color:"#ccc"},children:"Auto-VerlÃ¤ngerung"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:Ce.ist_standard,onChange:e=>we({...Ce,ist_standard:e.target.checked})}),t.jsx("span",{style:{color:"#ccc"},children:"Standard-Typ"})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:Ce.aktiv,onChange:e=>we({...Ce,aktiv:e.target.checked})}),t.jsx("span",{style:{color:"#ccc"},children:"Aktiv"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Sortierung"}),t.jsx("input",{type:"number",value:Ce.sortierung,onChange:e=>we({...Ce,sortierung:parseInt(e.target.value)||0}),style:{...Q.input,maxWidth:"120px"},min:"0"})]})]}),t.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:()=>Se(!1),style:Q.cancelButton,children:"Abbrechen"}),t.jsxs("button",{onClick:async()=>{var e,t;try{ke?(await gt.put(`/verbandsmitgliedschaften/mitgliedschaftstypen/${ke.id}`,Ce),alert("Mitgliedschaftstyp aktualisiert!")):(await gt.post("/verbandsmitgliedschaften/mitgliedschaftstypen",Ce),alert("Mitgliedschaftstyp erstellt!")),Se(!1),ft()}catch(s){alert((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Fehler beim Speichern")}},style:Q.submitButton,children:[t.jsx(k,{size:16})," ",ke?"Speichern":"Erstellen"]})]})]})}),Ie&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>Te(!1),children:t.jsxs("div",{style:{...Q.modal,maxWidth:"550px"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsxs("h2",{style:Q.modalTitle,children:[t.jsx(u,{size:24,color:"#ffd700"}),Ne?"Vorteil bearbeiten":"Neuer Vorteil"]}),t.jsx("button",{style:Q.closeButton,onClick:()=>Te(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Titel *"}),t.jsx("input",{type:"text",value:De.titel,onChange:e=>Me({...De,titel:e.target.value}),style:Q.input,placeholder:"z.B. Seminar-Rabatt"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Beschreibung"}),t.jsx("textarea",{value:De.beschreibung,onChange:e=>Me({...De,beschreibung:e.target.value}),style:{...Q.input,minHeight:"80px"},placeholder:"Beschreibung des Vorteils..."})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Gilt fÃ¼r"}),t.jsxs("select",{value:De.gilt_fuer,onChange:e=>Me({...De,gilt_fuer:e.target.value}),style:Q.input,children:[t.jsx("option",{value:"beide",children:"Alle Mitglieder"}),t.jsx("option",{value:"dojo",children:"Nur Dojos"}),t.jsx("option",{value:"einzelperson",children:"Nur Einzelpersonen"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Kategorie"}),t.jsx("input",{type:"text",value:De.kategorie,onChange:e=>Me({...De,kategorie:e.target.value}),style:Q.input,placeholder:"z.B. seminar, turnier, shop"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Rabatt-Typ"}),t.jsxs("select",{value:De.rabatt_typ,onChange:e=>Me({...De,rabatt_typ:e.target.value}),style:Q.input,children:[t.jsx("option",{value:"prozent",children:"Prozent (%)"}),t.jsx("option",{value:"festbetrag",children:"Festbetrag (â‚¬)"})]})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Rabatt-Wert"}),t.jsx("input",{type:"number",value:De.rabatt_wert,onChange:e=>Me({...De,rabatt_wert:parseFloat(e.target.value)||0}),style:Q.input,step:"0.01",min:"0"})]})]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",marginTop:"16px"},children:[t.jsx("input",{type:"checkbox",checked:De.aktiv,onChange:e=>Me({...De,aktiv:e.target.checked})}),t.jsx("span",{style:{color:"#ccc"},children:"Aktiv"})]})]}),t.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:()=>Te(!1),style:Q.cancelButton,children:"Abbrechen"}),t.jsxs("button",{onClick:async()=>{var e,t;try{Ne?(await gt.put(`/verbandsmitgliedschaften/vorteile/${Ne.id}`,De),alert("Vorteil aktualisiert!")):(await gt.post("/verbandsmitgliedschaften/vorteile",De),alert("Vorteil erstellt!")),Te(!1),vt()}catch(s){alert((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Fehler beim Speichern")}},style:Q.submitButton,children:[t.jsx(k,{size:16})," ",Ne?"Speichern":"Erstellen"]})]})]})}),Ge&&He&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>Ee(!1),children:t.jsxs("div",{style:{...Q.modal,maxWidth:"550px"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsxs("h2",{style:Q.modalTitle,children:[t.jsx(S,{size:24,color:"#ffd700"})," SEPA-Mandat erstellen"]}),t.jsx("button",{style:Q.closeButton,onClick:()=>Ee(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"IBAN *"}),t.jsx("input",{type:"text",value:Xe.iban,onChange:e=>qe({...Xe,iban:e.target.value.toUpperCase()}),style:Q.input,placeholder:"DE89 3704 0044 0532 0130 00"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"BIC (optional)"}),t.jsx("input",{type:"text",value:Xe.bic,onChange:e=>qe({...Xe,bic:e.target.value.toUpperCase()}),style:Q.input,placeholder:"COBADEFFXXX"})]}),t.jsxs("div",{style:Q.formGroup,children:[t.jsx("label",{style:Q.label,children:"Kontoinhaber *"}),t.jsx("input",{type:"text",value:Xe.kontoinhaber,onChange:e=>qe({...Xe,kontoinhaber:e.target.value}),style:Q.input,placeholder:"Max Mustermann"})]}),t.jsxs("div",{style:Q.signatureSection,children:[t.jsx("label",{style:Q.label,children:"Digitale Unterschrift"}),t.jsx("canvas",{ref:it,width:460,height:120,style:Q.signatureCanvas,onMouseDown:wt,onMouseMove:Nt,onMouseUp:Bt,onMouseLeave:Bt,onTouchStart:wt,onTouchMove:Nt,onTouchEnd:Bt}),t.jsx("button",{type:"button",style:Q.clearSignatureButton,onClick:It,children:"Unterschrift lÃ¶schen"})]}),t.jsxs("div",{style:Q.sepaHinweis,children:[t.jsx(M,{size:16,color:"#ffd700"}),t.jsx("p",{children:"Mit dem SEPA-Lastschriftmandat ermÃ¤chtigen Sie uns, den Jahresbeitrag von Ihrem Konto einzuziehen."})]})]}),t.jsxs("div",{style:Q.modalFooter,children:[t.jsx("button",{style:Q.cancelButton,onClick:()=>Ee(!1),children:"Abbrechen"}),t.jsxs("button",{style:Q.submitButton,onClick:async()=>{var e,t;if(Xe.iban&&Xe.kontoinhaber)try{await gt.post(`/verbandsmitgliedschaften/${He.id}/sepa`,{...Xe,unterschrift_digital:rt}),Ee(!1),qe({iban:"",bic:"",kontoinhaber:""}),ot(null),_t(He.id),ut(),alert("SEPA-Mandat erfolgreich angelegt")}catch(s){alert((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Fehler beim Anlegen")}else alert("IBAN und Kontoinhaber sind erforderlich")},children:[t.jsx(b,{size:18})," Mandat erstellen"]})]})]})}),Ve&&st&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>We(!1),children:t.jsxs("div",{style:{...Q.modal,maxWidth:"700px"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsxs("h2",{style:Q.modalTitle,children:[t.jsx(R,{size:24,color:"#ffd700"})," ",st.titel]}),t.jsx("button",{style:Q.closeButton,onClick:()=>We(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("div",{style:Q.dokumentContent,children:[t.jsxs("div",{style:Q.dokumentMeta,children:[t.jsxs("span",{children:["Version: ",st.version]}),t.jsxs("span",{children:["GÃ¼ltig ab: ",Rt(st.gueltig_ab)]})]}),t.jsx("div",{style:Q.dokumentText,dangerouslySetInnerHTML:i((null==(E=st.inhalt)?void 0:E.replace(/\n/g,"<br/>"))||"")})]}),t.jsx("div",{style:Q.modalFooter,children:t.jsx("button",{style:Q.submitButton,onClick:()=>We(!1),children:"SchlieÃŸen"})})]})}),$e&&He&&t.jsx("div",{style:Q.modalOverlay,onClick:()=>Pe(!1),children:t.jsxs("div",{style:{...Q.modal,maxWidth:"600px"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{style:Q.modalHeader,children:[t.jsxs("h2",{style:Q.modalTitle,children:[t.jsx(D,{size:24,color:"#ffd700"})," Vertrag unterschreiben"]}),t.jsx("button",{style:Q.closeButton,onClick:()=>Pe(!1),children:t.jsx(x,{size:20})})]}),t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("p",{style:Q.signatureIntro,children:["Mit Ihrer Unterschrift bestÃ¤tigen Sie den Mitgliedsvertrag fÃ¼r die TDA Verbandsmitgliedschaft zum Jahresbeitrag von ",At(He.jahresbeitrag),"."]}),t.jsxs("div",{style:Q.akzeptanzSection,children:[t.jsxs("label",{style:Q.checkbox,children:[t.jsx("input",{type:"checkbox",checked:dt.agb,onChange:e=>ct({...dt,agb:e.target.checked})}),t.jsxs("span",{children:["Ich akzeptiere die ",t.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),St("agb")},children:"AGB"})," *"]})]}),t.jsxs("label",{style:Q.checkbox,children:[t.jsx("input",{type:"checkbox",checked:dt.dsgvo,onChange:e=>ct({...dt,dsgvo:e.target.checked})}),t.jsxs("span",{children:["Ich akzeptiere die ",t.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),St("dsgvo")},children:"DatenschutzerklÃ¤rung"})," *"]})]}),t.jsxs("label",{style:Q.checkbox,children:[t.jsx("input",{type:"checkbox",checked:dt.widerruf,onChange:e=>ct({...dt,widerruf:e.target.checked})}),t.jsxs("span",{children:["Ich habe die ",t.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),St("widerrufsbelehrung")},children:"Widerrufsbelehrung"})," zur Kenntnis genommen *"]})]})]}),t.jsxs("div",{style:Q.signatureSection,children:[t.jsx("label",{style:Q.label,children:"Ihre Unterschrift *"}),t.jsx("canvas",{ref:it,width:520,height:150,style:Q.signatureCanvas,onMouseDown:wt,onMouseMove:Nt,onMouseUp:Bt,onMouseLeave:Bt,onTouchStart:wt,onTouchMove:Nt,onTouchEnd:Bt}),t.jsx("button",{type:"button",style:Q.clearSignatureButton,onClick:It,children:"Unterschrift lÃ¶schen"})]})]}),t.jsxs("div",{style:Q.modalFooter,children:[t.jsx("button",{style:Q.cancelButton,onClick:()=>Pe(!1),children:"Abbrechen"}),t.jsxs("button",{style:Q.submitButton,onClick:async()=>{var e,t;if(rt)if(dt.agb&&dt.dsgvo&&dt.widerruf)try{await gt.post(`/verbandsmitgliedschaften/${He.id}/unterschreiben`,{unterschrift_digital:rt,agb_akzeptiert:dt.agb,dsgvo_akzeptiert:dt.dsgvo,widerrufsrecht_akzeptiert:dt.widerruf}),Pe(!1),ot(null),ct({agb:!1,dsgvo:!1,widerruf:!1}),ut(),alert("Vertrag erfolgreich unterschrieben")}catch(s){alert((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||"Fehler beim Unterschreiben")}else alert("Bitte akzeptieren Sie alle Bedingungen");else alert("Bitte unterschreiben Sie im Unterschriftsfeld")},children:[t.jsx(D,{size:18})," Verbindlich unterschreiben"]})]})]})})]})},Q={container:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},loading:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",padding:"4rem",color:"#888"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},title:{display:"flex",alignItems:"center",gap:"12px",color:"#fff",margin:0,fontSize:"1.8rem"},subtitle:{color:"#888",margin:"4px 0 0 40px",fontSize:"0.9rem"},primaryButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, #ffd700, #ffaa00)",border:"none",borderRadius:"10px",color:"#000",fontWeight:"600",cursor:"pointer",transition:"transform 0.2s"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},statCard:{display:"flex",alignItems:"center",gap:"16px",padding:"1.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},statValue:{fontSize:"1.5rem",fontWeight:"700",color:"#fff"},statLabel:{fontSize:"0.85rem",color:"#888"},tabs:{display:"flex",gap:"8px",marginBottom:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"8px"},tab:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"transparent",border:"none",borderRadius:"8px",color:"#888",cursor:"pointer",transition:"all 0.2s"},tabActive:{background:"rgba(255, 215, 0, 0.15)",color:"#ffd700"},filterBar:{display:"flex",gap:"12px",marginBottom:"1.5rem",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",flex:"1",minWidth:"200px"},searchInput:{background:"transparent",border:"none",outline:"none",color:"#fff",width:"100%",fontSize:"0.9rem"},select:{padding:"10px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",cursor:"pointer"},iconButton:{padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#888",cursor:"pointer"},list:{display:"flex",flexDirection:"column",gap:"8px"},listItem:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},listItemIcon:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px"},listItemContent:{flex:1},listItemHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},listItemName:{color:"#fff",fontWeight:"600",fontSize:"1rem"},listItemMeta:{display:"flex",gap:"16px",color:"#888",fontSize:"0.8rem"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"4rem",color:"#666"},vorteileContainer:{marginTop:"1rem"},sectionTitle:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.1rem"},vorteileGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},vorteilCard:{padding:"1.5rem",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px"},vorteilHeader:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},vorteilTitel:{color:"#fff",fontWeight:"600"},vorteilBeschreibung:{color:"#aaa",fontSize:"0.85rem",marginBottom:"12px"},vorteilMeta:{display:"flex",gap:"8px",flexWrap:"wrap"},vorteilRabatt:{padding:"4px 10px",background:"rgba(255, 215, 0, 0.2)",color:"#ffd700",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600"},vorteilKategorie:{padding:"4px 10px",background:"rgba(255, 255, 255, 0.1)",color:"#888",borderRadius:"6px",fontSize:"0.8rem",textTransform:"capitalize"},vorteilGilt:{padding:"4px 10px",borderRadius:"6px",fontSize:"0.8rem",color:"#fff"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},modal:{background:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"550px",maxHeight:"90vh",overflow:"auto",border:"1px solid rgba(255, 215, 0, 0.2)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},modalTitle:{display:"flex",alignItems:"center",gap:"10px",color:"#fff",margin:0,fontSize:"1.2rem"},closeButton:{background:"transparent",border:"none",color:"#888",cursor:"pointer",padding:"8px"},typSelector:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"1.5rem"},typButton:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"20px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid transparent",borderRadius:"12px",color:"#888",cursor:"pointer",transition:"all 0.2s"},typButtonActive:{borderColor:"#3b82f6",background:"rgba(59, 130, 246, 0.15)",color:"#3b82f6"},typButtonActiveGreen:{borderColor:"#10b981",background:"rgba(16, 185, 129, 0.15)",color:"#10b981"},typPrice:{fontSize:"0.85rem",opacity:.7},formGroup:{padding:"0 1.5rem",marginBottom:"1rem"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"0 1.5rem",marginBottom:"1rem"},label:{display:"block",color:"#888",fontSize:"0.85rem",marginBottom:"6px"},input:{width:"100%",padding:"10px 12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none"},hint:{color:"#666",fontSize:"0.8rem",marginTop:"6px"},modalFooter:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},cancelButton:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"#888",cursor:"pointer"},submitButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"linear-gradient(135deg, #ffd700, #ffaa00)",border:"none",borderRadius:"8px",color:"#000",fontWeight:"600",cursor:"pointer"},dangerButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",cursor:"pointer"},detailContent:{padding:"1.5rem"},detailRow:{display:"flex",gap:"24px",marginBottom:"16px",flexWrap:"wrap"},detailItem:{display:"flex",flexDirection:"column",gap:"4px"},detailLabel:{color:"#666",fontSize:"0.75rem",textTransform:"uppercase"},detailValue:{color:"#fff",fontSize:"0.95rem"},detailSection:{marginTop:"20px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},detailSectionTitle:{color:"#ffd700",fontSize:"0.9rem",marginBottom:"12px"},zahlungenList:{display:"flex",flexDirection:"column",gap:"10px"},zahlungItem:{padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px"},zahlungMain:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},zahlungNummer:{color:"#fff",fontWeight:"500"},zahlungBetrag:{color:"#ffd700",fontWeight:"600"},zahlungStatus:{fontWeight:"600",fontSize:"0.85rem"},zahlungMeta:{display:"flex",gap:"16px",color:"#666",fontSize:"0.8rem"},smallButton:{display:"flex",alignItems:"center",gap:"6px",marginTop:"8px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"6px",color:"#10b981",fontSize:"0.8rem",cursor:"pointer"},notizen:{color:"#aaa",fontSize:"0.9rem",whiteSpace:"pre-wrap"},detailTabs:{display:"flex",gap:"4px",padding:"0 1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},detailTab:{display:"flex",alignItems:"center",gap:"6px",padding:"12px 16px",background:"transparent",border:"none",borderBottom:"2px solid transparent",color:"#888",cursor:"pointer",transition:"all 0.2s"},detailTabActive:{color:"#ffd700",borderBottomColor:"#ffd700"},vertragActions:{display:"flex",gap:"12px",marginBottom:"1.5rem",flexWrap:"wrap"},actionButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",color:"#fff",cursor:"pointer",transition:"all 0.2s"},actionButtonPrimary:{background:"linear-gradient(135deg, #ffd700, #ffaa00)",border:"none",color:"#000",fontWeight:"600"},vertragInfo:{marginBottom:"1.5rem"},vertragStatusGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginTop:"12px"},vertragStatusItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem"},dokumenteListe:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"12px"},dokumentButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",color:"#aaa",cursor:"pointer",transition:"all 0.2s"},sepaListe:{display:"flex",flexDirection:"column",gap:"12px"},sepaItem:{padding:"16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px"},sepaHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},sepaMandatsref:{color:"#fff",fontWeight:"600",fontFamily:"monospace"},sepaStatus:{padding:"4px 10px",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600"},sepaDetails:{display:"flex",flexDirection:"column",gap:"6px",color:"#aaa",fontSize:"0.9rem"},sepaSignedBadge:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"12px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",borderRadius:"6px",fontSize:"0.85rem"},sepaHinweis:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"16px",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"10px",marginTop:"1.5rem"},historieListe:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"16px"},historieItem:{display:"flex",alignItems:"center",gap:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",borderLeft:"3px solid #ffd700"},historieDatum:{color:"#888",fontSize:"0.8rem",minWidth:"100px"},historieText:{color:"#fff",fontSize:"0.9rem"},signatureSection:{marginTop:"1.5rem"},signatureCanvas:{width:"100%",background:"#fff",borderRadius:"8px",cursor:"crosshair",touchAction:"none"},clearSignatureButton:{marginTop:"8px",padding:"8px 16px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#888",cursor:"pointer",fontSize:"0.85rem"},signatureIntro:{color:"#aaa",fontSize:"0.95rem",lineHeight:1.6,marginBottom:"1.5rem"},akzeptanzSection:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"1.5rem"},checkbox:{display:"flex",alignItems:"center",gap:"10px",color:"#fff",cursor:"pointer"},dokumentContent:{padding:"1.5rem",maxHeight:"60vh",overflow:"auto"},dokumentMeta:{display:"flex",gap:"20px",marginBottom:"1rem",color:"#888",fontSize:"0.85rem"},dokumentText:{color:"#ccc",fontSize:"0.9rem",lineHeight:1.7,whiteSpace:"pre-wrap"},einstellungenContainer:{marginTop:"1rem"},einstellungenTabs:{display:"flex",gap:"8px",marginBottom:"1.5rem",flexWrap:"wrap"},einstellungenTab:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#888",cursor:"pointer",transition:"all 0.2s"},einstellungenTabActive:{background:"rgba(255, 215, 0, 0.15)",borderColor:"rgba(255, 215, 0, 0.3)",color:"#ffd700"},einstellungenGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},einstellungItem:{position:"relative",padding:"1rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)"},einstellungLabel:{display:"block",color:"#fff",fontWeight:"500",marginBottom:"8px",fontSize:"0.95rem"},einstellungHint:{display:"block",color:"#666",fontSize:"0.8rem",fontWeight:"400",marginTop:"4px"},einstellungInput:{width:"100%",padding:"10px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",color:"#fff",fontSize:"0.95rem",outline:"none"},toggleLabel:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},toggleInput:{display:"none"},toggleSwitch:{position:"relative",width:"48px",height:"24px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",transition:"background 0.2s"},toggleText:{color:"#888",fontSize:"0.9rem"},changedBadge:{position:"absolute",top:"8px",right:"8px",padding:"2px 8px",background:"rgba(255, 215, 0, 0.2)",color:"#ffd700",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"600"},einstellungenFooter:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2rem",padding:"1rem",background:"rgba(255, 215, 0, 0.1)",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},changesCount:{flex:1,color:"#ffd700",fontWeight:"500"}},ee=()=>{const{token:i}=s();q();const[l,r]=e.useState(!0),[d,h]=e.useState(""),[g,u]=e.useState("overview"),[x,b]=e.useState({mitgliedsschulen:0,mitgliedsschulenGesamt:0,mitgliedsschulenMitBeitrag:0,mitgliedsschulenVertragsfrei:0,einzelmitglieder:0,aktiveMitgliedschaften:0,pendingMitgliedschaften:0,turniere:0,events:0,jahresbeitraege:0,offeneBeitraege:0}),[j,m]=e.useState([]),[k,z]=e.useState([]),[_,S]=e.useState([]);e.useEffect(()=>{C()},[]);const C=async()=>{r(!0),h("");try{const[e,t,s]=await Promise.all([n.get("/verbandsmitgliedschaften/stats",{headers:{Authorization:`Bearer ${i}`}}).catch(()=>({data:{success:!1}})),n.get("/verbandsmitgliedschaften?limit=10",{headers:{Authorization:`Bearer ${i}`}}).catch(()=>({data:{success:!1,mitgliedschaften:[]}})),n.get("/events?public=true&limit=5",{headers:{Authorization:`Bearer ${i}`}}).catch(()=>({data:{success:!1,events:[]}}))]);if(e.data.success){const t=e.data.stats||{};b({mitgliedsschulen:t.dojos||0,mitgliedsschulenGesamt:t.dojosGesamt||0,mitgliedsschulenMitBeitrag:t.dojosMitBeitrag||0,mitgliedsschulenVertragsfrei:t.dojosVertragsfrei||0,einzelmitglieder:t.einzelpersonen||0,aktiveMitgliedschaften:t.aktiv||0,pendingMitgliedschaften:t.pending||0,turniere:t.turniere||0,events:t.events||0,jahresbeitraege:t.jahresbeitraege||0,offeneBeitraege:t.offene_beitraege||0})}t.data.success&&m(t.data.mitgliedschaften||[]),s.data.success&&z(s.data.events||[])}catch(e){console.error("Fehler beim Laden der Verbandsdaten:",e),h("Fehler beim Laden der Verbandsdaten")}finally{r(!1)}},w=[{id:"overview",label:"Ãœbersicht",icon:F},{id:"mitglieder",label:"Mitglieder",icon:G},{id:"shop",label:"Artikel/Shop",icon:E},{id:"entwicklung",label:"Entwicklung",icon:V},{id:"support",label:"Support",icon:W},{id:"turniere",label:"Turniere",icon:$},{id:"events",label:"Events",icon:f},{id:"finanzen",label:"Finanzen",icon:c}],N=({status:e})=>{const s={aktiv:{color:"#22c55e",bg:"rgba(34, 197, 94, 0.2)",label:"Aktiv"},pending:{color:"#f59e0b",bg:"rgba(245, 158, 11, 0.2)",label:"Ausstehend"},inaktiv:{color:"#6b7280",bg:"rgba(107, 114, 128, 0.2)",label:"Inaktiv"},gekuendigt:{color:"#ef4444",bg:"rgba(239, 68, 68, 0.2)",label:"GekÃ¼ndigt"}},n=s[e]||s.pending;return t.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600,color:n.color,background:n.bg},children:n.label})},B=()=>t.jsxs("div",{className:"verband-overview",children:[t.jsxs("div",{className:"verband-stats-grid",children:[t.jsxs("div",{className:"verband-stat-card primary",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(o,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("span",{className:"stat-value",children:x.mitgliedsschulenGesamt}),t.jsx("span",{className:"stat-label",children:"MITGLIEDSSCHULEN"}),t.jsxs("div",{className:"stat-breakdown",children:[t.jsxs("span",{className:"breakdown-item",children:[t.jsx("span",{className:"breakdown-value",children:x.mitgliedsschulenMitBeitrag})," mit Beitrag"]}),t.jsx("span",{className:"breakdown-separator",children:"â€¢"}),t.jsxs("span",{className:"breakdown-item",children:[t.jsx("span",{className:"breakdown-value",children:x.mitgliedsschulenVertragsfrei})," vertragsfrei"]})]})]}),t.jsx("div",{className:"stat-badge",children:t.jsx("span",{className:"badge-text",children:"99â‚¬/Jahr"})})]}),t.jsxs("div",{className:"verband-stat-card secondary",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(G,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("span",{className:"stat-value",children:x.einzelmitglieder}),t.jsx("span",{className:"stat-label",children:"Einzelmitglieder"})]}),t.jsx("div",{className:"stat-badge",children:t.jsx("span",{className:"badge-text",children:"49â‚¬/Jahr"})})]}),t.jsxs("div",{className:"verband-stat-card success",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(P,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("span",{className:"stat-value",children:x.aktiveMitgliedschaften}),t.jsx("span",{className:"stat-label",children:"Aktive Mitgliedschaften"})]})]}),t.jsxs("div",{className:"verband-stat-card warning",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(A,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("span",{className:"stat-value",children:x.pendingMitgliedschaften}),t.jsx("span",{className:"stat-label",children:"Ausstehend"})]})]}),t.jsxs("div",{className:"verband-stat-card gold",children:[t.jsx("div",{className:"stat-icon",children:t.jsx($,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("span",{className:"stat-value",children:x.turniere}),t.jsx("span",{className:"stat-label",children:"Turniere"})]})]}),t.jsxs("div",{className:"verband-stat-card info",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(c,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsxs("span",{className:"stat-value",children:[x.jahresbeitraege.toLocaleString("de-DE"),"â‚¬"]}),t.jsx("span",{className:"stat-label",children:"JahresbeitrÃ¤ge"})]})]})]}),t.jsxs("div",{className:"verband-content-grid",children:[t.jsxs("div",{className:"verband-panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsxs("h3",{children:[t.jsx(G,{size:18})," Neueste Mitgliedschaften"]}),t.jsxs("button",{className:"btn-link",onClick:()=>u("mitglieder"),children:["Alle anzeigen ",t.jsx(H,{size:14})]})]}),t.jsx("div",{className:"panel-content",children:j.length>0?t.jsx("div",{className:"mitgliedschaft-list",children:j.map(e=>t.jsxs("div",{className:"mitgliedschaft-item",children:[t.jsx("div",{className:"mitgliedschaft-icon",children:"dojo"===e.typ?t.jsx(o,{size:20}):t.jsx(G,{size:20})}),t.jsxs("div",{className:"mitgliedschaft-info",children:[t.jsx("span",{className:"mitgliedschaft-name",children:"dojo"===e.typ?e.dojo_name:`${e.person_vorname} ${e.person_nachname}`}),t.jsxs("span",{className:"mitgliedschaft-meta",children:[e.mitgliedsnummer," â€¢ seit ",e.gueltig_von?new Date(e.gueltig_von).toLocaleDateString("de-DE"):"-"]})]}),t.jsx(N,{status:e.status})]},e.id))}):t.jsxs("div",{className:"empty-state",children:[t.jsx(G,{size:32}),t.jsx("p",{children:"Keine Mitgliedschaften vorhanden"})]})})]}),t.jsxs("div",{className:"verband-panel",children:[t.jsxs("div",{className:"panel-header",children:[t.jsxs("h3",{children:[t.jsx(f,{size:18})," Kommende Events"]}),t.jsxs("button",{className:"btn-link",onClick:()=>u("events"),children:["Alle anzeigen ",t.jsx(H,{size:14})]})]}),t.jsx("div",{className:"panel-content",children:k.length>0?t.jsx("div",{className:"event-list",children:k.map(e=>t.jsxs("div",{className:"event-item",children:[t.jsxs("div",{className:"event-date",children:[t.jsx("span",{className:"date-day",children:new Date(e.datum).getDate()}),t.jsx("span",{className:"date-month",children:new Date(e.datum).toLocaleDateString("de-DE",{month:"short"})})]}),t.jsxs("div",{className:"event-info",children:[t.jsx("span",{className:"event-title",children:e.titel}),t.jsx("span",{className:"event-location",children:e.ort||"Online"})]})]},e.id))}):t.jsxs("div",{className:"empty-state",children:[t.jsx(f,{size:32}),t.jsx("p",{children:"Keine kommenden Events"})]})})]})]}),t.jsxs("div",{className:"verband-quick-actions",children:[t.jsx("h3",{children:"Schnellzugriff"}),t.jsxs("div",{className:"quick-action-grid",children:[t.jsxs("button",{className:"quick-action-btn",onClick:()=>u("mitglieder"),children:[t.jsx(K,{size:24}),t.jsx("span",{children:"Neues Mitglied"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>window.open("https://events.tda-intl.org","_blank"),children:[t.jsx($,{size:24}),t.jsx("span",{children:"Turnier erstellen"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>u("finanzen"),children:[t.jsx(v,{size:24}),t.jsx("span",{children:"BeitrÃ¤ge verwalten"})]}),t.jsxs("button",{className:"quick-action-btn",onClick:()=>window.open("https://www.tda-intl.com","_blank"),children:[t.jsx(I,{size:24}),t.jsx("span",{children:"Verbandswebsite"})]})]})]})]}),T=()=>t.jsxs("div",{className:"verband-turniere",children:[t.jsxs("div",{className:"info-banner",children:[t.jsx($,{size:24}),t.jsxs("div",{children:[t.jsx("h4",{children:"Turnierverwaltung"}),t.jsx("p",{children:"Die Turniere werden Ã¼ber die separate Turniersoftware verwaltet."}),t.jsxs("a",{href:"https://events.tda-intl.org",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:["Zur Turniersoftware ",t.jsx(H,{size:16})]})]})]}),t.jsx("div",{className:"verband-stats-grid",style:{marginTop:"2rem"},children:t.jsxs("div",{className:"verband-stat-card gold",children:[t.jsx("div",{className:"stat-icon",children:t.jsx($,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsx("span",{className:"stat-value",children:x.turniere}),t.jsx("span",{className:"stat-label",children:"Turniere gesamt"})]})]})})]}),D=()=>t.jsxs("div",{className:"verband-events",children:[t.jsxs("div",{className:"panel-header",children:[t.jsxs("h3",{children:[t.jsx(f,{size:20})," Verbands-Events"]}),t.jsxs("button",{className:"btn-secondary",children:[t.jsx(O,{size:16})," Event erstellen"]})]}),k.length>0?t.jsx("div",{className:"events-list-full",children:k.map(e=>t.jsxs("div",{className:"event-card",children:[t.jsxs("div",{className:"event-card-date",children:[t.jsx("span",{className:"date-day",children:new Date(e.datum).getDate()}),t.jsx("span",{className:"date-month",children:new Date(e.datum).toLocaleDateString("de-DE",{month:"long"})}),t.jsx("span",{className:"date-year",children:new Date(e.datum).getFullYear()})]}),t.jsxs("div",{className:"event-card-content",children:[t.jsx("h4",{children:e.titel}),t.jsx("p",{children:e.beschreibung}),t.jsx("div",{className:"event-meta",children:t.jsxs("span",{children:[t.jsx(f,{size:14})," ",e.ort||"Online"]})})]})]},e.id))}):t.jsxs("div",{className:"empty-state large",children:[t.jsx(f,{size:48}),t.jsx("h4",{children:"Keine Events geplant"}),t.jsx("p",{children:"Erstellen Sie neue Events fÃ¼r den Verband."})]})]}),M=()=>t.jsxs("div",{className:"verband-finanzen",children:[t.jsxs("div",{className:"verband-stats-grid",children:[t.jsxs("div",{className:"verband-stat-card success",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(c,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsxs("span",{className:"stat-value",children:[x.jahresbeitraege.toLocaleString("de-DE"),"â‚¬"]}),t.jsx("span",{className:"stat-label",children:"Eingegangene BeitrÃ¤ge"})]})]}),t.jsxs("div",{className:"verband-stat-card warning",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(p,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsxs("span",{className:"stat-value",children:[x.offeneBeitraege.toLocaleString("de-DE"),"â‚¬"]}),t.jsx("span",{className:"stat-label",children:"Offene BeitrÃ¤ge"})]})]}),t.jsxs("div",{className:"verband-stat-card info",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(y,{size:24})}),t.jsxs("div",{className:"stat-content",children:[t.jsxs("span",{className:"stat-value",children:[99*x.mitgliedsschulen+49*x.einzelmitglieder,"â‚¬"]}),t.jsx("span",{className:"stat-label",children:"Erwartete JahresbeitrÃ¤ge"})]})]})]}),t.jsxs("div",{className:"info-banner",style:{marginTop:"2rem"},children:[t.jsx(U,{size:24}),t.jsxs("div",{children:[t.jsx("h4",{children:"Beitragsstruktur"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Mitgliedsschulen (Dojos):"})," 99â‚¬ pro Jahr",t.jsx("br",{}),t.jsx("strong",{children:"Einzelmitglieder:"})," 49â‚¬ pro Jahr"]})]})]})]});return l?t.jsx("div",{className:"verband-dashboard loading",children:t.jsxs("div",{className:"loading-spinner",children:[t.jsx(L,{size:40,className:"spin"}),t.jsx("p",{children:"Lade Verbandsdaten..."})]})}):t.jsxs("div",{className:"verband-dashboard",children:[t.jsxs("div",{className:"verband-subheader",children:[t.jsxs("div",{className:"subheader-left",children:[t.jsx(I,{size:20,className:"subheader-icon"}),t.jsx("span",{children:"Verbandsverwaltung"})]}),t.jsxs("button",{className:"btn-refresh-small",onClick:C,children:[t.jsx(a,{size:14})," Aktualisieren"]})]}),d&&t.jsxs("div",{className:"error-banner",children:[t.jsx(p,{size:20}),t.jsx("span",{children:d})]}),t.jsx("div",{className:"verband-tabs",children:w.map(e=>t.jsxs("button",{className:"verband-tab "+(g===e.id?"active":""),onClick:()=>u(e.id),children:[t.jsx(e.icon,{size:18}),t.jsx("span",{children:e.label})]},e.id))}),t.jsxs("div",{className:"verband-tab-content",children:["overview"===g&&t.jsx(B,{}),"mitglieder"===g&&t.jsx(Y,{}),"shop"===g&&t.jsx(J,{}),"entwicklung"===g&&t.jsx(Z,{bereich:"verband"}),"support"===g&&t.jsx(X,{bereich:"verband"}),"turniere"===g&&t.jsx(T,{}),"events"===g&&t.jsx(D,{}),"finanzen"===g&&t.jsx(M,{})]})]})},te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{Y as V,ee as a,te as b};
