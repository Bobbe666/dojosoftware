import{a as e,j as s}from"./query-Caj74EYQ.js";import{u as t,f as n,n as i,a as r}from"./index-BuAcXaay.js";import{K as l,g as a,k as o,b4 as d,c,b9 as p,F as x,$ as u,E as h,j as g,R as f,X as y,bl as b}from"./icons-eh0tbLFx.js";import"./vendor-router-B2AaIOtG.js";import"./charts-QHQg_ypW.js";const j=()=>{var r,c,p,x;const{activeDojo:u}=t(),h=(null==u?void 0:u.id)||u,[g,f]=e.useState(null),[y,b]=e.useState(!0),[j,v]=e.useState(!1),[_,k]=e.useState(!1),[S,z]=e.useState(null),[w,B]=e.useState(null),C=async()=>{if(h)try{b(!0);const e=await n(`${i.apiBaseUrl}/stripe-connect/status?dojo_id=${h}`),s=await e.json();f(s),s.connected&&s.charges_enabled&&I()}catch(e){z("Fehler beim Laden des Status"),console.error(e)}finally{b(!1)}},I=async()=>{try{const e=await n(`${i.apiBaseUrl}/stripe-connect/balance?dojo_id=${h}`),s=await e.json();s.success&&B(s.balance)}catch(e){console.error("Balance laden fehlgeschlagen:",e)}};e.useEffect(()=>{const e=new URLSearchParams(window.location.search),s=e.get("stripe_connected"),t=e.get("stripe_error");"true"===s&&(C(),window.history.replaceState({},document.title,window.location.pathname)),t&&(z(decodeURIComponent(t)),window.history.replaceState({},document.title,window.location.pathname))},[]),e.useEffect(()=>{C()},[h]);const A=(e,s="eur")=>new Intl.NumberFormat("de-DE",{style:"currency",currency:s.toUpperCase()}).format(e/100);return y?s.jsx("div",{style:m.section,children:s.jsx("div",{style:m.loading,children:"Lade Stripe Connect Status..."})}):s.jsxs("div",{style:m.section,children:[s.jsxs("div",{style:m.sectionHeader,children:[s.jsx(l,{size:24,color:"#635bff"}),s.jsx("h3",{style:m.sectionTitle,children:"Stripe Connect"}),(null==g?void 0:g.connected)&&s.jsxs("span",{style:m.connectedBadge,children:[s.jsx(a,{size:14})," Verbunden"]})]}),S&&s.jsxs("div",{style:m.errorBox,children:[s.jsx(o,{size:16}),s.jsx("span",{children:S})]}),(null==g?void 0:g.connected)?s.jsxs("div",{children:[s.jsxs("div",{style:m.statusGrid,children:[s.jsxs("div",{style:m.statusCard,children:[s.jsx("span",{style:m.statusLabel,children:"Zahlungen"}),s.jsx("span",{style:{...m.statusValue,color:g.charges_enabled?"#22c55e":"#eab308"},children:g.charges_enabled?"Aktiviert":"Ausstehend"})]}),s.jsxs("div",{style:m.statusCard,children:[s.jsx("span",{style:m.statusLabel,children:"Auszahlungen"}),s.jsx("span",{style:{...m.statusValue,color:g.payouts_enabled?"#22c55e":"#eab308"},children:g.payouts_enabled?"Aktiviert":"Ausstehend"})]})]}),w&&s.jsxs("div",{style:m.balanceBox,children:[s.jsx("span",{style:m.balanceLabel,children:"Aktuelles Guthaben"}),s.jsxs("div",{style:m.balanceValues,children:[null==(r=w.available)?void 0:r.map((e,t)=>s.jsxs("div",{children:[s.jsx("span",{style:m.balanceAmount,children:A(e.amount,e.currency)}),s.jsx("span",{style:m.balanceType,children:"Verfügbar"})]},t)),null==(c=w.pending)?void 0:c.map((e,t)=>s.jsxs("div",{children:[s.jsx("span",{style:{...m.balanceAmount,color:"#888"},children:A(e.amount,e.currency)}),s.jsx("span",{style:m.balanceType,children:"Ausstehend"})]},t))]})]}),(null==(x=null==(p=g.requirements)?void 0:p.currently_due)?void 0:x.length)>0&&s.jsxs("div",{style:m.warningBox,children:[s.jsx(o,{size:16,color:"#eab308"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Aktion erforderlich"}),s.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"13px"},children:"Bitte vervollständige dein Stripe-Konto um alle Funktionen nutzen zu können."})]})]}),s.jsxs("div",{style:m.accountInfo,children:[s.jsxs("span",{children:["Account: ",g.stripe_account_id]}),s.jsxs("span",{children:["Verbunden seit: ",g.connected_at?new Date(g.connected_at).toLocaleDateString("de-DE"):"-"]})]}),s.jsxs("div",{style:m.actions,children:[s.jsxs("button",{onClick:async()=>{try{const e=await n(`${i.apiBaseUrl}/stripe-connect/dashboard-link?dojo_id=${h}`),s=await e.json();s.url?window.open(s.url,"_blank"):z("Dashboard-Link konnte nicht generiert werden")}catch(e){z("Fehler: "+e.message)}},style:m.dashboardButton,children:[s.jsx(d,{size:14})," Stripe Dashboard"]}),s.jsx("button",{onClick:async()=>{if(window.confirm("Möchtest du die Stripe-Verbindung wirklich trennen?")){k(!0),z(null);try{const e=await n(`${i.apiBaseUrl}/stripe-connect/disconnect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dojo_id:h})});if(e.ok)f({connected:!1,status:"disconnected"}),B(null);else{const s=await e.json();z(s.error||"Trennung fehlgeschlagen")}}catch(e){z("Trennung fehlgeschlagen: "+e.message)}finally{k(!1)}}},disabled:_,style:m.disconnectButton,children:_?"Trenne...":"Trennen"})]})]}):s.jsxs("div",{children:[s.jsx("div",{style:m.infoBox,children:s.jsx("p",{style:{margin:0},children:"Verbinde dein Dojo mit Stripe Connect um Mitgliedsbeiträge automatisch per SEPA-Lastschrift einzuziehen. Jedes Dojo kann sein eigenes Bankkonto für Auszahlungen hinterlegen."})}),s.jsxs("div",{style:m.benefitsList,children:[s.jsxs("div",{style:m.benefitItem,children:[s.jsx(a,{size:16,color:"#22c55e"}),s.jsx("span",{children:"Automatischer Einzug per SEPA-Lastschrift"})]}),s.jsxs("div",{style:m.benefitItem,children:[s.jsx(a,{size:16,color:"#22c55e"}),s.jsx("span",{children:"Auszahlung direkt auf dein Bankkonto"})]}),s.jsxs("div",{style:m.benefitItem,children:[s.jsx(a,{size:16,color:"#22c55e"}),s.jsx("span",{children:"Separates Stripe-Dashboard für dein Dojo"})]})]}),s.jsx("button",{onClick:async()=>{v(!0),z(null);try{const e=await n(`${i.apiBaseUrl}/stripe-connect/authorize?dojo_id=${h}`),s=await e.json();s.authorization_url?window.location.href=s.authorization_url:z("Fehler beim Starten der Verbindung")}catch(e){z("Verbindung fehlgeschlagen: "+e.message)}finally{v(!1)}},disabled:j,style:{...m.connectButton,opacity:j?.6:1,cursor:j?"not-allowed":"pointer"},children:j?"Verbinde...":"Mit Stripe verbinden"})]})]})},m={section:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(99, 91, 255, 0.3)",borderRadius:"12px",padding:"24px",marginBottom:"20px"},sectionHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},sectionTitle:{color:"#fff",margin:0,fontSize:"18px",flex:1},connectedBadge:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(34, 197, 94, 0.2)",border:"1px solid rgba(34, 197, 94, 0.5)",borderRadius:"20px",color:"#22c55e",fontSize:"13px",fontWeight:"500"},infoBox:{background:"rgba(99, 91, 255, 0.1)",border:"1px solid rgba(99, 91, 255, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",color:"#aaa",fontSize:"14px"},errorBox:{display:"flex",alignItems:"center",gap:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",color:"#ef4444",fontSize:"14px"},benefitsList:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},benefitItem:{display:"flex",alignItems:"center",gap:"10px",color:"#ccc",fontSize:"14px"},connectButton:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",width:"100%",padding:"14px 24px",background:"#635bff",border:"none",borderRadius:"8px",color:"#fff",fontSize:"15px",fontWeight:"600",cursor:"pointer"},statusGrid:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},statusCard:{display:"flex",flexDirection:"column",gap:"4px",padding:"12px 16px",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},statusLabel:{color:"#888",fontSize:"12px"},statusValue:{fontWeight:"600",fontSize:"14px"},balanceBox:{background:"rgba(99, 91, 255, 0.1)",borderRadius:"8px",padding:"16px",marginBottom:"16px"},balanceLabel:{color:"#635bff",fontSize:"13px",display:"block",marginBottom:"8px"},balanceValues:{display:"flex",gap:"24px"},balanceAmount:{display:"block",fontSize:"24px",fontWeight:"bold",color:"#635bff"},balanceType:{display:"block",fontSize:"11px",color:"#888"},warningBox:{display:"flex",alignItems:"flex-start",gap:"10px",background:"rgba(234, 179, 8, 0.1)",border:"1px solid rgba(234, 179, 8, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"16px",color:"#eab308",fontSize:"14px"},accountInfo:{display:"flex",flexDirection:"column",gap:"4px",color:"#666",fontSize:"12px",marginBottom:"16px"},actions:{display:"flex",gap:"12px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},dashboardButton:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",fontSize:"14px",cursor:"pointer"},disconnectButton:{padding:"10px 16px",background:"transparent",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",fontSize:"14px",cursor:"pointer"},loading:{textAlign:"center",padding:"40px",color:"#888"}},v=()=>{var n,i,a,o,b,m,v;const{activeDojo:z}=t(),[w,B]=e.useState(!0),[C,I]=e.useState(!1),[A,T]=e.useState(null),[D,R]=e.useState({}),[L,E]=e.useState({}),[P,V]=e.useState({stripe_publishable_key:"",stripe_secret_key:"",paypal_client_id:"",paypal_client_secret:"",paypal_sandbox:!0,sumup_api_key:"",sumup_merchant_code:"",sumup_client_id:"",sumup_client_secret:"",sumup_aktiv:!1,lexoffice_api_key:"",datev_consultant_number:"",datev_client_number:""}),F=(null==z?void 0:z.id)||z;e.useEffect(()=>{F&&"super-admin"!==F&&(K(),G())},[F]);const K=async()=>{try{B(!0);const e=await r.get(`/integrations/config?dojo_id=${F}`);e.data&&V(s=>({...s,...e.data}))}catch(e){console.error("Fehler beim Laden der Konfiguration:",e)}finally{B(!1)}},G=async()=>{try{const e=await r.get(`/integrations/status?dojo_id=${F}`);T(e.data)}catch(e){console.error("Fehler beim Laden des Status:",e)}},U=async e=>{try{E(s=>({...s,[e]:{loading:!0}}));const s=await r.post(`/integrations/${e}/test?dojo_id=${F}`);E(t=>({...t,[e]:{success:s.data.success,message:s.data.message}}))}catch(s){E(t=>{var n,i;return{...t,[e]:{success:!1,message:(null==(i=null==(n=s.response)?void 0:n.data)?void 0:i.error)||"Verbindung fehlgeschlagen"}}})}},$=e=>{R(s=>({...s,[e]:!s[e]}))};return w?s.jsx("div",{style:S.container,children:s.jsx("div",{style:S.loading,children:"Lade Einstellungen..."})}):s.jsxs("div",{style:S.container,children:[s.jsxs("div",{style:S.header,children:[s.jsx(c,{size:32,color:"#ffd700"}),s.jsxs("div",{children:[s.jsx("h2",{style:S.title,children:"Integration-Einstellungen"}),s.jsx("p",{style:S.subtitle,children:"Konfiguriere PayPal, SumUp, LexOffice und DATEV"})]})]}),A&&s.jsxs("div",{style:S.statusGrid,children:[s.jsx(_,{title:"Stripe",icon:s.jsx(l,{size:24}),configured:null==(n=A.stripe)?void 0:n.configured,mode:"Kreditkarte & SEPA"}),s.jsx(_,{title:"PayPal",icon:s.jsx(l,{size:24}),configured:null==(i=A.paypal)?void 0:i.configured,mode:(null==(a=A.paypal)?void 0:a.sandbox)?"Sandbox":"Live"}),s.jsx(_,{title:"SumUp",icon:s.jsx(p,{size:24}),configured:null==(o=A.sumup)?void 0:o.configured,mode:(null==(b=A.sumup)?void 0:b.active)?"Aktiv":"Inaktiv"}),s.jsx(_,{title:"LexOffice",icon:s.jsx(x,{size:24}),configured:null==(m=A.lexoffice)?void 0:m.configured}),s.jsx(_,{title:"DATEV",icon:s.jsx(u,{size:24}),configured:null==(v=A.datev)?void 0:v.configured})]}),s.jsxs("div",{style:S.section,children:[s.jsxs("div",{style:S.sectionHeader,children:[s.jsx(l,{size:24,color:"#635bff"}),s.jsx("h3",{style:S.sectionTitle,children:"Stripe"}),s.jsxs("a",{href:"https://dashboard.stripe.com/apikeys",target:"_blank",rel:"noopener noreferrer",style:S.helpLink,children:[s.jsx(d,{size:14})," API-Keys Dashboard"]})]}),s.jsx("div",{style:S.infoBox,children:s.jsx("p",{children:"Stripe ermöglicht Kreditkarten- und SEPA-Lastschrift-Zahlungen. Die API-Keys findest du im Stripe Dashboard unter Developers → API Keys."})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Publishable Key (öffentlich)"}),s.jsx("input",{type:"text",value:P.stripe_publishable_key||"",onChange:e=>V({...P,stripe_publishable_key:e.target.value}),style:S.input,placeholder:"pk_live_... oder pk_test_..."})]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Secret Key (geheim)"}),s.jsxs("div",{style:S.secretInput,children:[s.jsx("input",{type:D.stripe?"text":"password",value:P.stripe_secret_key||"",onChange:e=>V({...P,stripe_secret_key:e.target.value}),style:{...S.input,flex:1},placeholder:"sk_live_... oder sk_test_..."}),s.jsx("button",{style:S.eyeButton,onClick:()=>$("stripe"),children:D.stripe?s.jsx(h,{size:18}):s.jsx(g,{size:18})})]})]})}),s.jsx("div",{style:{...S.infoBox,background:"rgba(99, 91, 255, 0.1)",borderColor:"rgba(99, 91, 255, 0.3)"},children:s.jsxs("p",{style:{margin:0},children:[s.jsx("strong",{children:"Hinweis:"})," Verwende für Tests die Test-Keys (pk_test_... / sk_test_...). Für Live-Zahlungen benötigst du die Live-Keys (pk_live_... / sk_live_...)."]})})]}),s.jsx(j,{}),s.jsxs("div",{style:S.section,children:[s.jsxs("div",{style:S.sectionHeader,children:[s.jsx(l,{size:24,color:"#0070ba"}),s.jsx("h3",{style:S.sectionTitle,children:"PayPal"}),s.jsxs("a",{href:"https://developer.paypal.com/dashboard/applications",target:"_blank",rel:"noopener noreferrer",style:S.helpLink,children:[s.jsx(d,{size:14})," Entwickler-Dashboard"]})]}),s.jsx("div",{style:S.infoBox,children:s.jsx("p",{children:"Um PayPal zu nutzen, erstelle eine App im PayPal Developer Dashboard und kopiere die Client ID und das Secret hierher."})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Client ID"}),s.jsx("input",{type:"text",value:P.paypal_client_id||"",onChange:e=>V({...P,paypal_client_id:e.target.value}),style:S.input,placeholder:"AV9b8ND..."})]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Client Secret"}),s.jsxs("div",{style:S.secretInput,children:[s.jsx("input",{type:D.paypal?"text":"password",value:P.paypal_client_secret||"",onChange:e=>V({...P,paypal_client_secret:e.target.value}),style:{...S.input,flex:1},placeholder:"EK3qE9N..."}),s.jsx("button",{style:S.eyeButton,onClick:()=>$("paypal"),children:D.paypal?s.jsx(h,{size:18}):s.jsx(g,{size:18})})]})]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("label",{style:S.checkboxLabel,children:[s.jsx("input",{type:"checkbox",checked:P.paypal_sandbox,onChange:e=>V({...P,paypal_sandbox:e.target.checked})}),s.jsx("span",{children:"Sandbox-Modus (Test-Umgebung)"})]})}),s.jsx(k,{service:"paypal",onTest:()=>U("paypal"),result:L.paypal,disabled:!P.paypal_client_id||!P.paypal_client_secret})]}),s.jsxs("div",{style:S.section,children:[s.jsxs("div",{style:S.sectionHeader,children:[s.jsx(p,{size:24,color:"#00b5ad"}),s.jsx("h3",{style:S.sectionTitle,children:"SumUp Kartenterminal"}),s.jsxs("a",{href:"https://developer.sumup.com/docs/api/getting-started/",target:"_blank",rel:"noopener noreferrer",style:S.helpLink,children:[s.jsx(d,{size:14})," Entwickler-Dokumentation"]})]}),s.jsx("div",{style:S.infoBox,children:s.jsx("p",{children:"SumUp ermöglicht Kartenzahlungen über das Kartenterminal (Solo, Air). Du kannst entweder einen API-Key oder OAuth-Credentials verwenden. Die Zugangsdaten findest du im SumUp Business-Portal unter Entwickleroptionen."})}),s.jsx("div",{style:S.formRow,children:s.jsxs("label",{style:S.checkboxLabel,children:[s.jsx("input",{type:"checkbox",checked:P.sumup_aktiv,onChange:e=>V({...P,sumup_aktiv:e.target.checked})}),s.jsx("span",{children:"SumUp aktivieren"})]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Merchant Code"}),s.jsx("input",{type:"text",value:P.sumup_merchant_code||"",onChange:e=>V({...P,sumup_merchant_code:e.target.value}),style:S.input,placeholder:"MER1234..."})]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"API Key"}),s.jsxs("div",{style:S.secretInput,children:[s.jsx("input",{type:D.sumup_api?"text":"password",value:P.sumup_api_key||"",onChange:e=>V({...P,sumup_api_key:e.target.value}),style:{...S.input,flex:1},placeholder:"sup_sk_..."}),s.jsx("button",{style:S.eyeButton,onClick:()=>$("sumup_api"),children:D.sumup_api?s.jsx(h,{size:18}):s.jsx(g,{size:18})})]})]})}),s.jsx("div",{style:{...S.infoBox,background:"rgba(0, 181, 173, 0.1)",borderColor:"rgba(0, 181, 173, 0.3)"},children:s.jsxs("p",{style:{margin:"0 0 8px 0"},children:[s.jsx("strong",{children:"Optional: OAuth-Credentials"})," (nur wenn kein API-Key verwendet wird)"]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Client ID (optional)"}),s.jsx("input",{type:"text",value:P.sumup_client_id||"",onChange:e=>V({...P,sumup_client_id:e.target.value}),style:S.input,placeholder:"OAuth Client ID..."})]})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Client Secret (optional)"}),s.jsxs("div",{style:S.secretInput,children:[s.jsx("input",{type:D.sumup_secret?"text":"password",value:P.sumup_client_secret||"",onChange:e=>V({...P,sumup_client_secret:e.target.value}),style:{...S.input,flex:1},placeholder:"OAuth Client Secret..."}),s.jsx("button",{style:S.eyeButton,onClick:()=>$("sumup_secret"),children:D.sumup_secret?s.jsx(h,{size:18}):s.jsx(g,{size:18})})]})]})}),s.jsx(k,{service:"sumup",onTest:()=>U("sumup"),result:L.sumup,disabled:!(P.sumup_api_key||P.sumup_client_id&&P.sumup_client_secret)})]}),s.jsxs("div",{style:S.section,children:[s.jsxs("div",{style:S.sectionHeader,children:[s.jsx(x,{size:24,color:"#0066cc"}),s.jsx("h3",{style:S.sectionTitle,children:"LexOffice"}),s.jsxs("a",{href:"https://app.lexoffice.de/addons/public-api",target:"_blank",rel:"noopener noreferrer",style:S.helpLink,children:[s.jsx(d,{size:14})," API-Schlüssel generieren"]})]}),s.jsx("div",{style:S.infoBox,children:s.jsx("p",{children:"Der API-Schlüssel wird in LexOffice unter Einstellungen → Erweiterungen → Public API generiert."})}),s.jsx("div",{style:S.formRow,children:s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"API-Schlüssel"}),s.jsxs("div",{style:S.secretInput,children:[s.jsx("input",{type:D.lexoffice?"text":"password",value:P.lexoffice_api_key||"",onChange:e=>V({...P,lexoffice_api_key:e.target.value}),style:{...S.input,flex:1},placeholder:"a1b2c3d4-e5f6-..."}),s.jsx("button",{style:S.eyeButton,onClick:()=>$("lexoffice"),children:D.lexoffice?s.jsx(h,{size:18}):s.jsx(g,{size:18})})]})]})}),s.jsx(k,{service:"lexoffice",onTest:()=>U("lexoffice"),result:L.lexoffice,disabled:!P.lexoffice_api_key})]}),s.jsxs("div",{style:S.section,children:[s.jsxs("div",{style:S.sectionHeader,children:[s.jsx(u,{size:24,color:"#006633"}),s.jsx("h3",{style:S.sectionTitle,children:"DATEV"})]}),s.jsx("div",{style:S.infoBox,children:s.jsx("p",{children:"Die Beraternummer und Mandantennummer werden vom Steuerberater bereitgestellt und sind für den DATEV-Export erforderlich."})}),s.jsxs("div",{style:S.formRow,children:[s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Beraternummer"}),s.jsx("input",{type:"text",value:P.datev_consultant_number||"",onChange:e=>V({...P,datev_consultant_number:e.target.value}),style:S.input,placeholder:"12345",maxLength:7})]}),s.jsxs("div",{style:S.formGroup,children:[s.jsx("label",{style:S.label,children:"Mandantennummer"}),s.jsx("input",{type:"text",value:P.datev_client_number||"",onChange:e=>V({...P,datev_client_number:e.target.value}),style:S.input,placeholder:"10001",maxLength:5})]})]}),s.jsxs("div",{style:S.datevInfo,children:[s.jsx("h4",{style:{color:"#ffd700",margin:"0 0 8px 0"},children:"DATEV-Export Formate:"}),s.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"#aaa"},children:[s.jsx("li",{children:"Buchungsstapel (Rechnungen) - EXTF Format"}),s.jsx("li",{children:"Zahlungen - EXTF Format"}),s.jsx("li",{children:"Debitoren-Stammdaten - ASCII Format"})]})]})]}),s.jsx("div",{style:S.footer,children:s.jsx("button",{style:S.saveButton,onClick:async()=>{var e,s;try{I(!0),await r.put("/integrations/config",{...P,dojo_id:F}),alert("Einstellungen gespeichert!"),G()}catch(t){console.error("Fehler beim Speichern:",t),alert((null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.error)||"Fehler beim Speichern")}finally{I(!1)}},disabled:C,children:C?s.jsxs(s.Fragment,{children:[s.jsx(f,{size:18,className:"spinning"})," Speichern..."]}):s.jsxs(s.Fragment,{children:[s.jsx(y,{size:18})," Einstellungen speichern"]})})})]})},_=({title:e,icon:t,configured:n,mode:i})=>s.jsxs("div",{style:{...S.statusCard,borderColor:n?"rgba(34, 197, 94, 0.5)":"rgba(255, 255, 255, 0.1)"},children:[s.jsx("div",{style:S.statusIcon,children:t}),s.jsxs("div",{style:S.statusInfo,children:[s.jsx("strong",{children:e}),s.jsxs("span",{style:{color:n?"#22c55e":"#ef4444",fontSize:"12px"},children:[n?"Konfiguriert":"Nicht konfiguriert",i&&n&&` (${i})`]})]}),n?s.jsx(a,{size:20,color:"#22c55e"}):s.jsx(o,{size:20,color:"#666"})]}),k=({service:e,onTest:t,result:n,disabled:i})=>s.jsxs("div",{style:S.testSection,children:[s.jsx("button",{style:{...S.testButton,opacity:i?.5:1},onClick:t,disabled:i||(null==n?void 0:n.loading),children:(null==n?void 0:n.loading)?s.jsxs(s.Fragment,{children:[s.jsx(f,{size:16,className:"spinning"})," Teste..."]}):s.jsxs(s.Fragment,{children:[s.jsx(b,{size:16})," Verbindung testen"]})}),n&&!n.loading&&s.jsxs("div",{style:{...S.testResult,background:n.success?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",borderColor:n.success?"#22c55e":"#ef4444"},children:[n.success?s.jsx(a,{size:16,color:"#22c55e"}):s.jsx(o,{size:16,color:"#ef4444"}),s.jsx("span",{children:n.message})]})]}),S={container:{padding:"24px",maxWidth:"900px",margin:"0 auto"},header:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"32px"},title:{color:"#ffd700",margin:0,fontSize:"24px"},subtitle:{color:"#aaa",margin:"4px 0 0 0",fontSize:"14px"},statusGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"32px"},statusCard:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid",borderRadius:"12px"},statusIcon:{color:"#ffd700"},statusInfo:{flex:1,display:"flex",flexDirection:"column",color:"#fff"},section:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"24px",marginBottom:"20px"},sectionHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},sectionTitle:{color:"#fff",margin:0,fontSize:"18px",flex:1},helpLink:{display:"flex",alignItems:"center",gap:"4px",color:"#ffd700",textDecoration:"none",fontSize:"13px"},infoBox:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"12px 16px",marginBottom:"20px",color:"#aaa",fontSize:"14px"},formRow:{display:"flex",gap:"16px",marginBottom:"16px"},formGroup:{flex:1},label:{display:"block",color:"#ffd700",marginBottom:"8px",fontSize:"14px"},input:{width:"100%",padding:"12px",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#fff",fontSize:"14px",boxSizing:"border-box"},secretInput:{display:"flex",gap:"8px"},eyeButton:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"12px",color:"#fff",cursor:"pointer"},checkboxLabel:{display:"flex",alignItems:"center",gap:"8px",color:"#fff",cursor:"pointer",fontSize:"14px"},testSection:{display:"flex",alignItems:"center",gap:"16px",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},testButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff",cursor:"pointer",fontSize:"14px"},testResult:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"8px",border:"1px solid",fontSize:"13px"},datevInfo:{background:"rgba(0, 102, 51, 0.1)",border:"1px solid rgba(0, 102, 51, 0.3)",borderRadius:"8px",padding:"16px",marginTop:"16px"},footer:{display:"flex",justifyContent:"flex-end",marginTop:"24px"},saveButton:{display:"flex",alignItems:"center",gap:"8px",padding:"14px 28px",background:"#ffd700",border:"none",borderRadius:"8px",color:"#1a1a2e",fontWeight:"bold",fontSize:"16px",cursor:"pointer"},loading:{textAlign:"center",padding:"60px",color:"#888"}};export{v as default};
