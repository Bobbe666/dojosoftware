import{a as e,j as s}from"./query-Caj74EYQ.js";import i from"./MemberHeader-D-AvdKoj.js";import{b as n,a as r}from"./index-B0gO-Ppw.js";import{aV as a,C as t,g as c,be as d,I as l}from"./icons-eh0tbLFx.js";/* empty css                  */import"./vendor-router-B2AaIOtG.js";import"./charts-QHQg_ypW.js";const h=()=>{const[h,m]=e.useState([]),[o,u]=e.useState([]),[j,p]=e.useState({}),[g,x]=e.useState(!0),{user:v}=n(),N=[{id:1,name:"Trainingskleidung (Gi/Anzug)",description:"Saubere Trainingskleidung fÃ¼r dein Training",category:"Kleidung",required:!0},{id:2,name:"Handtuch",description:"Handtuch fÃ¼r nach dem Training",category:"Hygiene",required:!1},{id:3,name:"Wasserflasche",description:"Ausreichend Wasser fÃ¼r das Training",category:"Verpflegung",required:!0},{id:4,name:"SchutzausrÃ¼stung",description:"Falls fÃ¼r deinen Kurs erforderlich (z.B. Handschuhe, Schienbeinschoner)",category:"SchutzausrÃ¼stung",required:!1}];e.useEffect(()=>{(async()=>{x(!0);try{if(!(null==v?void 0:v.email))return console.error("Kein User angemeldet"),void x(!1);const e=(await r.get(`/mitglieder/by-email/${encodeURIComponent(v.email)}`)).data.mitglied_id,s=(await r.get(`/stundenplan/member/${e}/termine`)).data,i=(new Date).toISOString().split("T")[0],n=s.filter(e=>e.datum===i).map(e=>({id:e.stundenplan_id,kurs_name:e.title,trainer_name:e.trainer,uhrzeit:e.zeit,raum:e.raum,datum:e.datum}));m(n),u(N);const a=localStorage.getItem("equipment-checklist");a&&p(JSON.parse(a))}catch(e){console.error("Fehler beim Laden der Kursdaten:",e),m([]),u(N)}finally{x(!1)}})()},[v]);const f=(()=>{const e=o.filter(e=>j[e.id]).length;return{checked:e,total:o.length,percentage:o.length>0?Math.round(e/o.length*100):100}})(),b=o.reduce((e,s)=>{const i=s.category;return e[i]||(e[i]=[]),e[i].push(s),e},{});return g?s.jsxs("div",{className:"dashboard-container",children:[s.jsx(i,{}),s.jsx("div",{className:"dashboard-content",children:s.jsxs("div",{className:"equipment-checklist-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Lade Equipment-Checkliste..."})]})})]}):s.jsxs("div",{className:"dashboard-container",children:[s.jsx(i,{}),s.jsx("div",{className:"dashboard-content",children:s.jsxs("div",{className:"equipment-checklist",children:[s.jsx("div",{className:"checklist-header",children:s.jsxs("div",{className:"header-content",children:[s.jsx(a,{size:24}),s.jsx("h1",{children:"Equipment-Checkliste"}),s.jsx("p",{children:"Was brauche ich heute fÃ¼r mein Training?"})]})}),h.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"progress-section",children:[s.jsxs("div",{className:"progress-header",children:[s.jsx("h2",{children:"Heutige Vorbereitung"}),s.jsxs("div",{className:"progress-badge",children:[f.checked,"/",f.total," âœ“"]})]}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${f.percentage}%`}})}),s.jsx("div",{className:"progress-text",children:100===f.percentage?s.jsx("span",{className:"complete",children:"ğŸ‰ Alles bereit fÃ¼r dein Training!"}):s.jsxs("span",{children:["Noch ",f.total-f.checked," GegenstÃ¤nde fehlen"]})})]}),s.jsxs("div",{className:"today-courses",children:[s.jsxs("h3",{children:[s.jsx(t,{size:20}),"Heutige Kurse"]}),s.jsx("div",{className:"courses-list",children:h.map(e=>s.jsx("div",{className:"course-item",children:s.jsxs("div",{className:"course-info",children:[s.jsx("h4",{children:e.kurs_name}),s.jsxs("div",{className:"course-details",children:[s.jsxs("span",{children:["ğŸ‘¨â€ğŸ« ",e.trainer_name]}),s.jsxs("span",{children:["ğŸ• ",e.uhrzeit]}),s.jsxs("span",{children:["ğŸ“ ",e.raum]})]})]})},e.id))})]}),s.jsxs("div",{className:"equipment-categories",children:[s.jsxs("h3",{children:[s.jsx(a,{size:20}),"BenÃ¶tigtes Equipment"]}),Object.entries(b).map(([e,i])=>s.jsxs("div",{className:"equipment-category",children:[s.jsx("h4",{children:e}),s.jsx("div",{className:"equipment-items",children:i.map(e=>s.jsxs("div",{className:"equipment-item "+(j[e.id]?"checked":""),children:[s.jsx("button",{className:"check-button",onClick:()=>{return s=e.id,void p(e=>{const i={...e,[s]:!e[s]};return localStorage.setItem("equipment-checklist",JSON.stringify(i)),i});var s},children:j[e.id]?s.jsx(c,{size:20}):s.jsx(d,{size:20})}),s.jsxs("div",{className:"equipment-info",children:[s.jsx("h5",{children:e.name}),s.jsx("p",{children:e.description}),e.required&&s.jsx("span",{className:"required-badge",children:"Empfohlen"})]})]},e.id))})]},e))]})]}):s.jsxs("div",{className:"no-courses",children:[s.jsx(l,{size:48}),s.jsx("h3",{children:"Keine Kurse heute"}),s.jsx("p",{children:"Du hast heute keine geplanten Kurse. Zeit fÃ¼r ein freies Training! ğŸ’ª"})]}),s.jsxs("div",{className:"equipment-tips",children:[s.jsx("h3",{children:"ğŸ’¡ Tipps"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Kontrolliere dein Equipment rechtzeitig vor dem Training"}),s.jsx("li",{children:"Diese Liste zeigt empfohlenes Equipment fÃ¼r dein Training"}),s.jsx("li",{children:"Bei Fragen zum benÃ¶tigten Equipment wende dich an deinen Trainer"}),s.jsx("li",{children:"Deine Checkliste wird automatisch gespeichert"})]})]})]})})]})};export{h as default};
