import{a as e,j as a}from"./query-Caj74EYQ.js";import{D as l,a as s}from"./index-CREwepoQ.js";import"./vendor-router-Co3o87Zc.js";import"./icons-DiLw-1i5.js";import"./charts-C1Gv3M_c.js";const n=()=>{const{ladeAlleDaten:n}=e.useContext(l),[t,i]=e.useState([]),[r,o]=e.useState(!0),[c,d]=e.useState(""),[u,h]=e.useState({personalnummer:"",vorname:"",nachname:"",position:"",beschaeftigungsart:"Vollzeit",einstellungsdatum:"",email:"",telefon:"",grundgehalt:"",stundenlohn:""}),[m,p]=e.useState(null),[v,x]=e.useState({}),[j,g]=e.useState(""),[b,N]=e.useState(""),[f,y]=e.useState({key:null,direction:"asc"}),k=async()=>{var e,a;o(!0);try{const e=await s.get("/personal");i(e.data),console.log("‚úÖ Personal-Daten geladen:",e.data.length)}catch(l){console.error("‚ùå Fehler beim Laden der Personal-Daten:",l),d("Fehler beim Laden der Personal-Daten: "+((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message))}finally{o(!1)}};e.useEffect(()=>{k()},[]);const C=e.useMemo(()=>[...t].filter(e=>(!j||e.position.toLowerCase().includes(j.toLowerCase()))&&(!b||e.status===b)).sort((e,a)=>{var l,s;if(!f.key)return 0;const n=(null==(l=e[f.key])?void 0:l.toString().toLowerCase())||"",t=(null==(s=a[f.key])?void 0:s.toString().toLowerCase())||"";return n<t?"asc"===f.direction?-1:1:n>t?"asc"===f.direction?1:-1:0}),[t,j,b,f]);return r?a.jsx("div",{className:"personal-container-modern",children:"Lade Personal-Daten..."}):c?a.jsx("div",{className:"personal-container-modern error",children:c}):a.jsxs("div",{className:"personal-container-modern",children:[a.jsxs("div",{className:"personal-header",children:[a.jsx("h2",{children:"üßë‚Äçüíº Personal-Verwaltung"}),a.jsx("p",{className:"personal-subtitle",children:"Mitarbeiter und Personalverwaltung"})]}),a.jsxs("div",{className:"personal-controls",children:[a.jsxs("div",{className:"personal-filters",children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"üéØ Position filtern:"}),a.jsxs("select",{className:"filter-select",onChange:e=>g(e.target.value),value:j,children:[a.jsx("option",{value:"",children:"Alle Positionen"}),a.jsx("option",{value:"Trainer",children:"Trainer"}),a.jsx("option",{value:"Leiter",children:"Leiter"}),a.jsx("option",{value:"Rezeption",children:"Rezeption"}),a.jsx("option",{value:"Reinigung",children:"Reinigung"})]})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"üìä Status filtern:"}),a.jsxs("select",{className:"filter-select",onChange:e=>N(e.target.value),value:b,children:[a.jsx("option",{value:"",children:"Alle Status"}),a.jsx("option",{value:"aktiv",children:"Aktiv"}),a.jsx("option",{value:"inaktiv",children:"Inaktiv"}),a.jsx("option",{value:"beurlaubt",children:"Beurlaubt"})]})]})]}),a.jsx("button",{className:"export-button-modern",onClick:()=>alert("CSV Export wird implementiert..."),children:"üìä CSV Export"})]}),a.jsxs("div",{className:"personal-stats",children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:"üßë‚Äçüíº"}),a.jsxs("div",{className:"stat-content",children:[a.jsx("div",{className:"stat-number",children:t.length}),a.jsx("div",{className:"stat-label",children:"Mitarbeiter"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:"‚úÖ"}),a.jsxs("div",{className:"stat-content",children:[a.jsx("div",{className:"stat-number",children:C.length}),a.jsx("div",{className:"stat-label",children:"Gefilterte Ergebnisse"})]})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-icon",children:"üéØ"}),a.jsxs("div",{className:"stat-content",children:[a.jsx("div",{className:"stat-number",children:t.filter(e=>"aktiv"===e.status).length}),a.jsx("div",{className:"stat-label",children:"Aktive Mitarbeiter"})]})]})]}),a.jsx("div",{className:"personal-grid",children:C.length>0?C.map((e,l)=>{return a.jsxs("div",{className:"personal-card",style:{animationDelay:.1*l+"s"},children:[a.jsxs("div",{className:"personal-card-header",children:[a.jsx("div",{className:"personal-status-badge","data-status":e.status,children:m===e.personal_id?a.jsxs("select",{className:"edit-select",value:v.status||e.status,onChange:e=>x({...v,status:e.target.value}),children:[a.jsx("option",{value:"aktiv",children:"Aktiv"}),a.jsx("option",{value:"inaktiv",children:"Inaktiv"}),a.jsx("option",{value:"beurlaubt",children:"Beurlaubt"})]}):e.status.charAt(0).toUpperCase()+e.status.slice(1)}),a.jsx("div",{className:"personal-actions",children:m===e.personal_id?a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"action-btn save-btn",onClick:()=>(async e=>{var a,l;if(v.vorname&&v.nachname&&v.position)try{await s.put(`/personal/${e}`,v),p(null),k(),alert("Mitarbeiter erfolgreich aktualisiert!")}catch(n){console.error("Fehler beim Speichern:",n),alert("Fehler beim Speichern: "+((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.error)||n.message))}else alert("Bitte Vor-/Nachname und Position ausf√ºllen.")})(e.personal_id),title:"√Ñnderungen speichern",children:"‚úÖ"}),a.jsx("button",{className:"action-btn cancel-btn",onClick:()=>p(null),title:"Bearbeitung abbrechen",children:"‚ùå"})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"action-btn edit-btn",onClick:()=>(e=>{p(e.personal_id),x({personalnummer:e.personalnummer,vorname:e.vorname,nachname:e.nachname,position:e.position,beschaeftigungsart:e.beschaeftigungsart,email:e.email||"",telefon:e.telefon||"",status:e.status})})(e),title:"Mitarbeiter bearbeiten",children:"‚úèÔ∏è"}),a.jsx("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{var a,l;if(window.confirm("Soll dieser Mitarbeiter wirklich gek√ºndigt werden?"))try{await s.delete(`/personal/${e}`),k(),alert("Mitarbeiter erfolgreich gek√ºndigt!")}catch(n){console.error("Fehler beim K√ºndigen:",n),alert("Fehler beim K√ºndigen: "+((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.error)||n.message))}})(e.personal_id),title:"Mitarbeiter k√ºndigen",children:"üóëÔ∏è"})]})})]}),a.jsxs("div",{className:"personal-card-content",children:[a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üë§ Name:"}),m===e.personal_id?a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("input",{type:"text",className:"edit-input",value:v.vorname,onChange:e=>x({...v,vorname:e.target.value}),placeholder:"Vorname",style:{flex:1}}),a.jsx("input",{type:"text",className:"edit-input",value:v.nachname,onChange:e=>x({...v,nachname:e.target.value}),placeholder:"Nachname",style:{flex:1}})]}):a.jsxs("span",{className:"personal-value",children:[e.vorname," ",e.nachname]})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üìã Personal-Nr:"}),a.jsx("span",{className:"personal-value",children:e.personalnummer})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üéØ Position:"}),m===e.personal_id?a.jsx("input",{type:"text",className:"edit-input",value:v.position,onChange:e=>x({...v,position:e.target.value}),placeholder:"Position"}):a.jsx("span",{className:"personal-value position-tag",children:e.position})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üíº Besch√§ftigung:"}),m===e.personal_id?a.jsxs("select",{className:"edit-select",value:v.beschaeftigungsart,onChange:e=>x({...v,beschaeftigungsart:e.target.value}),children:[a.jsx("option",{value:"Vollzeit",children:"Vollzeit"}),a.jsx("option",{value:"Teilzeit",children:"Teilzeit"}),a.jsx("option",{value:"Minijob",children:"Minijob"}),a.jsx("option",{value:"Praktikant",children:"Praktikant"}),a.jsx("option",{value:"Freelancer",children:"Freelancer"})]}):a.jsx("span",{className:"personal-value",children:e.beschaeftigungsart})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üìß Kontakt:"}),m===e.personal_id?a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx("input",{type:"email",className:"edit-input",value:v.email||"",onChange:e=>x({...v,email:e.target.value}),placeholder:"E-Mail"}),a.jsx("input",{type:"tel",className:"edit-input",value:v.telefon||"",onChange:e=>x({...v,telefon:e.target.value}),placeholder:"Telefon"})]}):a.jsxs("div",{children:[e.email&&a.jsx("div",{className:"contact-info",children:e.email}),e.telefon&&a.jsx("div",{className:"contact-info",children:e.telefon})]})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üí∞ Gehalt:"}),a.jsx("span",{className:"personal-value",children:(t=e.grundgehalt,t?new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t):"Nicht angegeben")})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"‚è∞ Stundenlohn:"}),a.jsx("span",{className:"personal-value",children:e.stundenlohn?`‚Ç¨${parseFloat(e.stundenlohn).toFixed(2)}/h`:"Nicht festgelegt"})]}),a.jsxs("div",{className:"personal-field",children:[a.jsx("label",{children:"üìÖ Einstellung:"}),a.jsx("span",{className:"personal-value",children:(n=e.einstellungsdatum,n?new Date(n).toLocaleDateString("de-DE"):"Nicht angegeben")})]})]})]},e.personal_id);var n,t}):a.jsx("div",{className:"no-personal-message",children:a.jsxs("div",{className:"empty-state",children:[a.jsx("div",{className:"empty-icon",children:"üë•"}),a.jsx("h3",{children:"Keine Mitarbeiter gefunden"}),a.jsx("p",{children:"Mit den aktuellen Filtern wurden keine Mitarbeiter gefunden."})]})})}),a.jsxs("div",{className:"neuer-mitarbeiter-card",style:{animationDelay:.1*C.length+.3+"s"},children:[a.jsx("div",{className:"card-header",children:a.jsx("h3",{children:"‚ûï Neuen Mitarbeiter hinzuf√ºgen"})}),a.jsxs("div",{className:"mitarbeiter-form-modern",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üìã Personal-Nr: *"}),a.jsx("input",{type:"text",className:"form-input",placeholder:"z.B. MA001, T01, R001",value:u.personalnummer,onChange:e=>h({...u,personalnummer:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üë§ Vorname: *"}),a.jsx("input",{type:"text",className:"form-input",placeholder:"Vorname eingeben",value:u.vorname,onChange:e=>h({...u,vorname:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üë§ Nachname: *"}),a.jsx("input",{type:"text",className:"form-input",placeholder:"Nachname eingeben",value:u.nachname,onChange:e=>h({...u,nachname:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üéØ Position: *"}),a.jsx("input",{type:"text",className:"form-input",placeholder:"z.B. Trainer, Rezeption, Dojo-Leiter",value:u.position,onChange:e=>h({...u,position:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üíº Besch√§ftigungsart: *"}),a.jsxs("select",{className:"form-select",value:u.beschaeftigungsart,onChange:e=>h({...u,beschaeftigungsart:e.target.value}),children:[a.jsx("option",{value:"Vollzeit",children:"Vollzeit"}),a.jsx("option",{value:"Teilzeit",children:"Teilzeit"}),a.jsx("option",{value:"Minijob",children:"Minijob"}),a.jsx("option",{value:"Praktikant",children:"Praktikant"}),a.jsx("option",{value:"Freelancer",children:"Freelancer"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üìÖ Einstellungsdatum: *"}),a.jsx("input",{type:"date",className:"form-input",value:u.einstellungsdatum,onChange:e=>h({...u,einstellungsdatum:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üìß E-Mail:"}),a.jsx("input",{type:"email",className:"form-input",placeholder:"mitarbeiter@dojo.local",value:u.email,onChange:e=>h({...u,email:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üìû Telefon:"}),a.jsx("input",{type:"tel",className:"form-input",placeholder:"+49 123 456789",value:u.telefon,onChange:e=>h({...u,telefon:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"üí∞ Grundgehalt (‚Ç¨):"}),a.jsx("input",{type:"number",className:"form-input",placeholder:"2500.00",step:"0.01",value:u.grundgehalt,onChange:e=>h({...u,grundgehalt:e.target.value})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"‚è∞ Stundenlohn (‚Ç¨/h):"}),a.jsx("input",{type:"number",className:"form-input",placeholder:"18.50",step:"0.01",min:"0",value:u.stundenlohn,onChange:e=>h({...u,stundenlohn:e.target.value})})]}),a.jsxs("button",{className:"add-button-modern",onClick:async()=>{var e,a;if(u.personalnummer&&u.vorname&&u.nachname&&u.position&&u.einstellungsdatum)try{await s.post("/personal",u),h({personalnummer:"",vorname:"",nachname:"",position:"",beschaeftigungsart:"Vollzeit",einstellungsdatum:"",email:"",telefon:"",grundgehalt:"",stundenlohn:""}),k(),alert("Mitarbeiter erfolgreich hinzugef√ºgt!")}catch(l){console.error("Fehler beim Hinzuf√ºgen:",l),alert("Fehler beim Hinzuf√ºgen des Mitarbeiters: "+((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message))}else alert("Bitte alle Pflichtfelder ausf√ºllen.")},children:[a.jsx("span",{className:"btn-icon",children:"‚ûï"}),"Mitarbeiter hinzuf√ºgen"]})]})]})]})};export{n as default};
