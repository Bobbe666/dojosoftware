import{a as e,j as s}from"./query-Caj74EYQ.js";import{a}from"./index-DJzZu8AC.js";import{P as n}from"./PublicFooter-DHMmSlMU.js";import{u as r,c as i}from"./vendor-router-Co3o87Zc.js";import"./icons-DiLw-1i5.js";import"./charts-C1Gv3M_c.js";const l="/dojo-logo.png";function o(){var o;const t=r(),c=i(),[d,m]=e.useState({dojoName:"",subdomain:"",ownerName:"",ownerEmail:"",phone:"",password:"",passwordConfirm:"",selectedPlan:(null==(o=c.state)?void 0:o.selectedPlan)||"starter",acceptTerms:!1}),[h,g]=e.useState({}),[u,j]=e.useState({checking:!1,available:null,message:""}),[p,x]=e.useState(!1),[N,b]=e.useState(!1),[v,f]=e.useState(null);let w=null;e.useEffect(()=>(d.subdomain.length>=3?(clearTimeout(w),w=setTimeout(()=>{k(d.subdomain)},500)):j({checking:!1,available:null,message:""}),()=>clearTimeout(w)),[d.subdomain]);const k=async e=>{j({checking:!0,available:null,message:""});try{const s=await a.get(`/onboarding/check-subdomain/${e}`);j({checking:!1,available:s.data.available,message:s.data.available?"VerfÃ¼gbar!":s.data.reason||"Nicht verfÃ¼gbar"})}catch(s){console.error("Subdomain-Check Fehler:",s);let e="Fehler bei der PrÃ¼fung";s.response?s.response.data&&s.response.data.error?e=s.response.data.error:404===s.response.status?e="API-Endpoint nicht gefunden. Bitte Server-URL prÃ¼fen.":500===s.response.status&&(e="Serverfehler bei der PrÃ¼fung. Bitte spÃ¤ter erneut versuchen."):e=s.request?"Keine Antwort vom Server. Bitte Verbindung prÃ¼fen.":`Netzwerkfehler: ${s.message}`,j({checking:!1,available:!1,message:e})}};return N&&v?s.jsxs("div",{className:"register-page",children:[s.jsx("nav",{className:"register-nav",children:s.jsxs("div",{className:"nav-container",children:[s.jsxs("div",{className:"nav-logo",onClick:()=>t("/"),children:[s.jsx("img",{src:l,alt:"DojoSoftware Logo",className:"nav-logo-image"}),s.jsx("span",{className:"logo-text",children:"DojoSoftware"})]}),s.jsxs("div",{className:"nav-links",children:[s.jsx("a",{href:"/",onClick:e=>{e.preventDefault(),t("/")},children:"Home"}),s.jsx("a",{href:"/#features",children:"Features"}),s.jsx("a",{href:"/galerie",children:"Galerie"}),s.jsx("a",{href:"/pricing",children:"Preise"}),s.jsx("a",{href:"/#testimonials",children:"Referenzen"}),s.jsx("button",{className:"nav-login-btn",onClick:()=>t("/login"),children:"Login"})]})]})}),s.jsx("div",{className:"register-container",children:s.jsxs("div",{className:"success-container",children:[s.jsxs("div",{className:"success-header",children:[s.jsx("h1",{children:"Willkommen bei DojoSoftware!"}),s.jsxs("p",{className:"success-message",children:["Dein Dojo ",s.jsx("strong",{children:d.dojoName})," wurde erfolgreich registriert!"]})]}),s.jsxs("div",{className:"success-info",children:[s.jsxs("div",{className:"info-box",children:[s.jsxs("h3",{children:[s.jsx("span",{className:"section-icon",children:"ğŸ“§"})," E-Mail gesendet"]}),s.jsxs("p",{children:["Wir haben dir eine BestÃ¤tigungs-E-Mail an ",s.jsx("strong",{children:d.ownerEmail})," geschickt."]})]}),s.jsxs("div",{className:"info-box",children:[s.jsxs("h3",{children:[s.jsx("span",{className:"section-icon",children:"ğŸŒ"})," Dein Zugang"]}),s.jsxs("p",{className:"subdomain-url",children:[d.subdomain,".dojo.tda-intl.org"]})]}),s.jsxs("div",{className:"info-box",children:[s.jsxs("h3",{children:[s.jsx("span",{className:"section-icon",children:"â±ï¸"})," Trial-Phase"]}),s.jsxs("p",{children:["Du hast ",s.jsx("strong",{children:"14 Tage"})," kostenlosen Zugriff auf alle Features."]}),s.jsxs("p",{className:"trial-date",children:["Endet am: ",new Date(v.trial_ends_at).toLocaleDateString("de-DE")]})]})]}),s.jsxs("div",{className:"next-steps",children:[s.jsxs("h3",{children:[s.jsx("span",{className:"section-icon",children:"ğŸš€"})," NÃ¤chste Schritte"]}),s.jsxs("ol",{children:[s.jsx("li",{children:"Logge dich mit deiner E-Mail und deinem Passwort ein"}),s.jsx("li",{children:"VervollstÃ¤ndige dein Dojo-Profil"}),s.jsx("li",{children:"Lade deine ersten Mitglieder ein"})]}),s.jsx("button",{className:"cta-btn",onClick:()=>{const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;window.location.href=e?"/login":v.login_url},children:"Jetzt zum Login und loslegen"})]})]})})]}):s.jsxs("div",{className:"register-page",children:[s.jsx("nav",{className:"register-nav",children:s.jsxs("div",{className:"nav-container",children:[s.jsxs("div",{className:"nav-logo",onClick:()=>t("/"),children:[s.jsx("img",{src:l,alt:"DojoSoftware Logo",className:"nav-logo-image"}),s.jsx("span",{className:"logo-text",children:"DojoSoftware"})]}),s.jsxs("div",{className:"nav-links",children:[s.jsx("a",{href:"/",onClick:e=>{e.preventDefault(),t("/")},children:"Home"}),s.jsx("a",{href:"/#features",children:"Features"}),s.jsx("a",{href:"/galerie",children:"Galerie"}),s.jsx("a",{href:"/pricing",children:"Preise"}),s.jsx("a",{href:"/#testimonials",children:"Referenzen"}),s.jsx("button",{className:"nav-login-btn",onClick:()=>t("/login"),children:"Login"})]})]})}),s.jsxs("div",{className:"register-container",children:[s.jsxs("div",{className:"register-header",children:[s.jsx("h1",{children:"Registriere dein Dojo"}),s.jsx("p",{children:"14 Tage kostenlos testen - keine Kreditkarte erforderlich"})]}),s.jsx("div",{className:"plan-pills",children:["starter","professional","premium","enterprise"].map(e=>s.jsxs("button",{className:"plan-pill "+(d.selectedPlan===e?"active":""),onClick:()=>m({...d,selectedPlan:e}),children:[e.charAt(0).toUpperCase()+e.slice(1),"professional"===e&&s.jsx("span",{className:"popular-tag",children:"Beliebt"})]},e))}),s.jsxs("form",{onSubmit:async e=>{var s,n,r;if(e.preventDefault(),console.log("ğŸš€ Submit gestartet"),console.log("ğŸ“‹ Form Data:",d),console.log("ğŸ” Subdomain Status:",u),(()=>{const e={};return(!d.dojoName||d.dojoName.length<3)&&(e.dojoName="Dojo-Name muss mindestens 3 Zeichen haben"),!d.subdomain||d.subdomain.length<3?e.subdomain="Subdomain muss mindestens 3 Zeichen haben":!1===u.available?e.subdomain=u.message||"Diese Subdomain ist nicht verfÃ¼gbar":(null===u.available||u.checking)&&(e.subdomain="Bitte warte bis die Subdomain-PrÃ¼fung abgeschlossen ist"),(!d.ownerName||d.ownerName.length<2)&&(e.ownerName="Bitte gib deinen Namen ein"),d.ownerEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.ownerEmail)||(e.ownerEmail="Bitte gib eine gÃ¼ltige E-Mail-Adresse ein"),(!d.password||d.password.length<8)&&(e.password="Passwort muss mindestens 8 Zeichen lang sein"),d.password!==d.passwordConfirm&&(e.passwordConfirm="PasswÃ¶rter stimmen nicht Ã¼berein"),d.acceptTerms||(e.acceptTerms="Bitte akzeptiere die AGB und DatenschutzerklÃ¤rung"),g(e),0===Object.keys(e).length})()){console.log("âœ… Validierung erfolgreich, sende Request..."),x(!0),g({});try{const e={dojo_name:d.dojoName,subdomain:d.subdomain,owner_name:d.ownerName,owner_email:d.ownerEmail,phone:d.phone,password:d.password,selected_plan:d.selectedPlan};console.log("ğŸ“¤ Payload:",e);const s=await a.post("/onboarding/register-dojo",e);console.log("ğŸ“¥ Response:",s.data),s.data.success&&(console.log("âœ… Registrierung erfolgreich!"),f(s.data),b(!0))}catch(i){console.error("âŒ Registrierungsfehler:",i),console.error("ğŸ“„ Error Response:",null==(s=i.response)?void 0:s.data),g({general:(null==(r=null==(n=i.response)?void 0:n.data)?void 0:r.error)||"Registrierung fehlgeschlagen. Bitte versuche es erneut."})}finally{x(!1)}}else console.log("âŒ Validierung fehlgeschlagen, Errors:",h)},className:"register-form",children:[h.general&&s.jsx("div",{className:"error-banner",children:h.general}),s.jsxs("section",{className:"form-section",children:[s.jsxs("h3",{children:[s.jsx("span",{className:"section-icon",children:"ğŸ¥‹"})," Dojo-Informationen"]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Dojo-Name *"}),s.jsx("input",{type:"text",value:d.dojoName,onChange:e=>m({...d,dojoName:e.target.value}),placeholder:"z.B. Budokan Berlin",className:h.dojoName?"error":""}),h.dojoName&&s.jsx("span",{className:"error-text",children:h.dojoName})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Subdomain * (Deine Zugangs-URL)"}),s.jsxs("div",{className:"subdomain-input-group",children:[s.jsx("input",{type:"text",value:d.subdomain,onChange:e=>{let s=e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").slice(0,30);m({...d,subdomain:s})},placeholder:"budokan-berlin",className:h.subdomain?"error":""}),s.jsx("span",{className:"subdomain-suffix",children:".dojo.tda-intl.org"})]}),u.checking&&s.jsx("span",{className:"subdomain-status checking",children:"PrÃ¼fe VerfÃ¼gbarkeit..."}),!u.checking&&!0===u.available&&s.jsxs("span",{className:"subdomain-status available",children:["âœ“ ",u.message]}),!u.checking&&!1===u.available&&s.jsxs("span",{className:"subdomain-status unavailable",children:["âœ— ",u.message]}),h.subdomain&&s.jsx("span",{className:"error-text",children:h.subdomain}),s.jsx("small",{className:"help-text",children:"Deine Mitglieder greifen Ã¼ber diese URL auf das System zu"})]})]}),s.jsxs("section",{className:"form-section",children:[s.jsxs("h3",{children:[s.jsx("span",{className:"section-icon",children:"ğŸ‘¤"})," Administrator-Zugang"]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Dein Name *"}),s.jsx("input",{type:"text",value:d.ownerName,onChange:e=>m({...d,ownerName:e.target.value}),placeholder:"Max Mustermann",className:h.ownerName?"error":""}),h.ownerName&&s.jsx("span",{className:"error-text",children:h.ownerName})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"E-Mail-Adresse *"}),s.jsx("input",{type:"email",value:d.ownerEmail,onChange:e=>m({...d,ownerEmail:e.target.value}),placeholder:"max@budokan-berlin.de",className:h.ownerEmail?"error":""}),h.ownerEmail&&s.jsx("span",{className:"error-text",children:h.ownerEmail})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Telefon (optional)"}),s.jsx("input",{type:"tel",value:d.phone,onChange:e=>m({...d,phone:e.target.value}),placeholder:"+49 30 12345678"})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Passwort *"}),s.jsx("input",{type:"password",value:d.password,onChange:e=>m({...d,password:e.target.value}),placeholder:"Mindestens 8 Zeichen",className:h.password?"error":""}),h.password&&s.jsx("span",{className:"error-text",children:h.password})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Passwort bestÃ¤tigen *"}),s.jsx("input",{type:"password",value:d.passwordConfirm,onChange:e=>m({...d,passwordConfirm:e.target.value}),placeholder:"Passwort wiederholen",className:h.passwordConfirm?"error":""}),h.passwordConfirm&&s.jsx("span",{className:"error-text",children:h.passwordConfirm})]})]})]}),s.jsxs("div",{className:"form-group checkbox-group",children:[s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:d.acceptTerms,onChange:e=>m({...d,acceptTerms:e.target.checked})}),s.jsxs("span",{children:["Ich akzeptiere die ",s.jsx("a",{href:"/agb",target:"_blank",children:"AGB"})," und"," ",s.jsx("a",{href:"/datenschutz",target:"_blank",children:"DatenschutzerklÃ¤rung"})]})]}),h.acceptTerms&&s.jsx("span",{className:"error-text",children:h.acceptTerms})]}),s.jsx("button",{type:"submit",className:"submit-btn",disabled:p||!u.available,children:p?"Wird registriert...":"Dojo jetzt registrieren - 14 Tage gratis"}),s.jsxs("div",{className:"security-notes",children:[s.jsxs("div",{className:"note",children:[s.jsx("span",{className:"note-icon",children:"ğŸ”’"})," Keine Kreditkarte erforderlich"]}),s.jsxs("div",{className:"note",children:[s.jsx("span",{className:"note-icon",children:"â±ï¸"})," Trial endet automatisch nach 14 Tagen"]}),s.jsxs("div",{className:"note",children:[s.jsx("span",{className:"note-icon",children:"ğŸ‡©ğŸ‡ª"})," Daten auf deutschen Servern (DSGVO-konform)"]})]})]}),s.jsx("div",{className:"register-footer",children:s.jsxs("p",{children:["Du hast bereits ein Dojo? ",s.jsx("a",{href:"/login",children:"Hier anmelden"})]})})]}),s.jsx(n,{})]})}export{o as default};
