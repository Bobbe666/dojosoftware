import{j as e}from"./animation-1wuIdCBS.js";import{e as a,u as s,r as n,O as i}from"./vendor-router-BhMXg4Z-.js";import{u as r,b as d,d as t,e as c,g as l,h as o,i as h,j as m,a as u}from"./index-DUnH23_2.js";import{j as v}from"./index-CkXcCt97.js";import{D as p,S as b,T as j,A as g}from"./TrialBanner-Dz5Tq5qX.js";import x from"./MemberDashboard-UzEt1MGm.js";/* empty css                         *//* empty css                       */import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-D7rg4pDH.js";import"./MemberHeader-B9i2VG32.js";/* empty css                  *//* empty css                      */import"./index-B7BewSvP.js";function N(){var N;const f=a(),k=s(),{token:w,logout:y}=r(),{getDojoFilterParam:E,selectedDojo:S}=d(),{standorte:C}=t(),{updateTrigger:z}=c(),[M,D]=n.useState({mitglieder:0,anwesenheit:0,kurse:0,trainer:0,beitraege:0,checkins_heute:0,stile:0,termine:0,inventar:0,personal:0,buddy_gruppen:0,tarife:0,zahlungszyklen:0}),[P,T]=n.useState([]),[F,A]=n.useState(!1),[L,U]=n.useState(""),[_,B]=n.useState(""),[V,G]=n.useState("checkin");let I="mitglied";try{if(w){I=v(w).role||"mitglied"}}catch(X){console.error("Fehler beim Dekodieren des Tokens:",X)}const K=async()=>{A(!0),U("");try{const e=E(),a=await o(w,e);if(D({...a.stats,checkins_heute:a.stats.checkins_heute||0,stile:a.stats.stile||0,termine:a.stats.termine||0,inventar:a.stats.inventar||0,personal:a.stats.personal||0,buddy_gruppen:a.stats.buddy_gruppen||0,tarife:a.stats.tarife||0,zahlungszyklen:a.stats.zahlungszyklen||0}),a.activities){const e=a.activities.activities||a.activities||[];T(e)}}catch(e){console.error("Fehler beim Laden der Dashboard-Statistiken:",e),U("Fehler beim Laden der Statistiken: "+e.message);try{const e=E(),[a,s]=await Promise.all([h(w,e),m(w,e)]);D({...a,checkins_heute:a.checkins_heute||0,stile:a.stile||0,termine:a.termine||0,inventar:a.inventar||0,personal:a.personal||0,buddy_gruppen:a.buddy_gruppen||0,tarife:a.tarife||0,zahlungszyklen:a.zahlungszyklen||0});const n=s.activities||s||[];T(n),U("")}catch(a){console.error("Fallback fehlgeschlagen:",a)}}finally{A(!1)}};n.useEffect(()=>{w&&K()},[w,E,z]),n.useEffect(()=>{(async()=>{try{if(w){const a=v(w);if("admin"===a.role)B(a.username||"Admin");else if(a.email)try{const e=await u.get(`/mitglieder/by-email/${encodeURIComponent(a.email)}`);if(e.data){const s=`${e.data.vorname||""} ${e.data.nachname||""}`.trim();B(s||a.username||"Mitglied")}}catch(e){console.error("Fehler beim Laden des Mitgliedsnamens:",e),B(a.username||"Mitglied")}}}catch(X){console.error("Fehler beim Dekodieren des Tokens:",X)}})()},[w]);const R=e=>{if("/dashboard/stundenplan"===e)try{k(e)}catch(X){console.error("Stundenplan Navigation Fehler:",X),window.location.href=e}else k(e)},q=[{id:"checkin",label:"Check-in Systeme",icon:"üì±"},{id:"mitglieder",label:"Mitgliederverwaltung",icon:"üë•"},{id:"pruefungswesen",label:"Pr√ºfungswesen",icon:"üèÜ"},{id:"events",label:"Events",icon:"üìÖ"},{id:"finanzen",label:"Finanzen",icon:"üí∞"},{id:"artikelverwaltung",label:"Artikelverwaltung",icon:"üì¶"},{id:"verwaltung",label:"Dojo-Verwaltung",icon:"üîß"},{id:"personal",label:"Personal",icon:"üë®‚Äçüè´"},{id:"berichte",label:"Berichte",icon:"üìä"},{id:"einstellungen",label:"Einstellungen",icon:"‚öôÔ∏è"},{id:"schnellaktionen",label:"Schnellaktionen",icon:"‚ö°"}],$=e=>0===e?"0":e.toLocaleString("de-DE"),O="/dashboard-tda-vib"===f.pathname||"/dashboard"===f.pathname,H="admin"===I?"Dojo Admin Dashboard":"Mitglieder Dashboard",Q=[{icon:"üë•",title:"Mitglieder",description:"Verwalten Sie alle Dojo-Mitglieder",path:"/dashboard/mitglieder",count:M.mitglieder},{icon:"üë•",title:"Buddy-Gruppen",description:"Freunde-Einladungen und Gruppenverwaltung",path:"/dashboard/buddy-gruppen",badge:"NEU",featured:!0,count:M.buddy_gruppen||0},{icon:"üìß",title:"Newsletter & Benachrichtigungen",description:"Email-Versand, Push-Nachrichten",path:"/dashboard/notifications",badge:"NEU",featured:!0},{icon:"üëã",title:"Ehemalige",description:"Ehemalige Mitglieder verwalten",path:"/dashboard/ehemalige",badge:"NEU",count:M.ehemalige||0},{icon:"üíº",title:"Interessenten",description:"Potenzielle Mitglieder und Leads",path:"/dashboard/interessenten",badge:"NEU",count:M.interessenten||0}],W=[{icon:"ü•ã",title:"Kurse",description:"Kurse und Gruppen verwalten",path:"/dashboard/kurse",count:M.kurse},{icon:"üìã",title:"Stundenplan",description:"Stundenplan und Kurszeiten",path:"/dashboard/stundenplan",featured:!0},{icon:"üéñÔ∏è",title:"Stil-Verwaltung",description:"Kampfkunst-Stile & Pr√ºfungen",path:"/dashboard/stile",badge:"NEU",featured:!0,count:M.stile||0},{icon:"üë•",title:"Gruppen",description:"Trainingsgruppen verwalten",path:"/dashboard/gruppen"},{icon:"üìç",title:"Standorte",description:"Standorte & Filialen",path:"/dashboard/standorte",count:(null==C?void 0:C.length)||0}],Z=[{icon:"üë®‚Äçüè´",title:"Trainer",description:"Trainer und Qualifikationen",path:"/dashboard/trainer",count:M.trainer},{icon:"üßë‚Äçüíº",title:"Personal",description:"Mitarbeiter & Personalverwaltung",path:"/dashboard/personal",count:M.personal,badge:"NEU",featured:!0}],J=[{icon:"üìä",title:"Finanzcockpit",description:"√úbersicht Finanzkennzahlen",path:"/dashboard/finanzcockpit",featured:!0},{icon:"üí∞",title:"Beitr√§ge",description:"Mitgliedsbeitr√§ge",path:"/dashboard/beitraege",count:M.beitraege,featured:!0},{icon:"üßæ",title:"Rechnungen",description:"Rechnungen verwalten",path:"/dashboard/rechnungen",featured:!0},{icon:"üí≥",title:"Lastschriftlauf",description:"SEPA-Lastschriften",path:"/dashboard/lastschriftlauf",featured:!0},{icon:"üìã",title:"SEPA-Mandate",description:"Einzugserm√§chtigungen",path:"/dashboard/sepa-mandate",featured:!0},{icon:"‚ö†Ô∏è",title:"Mahnwesen",description:"Offene Rechnungen",path:"/dashboard/mahnwesen",featured:!0},{icon:"üéØ",title:"Tarife & Preise",description:"Mitgliedschaftstarife",path:"/dashboard/tarife",featured:!0}];return"admin"!==I&&O?e.jsx(x,{}):e.jsxs("div",{className:"dashboard-container dashboard-tda-vib",children:[e.jsxs("header",{className:"dashboard-header",children:[e.jsxs("div",{className:"dashboard-header-left",children:[e.jsx("img",{src:l,alt:"DojoSoftware Logo",className:"dashboard-logo dojo-software-logo"}),e.jsx("h2",{children:H})]}),e.jsxs("div",{className:"dashboard-header-right",children:["admin"===I&&e.jsx(p,{}),"admin"===I&&e.jsx(b,{}),!O&&e.jsx("button",{onClick:()=>k("/dashboard-tda-vib"),className:"dashboard-button",children:"‚Üê Dashboard"}),_&&e.jsxs("div",{className:"user-display",children:[e.jsx("span",{className:"user-greeting",children:"Willkommen"}),e.jsx("span",{className:"user-name",children:_})]}),e.jsx("button",{className:"logout-button",onClick:()=>{y(),k("/login")},children:e.jsx("span",{className:"logout-text",children:"Logout"})})]})]}),e.jsx("div",{className:"dashboard-content",children:e.jsx("main",{className:"dashboard-main",children:O?e.jsxs("div",{className:"content-card",children:[L&&e.jsxs("div",{className:"error-message",children:["‚ö†Ô∏è ",L,e.jsx("button",{onClick:K,className:"btn btn-neutral btn-small",style:{marginLeft:"10px"},children:"üîÑ Erneut versuchen"})]}),e.jsx(j,{stats:M}),"admin"===I&&e.jsx("div",{className:"dashboard-tabs",children:q.map(a=>e.jsxs("button",{className:"dashboard-tab "+(V===a.id?"active":""),onClick:()=>G(a.id),children:[e.jsx("span",{className:"tab-icon",children:a.icon}),e.jsx("span",{className:"tab-label",children:a.label})]},a.id))}),e.jsx("div",{className:"dashboard-navigation",children:"admin"===I&&e.jsxs("div",{className:"tab-content",children:["checkin"===V&&e.jsxs("div",{className:"nav-cards",children:[e.jsxs("div",{onClick:()=>R("/dashboard/checkin"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge live",children:"LIVE"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"üì±"}),e.jsxs("h3",{children:["Mitglieder Check-in ",e.jsxs("span",{className:"nav-count",children:["(",$(M.checkins_heute),")"]})]})]}),e.jsx("p",{children:"Touch & QR-Code Check-in f√ºr Mitglieder"})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),e.jsxs("div",{onClick:()=>R("/dashboard/anwesenheit"),className:"nav-card clickable",children:[e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"‚úÖ"}),e.jsxs("h3",{children:["Anwesenheit ",e.jsxs("span",{className:"nav-count",children:["(",$(M.anwesenheit),")"]})]})]}),e.jsx("p",{children:"Anwesenheitsverfolgung und Statistiken"})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),e.jsxs("div",{onClick:()=>R("/dashboard/personal-checkin"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge new",children:"NEU"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"üë•"}),e.jsx("h3",{children:"Personal Check-in"})]}),e.jsx("p",{children:"Arbeitszeit-Erfassung f√ºr Personal"})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),e.jsxs("div",{onClick:()=>R("/dashboard/kasse"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge new",children:"NEU"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"üí∞"}),e.jsx("h3",{children:"Barverkauf"})]}),e.jsx("p",{children:"Touch-Kasse f√ºr Verk√§ufe und Barzahlungen"})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]}),e.jsxs("div",{onClick:()=>R("/dashboard/tresen"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge live",children:"LIVE"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"üè™"}),e.jsx("h3",{children:"Tresen-√úbersicht"})]}),e.jsx("p",{children:"Empfang, Checkin & Tages√ºbersicht"})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]})]}),"mitglieder"===V&&e.jsx("div",{className:"nav-cards",children:Q.map((a,s)=>e.jsxs("div",{onClick:()=>R(a.path),className:"nav-card clickable "+(a.featured?"featured":""),children:[a.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===a.badge?"new":"live"),children:a.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsxs("h3",{children:[a.title," ",void 0!==a.count&&e.jsxs("span",{className:"nav-count",children:["(",$(a.count),")"]})]})]}),e.jsx("p",{children:a.description})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"verwaltung"===V&&e.jsx("div",{className:"nav-cards",children:W.map((a,s)=>e.jsxs("div",{onClick:()=>R(a.path),className:"nav-card clickable "+(a.featured?"featured":""),children:[a.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===a.badge?"new":"live"),children:a.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsxs("h3",{children:[a.title," ",void 0!==a.count&&e.jsxs("span",{className:"nav-count",children:["(",$(a.count),")"]})]})]}),e.jsx("p",{children:a.description})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"personal"===V&&e.jsx("div",{className:"nav-cards",children:Z.map((a,s)=>e.jsxs("div",{onClick:()=>R(a.path),className:"nav-card clickable "+(a.featured?"featured":""),children:[a.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===a.badge?"new":"live"),children:a.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsxs("h3",{children:[a.title," ",void 0!==a.count&&e.jsxs("span",{className:"nav-count",children:["(",$(a.count),")"]})]})]}),e.jsx("p",{children:a.description})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"finanzen"===V&&e.jsx("div",{className:"nav-cards",children:J.map((a,s)=>e.jsxs("div",{onClick:()=>R(a.path),className:"nav-card clickable "+(a.featured?"featured":""),children:[a.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===a.badge?"new":"live"),children:a.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:a.icon}),e.jsxs("h3",{children:[a.title," ",void 0!==a.count&&e.jsxs("span",{className:"nav-count",children:["(",$(a.count),")"]})]})]}),e.jsx("p",{children:a.description})]}),e.jsx("div",{className:"nav-arrow",children:"‚Üí"})]},s))}),"schnellaktionen"===V&&e.jsxs("div",{className:"nav-section",children:[e.jsx("h2",{className:"section-header",children:"Schnellaktionen"}),e.jsx("div",{className:"quick-actions",children:[{label:"‚ûï Neues Mitglied",path:"/dashboard/mitglieder/neu",className:"primary"},{label:"üéñÔ∏è Neuen Stil anlegen",path:"/dashboard/stile/neu",className:"info"},{label:"‚úÖ Anwesenheit erfassen",path:"/dashboard/anwesenheit",className:"secondary"},{label:"ü•ã Pr√ºfung verwalten",path:"/dashboard/stile/pruefungen",className:"warning"},{label:"üë• Buddy-Gruppe erstellen",path:"/dashboard/buddy-gruppen",className:"success"},{label:"üí∞ Barverkauf",path:"/dashboard/kasse",className:"primary"}].map((a,s)=>e.jsx("button",{onClick:()=>R(a.path),className:`quick-action-btn ${a.className}`,children:a.label},s))}),e.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:e.jsxs("button",{onClick:K,className:"quick-action-btn info",disabled:F,children:["üîÑ ",F?"L√§dt...":"Statistiken aktualisieren"]})})]}),["pruefungswesen","events","artikelverwaltung","berichte","einstellungen"].includes(V)&&e.jsx("div",{className:"nav-cards",children:e.jsx("div",{className:"nav-card",children:e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"üîß"}),e.jsx("h3",{children:null==(N=q.find(e=>e.id===V))?void 0:N.label})]}),e.jsx("p",{children:"Dieser Bereich ist in der Demo-Ansicht verf√ºgbar"})]})})})]})})]}):e.jsx("div",{className:"content-card",children:e.jsx(i,{})})})}),"admin"===I&&e.jsx(g,{})]})}export{N as default};
