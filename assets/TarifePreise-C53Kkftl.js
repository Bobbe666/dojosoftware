import{j as e}from"./animation-1wuIdCBS.js";import{r as s}from"./vendor-router-BhMXg4Z-.js";import{b as a,a as i}from"./index-DUnH23_2.js";/* empty css                     */import{aH as t,b4 as n,at as r,U as l,D as c,P as d,b as h,a as o,J as m,K as u,C as x,v as j,q as v,aQ as p,c as g,$ as b,N as f}from"./icons-D7rg4pDH.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";function N(e){if(!e)return"";return{monthly:"Monatlich",monatlich:"Monatlich",quarterly:"VierteljÃ¤hrlich",vierteljaehrlich:"VierteljÃ¤hrlich","semi-annually":"HalbjÃ¤hrlich",halbjaehrlich:"HalbjÃ¤hrlich",annually:"JÃ¤hrlich",jaehrlich:"JÃ¤hrlich",yearly:"JÃ¤hrlich"}[e.toLowerCase()]||e}const y=()=>{var y,_;const{activeDojo:z}=a(),[k,C]=s.useState([]),[S,A]=s.useState([]),[w,T]=s.useState([]),[B,L]=s.useState([]),[P,R]=s.useState(!0),[F,E]=s.useState(null),[M,W]=s.useState(null),[$,D]=s.useState(!1),[K,I]=s.useState(!1),[U,V]=s.useState(!1),[H,Y]=s.useState(!1),[Z,J]=s.useState(!1),[q,O]=s.useState(!1),[Q,G]=s.useState(!0),[X,ee]=s.useState(!1),se=()=>z&&"super-admin"!==z?z.id:null,[ae,ie]=s.useState({name:"",duration_months:"",mindestlaufzeit_monate:"",kuendigungsfrist_monate:"",price_cents:"",aufnahmegebuehr_cents:4999}),[te,ne]=s.useState({name:"",price_cents:"",aufnahmegebuehr_cents:4999,currency:"EUR",duration_months:"",billing_cycle:"monthly",payment_method:"bank_transfer",active:!0}),[re,le]=s.useState({name:"",beschreibung:"",rabatt_prozent:"",gueltig_von:"",gueltig_bis:"",max_nutzungen:"",aktiv:!0});s.useEffect(()=>{ce()},[z]);const ce=async()=>{try{R(!0);const e=se(),s=e?`?dojo_id=${e}`:"";console.log("ðŸ“Š TarifePreise: Lade Tarife fÃ¼r Dojo:",e,"activeDojo:",z);const[a,t,n,r]=await Promise.all([i.get(`/tarife${s}`),i.get(`/tarife/rabatte${s}`),i.get(`/zahlungszyklen${s}`).catch(()=>({data:{data:[]}})),i.get(`/laufzeiten${s}`).catch(()=>({data:{data:[]}}))]),l=a.data,c=t.data,d=n.data,h=r.data;if(l.success&&c.success){const e=l.data.map(e=>({id:e.id,name:e.name,price_euros:(e.price_cents/100).toFixed(2),price_cents:e.price_cents,aufnahmegebuehr_euros:((e.aufnahmegebuehr_cents||4999)/100).toFixed(2),aufnahmegebuehr_cents:e.aufnahmegebuehr_cents||4999,currency:e.currency||"EUR",duration_months:e.duration_months,billing_cycle:e.billing_cycle,payment_method:e.payment_method,active:1===e.active,ist_archiviert:1===e.ist_archiviert||!0===e.ist_archiviert,isChildRate:(e.name.toLowerCase().includes("kinder")||e.name.toLowerCase().includes("kids")||e.name.toLowerCase().includes("jugendliche"))&&!e.name.toLowerCase().includes("studenten")&&!e.name.toLowerCase().includes("schÃ¼ler"),isStudentRate:e.name.toLowerCase().includes("studenten")||e.name.toLowerCase().includes("schÃ¼ler")||e.name.toLowerCase().includes("kids"),isAdultRate:e.name.toLowerCase().includes("erwachsene")||e.name.toLowerCase().includes("18+")})),s=c.data.map(e=>({id:e.rabatt_id,name:e.name,beschreibung:e.beschreibung,rabatt_prozent:parseFloat(e.rabatt_prozent),gueltig_von:e.gueltig_von,gueltig_bis:e.gueltig_bis,max_nutzungen:e.max_nutzungen,aktiv:1===e.aktiv,genutzt:e.genutzt||0}));C(e),A(s),console.log("Zahlungszyklen geladen:",d.data||[]),T(d.data||[]),L(h.data||[])}else console.error("API Error:",l.error||c.error)}catch(e){console.error("Fehler beim Laden der Tarife und Rabatte:",e)}finally{R(!1)}},de=async e=>{try{const s=se(),a=s?`?dojo_id=${s}`:"";let t;t=e.id?await i.put(`/tarife/${e.id}${a}`,e):await i.post(`/tarife${a}`,e);const n=t.data;n.success?(await ce(),D(!1),E(null),ne({name:"",price_cents:"",aufnahmegebuehr_cents:4999,currency:"EUR",duration_months:"",billing_cycle:"monthly",payment_method:"bank_transfer",active:!0})):alert("Fehler beim Speichern: "+n.error)}catch(s){console.error("Fehler beim Speichern des Tarifs:",s),alert("Fehler beim Speichern des Tarifs")}},he=async e=>{if(window.confirm("Sind Sie sicher, dass Sie diesen Tarif lÃ¶schen mÃ¶chten?"))try{const s=se(),a=s?`?dojo_id=${s}`:"",t=(await i.delete(`/tarife/${e}${a}`)).data;t.success?await ce():alert("Fehler beim LÃ¶schen: "+t.error)}catch(s){console.error("Fehler beim LÃ¶schen des Tarifs:",s),alert("Fehler beim LÃ¶schen des Tarifs")}},oe=async(e,s)=>{const a=!s,t=a?'Diesen Tarif als "Alter Tarif" markieren? Er wird dann nicht mehr fÃ¼r neue Mitglieder verfÃ¼gbar sein.':"Diesen Tarif reaktivieren? Er wird dann wieder fÃ¼r neue Mitglieder verfÃ¼gbar sein.";if(window.confirm(t))try{const s=se(),t=s?`?dojo_id=${s}`:"",n=await i.patch(`/tarife/${e}/archivieren${t}`,{ist_archiviert:a});n.data.success?await ce():alert("Fehler beim Archivieren: "+n.data.error)}catch(n){console.error("Fehler beim Archivieren des Tarifs:",n),alert("Fehler beim Archivieren des Tarifs")}};return P?e.jsx("div",{className:"tarife-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Tarif-Daten..."})]})}):e.jsxs("div",{className:"tarife-container",children:[e.jsxs("div",{className:"tarife-header",children:[e.jsx("h1",{children:"ðŸ’° Tarife & Preise"}),e.jsx("p",{children:"Verwalte alle Mitgliedstarife, Zahlungszyklen und Preisstrukturen"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(t,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Aktive Tarife"}),e.jsx("p",{className:"stat-value",children:k.filter(e=>e.active).length}),e.jsxs("span",{className:"stat-trend",children:["von ",k.length," Gesamt"]})]})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(n,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Kinder-Tarife"}),e.jsx("p",{className:"stat-value",children:k.filter(e=>e.isChildRate&&!e.ist_archiviert).length}),e.jsx("span",{className:"stat-trend",children:"verfÃ¼gbar"})]})]}),e.jsxs("div",{className:"stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(r,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Studenten-Tarife"}),e.jsx("p",{className:"stat-value",children:k.filter(e=>e.isStudentRate&&!e.ist_archiviert).length}),e.jsx("span",{className:"stat-trend",children:"verfÃ¼gbar"})]})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(l,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Erwachsenen-Tarife"}),e.jsx("p",{className:"stat-value",children:k.filter(e=>e.isAdultRate&&!e.ist_archiviert).length}),e.jsx("span",{className:"stat-trend",children:"verfÃ¼gbar"})]})]}),e.jsxs("div",{className:"stat-card purple",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(c,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Durchschnittspreis"}),e.jsxs("p",{className:"stat-value",children:["â‚¬",k.length>0?(k.reduce((e,s)=>e+parseFloat(s.price_euros),0)/k.length).toFixed(2):"0.00"]}),e.jsx("span",{className:"stat-trend",children:"monatlich"})]})]})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header collapsible",onClick:()=>V(!U),children:[e.jsxs("h2",{children:[e.jsx(n,{size:24})," Kinder & Jugendliche (6-17 Jahre)",e.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.isChildRate&&!e.ist_archiviert).length,")"]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),D(!0)},children:[e.jsx(d,{size:20}),"Neuer Tarif"]}),U?e.jsx(h,{size:24}):e.jsx(o,{size:24})]})]}),!U&&e.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.isChildRate&&!e.ist_archiviert).map(s=>e.jsxs("div",{className:"tarif-card",children:[e.jsxs("div",{className:"tarif-header",children:[e.jsxs("div",{className:"tarif-title",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"status-badge "+(s.active?"active":"inactive"),children:s.active?"Aktiv":"Inaktiv"})]}),e.jsxs("div",{className:"tarif-actions",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>E(s),title:"Bearbeiten",children:e.jsx(m,{size:16})}),e.jsx("button",{className:"action-btn delete",onClick:()=>he(s.id),title:"LÃ¶schen",children:e.jsx(u,{size:16})}),e.jsx("button",{className:"action-btn archive",onClick:()=>oe(s.id,s.ist_archiviert),title:s.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:s.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:s.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),e.jsxs("div",{className:"tarif-price",children:[e.jsx("span",{className:"currency",children:"â‚¬"}),s.price_euros,e.jsx("span",{className:"period",children:"/Monat"})]}),e.jsxs("div",{className:"tarif-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),e.jsxs("div",{className:"value",children:["â‚¬",s.aufnahmegebuehr_euros]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(x,{size:14})," Laufzeit"]}),e.jsxs("div",{className:"value",children:[s.duration_months," Monate"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(j,{size:14})," Zahlungsmethode"]}),e.jsx("div",{className:"value",children:"SEPA"===s.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===s.payment_method?"BankÃ¼berweisung":"CARD"===s.payment_method?"Kreditkarte":"PAYPAL"===s.payment_method?"PayPal":s.payment_method})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(v,{size:14})," Abrechnung"]}),e.jsx("div",{className:"value",children:N(s.billing_cycle)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(p,{size:14})," WÃ¤hrung"]}),e.jsx("div",{className:"value",children:s.currency})]})]})]},s.id))})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header collapsible",onClick:()=>Y(!H),children:[e.jsxs("h2",{children:[e.jsx(r,{size:24})," Studenten & SchÃ¼ler Tarife (18+)",e.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.isStudentRate&&!e.ist_archiviert).length,")"]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),D(!0)},children:[e.jsx(d,{size:20}),"Neuer Tarif"]}),H?e.jsx(h,{size:24}):e.jsx(o,{size:24})]})]}),!H&&e.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.isStudentRate&&!e.ist_archiviert).map(s=>e.jsxs("div",{className:"tarif-card",children:[e.jsxs("div",{className:"tarif-header",children:[e.jsxs("div",{className:"tarif-title",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"status-badge "+(s.active?"active":"inactive"),children:s.active?"Aktiv":"Inaktiv"})]}),e.jsxs("div",{className:"tarif-actions",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>E(s),title:"Bearbeiten",children:e.jsx(m,{size:16})}),e.jsx("button",{className:"action-btn delete",onClick:()=>he(s.id),title:"LÃ¶schen",children:e.jsx(u,{size:16})}),e.jsx("button",{className:"action-btn archive",onClick:()=>oe(s.id,s.ist_archiviert),title:s.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:s.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:s.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),e.jsxs("div",{className:"tarif-price",children:[e.jsx("span",{className:"currency",children:"â‚¬"}),s.price_euros,e.jsx("span",{className:"period",children:"/Monat"})]}),e.jsxs("div",{className:"tarif-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),e.jsxs("div",{className:"value",children:["â‚¬",s.aufnahmegebuehr_euros]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(x,{size:14})," Laufzeit"]}),e.jsxs("div",{className:"value",children:[s.duration_months," Monate"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(j,{size:14})," Zahlungsmethode"]}),e.jsx("div",{className:"value",children:"SEPA"===s.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===s.payment_method?"BankÃ¼berweisung":"CARD"===s.payment_method?"Kreditkarte":"PAYPAL"===s.payment_method?"PayPal":s.payment_method})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(v,{size:14})," Abrechnung"]}),e.jsx("div",{className:"value",children:N(s.billing_cycle)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(p,{size:14})," WÃ¤hrung"]}),e.jsx("div",{className:"value",children:s.currency})]})]})]},s.id))})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header collapsible",onClick:()=>J(!Z),children:[e.jsxs("h2",{children:[e.jsx(l,{size:24})," Erwachsenen-Tarife (18+)",e.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.isAdultRate&&!e.ist_archiviert).length,")"]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),D(!0)},children:[e.jsx(d,{size:20}),"Neuer Tarif"]}),Z?e.jsx(h,{size:24}):e.jsx(o,{size:24})]})]}),!Z&&e.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.isAdultRate&&!e.ist_archiviert).map(s=>e.jsxs("div",{className:"tarif-card",children:[e.jsxs("div",{className:"tarif-header",children:[e.jsxs("div",{className:"tarif-title",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"status-badge "+(s.active?"active":"inactive"),children:s.active?"Aktiv":"Inaktiv"})]}),e.jsxs("div",{className:"tarif-actions",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>E(s),title:"Bearbeiten",children:e.jsx(m,{size:16})}),e.jsx("button",{className:"action-btn delete",onClick:()=>he(s.id),title:"LÃ¶schen",children:e.jsx(u,{size:16})}),e.jsx("button",{className:"action-btn archive",onClick:()=>oe(s.id,s.ist_archiviert),title:s.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:s.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:s.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),e.jsxs("div",{className:"tarif-price",children:[e.jsx("span",{className:"currency",children:"â‚¬"}),s.price_euros,e.jsx("span",{className:"period",children:"/Monat"})]}),e.jsxs("div",{className:"tarif-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),e.jsxs("div",{className:"value",children:["â‚¬",s.aufnahmegebuehr_euros]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(x,{size:14})," Laufzeit"]}),e.jsxs("div",{className:"value",children:[s.duration_months," Monate"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(j,{size:14})," Zahlungsmethode"]}),e.jsx("div",{className:"value",children:"SEPA"===s.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===s.payment_method?"BankÃ¼berweisung":"CARD"===s.payment_method?"Kreditkarte":"PAYPAL"===s.payment_method?"PayPal":s.payment_method})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(v,{size:14})," Abrechnung"]}),e.jsx("div",{className:"value",children:N(s.billing_cycle)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(p,{size:14})," WÃ¤hrung"]}),e.jsx("div",{className:"value",children:s.currency})]})]})]},s.id))})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header collapsible",onClick:()=>G(!Q),style:{background:"rgba(107, 114, 128, 0.1)",borderLeft:"4px solid #6b7280"},children:[e.jsxs("h2",{style:{color:"#6b7280"},children:[e.jsx(t,{size:24})," Alte Tarife (Archiviert)",e.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.ist_archiviert).length,")"]})]}),e.jsx("div",{className:"header-actions",children:Q?e.jsx(h,{size:24}):e.jsx(o,{size:24})})]}),!Q&&e.jsx(e.Fragment,{children:0===k.filter(e=>e.ist_archiviert).length?e.jsx("div",{className:"info-box",style:{background:"rgba(107, 114, 128, 0.05)"},children:e.jsx("p",{style:{color:"#6b7280"},children:"Keine archivierten Tarife vorhanden. Tarife kÃ¶nnen Ã¼ber den ðŸ“¦-Button archiviert werden."})}):e.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.ist_archiviert).map(s=>e.jsxs("div",{className:"tarif-card",style:{opacity:.7,border:"2px solid #6b7280"},children:[e.jsxs("div",{className:"tarif-header",children:[e.jsxs("div",{className:"tarif-title",children:[e.jsx("h3",{children:s.name}),e.jsx("span",{className:"status-badge",style:{background:"#6b7280"},children:"Archiviert"})]}),e.jsxs("div",{className:"tarif-actions",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>E(s),title:"Bearbeiten",children:e.jsx(m,{size:16})}),e.jsx("button",{className:"action-btn delete",onClick:()=>he(s.id),title:"LÃ¶schen",children:e.jsx(u,{size:16})}),e.jsx("button",{className:"action-btn archive",onClick:()=>oe(s.id,s.ist_archiviert),title:s.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:s.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:s.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),e.jsxs("div",{className:"tarif-price",children:[e.jsx("span",{className:"currency",children:"â‚¬"}),s.price_euros,e.jsx("span",{className:"period",children:"/Monat"})]}),e.jsxs("div",{className:"tarif-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),e.jsxs("div",{className:"value",children:["â‚¬",s.aufnahmegebuehr_euros]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(x,{size:14})," Laufzeit"]}),e.jsxs("div",{className:"value",children:[s.duration_months," Monate"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(j,{size:14})," Zahlungsmethode"]}),e.jsx("div",{className:"value",children:"SEPA"===s.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===s.payment_method?"BankÃ¼berweisung":"CARD"===s.payment_method?"Kreditkarte":"PAYPAL"===s.payment_method?"PayPal":s.payment_method})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(v,{size:14})," Abrechnung"]}),e.jsx("div",{className:"value",children:N(s.billing_cycle)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(p,{size:14})," WÃ¤hrung"]}),e.jsx("div",{className:"value",children:s.currency})]})]})]},s.id))})})]}),e.jsxs("div",{className:"tarif-section",children:[e.jsxs("div",{className:"section-header collapsible",onClick:()=>O(!q),children:[e.jsxs("h2",{children:[e.jsx(g,{size:24})," Individuelle VertrÃ¤ge",e.jsx("span",{className:"tarif-count",children:"(Admin Only)"})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),ee(!0)},children:[e.jsx(d,{size:20}),"Neuer individueller Vertrag"]}),q?e.jsx(h,{size:24}):e.jsx(o,{size:24})]})]}),!q&&e.jsx("div",{className:"info-box",children:e.jsx("p",{children:"Hier kÃ¶nnen individuelle VertrÃ¤ge mit benutzerdefinierten Konditionen erstellt werden. Diese Funktion ist nur fÃ¼r Administratoren verfÃ¼gbar."})})]}),X&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Neuer individueller Vertrag"}),e.jsx("button",{className:"close-btn",onClick:()=>ee(!1),children:e.jsx(b,{size:20})})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Vertragsname *"}),e.jsx("input",{type:"text",value:ae.name,onChange:e=>ie({...ae,name:e.target.value}),placeholder:"z.B. Individualtarif Max Mustermann"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Laufzeit (Monate) *"}),e.jsx("input",{type:"number",min:"1",value:ae.duration_months,onChange:e=>ie({...ae,duration_months:e.target.value}),placeholder:"z.B. 12"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Vertragsdauer/Mindestlaufzeit (Monate) *"}),e.jsx("input",{type:"number",min:"1",value:ae.mindestlaufzeit_monate,onChange:e=>ie({...ae,mindestlaufzeit_monate:e.target.value}),placeholder:"z.B. 12"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"KÃ¼ndigungsfrist (Monate) *"}),e.jsx("input",{type:"number",min:"0",value:ae.kuendigungsfrist_monate,onChange:e=>ie({...ae,kuendigungsfrist_monate:e.target.value}),placeholder:"z.B. 3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Monatlicher Beitrag (â‚¬) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:ae.price_cents?(ae.price_cents/100).toFixed(2):"",onChange:e=>ie({...ae,price_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"z.B. 49.90"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"AufnahmegebÃ¼hr (â‚¬)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:ae.aufnahmegebuehr_cents?(ae.aufnahmegebuehr_cents/100).toFixed(2):"",onChange:e=>ie({...ae,aufnahmegebuehr_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"49.99"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>ee(!1),children:"Abbrechen"}),e.jsxs("button",{className:"btn btn-primary",onClick:async()=>{var e,s;try{const e=se(),s=e?`?dojo_id=${e}`:"";await i.post(`/tarife${s}`,{name:ae.name,duration_months:parseInt(ae.duration_months),mindestlaufzeit_monate:parseInt(ae.mindestlaufzeit_monate),kuendigungsfrist_monate:parseInt(ae.kuendigungsfrist_monate),price_cents:ae.price_cents,aufnahmegebuehr_cents:ae.aufnahmegebuehr_cents,currency:"EUR",billing_cycle:"MONTHLY",payment_method:"SEPA",active:!0}),ee(!1),ie({name:"",duration_months:"",mindestlaufzeit_monate:"",kuendigungsfrist_monate:"",price_cents:"",aufnahmegebuehr_cents:4999}),ce(),alert("Individueller Vertrag erfolgreich erstellt!")}catch(a){console.error("Fehler beim Erstellen:",a),alert("Fehler beim Erstellen: "+((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.error)||a.message))}},children:[e.jsx(f,{size:20}),"Vertrag erstellen"]})]})]})}),$&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Neuer Tarif"}),e.jsx("button",{className:"close-btn",onClick:()=>D(!1),children:e.jsx(b,{size:20})})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),e.jsx("input",{type:"text",value:te.name,onChange:e=>ne({...te,name:e.target.value}),placeholder:"Tarif-Bezeichnung",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Preis (â‚¬) *"}),e.jsx("input",{type:"number",step:"0.01",value:te.price_cents?(te.price_cents/100).toFixed(2):"",onChange:e=>ne({...te,price_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"0.00",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"AufnahmegebÃ¼hr (â‚¬)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:te.aufnahmegebuehr_cents?(te.aufnahmegebuehr_cents/100).toFixed(2):"",onChange:e=>ne({...te,aufnahmegebuehr_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"49.99",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Laufzeit (Monate) *"}),e.jsx("input",{type:"number",min:"1",value:te.duration_months,onChange:e=>ne({...te,duration_months:parseInt(e.target.value)||""}),placeholder:"12",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsintervall *"}),e.jsxs("select",{value:te.billing_cycle,onChange:e=>ne({...te,billing_cycle:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),w.length>0?w.map(s=>{var a,i;const t=(null==(a=s.name)?void 0:a.toLowerCase())||(null==(i=s.intervall)?void 0:i.toLowerCase())||"";return e.jsx("option",{value:t,children:s.name||s.intervall},s.id||s.zyklus_id)}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"daily",children:"TÃ¤glich"}),e.jsx("option",{value:"weekly",children:"WÃ¶chentlich"}),e.jsx("option",{value:"monthly",children:"Monatlich"}),e.jsx("option",{value:"quarterly",children:"VierteljÃ¤hrlich"}),e.jsx("option",{value:"yearly",children:"JÃ¤hrlich"})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsmethode *"}),e.jsxs("select",{value:te.payment_method,onChange:e=>ne({...te,payment_method:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"bank_transfer",children:"BankÃ¼berweisung"}),e.jsx("option",{value:"direct_debit",children:"Lastschrift"}),e.jsx("option",{value:"credit_card",children:"Kreditkarte"}),e.jsx("option",{value:"cash",children:"Bar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"WÃ¤hrung"}),e.jsxs("select",{value:te.currency,onChange:e=>ne({...te,currency:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"EUR",children:"EUR (â‚¬)"}),e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"CHF",children:"CHF"})]})]})]}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:te.active,onChange:e=>ne({...te,active:e.target.checked})}),"Tarif ist aktiv"]})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>D(!1),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>de(te),disabled:!te.name||!te.price_cents||!te.duration_months,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(f,{size:16}),"Speichern"]})]})]})]})}),F&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Tarif bearbeiten"}),e.jsx("button",{className:"close-btn",onClick:()=>E(null),children:e.jsx(b,{size:20})})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),e.jsx("input",{type:"text",value:F.name,onChange:e=>E({...F,name:e.target.value}),placeholder:"Tarif-Bezeichnung",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Preis (â‚¬) *"}),e.jsx("input",{type:"number",step:"0.01",value:F.price_euros||"",onChange:e=>E({...F,price_euros:e.target.value,price_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"0.00",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"AufnahmegebÃ¼hr (â‚¬)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:F.aufnahmegebuehr_euros||"",onChange:e=>E({...F,aufnahmegebuehr_euros:e.target.value,aufnahmegebuehr_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"49.99",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Laufzeit (Monate) *"}),e.jsx("input",{type:"number",min:"1",value:F.duration_months,onChange:e=>E({...F,duration_months:parseInt(e.target.value)||""}),placeholder:"12",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsintervall *"}),e.jsxs("select",{value:(null==(y=F.billing_cycle)?void 0:y.toUpperCase())||"",onChange:e=>E({...F,billing_cycle:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),e.jsx("option",{value:"MONTHLY",children:"Monatlich"}),e.jsx("option",{value:"QUARTERLY",children:"VierteljÃ¤hrlich"}),e.jsx("option",{value:"YEARLY",children:"JÃ¤hrlich"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsmethode *"}),e.jsxs("select",{value:(null==(_=F.payment_method)?void 0:_.toUpperCase())||"",onChange:e=>E({...F,payment_method:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"SEPA",children:"SEPA"}),e.jsx("option",{value:"CARD",children:"Kreditkarte"}),e.jsx("option",{value:"PAYPAL",children:"PayPal"}),e.jsx("option",{value:"BANK_TRANSFER",children:"BankÃ¼berweisung"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"WÃ¤hrung"}),e.jsxs("select",{value:F.currency,onChange:e=>E({...F,currency:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("option",{value:"EUR",children:"EUR (â‚¬)"}),e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"CHF",children:"CHF"})]})]})]}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:F.active,onChange:e=>E({...F,active:e.target.checked})}),"Tarif ist aktiv"]})}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>E(null),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>de(F),disabled:!F.name||!F.price_cents||!F.duration_months,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(f,{size:16}),"Speichern"]})]})]})]})})]})};export{y as default};
