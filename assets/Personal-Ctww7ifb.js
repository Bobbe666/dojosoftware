import{j as e}from"./animation-1wuIdCBS.js";import{r as a}from"./vendor-router-BhMXg4Z-.js";import{D as l,a as s}from"./index-DUnH23_2.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-D7rg4pDH.js";const n=()=>{const{ladeAlleDaten:n}=a.useContext(l),[t,i]=a.useState([]),[r,o]=a.useState(!0),[c,d]=a.useState(""),[u,h]=a.useState({personalnummer:"",vorname:"",nachname:"",position:"",beschaeftigungsart:"Vollzeit",einstellungsdatum:"",email:"",telefon:"",grundgehalt:"",stundenlohn:""}),[m,p]=a.useState(null),[v,x]=a.useState({}),[j,g]=a.useState(""),[b,N]=a.useState(""),[f,y]=a.useState({key:null,direction:"asc"}),k=async()=>{var e,a;o(!0);try{const e=await s.get("/personal");i(e.data),console.log("‚úÖ Personal-Daten geladen:",e.data.length)}catch(l){console.error("‚ùå Fehler beim Laden der Personal-Daten:",l),d("Fehler beim Laden der Personal-Daten: "+((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message))}finally{o(!1)}};a.useEffect(()=>{k()},[]);const C=a.useMemo(()=>[...t].filter(e=>(!j||e.position.toLowerCase().includes(j.toLowerCase()))&&(!b||e.status===b)).sort((e,a)=>{var l,s;if(!f.key)return 0;const n=(null==(l=e[f.key])?void 0:l.toString().toLowerCase())||"",t=(null==(s=a[f.key])?void 0:s.toString().toLowerCase())||"";return n<t?"asc"===f.direction?-1:1:n>t?"asc"===f.direction?1:-1:0}),[t,j,b,f]);return r?e.jsx("div",{className:"personal-container-modern",children:"Lade Personal-Daten..."}):c?e.jsx("div",{className:"personal-container-modern error",children:c}):e.jsxs("div",{className:"personal-container-modern",children:[e.jsxs("div",{className:"personal-header",children:[e.jsx("h2",{children:"üßë‚Äçüíº Personal-Verwaltung"}),e.jsx("p",{className:"personal-subtitle",children:"Mitarbeiter und Personalverwaltung"})]}),e.jsxs("div",{className:"personal-controls",children:[e.jsxs("div",{className:"personal-filters",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"üéØ Position filtern:"}),e.jsxs("select",{className:"filter-select",onChange:e=>g(e.target.value),value:j,children:[e.jsx("option",{value:"",children:"Alle Positionen"}),e.jsx("option",{value:"Trainer",children:"Trainer"}),e.jsx("option",{value:"Leiter",children:"Leiter"}),e.jsx("option",{value:"Rezeption",children:"Rezeption"}),e.jsx("option",{value:"Reinigung",children:"Reinigung"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"üìä Status filtern:"}),e.jsxs("select",{className:"filter-select",onChange:e=>N(e.target.value),value:b,children:[e.jsx("option",{value:"",children:"Alle Status"}),e.jsx("option",{value:"aktiv",children:"Aktiv"}),e.jsx("option",{value:"inaktiv",children:"Inaktiv"}),e.jsx("option",{value:"beurlaubt",children:"Beurlaubt"})]})]})]}),e.jsx("button",{className:"export-button-modern",onClick:()=>alert("CSV Export wird implementiert..."),children:"üìä CSV Export"})]}),e.jsxs("div",{className:"personal-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üßë‚Äçüíº"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:t.length}),e.jsx("div",{className:"stat-label",children:"Mitarbeiter"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"‚úÖ"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:C.length}),e.jsx("div",{className:"stat-label",children:"Gefilterte Ergebnisse"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"üéØ"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:t.filter(e=>"aktiv"===e.status).length}),e.jsx("div",{className:"stat-label",children:"Aktive Mitarbeiter"})]})]})]}),e.jsx("div",{className:"personal-grid",children:C.length>0?C.map((a,l)=>{return e.jsxs("div",{className:"personal-card",style:{animationDelay:.1*l+"s"},children:[e.jsxs("div",{className:"personal-card-header",children:[e.jsx("div",{className:"personal-status-badge","data-status":a.status,children:m===a.personal_id?e.jsxs("select",{className:"edit-select",value:v.status||a.status,onChange:e=>x({...v,status:e.target.value}),children:[e.jsx("option",{value:"aktiv",children:"Aktiv"}),e.jsx("option",{value:"inaktiv",children:"Inaktiv"}),e.jsx("option",{value:"beurlaubt",children:"Beurlaubt"})]}):a.status.charAt(0).toUpperCase()+a.status.slice(1)}),e.jsx("div",{className:"personal-actions",children:m===a.personal_id?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"action-btn save-btn",onClick:()=>(async e=>{var a,l;if(v.vorname&&v.nachname&&v.position)try{await s.put(`/personal/${e}`,v),p(null),k(),alert("Mitarbeiter erfolgreich aktualisiert!")}catch(n){console.error("Fehler beim Speichern:",n),alert("Fehler beim Speichern: "+((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.error)||n.message))}else alert("Bitte Vor-/Nachname und Position ausf√ºllen.")})(a.personal_id),title:"√Ñnderungen speichern",children:"‚úÖ"}),e.jsx("button",{className:"action-btn cancel-btn",onClick:()=>p(null),title:"Bearbeitung abbrechen",children:"‚ùå"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"action-btn edit-btn",onClick:()=>(e=>{p(e.personal_id),x({personalnummer:e.personalnummer,vorname:e.vorname,nachname:e.nachname,position:e.position,beschaeftigungsart:e.beschaeftigungsart,email:e.email||"",telefon:e.telefon||"",status:e.status})})(a),title:"Mitarbeiter bearbeiten",children:"‚úèÔ∏è"}),e.jsx("button",{className:"action-btn delete-btn",onClick:()=>(async e=>{var a,l;if(window.confirm("Soll dieser Mitarbeiter wirklich gek√ºndigt werden?"))try{await s.delete(`/personal/${e}`),k(),alert("Mitarbeiter erfolgreich gek√ºndigt!")}catch(n){console.error("Fehler beim K√ºndigen:",n),alert("Fehler beim K√ºndigen: "+((null==(l=null==(a=n.response)?void 0:a.data)?void 0:l.error)||n.message))}})(a.personal_id),title:"Mitarbeiter k√ºndigen",children:"üóëÔ∏è"})]})})]}),e.jsxs("div",{className:"personal-card-content",children:[e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üë§ Name:"}),m===a.personal_id?e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",className:"edit-input",value:v.vorname,onChange:e=>x({...v,vorname:e.target.value}),placeholder:"Vorname",style:{flex:1}}),e.jsx("input",{type:"text",className:"edit-input",value:v.nachname,onChange:e=>x({...v,nachname:e.target.value}),placeholder:"Nachname",style:{flex:1}})]}):e.jsxs("span",{className:"personal-value",children:[a.vorname," ",a.nachname]})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üìã Personal-Nr:"}),e.jsx("span",{className:"personal-value",children:a.personalnummer})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üéØ Position:"}),m===a.personal_id?e.jsx("input",{type:"text",className:"edit-input",value:v.position,onChange:e=>x({...v,position:e.target.value}),placeholder:"Position"}):e.jsx("span",{className:"personal-value position-tag",children:a.position})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üíº Besch√§ftigung:"}),m===a.personal_id?e.jsxs("select",{className:"edit-select",value:v.beschaeftigungsart,onChange:e=>x({...v,beschaeftigungsart:e.target.value}),children:[e.jsx("option",{value:"Vollzeit",children:"Vollzeit"}),e.jsx("option",{value:"Teilzeit",children:"Teilzeit"}),e.jsx("option",{value:"Minijob",children:"Minijob"}),e.jsx("option",{value:"Praktikant",children:"Praktikant"}),e.jsx("option",{value:"Freelancer",children:"Freelancer"})]}):e.jsx("span",{className:"personal-value",children:a.beschaeftigungsart})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üìß Kontakt:"}),m===a.personal_id?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsx("input",{type:"email",className:"edit-input",value:v.email||"",onChange:e=>x({...v,email:e.target.value}),placeholder:"E-Mail"}),e.jsx("input",{type:"tel",className:"edit-input",value:v.telefon||"",onChange:e=>x({...v,telefon:e.target.value}),placeholder:"Telefon"})]}):e.jsxs("div",{children:[a.email&&e.jsx("div",{className:"contact-info",children:a.email}),a.telefon&&e.jsx("div",{className:"contact-info",children:a.telefon})]})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üí∞ Gehalt:"}),e.jsx("span",{className:"personal-value",children:(t=a.grundgehalt,t?new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t):"Nicht angegeben")})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"‚è∞ Stundenlohn:"}),e.jsx("span",{className:"personal-value",children:a.stundenlohn?`‚Ç¨${parseFloat(a.stundenlohn).toFixed(2)}/h`:"Nicht festgelegt"})]}),e.jsxs("div",{className:"personal-field",children:[e.jsx("label",{children:"üìÖ Einstellung:"}),e.jsx("span",{className:"personal-value",children:(n=a.einstellungsdatum,n?new Date(n).toLocaleDateString("de-DE"):"Nicht angegeben")})]})]})]},a.personal_id);var n,t}):e.jsx("div",{className:"no-personal-message",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üë•"}),e.jsx("h3",{children:"Keine Mitarbeiter gefunden"}),e.jsx("p",{children:"Mit den aktuellen Filtern wurden keine Mitarbeiter gefunden."})]})})}),e.jsxs("div",{className:"neuer-mitarbeiter-card",style:{animationDelay:.1*C.length+.3+"s"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{children:"‚ûï Neuen Mitarbeiter hinzuf√ºgen"})}),e.jsxs("div",{className:"mitarbeiter-form-modern",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üìã Personal-Nr: *"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"z.B. MA001, T01, R001",value:u.personalnummer,onChange:e=>h({...u,personalnummer:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üë§ Vorname: *"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Vorname eingeben",value:u.vorname,onChange:e=>h({...u,vorname:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üë§ Nachname: *"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"Nachname eingeben",value:u.nachname,onChange:e=>h({...u,nachname:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üéØ Position: *"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"z.B. Trainer, Rezeption, Dojo-Leiter",value:u.position,onChange:e=>h({...u,position:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üíº Besch√§ftigungsart: *"}),e.jsxs("select",{className:"form-select",value:u.beschaeftigungsart,onChange:e=>h({...u,beschaeftigungsart:e.target.value}),children:[e.jsx("option",{value:"Vollzeit",children:"Vollzeit"}),e.jsx("option",{value:"Teilzeit",children:"Teilzeit"}),e.jsx("option",{value:"Minijob",children:"Minijob"}),e.jsx("option",{value:"Praktikant",children:"Praktikant"}),e.jsx("option",{value:"Freelancer",children:"Freelancer"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üìÖ Einstellungsdatum: *"}),e.jsx("input",{type:"date",className:"form-input",value:u.einstellungsdatum,onChange:e=>h({...u,einstellungsdatum:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üìß E-Mail:"}),e.jsx("input",{type:"email",className:"form-input",placeholder:"mitarbeiter@dojo.local",value:u.email,onChange:e=>h({...u,email:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üìû Telefon:"}),e.jsx("input",{type:"tel",className:"form-input",placeholder:"+49 123 456789",value:u.telefon,onChange:e=>h({...u,telefon:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"üí∞ Grundgehalt (‚Ç¨):"}),e.jsx("input",{type:"number",className:"form-input",placeholder:"2500.00",step:"0.01",value:u.grundgehalt,onChange:e=>h({...u,grundgehalt:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"‚è∞ Stundenlohn (‚Ç¨/h):"}),e.jsx("input",{type:"number",className:"form-input",placeholder:"18.50",step:"0.01",min:"0",value:u.stundenlohn,onChange:e=>h({...u,stundenlohn:e.target.value})})]}),e.jsxs("button",{className:"add-button-modern",onClick:async()=>{var e,a;if(u.personalnummer&&u.vorname&&u.nachname&&u.position&&u.einstellungsdatum)try{await s.post("/personal",u),h({personalnummer:"",vorname:"",nachname:"",position:"",beschaeftigungsart:"Vollzeit",einstellungsdatum:"",email:"",telefon:"",grundgehalt:"",stundenlohn:""}),k(),alert("Mitarbeiter erfolgreich hinzugef√ºgt!")}catch(l){console.error("Fehler beim Hinzuf√ºgen:",l),alert("Fehler beim Hinzuf√ºgen des Mitarbeiters: "+((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message))}else alert("Bitte alle Pflichtfelder ausf√ºllen.")},children:[e.jsx("span",{className:"btn-icon",children:"‚ûï"}),"Mitarbeiter hinzuf√ºgen"]})]})]})]})};export{n as default};
