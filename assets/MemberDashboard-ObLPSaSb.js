import{a as e,j as i}from"./query-Caj74EYQ.js";import{b as n,u as r,c as t,f as s,d as a}from"./index-B0gO-Ppw.js";import l from"./MemberHeader-D-AvdKoj.js";/* empty css                      */import{_ as d,C as o,g as c,q as m,aR as g,Q as h,aS as u,R as x,aT as f,aU as p,c as b,U as j,K as y,J as v,aq as k,aV as S,aW as z}from"./icons-eh0tbLFx.js";import{a as w}from"./index-wRQyZq66.js";/* empty css                  */import{u as _}from"./vendor-router-B2AaIOtG.js";import"./charts-QHQg_ypW.js";const N=({onClose:s})=>{const{user:a}=n(),{getDojoFilterParam:l}=r(),[g,h]=e.useState(null),[u,x]=e.useState([]),[f,p]=e.useState([]),[b,j]=e.useState(!1),[y,v]=e.useState(""),[k,S]=e.useState(""),[z,w]=e.useState(1),[_,N]=e.useState([]),B=t.apiBaseUrl;e.useEffect(()=>{D()},[]);const D=async()=>{var e;try{j(!0);const i=null==a?void 0:a.email;if(!i)throw new Error("Keine Benutzer-E-Mail gefunden");const n=await fetch(`/mitglieder/by-email/${encodeURIComponent(i)}`);if(!n.ok)throw new Error(`Mitgliedsdaten nicht gefunden: ${n.statusText}`);const r=await n.json();h(r);const t=l(),s=t?`${B}/checkin/courses-today?${t}`:`${B}/checkin/courses-today`;console.log("üîç Lade Kurse von:",s);const d=await fetch(s);if(d.ok){const i=await d.json();console.log("‚úÖ Kurse geladen:",(null==(e=i.courses)?void 0:e.length)||0),i.success&&x(i.courses||[])}const o=await fetch(`${B}/checkin/today-member/${r.mitglied_id}`);if(o.ok){const e=await o.json();if(e.success){const i=e.stundenplan_ids||[];N(i)}}}catch(i){console.error("Fehler beim Laden der Daten:",i),v("Fehler beim Laden der Daten: "+i.message)}finally{j(!1)}},C=e=>e.substring(0,5);return g?i.jsx("div",{className:"modal-overlay member-checkin-modal",children:i.jsxs("div",{className:"modal-content checkin-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h2",{children:["Check-in f√ºr ",g.vorname," ",g.nachname]}),i.jsx("button",{onClick:s,className:"close-button",children:i.jsx(d,{size:24})})]}),i.jsxs("div",{className:"modal-body",children:[y&&i.jsx("div",{className:"message error",children:y}),k&&i.jsx("div",{className:"message success",children:k}),1===z&&i.jsxs("div",{className:"course-selection-step",children:[i.jsxs("div",{className:"step-header",children:[i.jsx("div",{className:"step-icon",children:i.jsx(o,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{children:"Kurse f√ºr heute ausw√§hlen"}),i.jsx("p",{children:"W√§hlen Sie die Kurse aus, f√ºr die Sie sich anmelden m√∂chten:"})]})]}),b?i.jsx("div",{className:"loading",children:"Lade Kurse..."}):0===u.length?i.jsxs("div",{className:"no-courses",children:[i.jsx("div",{className:"no-courses-icon",children:"üìÖ"}),i.jsx("h4",{children:"Keine Kurse heute"}),i.jsx("p",{children:"F√ºr heute sind keine Kurse geplant."})]}):0===u.filter(e=>!_.includes(e.stundenplan_id)).length?i.jsxs("div",{className:"no-courses",children:[i.jsx("div",{className:"no-courses-icon",children:"‚úÖ"}),i.jsx("h4",{children:"Bereits f√ºr alle Kurse eingecheckt"}),i.jsx("p",{children:"Sie sind bereits f√ºr alle heutigen Kurse eingecheckt."})]}):i.jsx("div",{className:"courses-list",children:u.map(e=>{const n=(e=>{const i=new Date,n=(new Date).toISOString().split("T")[0],r=new Date(`${n}T${e.uhrzeit_start}`),t=new Date(`${n}T${e.uhrzeit_ende}`);return i<r||i>=r&&i<=t})(e),r=f.some(i=>i.stundenplan_id===e.stundenplan_id);return _.includes(e.stundenplan_id)?null:i.jsxs("div",{className:`course-item ${r?"selected":""} ${n?"":"unavailable"}`,onClick:()=>n&&(e=>{p(i=>i.some(i=>i.stundenplan_id===e.stundenplan_id)?i.filter(i=>i.stundenplan_id!==e.stundenplan_id):[...i,e])})(e),children:[i.jsx("div",{className:"course-checkbox",children:r&&i.jsx(c,{size:20})}),i.jsxs("div",{className:"course-info",children:[i.jsx("div",{className:"course-name",children:e.kurs_name||e.gruppenname}),i.jsxs("div",{className:"course-time",children:[i.jsx(m,{size:16}),C(e.uhrzeit_start)," - ",C(e.uhrzeit_ende)]}),e.trainer&&i.jsxs("div",{className:"course-trainer",children:["üë®‚Äçüè´ ",e.trainer]}),e.stil&&i.jsxs("div",{className:"course-room",children:["ü•ã ",e.stil]})]}),!n&&i.jsx("div",{className:"course-status",children:new Date(`${(new Date).toISOString().split("T")[0]}T${e.uhrzeit_start}`)>new Date?"Zuk√ºnftig":"Beendet"})]},e.stundenplan_id)})}),i.jsxs("div",{className:"action-buttons",children:[i.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Abbrechen"}),i.jsx("button",{onClick:()=>w(2),disabled:0===f.length,className:"btn btn-primary",children:"Weiter ‚Üí"})]})]}),2===z&&i.jsxs("div",{className:"confirmation-step",children:[i.jsxs("div",{className:"step-header",children:[i.jsx("div",{className:"step-icon",children:i.jsx(c,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{children:"Check-in best√§tigen"}),i.jsx("p",{children:"M√∂chten Sie sich f√ºr die folgenden Kurse anmelden?"})]})]}),i.jsx("div",{className:"selected-courses",children:f.map(e=>i.jsxs("div",{className:"selected-course-item",children:[i.jsx("div",{className:"course-name",children:e.kurs_name||e.gruppenname}),i.jsxs("div",{className:"course-time",children:[i.jsx(m,{size:16}),C(e.uhrzeit_start)," - ",C(e.uhrzeit_ende)]})]},e.stundenplan_id))}),i.jsxs("div",{className:"action-buttons",children:[i.jsx("button",{onClick:()=>w(1),className:"btn btn-secondary",children:"‚Üê Zur√ºck"}),i.jsx("button",{onClick:async()=>{if(g&&0!==f.length){j(!0),v("");try{const i={mitglied_id:g.mitglied_id,stundenplan_ids:f.map(e=>e.stundenplan_id),checkin_method:"touch"},n=await fetch(`${B}/checkin/multi-course`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)});if(!n.ok){const e=await n.text();let i;try{const r=JSON.parse(e);i=r.error||r.message||`HTTP ${n.status}`}catch{i=`HTTP ${n.status}: ${e}`}throw new Error(i)}let r=(await n.json()).message||`Check-in erfolgreich f√ºr ${g.vorname} ${g.nachname}!`;try{const e=await fetch(`${B}/mitglieder/${g.mitglied_id}/birthday-check`),i=await e.json();i.hasBirthday&&(r=`üéâ ${r}\n\nüéÇ Herzlichen Gl√ºckwunsch zum ${i.mitglied.alter}. Geburtstag, ${g.vorname}! üéâ`)}catch(e){console.error("Fehler beim Geburtstags-Check:",e)}S(`‚úÖ ${r}`),setTimeout(()=>{window.location.pathname.includes("/member")&&window.location.reload(),s()},3e3)}catch(i){console.error("Check-in Fehler:",i),v("Check-in Fehler: "+i.message)}finally{j(!1)}}else v("Bitte w√§hlen Sie mindestens einen Kurs aus")},disabled:b,className:"btn btn-success btn-large",children:b?"L√§dt...":"Jetzt anmelden!"})]})]})]})]})}):i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content checkin-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Check-in"}),i.jsx("button",{onClick:s,className:"close-button",children:i.jsx(d,{size:24})})]}),i.jsx("div",{className:"modal-body",children:b?i.jsx("div",{className:"loading",children:"Lade Daten..."}):i.jsx("div",{className:"error-message",children:y})})]})})},B=({memberData:n,onClose:r})=>{const t=e.useRef(null);if(!n)return null;const s=`DOJO_MEMBER:${n.mitglied_id}:${n.vorname} ${n.nachname}:${n.email||"keine-email"}`;return i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content",style:{maxWidth:"500px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(g,{size:24}),"Mein QR-Code"]}),i.jsx("button",{onClick:r,className:"close-button",children:i.jsx(d,{size:24})})]}),i.jsxs("div",{className:"modal-body",style:{textAlign:"center",padding:"2rem"},children:[i.jsxs("div",{style:{background:"linear-gradient(135deg, #1a1a2e, #16213e)",padding:"2rem",borderRadius:"16px",border:"3px solid #ffd700",marginBottom:"1.5rem"},children:[i.jsxs("h3",{style:{color:"#ffd700",marginTop:0,marginBottom:"1rem",fontSize:"1.5rem"},children:[n.vorname," ",n.nachname]}),i.jsx("div",{ref:t,style:{background:"white",padding:"1.5rem",borderRadius:"12px",display:"inline-block",marginBottom:"1rem"},children:i.jsx(w,{value:s,size:250,level:"H",includeMargin:!0,fgColor:"#0f0f23",bgColor:"#ffffff"})}),i.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem",lineHeight:"1.6"},children:[i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{style:{color:"#ffd700"},children:"Mitglieds-ID:"})," ",n.mitglied_id]}),n.email&&i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsx("strong",{style:{color:"#ffd700"},children:"Email:"})," ",n.email]})]})]}),i.jsxs("div",{style:{background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem",fontSize:"0.9rem",color:"#666"},children:[i.jsx("strong",{style:{color:"#ffd700"},children:"üí° Verwendung:"}),i.jsx("br",{}),"Zeige diesen QR-Code beim Check-in vor oder scanne ihn selbst in der App."]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("button",{onClick:()=>{var e;const i=null==(e=t.current)?void 0:e.querySelector("canvas");i&&i.toBlob(e=>{const i=URL.createObjectURL(e),r=document.createElement("a");r.download=`QR-Code-${n.vorname}-${n.nachname}.png`,r.href=i,r.click(),URL.revokeObjectURL(i)})},className:"btn btn-primary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1rem"},children:[i.jsx(h,{size:20}),"Herunterladen"]}),i.jsx("button",{onClick:()=>{var e;const i=null==(e=t.current)?void 0:e.querySelector("canvas");if(!i)return;const r=i.toDataURL("image/png"),s=window.open("","_blank");s.document.write(`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>QR-Code - ${n.vorname} ${n.nachname}</title>\n          <style>\n            body {\n              margin: 0;\n              padding: 40px;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              min-height: 100vh;\n              font-family: Arial, sans-serif;\n              background: white;\n            }\n            .qr-container {\n              text-align: center;\n              border: 3px solid #ffd700;\n              padding: 40px;\n              border-radius: 16px;\n              background: linear-gradient(135deg, #1a1a2e, #16213e);\n            }\n            h1 {\n              color: #ffd700;\n              margin: 0 0 10px 0;\n              font-size: 32px;\n            }\n            h2 {\n              color: #fff;\n              margin: 0 0 30px 0;\n              font-size: 24px;\n              font-weight: normal;\n            }\n            img {\n              display: block;\n              margin: 0 auto 30px;\n              background: white;\n              padding: 20px;\n              border-radius: 12px;\n            }\n            .info {\n              color: rgba(255, 255, 255, 0.9);\n              font-size: 16px;\n              line-height: 1.6;\n            }\n            .info-item {\n              margin: 10px 0;\n            }\n            .label {\n              color: #ffd700;\n              font-weight: bold;\n            }\n            @media print {\n              body { background: white; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="qr-container">\n            <h1>ü•ã Dojo Check-in QR-Code</h1>\n            <h2>${n.vorname} ${n.nachname}</h2>\n            <img src="${r}" alt="QR Code" />\n            <div class="info">\n              <div class="info-item">\n                <span class="label">Mitglieds-ID:</span> ${n.mitglied_id}\n              </div>\n              ${n.email?`\n                <div class="info-item">\n                  <span class="label">Email:</span> ${n.email}\n                </div>\n              `:""}\n              ${n.geburtsdatum?`\n                <div class="info-item">\n                  <span class="label">Geburtsdatum:</span> ${new Date(n.geburtsdatum).toLocaleDateString("de-DE")}\n                </div>\n              `:""}\n              <div class="info-item" style="margin-top: 20px; font-size: 14px; color: rgba(255,255,255,0.7);">\n                Scannen Sie diesen QR-Code beim Check-in\n              </div>\n            </div>\n          </div>\n        </body>\n      </html>\n    `),s.document.close(),setTimeout(()=>{s.print()},250)},className:"btn btn-secondary",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.875rem 1rem",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 107, 53, 0.2))",border:"2px solid #ffd700",color:"#ffd700"},children:"üñ®Ô∏è Drucken"})]}),i.jsx("button",{onClick:r,className:"btn btn-secondary",style:{width:"100%",marginTop:"1rem"},children:"Schlie√üen"})]})]})})},D=({showRefresh:n=!0,compact:r=!1})=>{const[t,s]=e.useState(null),[a,l]=e.useState(!1),d=[{text:"Der Weg ist das Ziel. Jeder Schritt bringt dich n√§her zu dir selbst.",author:"Bruce Lee",category:"Philosophie"},{text:"Disziplin ist die Br√ºcke zwischen Zielen und Erfolg.",author:"Jim Rohn",category:"Disziplin"},{text:"Der beste Kampf ist der, der vermieden wird.",author:"Morihei Ueshiba",category:"Weisheit"},{text:"Nicht die St√§rke, sondern die Ausdauer macht den Unterschied.",author:"Miyamoto Musashi",category:"Ausdauer"},{text:"Ein Meister ist jemand, der nie aufh√∂rt zu lernen.",author:"Gichin Funakoshi",category:"Lernen"},{text:"Die gr√∂√üte St√§rke liegt in der Ruhe des Geistes.",author:"Lao Tzu",category:"Mentalit√§t"},{text:"Jeder Tag ist eine neue Chance, besser zu werden.",author:"Anonym",category:"Motivation"},{text:"Der K√∂rper folgt dem Geist. Trainiere beides.",author:"O-Sensei",category:"Training"},{text:"Respekt ist das Fundament aller Kampfk√ºnste.",author:"Traditionell",category:"Werte"},{text:"Fall siebenmal auf, steh achtmal auf.",author:"Japanisches Sprichwort",category:"Durchhalteverm√∂gen"},{text:"Heute ist perfekt f√ºr Training - egal wie das Wetter ist!",author:"Dojo Weisheit",category:"Motivation"},{text:"Jede Stunde Training bringt dich n√§her zu deinem Ziel.",author:"Sensei",category:"Fortschritt"},{text:"Die Kunst liegt nicht im Perfektsein, sondern im Besserwerden.",author:"Kampfkunst Weisheit",category:"Verbesserung"},{text:"Stille Wasser sind tief. Trainiere mit Geduld.",author:"Zen Weisheit",category:"Geduld"},{text:"Ein G√ºrtel ist nur ein Stoff. Der wahre Meister ist in dir.",author:"Moderne Weisheit",category:"Selbstverwirklichung"}];return e.useEffect(()=>{(()=>{const e=new Date,i=Math.floor((e-new Date(e.getFullYear(),0,0))/864e5);s(d[i%d.length])})()},[]),t?i.jsxs("div",{className:"motivation-quotes "+(r?"compact":""),children:[i.jsxs("div",{className:"quote-header",children:[i.jsx("div",{className:"quote-icon",children:i.jsx(u,{size:r?16:20})}),i.jsx("h3",{children:"Motivation des Tages"}),n&&i.jsx("button",{className:"refresh-button",onClick:()=>{l(!0),setTimeout(()=>{const e=Math.floor(Math.random()*d.length);s(d[e]),l(!1)},500)},disabled:a,title:"Neues Zitat laden",children:i.jsx(x,{size:14,className:a?"spinning":""})})]}),i.jsxs("div",{className:"quote-content",children:[i.jsxs("blockquote",{className:"quote-text",children:['"',t.text,'"']}),i.jsxs("div",{className:"quote-meta",children:[i.jsxs("cite",{className:"quote-author",children:["‚Äî ",t.author]}),i.jsx("span",{className:"quote-category",children:t.category})]})]})]}):i.jsx("div",{className:"motivation-quotes "+(r?"compact":""),children:i.jsx("div",{className:"quote-loading",children:i.jsx("div",{className:"loading-spinner"})})})},C=()=>{const{user:r}=n(),[a,l]=e.useState([]),[g,h]=e.useState(!0),[u,x]=e.useState(!1),[j,y]=e.useState(!0),[v,k]=e.useState({enabled:!0,advanceMinutes:30,soundEnabled:!0,emailReminders:!1}),S=async()=>{if(!(null==r?void 0:r.mitglied_id))return console.warn("‚ö†Ô∏è Keine mitglied_id - Kurse k√∂nnen nicht geladen werden"),void h(!1);h(!0);try{console.log("üìÖ Lade Kurse... (showAllCourses:",j,")");const e=j?`${t.apiBaseUrl}/kurse?include_schedule=true`:`${t.apiBaseUrl}/mitglieder/${r.mitglied_id}/kurse`,i=await s(e);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const n=await i.json();console.log("üìÖ Kurse geladen:",n);const a=(Array.isArray(n)?n:n.kurse||[]).map(e=>{if(!e.wochentag||!e.uhrzeit)return console.log(`‚ö†Ô∏è Kurs "${e.name}" hat keinen Stundenplan - √ºberspringe`),null;const i=new Date,n=i.getDay();let r=({Montag:1,Dienstag:2,Mittwoch:3,Donnerstag:4,Freifag:5,Freitag:5,Samstag:6,Sonntag:0}[e.wochentag]||1)-n;const[t,s]=(e.uhrzeit||"18:00").split(":").map(Number),a=new Date(i);0===r?(a.setHours(t||18,s||0,0,0),a<=new Date&&(r=7,a.setDate(i.getDate()+7))):(r<0&&(r+=7),a.setDate(i.getDate()+r),a.setHours(t||18,s||0,0,0));let l=90;if(e.dauer)if("string"==typeof e.dauer&&e.dauer.includes(":")){const[i,n]=e.dauer.split(":").map(Number);l=60*(i||0)+(n||0)}else l=parseInt(e.dauer)||90;return{id:e.kurs_id||e.id,kurs_name:e.name||e.kurs_name,trainer_name:e.trainer_vorname&&e.trainer_nachname?`${e.trainer_vorname} ${e.trainer_nachname}`:e.trainer_name||"TBA",datum:a,uhrzeit:e.uhrzeit,raum:e.raum||"Hauptdojo",duration:l,stil_name:e.stil_name,wochentag:e.wochentag}}).filter(e=>null!==e&&e.datum>new Date);a.sort((e,i)=>e.datum-i.datum);const d=a.map(e=>{const i=new Date(e.datum.getTime()-60*v.advanceMinutes*1e3);return{...e,reminderTime:i,dismissed:!1,reminderSent:i<=new Date}});console.log("‚úÖ Erinnerungen erstellt:",d.length),l(d)}catch(e){console.error("‚ùå Fehler beim Laden der Kurse:",e),l([])}finally{h(!1)}},z=e=>{const i=e-new Date;if(i<=0)return"Jetzt";const n=Math.floor(i/36e5),r=Math.floor(i%36e5/6e4);return n>0?`${n}h ${r}m`:`${r}m`},w=e=>e.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),_=e=>{const i=new Date,n=new Date(i.getTime()+864e5);return e.toDateString()===i.toDateString()?"Heute":e.toDateString()===n.toDateString()?"Morgen":e.toLocaleDateString("de-DE",{weekday:"short",day:"numeric",month:"short"})};if(e.useEffect(()=>{(null==r?void 0:r.mitglied_id)&&S();const e=setInterval(()=>{(null==r?void 0:r.mitglied_id)&&S()},3e4);return()=>clearInterval(e)},[v.advanceMinutes,j,null==r?void 0:r.mitglied_id]),g)return i.jsx("div",{className:"training-reminders",children:i.jsxs("div",{className:"reminders-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("span",{children:"Lade Erinnerungen..."})]})});const N=a.filter(e=>!e.dismissed&&e.reminderTime<=new Date);return i.jsxs("div",{className:"training-reminders",children:[i.jsxs("div",{className:"reminders-header",children:[i.jsxs("div",{className:"reminders-title",children:[i.jsx(f,{size:20}),i.jsx("h3",{children:"Trainings-Erinnerungen"}),N.length>0&&i.jsx("span",{className:"reminders-badge",children:N.length})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{className:"settings-button",onClick:()=>y(!j),title:j?"Nur meine Kurse":"Alle Kurse anzeigen",style:{background:j?"rgba(255, 215, 0, 0.2)":"rgba(255, 255, 255, 0.1)",border:j?"1px solid rgba(255, 215, 0, 0.5)":"1px solid rgba(255, 255, 255, 0.2)",color:j?"#ffd700":"rgba(255, 255, 255, 0.7)"},children:i.jsx(p,{size:16})}),i.jsx("button",{className:"settings-button",onClick:()=>x(!u),title:"Einstellungen",children:i.jsx(b,{size:16})})]})]}),u&&i.jsxs("div",{className:"reminder-settings",children:[i.jsx("h4",{children:"Erinnerungseinstellungen"}),i.jsx("div",{className:"setting-item",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",checked:v.enabled,onChange:e=>k(i=>({...i,enabled:e.target.checked}))}),"Erinnerungen aktiviert"]})}),i.jsx("div",{className:"setting-item",children:i.jsxs("label",{children:["Erinnerung ",v.advanceMinutes," Minuten vorher",i.jsx("input",{type:"range",min:"15",max:"120",step:"15",value:v.advanceMinutes,onChange:e=>k(i=>({...i,advanceMinutes:parseInt(e.target.value)}))})]})}),i.jsx("div",{className:"setting-item",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",checked:v.soundEnabled,onChange:e=>k(i=>({...i,soundEnabled:e.target.checked}))}),"Sound-Benachrichtigungen"]})})]}),N.length>0?i.jsx("div",{className:"active-reminders",children:N.map(e=>i.jsxs("div",{className:"reminder-card active",children:[i.jsx("div",{className:"reminder-icon",children:i.jsx(f,{size:20})}),i.jsxs("div",{className:"reminder-content",children:[i.jsxs("div",{className:"reminder-course",children:[i.jsx("h4",{children:e.kurs_name}),i.jsx("span",{className:"reminder-trainer",children:e.trainer_name})]}),i.jsxs("div",{className:"reminder-time",children:[i.jsx(m,{size:14}),i.jsxs("span",{children:[_(e.datum)," - ",w(e.datum)]}),i.jsxs("span",{className:"time-until",children:["in ",z(e.datum)]})]}),i.jsxs("div",{className:"reminder-details",children:[i.jsx(o,{size:14}),i.jsxs("span",{children:[e.raum," ‚Ä¢ ",e.duration," Min"]})]})]}),i.jsx("button",{className:"dismiss-button",onClick:()=>{return i=e.id,void l(e=>e.map(e=>e.id===i?{...e,dismissed:!0}:e));var i},title:"Schlie√üen",children:i.jsx(d,{size:16})})]},e.id))}):i.jsxs("div",{className:"no-reminders",children:[i.jsx(c,{size:32}),i.jsx("p",{children:"Keine aktiven Erinnerungen"}),i.jsx("span",{children:"Du bist bereit f√ºr dein Training!"})]}),i.jsxs("div",{className:"upcoming-courses",children:[i.jsx("h4",{children:"Kommende Kurse"}),a.filter(e=>!e.dismissed&&e.reminderTime>new Date).map(e=>i.jsxs("div",{className:"course-preview",children:[i.jsxs("div",{className:"course-info",children:[i.jsx("span",{className:"course-name",style:{fontWeight:"bold",fontSize:"0.95rem",color:"rgba(255, 255, 255, 0.95)"},children:e.kurs_name}),i.jsxs("span",{className:"course-time",children:[_(e.datum)," - ",w(e.datum)]}),i.jsxs("div",{className:"course-details",style:{display:"flex",gap:"0.75rem",fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:[e.trainer_name&&i.jsxs("span",{children:["üë®‚Äçüè´ ",e.trainer_name]}),e.raum&&i.jsxs("span",{children:["üìç ",e.raum]}),e.stil_name&&i.jsxs("span",{children:["ü•ã ",e.stil_name]})]})]}),i.jsxs("span",{className:"time-until",children:["in ",z(e.datum)]})]},e.id))]})]})},$=()=>i.jsxs("div",{className:"widget buddy-gruppen-widget",children:[i.jsx("h3",{children:"Buddy-Gruppen"}),i.jsx("p",{children:"Deine Trainingspartner"})]}),T=()=>{const{t:r}=a("member"),{user:d}=n(),c=_(),[u,x]=e.useState({trainingsstunden:0,anwesenheit:0,offeneBeitraege:0,naechstePruefung:null}),[p,b]=e.useState(null),[w,T]=e.useState([]),[R,M]=e.useState([]),[W,E]=e.useState(null),[A,L]=e.useState({checkin:!1,qrCode:!1,examRegistration:!1}),[K,F]=e.useState({memberStile:[],styleSpecificData:{},stile:[],loading:!1}),[I,P]=e.useState({nextExam:null,approved:[],results:[],selected:null,acceptedConditions:!1}),[H,U]=e.useState({list:[],unreadCount:0}),q=A.checkin,O=A.qrCode,G=A.examRegistration,J=K.memberStile,Q=K.styleSpecificData,Z=K.stile;K.loading;const V=I.nextExam,Y=I.approved,X=I.results,ee=I.selected,ie=I.acceptedConditions,ne=H.list,re=H.unreadCount,te=e.useCallback(e=>L(i=>({...i,checkin:e})),[]),se=e.useCallback(e=>L(i=>({...i,qrCode:e})),[]),ae=e.useCallback(e=>L(i=>({...i,examRegistration:e})),[]),le=e.useCallback(e=>F(i=>({...i,memberStile:"function"==typeof e?e(i.memberStile):e})),[]),de=e.useCallback(e=>F(i=>({...i,styleSpecificData:"function"==typeof e?e(i.styleSpecificData):e})),[]),oe=e.useCallback(e=>F(i=>({...i,stile:e})),[]),ce=e.useCallback(e=>F(i=>({...i,loading:e})),[]),me=e.useCallback(e=>P(i=>({...i,nextExam:e})),[]),ge=e.useCallback(e=>P(i=>({...i,approved:e})),[]),he=e.useCallback(e=>P(i=>({...i,results:e})),[]),ue=e.useCallback(e=>P(i=>({...i,selected:e})),[]),xe=e.useCallback(e=>P(i=>({...i,acceptedConditions:e})),[]),fe=e.useCallback(e=>U(i=>({...i,list:e})),[]),pe=e.useCallback(e=>U(i=>({...i,unreadCount:e})),[]),be=e=>{switch(e){case"checkin":te(!0);break;case"notifications":const e=document.getElementById("member-notifications");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}},je=async e=>{var i;try{const n=await s(`${t.apiBaseUrl}/notifications/member/${encodeURIComponent(e)}`);if(n.ok){const e=await n.json();e.success&&(fe(e.notifications||[]),pe((null==(i=e.notifications)?void 0:i.filter(e=>!e.read).length)||0))}}catch(n){console.error("‚ùå Fehler beim Laden der Benachrichtigungen:",n)}},ye=async e=>{try{const i=await s(`${t.apiBaseUrl}/pruefungen?mitglied_id=${e}&status=geplant`);if(i.ok){const e=await i.json();if(e.success&&e.pruefungen&&(ge(e.pruefungen),e.pruefungen.length>0)){const i=e.pruefungen[0];me({date:i.pruefungsdatum,stil:i.stil_name,stilId:i.stil_id,graduierung:i.graduierung_nachher})}}}catch(i){console.error("‚ùå Fehler beim Laden der Pr√ºfungstermine:",i)}};e.useEffect(()=>{const e=async()=>{try{const i=null==d?void 0:d.mitglied_id;if(!i)return console.error("‚ùå Keine mitglied_id im User-Token gefunden!",d),void E("Kein Mitgliedsprofil gefunden. Bitte kontaktieren Sie den Administrator.");console.log("üîç Lade Mitgliedsdaten f√ºr ID:",i);const n=await s(`${t.apiBaseUrl}/mitglieder/${i}`);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const r=await n.json();console.log("‚úÖ Mitgliedsdaten empfangen:",r);const a=await s(`${t.apiBaseUrl}/anwesenheit/${r.mitglied_id}`);let l=[];if(a.ok)try{l=await a.json()}catch(e){console.error("‚ùå Fehler beim Parsen der Anwesenheitsdaten:",e)}else 404===a.status||console.error("‚ùå Fehler beim Laden der Anwesenheitsdaten:",a.statusText);const o=await s(`${t.apiBaseUrl}/vertraege?mitglied_id=${r.mitglied_id}`);let c=[];if(o.ok)try{c=await o.json()}catch(e){console.error("‚ùå Fehler beim Parsen der Vertragsdaten:",e)}else 404===o.status||console.error("‚ùå Fehler beim Laden der Vertragsdaten:",o.statusText);const m=Array.isArray(null==c?void 0:c.data)?c.data.filter(e=>e.mitglied_id===r.mitglied_id):Array.isArray(c)?c.filter(e=>e.mitglied_id===r.mitglied_id):[],g=Array.isArray(l)?l.length:0,h=Array.isArray(l)?l.filter(e=>1===e.anwesend||!0===e.anwesend).length:0,u=g>0?Math.round(h/g*100):0,f=1===r.beitragsfrei||!0===r.beitragsfrei?0:Array.isArray(m)?m.filter(e=>"aktiv"===e.status&&(!e.lastschrift_status||"ausstehend"===e.lastschrift_status||"fehlgeschlagen"===e.lastschrift_status)).length:0,p=r.naechste_pruefung_datum;x({trainingsstunden:g,anwesenheit:u,offeneBeitraege:f,naechstePruefung:p}),b(r),console.log("‚úÖ memberData State gesetzt f√ºr:",r.vorname,r.nachname),T(l),M(m),await ve(r.mitglied_id),await je(r.email||(null==d?void 0:d.email)),await ye(r.mitglied_id),await(async e=>{try{const i=await s(`${t.apiBaseUrl}/pruefungen/mitglied/${e}/historie`);if(i.ok){const e=await i.json();e.success&&e.historie&&he(e.historie)}}catch(i){console.error("‚ùå Fehler beim Laden der Pr√ºfungsergebnisse:",i)}})(r.mitglied_id)}catch(i){console.error("‚ùå Fehler beim Laden der Mitgliederdaten:",i),x({trainingsstunden:156,anwesenheit:89,offeneBeitraege:2,naechstePruefung:"2024-02-15"})}};(null==d?void 0:d.email)&&(e(),(async()=>{if(null==d?void 0:d.mitglied_id)try{const e=await s(`${t.apiBaseUrl}/mitglieder/${d.mitglied_id}/birthday-check`),i=await e.json();if(i.hasBirthday){const e={id:`birthday-${Date.now()}`,type:"birthday",title:"üéâ Herzlichen Gl√ºckwunsch!",message:`Alles Gute zum ${i.mitglied.alter}. Geburtstag! Wir w√ºnschen dir einen wundervollen Tag! üéÇ`,timestamp:(new Date).toISOString(),read:!1,priority:"high"};fe(i=>[e,...i]),pe(e=>e+1),console.log(`üéÇ Geburtstag erkannt: ${i.mitglied.vorname} wird ${i.mitglied.alter} Jahre alt!`)}}catch(e){console.error("Fehler beim Geburtstags-Check:",e)}})())},[null==d?void 0:d.email,null==d?void 0:d.mitglied_id]);const ve=async e=>{ce(!0);try{await(async()=>{try{const e=await s(`${t.apiBaseUrl}/stile`);if(e.ok){const i=await e.json();oe(i)}}catch(e){console.error("Fehler beim Laden der Stile:",e)}})();const i=await s(`${t.apiBaseUrl}/mitglieder/${e}/stile`);if(i.ok){const n=await i.json();n.success&&n.stile&&(le(n.stile),n.stile.forEach(async i=>{await ke(e,i.stil_id)}))}}catch(i){console.error("Fehler beim Laden der Mitglied-Stile:",i)}finally{ce(!1)}},ke=async(e,i)=>{var n;try{const r=await s(`${t.apiBaseUrl}/mitglieder/${e}/stil/${i}/data`);if(r.ok){const e=await r.json();if(de(n=>({...n,[i]:e.data})),null==(n=e.data)?void 0:n.naechste_pruefung){const n=new Date(e.data.naechste_pruefung);if(n>new Date){const e=Z.find(e=>e.stil_id===i);me({date:n,stil:(null==e?void 0:e.name)||"Unbekannt",stilId:i})}}}}catch(r){console.error(`Fehler beim Laden stilspezifischer Daten f√ºr Stil ${i}:`,r)}},Se=e=>{c(e)},ze=e=>{const i=new Date,n=new Date(e)-i,r=Math.ceil(n/864e5);return r>0?r:0},we=e.useMemo(()=>{if(console.log("üé® Berechne G√ºrtelfarben...",{memberStile:J,styleSpecificData:Q}),!J||0===J.length)return console.log("‚ö†Ô∏è Keine Stile geladen - Fallback zu Wei√ü"),"Wei√ü";const e=J.map(e=>{var i,n,r;const t=Q[e.stil_id];if(!t||!t.current_graduierung_id){if(e.current_gurtfarbe)return e.current_gurtfarbe;return(null==(n=null==(i=e.graduierungen)?void 0:i[0])?void 0:n.name)||"Wei√ü"}const s=null==(r=e.graduierungen)?void 0:r.find(e=>e.graduierung_id===t.current_graduierung_id);return(null==s?void 0:s.name)||"Wei√ü"}).filter(Boolean);return console.log("üéì Finale G√ºrtel:",e),e.length>0?e.join(", "):"Wei√ü"},[J,Q]);return console.log("üé® MemberDashboard Render - memberData:",p?"vorhanden":"nicht vorhanden",p),console.log("üé® Aktuelle G√ºrtel:",we),i.jsxs("div",{className:"dashboard-container",children:[i.jsx(l,{}),i.jsx("div",{className:"dashboard-content",children:i.jsxs("div",{className:"dashboard-start",children:[i.jsxs("h1",{style:{marginBottom:"0.5rem"},children:[r("welcome.title"),", ",p?`${p.vorname} ${p.nachname}`:(null==d?void 0:d.username)||"Mitglied","! ",i.jsx("span",{style:{marginLeft:"0.5rem"},children:"üëã"})]}),i.jsx("p",{className:"slogan",style:{marginBottom:"1.5rem"},children:r("welcome.subtitle")}),p&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.8rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.5rem",color:"#ffd700",marginBottom:"0.3rem"},children:"üèÉ‚Äç‚ôÇÔ∏è"}),i.jsx("h3",{style:{color:"#ffffff",marginBottom:"0.3rem",fontSize:"0.9rem"},children:r("stats.trainingHours")}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffd700"},children:u.trainingsstunden})]}),i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.5rem",color:"#ffd700",marginBottom:"0.3rem"},children:"üìä"}),i.jsx("h3",{style:{color:"#ffffff",marginBottom:"0.3rem",fontSize:"0.9rem"},children:r("stats.attendance")}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#ffd700"},children:[u.anwesenheit,"%"]})]}),i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.5rem",color:"#ffd700",marginBottom:"0.3rem"},children:"üéì"}),i.jsx("h3",{style:{color:"#ffffff",marginBottom:"0.3rem",fontSize:"0.9rem"},children:r("stats.belt")}),i.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#ffd700"},children:we})]}),i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"1.5rem",color:"#ffd700",marginBottom:"0.3rem"},children:"üí≥"}),i.jsx("h3",{style:{color:"#ffffff",marginBottom:"0.3rem",fontSize:"0.9rem"},children:r("stats.openFees")}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:u.offeneBeitraege>0?"#ef4444":"#10b981"},children:u.offeneBeitraege})]})]}),i.jsxs("div",{className:"cta-grid member-navigation-grid",style:{gridTemplateColumns:"repeat(6, 1fr)",gap:"0.8rem",marginBottom:"1.2rem"},children:[i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/profile"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(j,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.myData")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/schedule"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(o,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.mySchedule")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/payments"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(y,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.myPayments")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/stats"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(v,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.myStats")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/styles"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(k,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.styleAndBelt")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/equipment"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(S,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.equipment")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>Se("/member/kalender"),style:{padding:"1rem",minHeight:"80px"},children:[i.jsx(z,{size:24}),i.jsx("span",{style:{fontSize:"0.9rem"},children:r("navigation.calendarSync")})]})]}),i.jsx("div",{style:{marginTop:"1rem"},children:i.jsxs("div",{className:"cta-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.8rem"},children:[i.jsxs("div",{className:"cta-tile",onClick:()=>be("checkin"),style:{cursor:"pointer",padding:"0.8rem",minHeight:"60px",position:"relative"},children:[i.jsx(m,{size:20}),i.jsx("span",{style:{fontSize:"0.85rem"},children:r("quickActions.checkin")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>se(!0),style:{cursor:"pointer",padding:"0.8rem",minHeight:"60px",position:"relative",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 107, 53, 0.15))",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[i.jsx(g,{size:20}),i.jsx("span",{style:{fontSize:"0.85rem"},children:r("quickActions.myQrCode")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>c("/app-install"),style:{cursor:"pointer",padding:"0.8rem",minHeight:"60px",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"0.3rem",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 237, 78, 0.15))",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[i.jsx(h,{size:20}),i.jsx("span",{style:{fontSize:"0.85rem"},children:r("quickActions.installApp")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>c("/member/events"),style:{cursor:"pointer",padding:"0.8rem",minHeight:"60px",position:"relative"},children:[i.jsx(o,{size:20}),i.jsx("span",{style:{fontSize:"0.85rem"},children:r("quickActions.events")})]}),i.jsxs("div",{className:"cta-tile",onClick:()=>be("notifications"),style:{cursor:"pointer",padding:"0.8rem",minHeight:"60px",position:"relative"},children:[i.jsx(f,{size:20}),i.jsx("span",{style:{fontSize:"0.85rem"},children:r("quickActions.notifications")}),re>0&&i.jsx("span",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#ef4444",color:"white",padding:"0.1rem 0.4rem",borderRadius:"10px",fontSize:"0.7rem",fontWeight:"bold"},children:re})]})]})}),p&&i.jsxs("div",{style:{marginTop:"1.5rem"},children:[i.jsx("h2",{style:{marginBottom:"0.8rem",color:"#ffd700",fontSize:"1.2rem"},children:r("info.title")}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:[p.trainer_empfehlung&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üë®‚Äçüè´"}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.3rem",fontSize:"0.9rem"},children:"Trainer-Empfehlung"}),i.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.3rem",fontSize:"0.85rem"},children:p.trainer_empfehlung})]})]}),p.medizinische_hinweise&&"Keine besonderen Hinweise"!==p.medizinische_hinweise&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üè•"}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.3rem",fontSize:"0.9rem"},children:"Medizinische Hinweise"}),i.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.3rem",fontSize:"0.85rem"},children:p.medizinische_hinweise})]})]}),V&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üéì"}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.3rem",fontSize:"0.9rem"},children:"N√§chste Pr√ºfung"}),i.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.2rem",fontSize:"0.85rem",fontWeight:"500"},children:[V.stil," - ",(_e=V.date,_e?new Date(_e).toLocaleDateString("de-DE"):"Keine geplant")]}),i.jsxs("div",{style:{color:"#10B981",fontSize:"0.8rem",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"0.2rem 0.5rem",borderRadius:"6px",display:"inline-block"},children:[ze(V.date)," Tage verbleiben"]})]})]}),Object.values(Q).some(e=>e&&void 0!==e.stunden_seit_letzter_pruefung)&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üéØ"}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.3rem",fontSize:"0.9rem"},children:"Trainingsfortschritt"}),Object.entries(Q).map(([e,n])=>{var r;if(!n||!n.stunden_seit_letzter_pruefung)return null;const t=J.find(i=>i.stil_id===parseInt(e));if(!t)return null;const s=null==(r=t.graduierungen)?void 0:r.find(e=>e.graduierung_id===n.current_graduierung_id),a=(null==s?void 0:s.min_stunden)||0,l=Math.max(0,a-n.stunden_seit_letzter_pruefung);return i.jsxs("div",{style:{marginBottom:"0.5rem",paddingBottom:"0.5rem",borderBottom:"1px solid rgba(255, 215, 0, 0.1)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem",marginBottom:"0.2rem"},children:[i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},children:t.name}),l>0?i.jsxs("span",{style:{color:"#ff6b35",fontSize:"0.8rem",fontWeight:"600"},children:["Noch ",l,"h"]}):i.jsx("span",{style:{color:"#10B981",fontSize:"0.8rem",fontWeight:"600"},children:"‚úÖ Bereit"})]}),i.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:i.jsx("div",{style:{width:`${Math.min(100,n.stunden_seit_letzter_pruefung/a*100)}%`,height:"100%",background:"linear-gradient(90deg, #ffd700, #ff6b35)",borderRadius:"2px",transition:"width 0.5s ease"}})})]},e)}),i.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",fontStyle:"italic"},children:'üí° Klicke auf "Stil & Gurt" f√ºr Details'})]})]}),J.length>0&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"ü•ã"}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.3rem",fontSize:"0.9rem"},children:"Meine Kampfkunst-Stile"}),J.map((e,n)=>{var r,t;const s=Q[e.stil_id],a=(null==s?void 0:s.current_graduierung_id)?null==(r=e.graduierungen)?void 0:r.find(e=>e.graduierung_id===s.current_graduierung_id):null==(t=e.graduierungen)?void 0:t[0];return i.jsxs("div",{style:{marginBottom:n<J.length-1?"0.5rem":"0",paddingBottom:n<J.length-1?"0.5rem":"0",borderBottom:n<J.length-1?"1px solid rgba(255, 215, 0, 0.1)":"none"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem"},children:[i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.9)",fontWeight:"500"},children:e.name}),a&&i.jsx("span",{style:{color:"#ffd700",fontWeight:"600",background:"rgba(255, 215, 0, 0.1)",padding:"0.2rem 0.5rem",borderRadius:"6px",fontSize:"0.8rem"},children:a.name})]}),(null==s?void 0:s.letzte_pruefung)&&i.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.2rem"},children:["Letzte Pr√ºfung: ",new Date(s.letzte_pruefung).toLocaleDateString("de-DE")]})]},e.stil_id)}),i.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",fontStyle:"italic"},children:'üí° Klicke auf "Stil & Gurt" f√ºr Details'})]})]}),p.rabatt_prozent&&p.rabatt_grund&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶"}),i.jsxs("div",{children:[i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.3rem",fontSize:"0.9rem"},children:"Familienrabatt"}),i.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.3rem",fontSize:"0.85rem"},children:["Du erh√§ltst ",p.rabatt_prozent,"% Rabatt (",p.rabatt_grund,")"]})]})]}),i.jsx($,{compact:!0}),i.jsx(C,{}),i.jsx(D,{compact:!0}),Y.length>0&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.8rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üéì"}),i.jsx("div",{style:{flex:1},children:i.jsxs("h4",{style:{color:"#8b5cf6",marginBottom:"0.2rem",fontSize:"0.9rem"},children:["Zugelassene Pr√ºfungen",i.jsx("span",{style:{marginLeft:"0.5rem",background:"#8b5cf6",color:"white",padding:"0.1rem 0.4rem",borderRadius:"10px",fontSize:"0.7rem",fontWeight:"bold"},children:Y.length})]})})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Y.map((e,n)=>i.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"0.6rem"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.3rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"bold",color:"#8b5cf6",fontSize:"0.85rem",marginBottom:"0.2rem"},children:e.stil_name}),i.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.8rem"},children:["Pr√ºfung zum ",e.graduierung_nachher]})]}),e.graduierung_nachher&&e.farbe_nachher&&i.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:e.farbe_nachher,border:"2px solid rgba(255, 255, 255, 0.3)",flexShrink:0},title:e.graduierung_nachher})]}),i.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.75rem",marginBottom:"0.2rem"},children:["üìÖ ",e.pruefungsdatum?new Date(e.pruefungsdatum).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Termin wird noch bekanntgegeben"]}),e.pruefungsdatum&&ze(e.pruefungsdatum)>0&&i.jsxs("div",{style:{color:"#10B981",fontSize:"0.75rem",fontWeight:"600",background:"rgba(16, 185, 129, 0.1)",padding:"0.2rem 0.5rem",borderRadius:"6px",display:"inline-block",marginTop:"0.3rem"},children:["In ",ze(e.pruefungsdatum)," Tagen"]}),e.teilnahme_bestaetigt?i.jsx("div",{style:{marginTop:"0.5rem",width:"100%",padding:"0.5rem",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"bold",color:"#10B981",textAlign:"center"},children:"‚úÖ Teilnahme best√§tigt"}):i.jsx("button",{onClick:()=>(e=>{ue(e),xe(!1),ae(!0)})(e),style:{marginTop:"0.5rem",width:"100%",padding:"0.5rem",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",color:"white",border:"none",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>e.target.style.transform="scale(1.02)",onMouseOut:e=>e.target.style.transform="scale(1)",children:"Jetzt Anmelden"})]},e.pruefung_id))})]}),X.length>0&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.8rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üèÜ"}),i.jsx("div",{style:{flex:1},children:i.jsx("h4",{style:{color:"#ffd700",marginBottom:"0.2rem",fontSize:"0.9rem"},children:"Pr√ºfungsergebnisse"})})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[X.slice(0,3).map((e,n)=>i.jsxs("div",{style:{background:e.bestanden?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",border:e.bestanden?"1px solid rgba(16, 185, 129, 0.3)":"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"0.6rem"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.3rem"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"bold",color:e.bestanden?"#10b981":"#ef4444",fontSize:"0.85rem",marginBottom:"0.2rem"},children:e.stil_name}),i.jsx("div",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.8rem"},children:e.graduierung_nachher})]}),i.jsx("div",{style:{fontSize:"1.2rem"},children:e.bestanden?"‚úÖ":"‚ùå"})]}),i.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.75rem"},children:["üìÖ ",new Date(e.pruefungsdatum).toLocaleDateString("de-DE")]}),e.punktzahl&&e.max_punktzahl&&i.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0.2rem"},children:["Punktzahl: ",e.punktzahl," / ",e.max_punktzahl]})]},e.pruefung_id)),X.length>3&&i.jsxs("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",fontStyle:"italic",marginTop:"0.2rem"},children:["+",X.length-3," weitere Pr√ºfungen"]})]})]}),i.jsxs("div",{id:"member-notifications",style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.8rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"1.5rem"},children:"üì¢"}),i.jsx("div",{style:{flex:1},children:i.jsxs("h4",{style:{color:"#ffd700",marginBottom:"0.2rem",fontSize:"0.9rem"},children:[r("notifications.title"),re>0&&i.jsx("span",{style:{marginLeft:"0.5rem",background:"#ef4444",color:"white",padding:"0.1rem 0.4rem",borderRadius:"10px",fontSize:"0.7rem",fontWeight:"bold"},children:re})]})})]}),ne.length>0?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[ne.slice(0,3).map((e,n)=>i.jsxs("div",{style:{background:e.read?"rgba(255, 255, 255, 0.03)":"rgba(255, 215, 0, 0.1)",border:e.read?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",padding:"0.6rem"},children:[i.jsx("div",{style:{fontWeight:e.read?"normal":"bold",color:e.read?"rgba(255, 255, 255, 0.8)":"#ffd700",fontSize:"0.85rem",marginBottom:"0.2rem"},children:e.subject||e.title}),i.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.8rem",marginBottom:"0.3rem"},children:e.message}),i.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.7rem"},children:e.created_at?new Date(e.created_at).toLocaleString("de-DE"):"Gerade eben"}),e.requires_confirmation&&!e.confirmed_at&&i.jsx("button",{onClick:()=>(async e=>{try{const i=await s(`${t.apiBaseUrl}/notifications/confirm/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mitglied_id:p.id})});if(i.ok)(await i.json()).success&&(alert("‚úÖ Benachrichtigung best√§tigt!"),await je(p.email||(null==d?void 0:d.email)));else{const e=await i.json();alert("‚ùå Fehler: "+(e.error||"Konnte nicht best√§tigt werden"))}}catch(i){console.error("‚ùå Fehler beim Best√§tigen der Benachrichtigung:",i),alert("‚ùå Fehler beim Best√§tigen der Benachrichtigung")}})(e.id),style:{marginTop:"0.5rem",padding:"0.4rem 0.8rem",background:"linear-gradient(135deg, #22c55e, #10b981)",border:"none",borderRadius:"6px",color:"white",fontSize:"0.75rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(34, 197, 94, 0.3)"},onMouseOver:e=>{e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(34, 197, 94, 0.4)"},onMouseOut:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 2px 8px rgba(34, 197, 94, 0.3)"},children:"‚úì Best√§tigen"}),e.requires_confirmation&&e.confirmed_at&&i.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.4rem 0.8rem",background:"rgba(34, 197, 94, 0.2)",border:"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"6px",color:"#22c55e",fontSize:"0.75rem",fontWeight:"600",display:"inline-block"},children:["‚úì Best√§tigt am ",new Date(e.confirmed_at).toLocaleString("de-DE")]})]},e.id||n)),ne.length>3&&i.jsxs("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",fontStyle:"italic",marginTop:"0.2rem"},children:["+",ne.length-3," weitere Benachrichtigungen"]})]}):i.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem",fontStyle:"italic",margin:0},children:["üì≠ ",r("notifications.noNotifications")]})]})]})]}),G&&ee&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"1rem"},children:i.jsxs("div",{style:{background:"#1a1a2e",border:"2px solid rgba(139, 92, 246, 0.4)",borderRadius:"16px",padding:"2rem",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",color:"white"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"2px solid rgba(139, 92, 246, 0.3)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem"},children:[i.jsx("div",{style:{fontSize:"2rem"},children:"üéì"}),i.jsxs("div",{children:[i.jsx("h2",{style:{margin:0,color:"#8b5cf6",fontSize:"1.5rem"},children:"Pr√ºfungsanmeldung"}),i.jsx("p",{style:{margin:"0.2rem 0 0 0",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem"},children:"Best√§tige deine Teilnahme"})]})]}),i.jsx("button",{onClick:()=>{ae(!1),ue(null),xe(!1)},style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.6)",fontSize:"1.5rem",cursor:"pointer",padding:"0.2rem",lineHeight:1},children:"√ó"})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("div",{style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"Kampfkunst-Stil"}),i.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#8b5cf6",marginBottom:"0.5rem"},children:ee.stil_name}),i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.2rem"},children:"Pr√ºfung zum"}),i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffd700"},children:ee.graduierung_nachher})]}),ee.farbe_nachher&&i.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:ee.farbe_nachher,border:"3px solid rgba(255, 255, 255, 0.3)",flexShrink:0},title:ee.graduierung_nachher})]})}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.8rem",marginBottom:"1rem"},children:[ee.pruefungsdatum&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"0.8rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"üìÖ Datum & Uhrzeit"}),i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"white"},children:new Date(ee.pruefungsdatum).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),ee.pruefungszeit&&i.jsxs("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.8)",marginTop:"0.2rem"},children:["Uhrzeit: ",ee.pruefungszeit," Uhr"]})]}),ee.pruefungsort&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"0.8rem",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"üìç Ort"}),i.jsx("div",{style:{fontSize:"0.95rem",color:"white"},children:ee.pruefungsort})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem",marginBottom:"1rem"},children:[ee.pruefungsgebuehr&&i.jsxs("div",{style:{background:"rgba(255, 215, 0, 0.1)",borderRadius:"8px",padding:"0.8rem",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"üí∞ Pr√ºfungsgeb√ºhr"}),i.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#ffd700"},children:[parseFloat(ee.pruefungsgebuehr).toFixed(2)," ‚Ç¨"]})]}),ee.anmeldefrist&&i.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:"8px",padding:"0.8rem",border:"1px solid rgba(239, 68, 68, 0.2)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"‚è∞ Anmeldefrist"}),i.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#ef4444"},children:new Date(ee.anmeldefrist).toLocaleDateString("de-DE")})]})]}),ee.gurtlaenge&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"0.8rem",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"üìè Empfohlene Gurtl√§nge"}),i.jsx("div",{style:{fontSize:"0.95rem",color:"white"},children:ee.gurtlaenge})]}),ee.bemerkungen&&i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"0.8rem",border:"1px solid rgba(255, 255, 255, 0.1)",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.3rem"},children:"üìù Bemerkungen"}),i.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.8)",whiteSpace:"pre-line"},children:ee.bemerkungen})]}),ee.teilnahmebedingungen&&i.jsxs("div",{style:{background:"rgba(99, 102, 241, 0.1)",borderRadius:"8px",padding:"1rem",border:"1px solid rgba(99, 102, 241, 0.3)",marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"#6366f1",marginBottom:"0.5rem"},children:"üìã Teilnahmebedingungen"}),i.jsx("div",{style:{fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.9)",whiteSpace:"pre-line"},children:ee.teilnahmebedingungen})]})]}),i.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:i.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.8rem",cursor:"pointer",fontSize:"0.9rem"},children:[i.jsx("input",{type:"checkbox",checked:ie,onChange:e=>xe(e.target.checked),style:{marginTop:"0.2rem",width:"18px",height:"18px",cursor:"pointer",flexShrink:0}}),i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.9)"},children:"Ich best√§tige hiermit meine Teilnahme an der Pr√ºfung und akzeptiere die Teilnahmebedingungen. Mir ist bewusst, dass die Pr√ºfungsgeb√ºhr f√§llig wird."})]})}),i.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[i.jsx("button",{onClick:()=>{ae(!1),ue(null),xe(!1)},style:{flex:1,padding:"0.8rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>e.target.style.background="rgba(255, 255, 255, 0.15)",onMouseOut:e=>e.target.style.background="rgba(255, 255, 255, 0.1)",children:"Abbrechen"}),i.jsx("button",{onClick:async()=>{if(ee&&ie)try{const e=await s(`${t.apiBaseUrl}/pruefungen/${ee.pruefung_id}/teilnahme-bestaetigen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mitglied_id:p.mitglied_id})});if(!e.ok){const i=await e.json();throw new Error(i.error||"Fehler bei der Anmeldung")}await e.json();await ye(p.mitglied_id),ae(!1),ue(null),xe(!1),alert("‚úÖ Deine Teilnahme wurde erfolgreich best√§tigt!")}catch(e){console.error("‚ùå Fehler bei Pr√ºfungsanmeldung:",e),alert(`Fehler bei der Anmeldung: ${e.message}`)}else alert("Bitte akzeptiere die Teilnahmebedingungen.")},disabled:!ie,style:{flex:1,padding:"0.8rem",background:ie?"linear-gradient(135deg, #8b5cf6, #6366f1)":"rgba(139, 92, 246, 0.3)",border:"none",borderRadius:"8px",color:ie?"white":"rgba(255, 255, 255, 0.4)",fontSize:"1rem",fontWeight:"bold",cursor:ie?"pointer":"not-allowed",transition:"all 0.2s ease"},onMouseOver:e=>{ie&&(e.target.style.transform="scale(1.02)")},onMouseOut:e=>e.target.style.transform="scale(1)",children:"‚úÖ Teilnahme best√§tigen"})]})]})}),q&&i.jsx(N,{onClose:()=>te(!1)}),O&&p&&i.jsx(B,{memberData:p,onClose:()=>se(!1)})]})})]});var _e};export{T as default};
