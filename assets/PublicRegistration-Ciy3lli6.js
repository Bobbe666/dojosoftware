import{a as e,j as n}from"./query-Caj74EYQ.js";import{f as r,c as a}from"./index-DJzZu8AC.js";import"./vendor-router-Co3o87Zc.js";import"./icons-DiLw-1i5.js";import"./charts-C1Gv3M_c.js";const s=({onClose:s})=>{const[i,t]=e.useState(1),[l,d]=e.useState(7),[o,c]=e.useState(!1),[m,u]=e.useState(""),[h,g]=e.useState(""),[p,x]=e.useState([]),[b,f]=e.useState(!1),[j,v]=e.useState(!1),[y,k]=e.useState([]),[N,w]=e.useState(!1),[_,C]=e.useState({vorname:"",nachname:"",geburtsdatum:"",geschlecht:"",email:"",password:"",passwordConfirm:""}),[S,z]=e.useState({email:"",password:"",passwordConfirm:"",vorname:"",nachname:"",geburtsdatum:"",geschlecht:"",strasse:"",hausnummer:"",plz:"",ort:"",telefon:"",iban:"",bic:"",bank_name:"",kontoinhaber:"",tarif_id:"",billing_cycle:"monatlich",payment_method:"lastschrift",vertragsbeginn:"",buddy_einladungen:{gruppe_erstellen:!1,gruppe_name:"",freunde:[{email:"",name:""},{email:"",name:""},{email:"",name:""}]},gesundheitsfragen:{vorerkrankungen:"nein",medikamente:"nein",herzprobleme:"nein",rueckenprobleme:"nein",gelenkprobleme:"nein",sonstige_einschraenkungen:"",notfallkontakt_name:"",notfallkontakt_telefon:"",hausarzt_name:"",hausarzt_telefon:""},agb_accepted:!1,dsgvo_accepted:!1,widerrufsrecht_acknowledged:!1,kuendigungshinweise_acknowledged:!1});e.useEffect(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0,B()},[]);const B=async()=>{try{const e=await r(`${a.apiBaseUrl}/public/tarife`),n=await e.json();n.success&&x(n.data)}catch(e){console.error("Fehler beim Laden der Tarife:",e)}},q=e=>{if(!e)return!1;const n=new Date,r=new Date(e);let a=n.getFullYear()-r.getFullYear();const s=n.getMonth()-r.getMonth();return(s<0||0===s&&n.getDate()<r.getDate())&&a--,a<18},F=async()=>{if(_.vorname&&_.nachname&&_.geburtsdatum&&_.geschlecht&&_.email&&_.password)if(_.password===_.passwordConfirm)if(_.password.length<8)u("Passwort muss mindestens 8 Zeichen haben.");else if(_.email===S.email||y.some(e=>e.email===_.email))u("Diese E-Mail-Adresse wird bereits verwendet.");else{c(!0);try{const e=await r(`${a.apiBaseUrl}/public/register/family/member`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hauptmitglied_email:S.email,vorname:_.vorname,nachname:_.nachname,geburtsdatum:_.geburtsdatum,geschlecht:_.geschlecht,email:_.email,password:_.password})}),n=await e.json();n.success?(k(e=>[...e,{..._,familiePosition:n.data.familiePosition}]),C({vorname:"",nachname:"",geburtsdatum:"",geschlecht:"",email:"",password:"",passwordConfirm:""}),w(!1),u("")):u(n.error||"Fehler beim Hinzuf√ºgen des Familienmitglieds")}catch(e){console.error("Fehler beim Hinzuf√ºgen des Familienmitglieds:",e),u("Verbindungsfehler. Bitte versuchen Sie es sp√§ter erneut.")}finally{c(!1)}}else u("Passw√∂rter stimmen nicht √ºberein.");else u("Bitte f√ºllen Sie alle Pflichtfelder aus.")},M=(e,n)=>{if(e.includes(".")){const[r,a]=e.split(".");z(e=>({...e,[r]:{...e[r],[a]:n}}))}else z(r=>({...r,[e]:n}));u("")},T=i/l*100,E=()=>n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 1: Grundregistrierung"}),n.jsx("p",{children:"Erstellen Sie Ihr Konto mit E-Mail und Passwort."}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"E-Mail-Adresse *"}),n.jsx("input",{type:"email",value:S.email,onChange:e=>M("email",e.target.value),placeholder:"ihre.email@beispiel.de",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passwort * (mindestens 8 Zeichen)"}),n.jsx("input",{type:"password",value:S.password,onChange:e=>M("password",e.target.value),placeholder:"Sicheres Passwort",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passwort best√§tigen *"}),n.jsx("input",{type:"password",value:S.passwordConfirm,onChange:e=>M("passwordConfirm",e.target.value),placeholder:"Passwort wiederholen",required:!0})]})]}),G=()=>n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 2: Pers√∂nliche Daten"}),n.jsx("p",{children:"Bitte geben Sie Ihre pers√∂nlichen Daten ein."}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Vorname *"}),n.jsx("input",{type:"text",value:S.vorname,onChange:e=>M("vorname",e.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nachname *"}),n.jsx("input",{type:"text",value:S.nachname,onChange:e=>M("nachname",e.target.value),required:!0})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Geburtsdatum *"}),n.jsx("input",{type:"date",value:S.geburtsdatum,onChange:e=>M("geburtsdatum",e.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Geschlecht *"}),n.jsxs("select",{value:S.geschlecht,onChange:e=>M("geschlecht",e.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Bitte w√§hlen"}),n.jsx("option",{value:"m",children:"M√§nnlich"}),n.jsx("option",{value:"w",children:"Weiblich"}),n.jsx("option",{value:"d",children:"Divers"})]})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group flex-3",children:[n.jsx("label",{children:"Stra√üe *"}),n.jsx("input",{type:"text",value:S.strasse,onChange:e=>M("strasse",e.target.value),required:!0})]}),n.jsxs("div",{className:"form-group flex-1",children:[n.jsx("label",{children:"Hausnummer *"}),n.jsx("input",{type:"text",value:S.hausnummer,onChange:e=>M("hausnummer",e.target.value),required:!0})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"PLZ *"}),n.jsx("input",{type:"text",value:S.plz,onChange:e=>M("plz",e.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Ort *"}),n.jsx("input",{type:"text",value:S.ort,onChange:e=>M("ort",e.target.value),required:!0})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Telefon *"}),n.jsx("input",{type:"tel",value:S.telefon,onChange:e=>M("telefon",e.target.value),placeholder:"+49 123 456789",required:!0})]})]}),P=()=>n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 3: Bankdaten"}),n.jsx("p",{children:"F√ºr die automatische Beitragszahlung ben√∂tigen wir Ihre Bankverbindung."}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"IBAN *"}),n.jsx("input",{type:"text",value:S.iban,onChange:e=>M("iban",e.target.value.toUpperCase()),placeholder:"DE89 3704 0044 0532 0130 00",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"BIC *"}),n.jsx("input",{type:"text",value:S.bic,onChange:e=>M("bic",e.target.value.toUpperCase()),placeholder:"COBADEFFXXX",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Bank Name *"}),n.jsx("input",{type:"text",value:S.bank_name,onChange:e=>M("bank_name",e.target.value),placeholder:"Commerzbank AG",required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Kontoinhaber *"}),n.jsx("input",{type:"text",value:S.kontoinhaber,onChange:e=>M("kontoinhaber",e.target.value),placeholder:"Max Mustermann",required:!0})]})]}),R=()=>n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 4: Tarifauswahl"}),n.jsx("p",{children:"W√§hlen Sie Ihren gew√ºnschten Tarif und Zahlungsweise."}),n.jsx("div",{className:"tariff-selection",children:p.map(e=>n.jsxs("div",{className:"tariff-card "+(S.tarif_id===e.id?"selected":""),onClick:()=>M("tarif_id",e.id),children:[n.jsx("h4",{children:e.name}),n.jsxs("div",{className:"price",children:[e.price_euros," ‚Ç¨ / Monat"]}),n.jsx("p",{children:e.beschreibung})]},e.id))}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Zahlungsrhythmus *"}),n.jsxs("select",{value:S.billing_cycle,onChange:e=>M("billing_cycle",e.target.value),required:!0,children:[n.jsx("option",{value:"monatlich",children:"Monatlich"}),n.jsx("option",{value:"viertelj√§hrlich",children:"Viertelj√§hrlich"}),n.jsx("option",{value:"halbj√§hrlich",children:"Halbj√§hrlich"}),n.jsx("option",{value:"j√§hrlich",children:"J√§hrlich"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Zahlungsart *"}),n.jsxs("select",{value:S.payment_method,onChange:e=>M("payment_method",e.target.value),required:!0,children:[n.jsx("option",{value:"lastschrift",children:"SEPA-Lastschrift"}),n.jsx("option",{value:"√ºberweisung",children:"√úberweisung"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Gew√ºnschter Vertragsbeginn *"}),n.jsx("input",{type:"date",value:S.vertragsbeginn,onChange:e=>M("vertragsbeginn",e.target.value),min:(new Date).toISOString().split("T")[0],required:!0})]})]}),D=()=>{const e=(e,n,r)=>{const a=[...S.buddy_einladungen.freunde];a[e][n]=r,M("buddy_einladungen.freunde",a)};return n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 5: Freunde einladen (Optional)"}),n.jsx("p",{children:"M√∂chten Sie Freunde zu dieser Mitgliedschaft einladen? Erstellen Sie eine Buddy-Gruppe und profitieren Sie gemeinsam!"}),n.jsxs("div",{className:"buddy-invitation-section",children:[n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:S.buddy_einladungen.gruppe_erstellen,onChange:e=>M("buddy_einladungen.gruppe_erstellen",e.target.checked)}),n.jsx("span",{className:"checkmark"}),"Ja, ich m√∂chte eine Buddy-Gruppe erstellen und Freunde einladen"]})}),S.buddy_einladungen.gruppe_erstellen&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Gruppen-Name (Optional)"}),n.jsx("input",{type:"text",value:S.buddy_einladungen.gruppe_name,onChange:e=>M("buddy_einladungen.gruppe_name",e.target.value),placeholder:"z.B. 'Karate-Freunde', 'B√ºro-Team', etc."})]}),n.jsxs("div",{className:"buddy-friends-section",children:[n.jsx("h4",{children:"Freunde einladen:"}),n.jsx("p",{className:"form-help",children:"Ihre Freunde erhalten eine Einladungs-Email mit einem Link zur Registrierung."}),S.buddy_einladungen.freunde.map((r,a)=>n.jsx("div",{className:"friend-input-row",children:n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:r.name,onChange:n=>e(a,"name",n.target.value),placeholder:"Name des Freundes"})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"E-Mail"}),n.jsx("input",{type:"email",value:r.email,onChange:n=>e(a,"email",n.target.value),placeholder:"freund@beispiel.de"})]}),n.jsx("div",{className:"form-group remove-button-group",children:S.buddy_einladungen.freunde.length>1&&n.jsx("button",{type:"button",className:"btn btn-remove",onClick:()=>(e=>{const n=S.buddy_einladungen.freunde.filter((n,r)=>r!==e);M("buddy_einladungen.freunde",n)})(a),children:"‚úï"})})]})},a)),S.buddy_einladungen.freunde.length<5&&n.jsx("button",{type:"button",className:"btn btn-secondary btn-add-friend",onClick:()=>{if(S.buddy_einladungen.freunde.length<5){const e=[...S.buddy_einladungen.freunde,{email:"",name:""}];M("buddy_einladungen.freunde",e)}},children:"+ Weiteren Freund hinzuf√ºgen"})]}),n.jsxs("div",{className:"buddy-info",children:[n.jsx("h4",{children:"üí° Buddy-Gruppen Vorteile:"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Gemeinsam trainieren macht mehr Spa√ü"}),n.jsx("li",{children:"Gegenseitige Motivation und Unterst√ºtzung"}),n.jsx("li",{children:"M√∂gliche Gruppenrabatte (je nach Tarif)"}),n.jsx("li",{children:"Gemeinsame Fortschritte verfolgen"})]})]})]}),!S.buddy_einladungen.gruppe_erstellen&&n.jsx("div",{className:"skip-buddy-info",children:n.jsx("p",{children:"Kein Problem! Sie k√∂nnen auch sp√§ter noch Freunde einladen oder einer bestehenden Gruppe beitreten."})})]})]})},A=()=>n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 6: Gesundheitsfragen"}),n.jsx("p",{children:"Diese Angaben helfen uns dabei, das Training optimal f√ºr Sie zu gestalten."}),n.jsxs("div",{className:"health-questions",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Haben Sie Vorerkrankungen?"}),n.jsxs("select",{value:S.gesundheitsfragen.vorerkrankungen,onChange:e=>M("gesundheitsfragen.vorerkrankungen",e.target.value),children:[n.jsx("option",{value:"nein",children:"Nein"}),n.jsx("option",{value:"ja",children:"Ja"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nehmen Sie regelm√§√üig Medikamente?"}),n.jsxs("select",{value:S.gesundheitsfragen.medikamente,onChange:e=>M("gesundheitsfragen.medikamente",e.target.value),children:[n.jsx("option",{value:"nein",children:"Nein"}),n.jsx("option",{value:"ja",children:"Ja"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Haben Sie Herzprobleme?"}),n.jsxs("select",{value:S.gesundheitsfragen.herzprobleme,onChange:e=>M("gesundheitsfragen.herzprobleme",e.target.value),children:[n.jsx("option",{value:"nein",children:"Nein"}),n.jsx("option",{value:"ja",children:"Ja"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Haben Sie R√ºckenprobleme?"}),n.jsxs("select",{value:S.gesundheitsfragen.rueckenprobleme,onChange:e=>M("gesundheitsfragen.rueckenprobleme",e.target.value),children:[n.jsx("option",{value:"nein",children:"Nein"}),n.jsx("option",{value:"ja",children:"Ja"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Haben Sie Gelenkprobleme?"}),n.jsxs("select",{value:S.gesundheitsfragen.gelenkprobleme,onChange:e=>M("gesundheitsfragen.gelenkprobleme",e.target.value),children:[n.jsx("option",{value:"nein",children:"Nein"}),n.jsx("option",{value:"ja",children:"Ja"})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Sonstige Einschr√§nkungen oder Besonderheiten"}),n.jsx("textarea",{value:S.gesundheitsfragen.sonstige_einschraenkungen,onChange:e=>M("gesundheitsfragen.sonstige_einschraenkungen",e.target.value),placeholder:"Bitte beschreiben Sie weitere gesundheitliche Besonderheiten...",rows:"3"})]}),n.jsx("h4",{children:"Notfallkontakt"}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Name *"}),n.jsx("input",{type:"text",value:S.gesundheitsfragen.notfallkontakt_name,onChange:e=>M("gesundheitsfragen.notfallkontakt_name",e.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Telefon *"}),n.jsx("input",{type:"tel",value:S.gesundheitsfragen.notfallkontakt_telefon,onChange:e=>M("gesundheitsfragen.notfallkontakt_telefon",e.target.value),required:!0})]})]}),n.jsx("h4",{children:"Hausarzt (optional)"}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Name"}),n.jsx("input",{type:"text",value:S.gesundheitsfragen.hausarzt_name,onChange:e=>M("gesundheitsfragen.hausarzt_name",e.target.value)})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Telefon"}),n.jsx("input",{type:"tel",value:S.gesundheitsfragen.hausarzt_telefon,onChange:e=>M("gesundheitsfragen.hausarzt_telefon",e.target.value)})]})]})]})]}),I=()=>{const e=(e,n)=>{C(r=>({...r,[e]:n})),u("")};return n.jsxs("div",{className:"registration-step family-step",children:[n.jsx("h3",{children:"Familien-Registrierung"}),!b&&0===y.length&&n.jsxs("div",{className:"family-question",children:[n.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"M√∂chten Sie weitere Familienmitglieder anmelden?"}),n.jsx("div",{className:"info-box",style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"var(--bg-secondary)",borderRadius:"8px"},children:n.jsxs("p",{style:{margin:0},children:[n.jsx("strong",{children:"Familienmitglieder teilen Adresse und Bankverbindung"}),", erhalten aber jeweils ein eigenes Konto und einen eigenen Vertrag. Ab dem 2. Familienmitglied gilt ein Familien-Rabatt."]})}),n.jsxs("div",{className:"family-choice-buttons",style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{f(!0),w(!0)},children:"Ja, weitere Mitglieder anmelden"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{v(!1),f(!1),t(3)},children:"Nein, nur mich anmelden"})]})]}),(b||y.length>0)&&n.jsxs("div",{className:"family-overview",children:[n.jsxs("div",{className:"family-member-card hauptmitglied",style:{padding:"1rem",marginBottom:"1rem",border:"2px solid var(--color-primary)",borderRadius:"8px",backgroundColor:"var(--bg-secondary)"},children:[n.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.5rem",backgroundColor:"var(--color-primary)",color:"white",borderRadius:"4px",fontSize:"0.75rem",marginBottom:"0.5rem"},children:"Hauptmitglied (voller Beitrag)"}),n.jsxs("h4",{style:{margin:"0.5rem 0"},children:[S.vorname," ",S.nachname]}),n.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:S.email})]}),y.map((e,r)=>n.jsxs("div",{className:"family-member-card",style:{padding:"1rem",marginBottom:"1rem",border:"1px solid var(--border-color)",borderRadius:"8px",position:"relative"},children:[n.jsxs("span",{style:{display:"inline-block",padding:"0.25rem 0.5rem",backgroundColor:"var(--color-success)",color:"white",borderRadius:"4px",fontSize:"0.75rem",marginBottom:"0.5rem"},children:[r+2,". Familienmitglied (mit Rabatt)"]}),q(e.geburtsdatum)&&n.jsx("span",{style:{display:"inline-block",marginLeft:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"var(--color-warning)",color:"white",borderRadius:"4px",fontSize:"0.75rem"},children:"Minderj√§hrig"}),n.jsxs("h4",{style:{margin:"0.5rem 0"},children:[e.vorname," ",e.nachname]}),n.jsx("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"0.9rem"},children:e.email}),n.jsx("button",{type:"button",className:"btn btn-danger",style:{position:"absolute",top:"0.5rem",right:"0.5rem",padding:"0.25rem 0.5rem",fontSize:"0.8rem"},onClick:()=>(async e=>{y[e]&&k(n=>n.filter((n,r)=>r!==e))})(r),children:"Entfernen"})]},r)),N&&n.jsxs("div",{className:"family-member-form",style:{padding:"1.5rem",border:"2px dashed var(--border-color)",borderRadius:"8px",marginBottom:"1rem"},children:[n.jsxs("h4",{style:{marginTop:0},children:["Neues Familienmitglied (",y.length+2,". Mitglied)"]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Vorname *"}),n.jsx("input",{type:"text",value:_.vorname,onChange:n=>e("vorname",n.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Nachname *"}),n.jsx("input",{type:"text",value:_.nachname,onChange:n=>e("nachname",n.target.value),required:!0})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Geburtsdatum *"}),n.jsx("input",{type:"date",value:_.geburtsdatum,onChange:n=>e("geburtsdatum",n.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Geschlecht *"}),n.jsxs("select",{value:_.geschlecht,onChange:n=>e("geschlecht",n.target.value),required:!0,children:[n.jsx("option",{value:"",children:"Bitte w√§hlen"}),n.jsx("option",{value:"m",children:"M√§nnlich"}),n.jsx("option",{value:"w",children:"Weiblich"}),n.jsx("option",{value:"d",children:"Divers"})]})]})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"E-Mail-Adresse * (f√ºr eigenes Konto)"}),n.jsx("input",{type:"email",value:_.email,onChange:n=>e("email",n.target.value),placeholder:"familienmitglied@beispiel.de",required:!0})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passwort * (mindestens 8 Zeichen)"}),n.jsx("input",{type:"password",value:_.password,onChange:n=>e("password",n.target.value),required:!0})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{children:"Passwort best√§tigen *"}),n.jsx("input",{type:"password",value:_.passwordConfirm,onChange:n=>e("passwordConfirm",n.target.value),required:!0})]})]}),n.jsx("div",{className:"info-box",style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"var(--bg-secondary)",borderRadius:"6px",fontSize:"0.9rem"},children:n.jsxs("p",{style:{margin:0},children:[n.jsx("strong",{children:"Hinweis:"})," Adresse und Bankverbindung werden vom Hauptmitglied √ºbernommen."]})}),q(_.geburtsdatum)&&n.jsx("div",{className:"info-box",style:{marginTop:"0.75rem",padding:"0.75rem",backgroundColor:"#fff3cd",borderRadius:"6px",fontSize:"0.9rem"},children:n.jsxs("p",{style:{margin:0},children:["Da dieses Mitglied minderj√§hrig ist, wird ",n.jsxs("strong",{children:[S.vorname," ",S.nachname]})," als Erziehungsberechtigte/r hinterlegt."]})}),n.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[n.jsx("button",{type:"button",className:"btn btn-primary",onClick:F,children:"Hinzuf√ºgen"}),n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{w(!1),C({vorname:"",nachname:"",geburtsdatum:"",geschlecht:"",email:"",password:"",passwordConfirm:""})},children:"Abbrechen"})]})]}),!N&&n.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:[n.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>w(!0),children:"+ Weiteres Familienmitglied hinzuf√ºgen"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{N&&_.vorname&&F(),v(!1),w(!1),t(3)},children:"Weiter zu Bankdaten"})]})]})]})},H=()=>n.jsxs("div",{className:"registration-step",children:[n.jsx("h3",{children:"Schritt 7: Rechtliche Zustimmungen"}),n.jsx("p",{children:"Bitte lesen und akzeptieren Sie die folgenden Bedingungen."}),n.jsxs("div",{className:"legal-agreements",children:[n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:S.agb_accepted,onChange:e=>M("agb_accepted",e.target.checked),required:!0}),n.jsx("span",{className:"checkmark"}),"Ich akzeptiere die ",n.jsx("a",{href:"/agb",target:"_blank",children:"Allgemeinen Gesch√§ftsbedingungen (AGB)"})," *"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:S.dsgvo_accepted,onChange:e=>M("dsgvo_accepted",e.target.checked),required:!0}),n.jsx("span",{className:"checkmark"}),"Ich stimme der ",n.jsx("a",{href:"/datenschutz",target:"_blank",children:"Datenschutzerkl√§rung (DSGVO)"})," zu *"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:S.widerrufsrecht_acknowledged,onChange:e=>M("widerrufsrecht_acknowledged",e.target.checked),required:!0}),n.jsx("span",{className:"checkmark"}),"Ich habe die ",n.jsx("a",{href:"/widerrufsrecht",target:"_blank",children:"Widerrufsbelehrung"})," zur Kenntnis genommen *"]})}),n.jsx("div",{className:"form-group checkbox-group",children:n.jsxs("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:S.kuendigungshinweise_acknowledged,onChange:e=>M("kuendigungshinweise_acknowledged",e.target.checked),required:!0}),n.jsx("span",{className:"checkmark"}),"Ich habe die ",n.jsx("strong",{children:"K√ºndigungshinweise"})," zur Kenntnis genommen: ",n.jsx("br",{}),n.jsxs("em",{children:["Die K√ºndigung muss ",n.jsx("strong",{children:"3 Monate vor Ablauf der Vertragslaufzeit"})," schriftlich erfolgen. Eine K√ºndigung ist nicht zum jeweiligen Monatsende, sondern nur zum Ende der vereinbarten Laufzeit m√∂glich."]})," *"]})})]}),n.jsxs("div",{className:"completion-info",children:[n.jsx("h4",{children:"üéâ Fast geschafft!"}),n.jsx("p",{children:"Nach dem Absenden wird Ihre Registrierung manuell gepr√ºft und freigeschaltet. Sie erhalten eine Best√§tigungs-E-Mail mit weiteren Informationen."})]})]});return n.jsxs("div",{className:"modal-overlay",children:[n.jsx("style",{children:'\n        .modal-overlay .modal-content.registration-modal input[type="text"],\n        .modal-overlay .modal-content.registration-modal input[type="email"],\n        .modal-overlay .modal-content.registration-modal input[type="password"],\n        .modal-overlay .modal-content.registration-modal input[type="date"],\n        .modal-overlay .modal-content.registration-modal input[type="tel"],\n        .modal-overlay .modal-content.registration-modal input[type="number"],\n        .modal-overlay .modal-content.registration-modal textarea,\n        .modal-overlay .modal-content.registration-modal select,\n        .registration-modal input[type="text"],\n        .registration-modal input[type="email"],\n        .registration-modal input[type="password"],\n        .registration-modal input[type="date"],\n        .registration-modal input[type="tel"],\n        .registration-modal input[type="number"],\n        .registration-modal textarea,\n        .registration-modal select,\n        input[type="text"].reg-input,\n        input[type="email"].reg-input,\n        input[type="password"].reg-input,\n        input[type="date"].reg-input {\n          background: #ffffff !important;\n          background-color: #ffffff !important;\n          background-image: none !important;\n          color: #000000 !important;\n          -webkit-text-fill-color: #000000 !important;\n          border: 2px solid #cccccc !important;\n          border-radius: 8px !important;\n          padding: 0.8rem !important;\n          font-size: 1rem !important;\n          caret-color: #000000 !important;\n        }\n        .modal-overlay .modal-content.registration-modal input:focus,\n        .modal-overlay .modal-content.registration-modal select:focus,\n        .modal-overlay .modal-content.registration-modal textarea:focus,\n        .registration-modal input:focus,\n        .registration-modal select:focus,\n        .registration-modal textarea:focus {\n          background: #ffffff !important;\n          background-color: #ffffff !important;\n          color: #000000 !important;\n          -webkit-text-fill-color: #000000 !important;\n          border-color: #ffd700 !important;\n          outline: none !important;\n          box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.3) !important;\n        }\n        .registration-modal input::placeholder,\n        .registration-modal textarea::placeholder {\n          color: #888888 !important;\n          -webkit-text-fill-color: #888888 !important;\n          opacity: 1 !important;\n        }\n        .registration-modal select option {\n          background: #ffffff !important;\n          color: #000000 !important;\n        }\n      '}),n.jsxs("div",{className:"modal-content registration-modal",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:"Mitgliedschaft beantragen"}),n.jsx("button",{className:"close-button",onClick:s,children:"√ó"})]}),n.jsxs("div",{className:"progress-container",children:[n.jsx("div",{className:"progress-bar",children:n.jsx("div",{className:"progress-fill",style:{width:`${T}%`}})}),n.jsxs("div",{className:"progress-text",children:["Schritt ",i," von ",l," (",Math.round(T),"%)"]})]}),n.jsxs("div",{className:"modal-body",children:[m&&n.jsx("div",{className:"error-message",children:m}),h&&n.jsx("div",{className:"success-message",children:h}),(()=>{if(j)return I();switch(i){case 1:return E();case 2:return G();case 3:return P();case 4:return R();case 5:return D();case 6:return A();case 7:return H();default:return null}})()]}),!j&&n.jsx("div",{className:"modal-footer",children:n.jsxs("div",{className:"button-group",children:[i>1&&n.jsx("button",{className:"btn btn-secondary",onClick:()=>{i>1&&(t(i-1),u(""))},disabled:o,children:"Zur√ºck"}),n.jsx("button",{className:"btn btn-primary",onClick:async()=>{if((e=>{switch(e){case 1:if(!S.email||!S.password||!S.passwordConfirm)return u("Bitte f√ºllen Sie alle Felder aus."),!1;if(S.password!==S.passwordConfirm)return u("Passw√∂rter stimmen nicht √ºberein."),!1;if(S.password.length<8)return u("Passwort muss mindestens 8 Zeichen lang sein."),!1;break;case 2:const e=["vorname","nachname","geburtsdatum","geschlecht","strasse","hausnummer","plz","ort","telefon"];for(let n of e)if(!S[n])return u(`Bitte f√ºllen Sie das Feld "${n}" aus.`),!1;break;case 3:if(!(S.iban&&S.bic&&S.bank_name&&S.kontoinhaber))return u("Bitte f√ºllen Sie alle Bankdaten aus."),!1;break;case 4:if(!S.tarif_id||!S.vertragsbeginn)return u("Bitte w√§hlen Sie einen Tarif und Vertragsbeginn."),!1;break;case 5:break;case 6:if(!S.gesundheitsfragen.notfallkontakt_name||!S.gesundheitsfragen.notfallkontakt_telefon)return u("Bitte geben Sie einen Notfallkontakt an."),!1;break;case 7:if(!(S.agb_accepted&&S.dsgvo_accepted&&S.widerrufsrecht_acknowledged&&S.kuendigungshinweise_acknowledged))return u("Bitte akzeptieren Sie alle erforderlichen Bedingungen."),!1}return!0})(i)){c(!0),u("");try{let e="",n={};switch(i){case 1:e="/public/register/step1",n={email:S.email,password:S.password};break;case 2:e="/public/register/step2",n={email:S.email,vorname:S.vorname,nachname:S.nachname,geburtsdatum:S.geburtsdatum,geschlecht:S.geschlecht,strasse:S.strasse,hausnummer:S.hausnummer,plz:S.plz,ort:S.ort,telefon:S.telefon};break;case 3:e="/public/register/step3",n={email:S.email,iban:S.iban,bic:S.bic,bank_name:S.bank_name,kontoinhaber:S.kontoinhaber};break;case 4:e="/public/register/step4",n={email:S.email,tarif_id:S.tarif_id,billing_cycle:S.billing_cycle,payment_method:S.payment_method,vertragsbeginn:S.vertragsbeginn};break;case 5:return t(i+1),void c(!1);case 6:e="/public/register/step5",n={email:S.email,gesundheitsfragen:S.gesundheitsfragen};break;case 7:e="/public/register/step6",n={email:S.email,agb_accepted:S.agb_accepted,dsgvo_accepted:S.dsgvo_accepted,widerrufsrecht_acknowledged:S.widerrufsrecht_acknowledged,kuendigungshinweise_acknowledged:S.kuendigungshinweise_acknowledged}}const a=await r(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),l=await a.json();l.success?7===i?(g("Registrierung erfolgreich abgeschlossen! Sie erhalten eine Best√§tigungs-Email."),setTimeout(()=>s(),3e3)):1===i?(g("Registrierung gestartet. Bitte pr√ºfen Sie Ihre E-Mails zur Verifizierung."),setTimeout(()=>{t(2),g("")},2e3)):2===i?v(!0):t(i+1):u(l.error||"Ein Fehler ist aufgetreten.")}catch(e){u("Verbindungsfehler. Bitte versuchen Sie es sp√§ter erneut.")}finally{c(!1)}}},disabled:o,children:o?"Wird verarbeitet...":i===l?"Registrierung abschlie√üen":"Weiter"})]})})]})]})};export{s as default};
