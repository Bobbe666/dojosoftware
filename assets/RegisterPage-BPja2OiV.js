import{j as e}from"./animation-1wuIdCBS.js";import{u as s,e as a,r as n}from"./vendor-router-BhMXg4Z-.js";import{a as r,g as i}from"./index-DUnH23_2.js";import{P as l}from"./PublicFooter-ByHLLdcE.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-D7rg4pDH.js";function o(){var o;const t=s(),c=a(),[d,m]=n.useState({dojoName:"",subdomain:"",ownerName:"",ownerEmail:"",phone:"",password:"",passwordConfirm:"",selectedPlan:(null==(o=c.state)?void 0:o.selectedPlan)||"starter",acceptTerms:!1}),[h,g]=n.useState({}),[u,j]=n.useState({checking:!1,available:null,message:""}),[p,x]=n.useState(!1),[N,b]=n.useState(!1),[v,f]=n.useState(null);let w=null;n.useEffect(()=>(d.subdomain.length>=3?(clearTimeout(w),w=setTimeout(()=>{k(d.subdomain)},500)):j({checking:!1,available:null,message:""}),()=>clearTimeout(w)),[d.subdomain]);const k=async e=>{j({checking:!0,available:null,message:""});try{const s=await r.get(`/onboarding/check-subdomain/${e}`);j({checking:!1,available:s.data.available,message:s.data.available?"VerfÃ¼gbar!":s.data.reason||"Nicht verfÃ¼gbar"})}catch(s){console.error("Subdomain-Check Fehler:",s);let e="Fehler bei der PrÃ¼fung";s.response?s.response.data&&s.response.data.error?e=s.response.data.error:404===s.response.status?e="API-Endpoint nicht gefunden. Bitte Server-URL prÃ¼fen.":500===s.response.status&&(e="Serverfehler bei der PrÃ¼fung. Bitte spÃ¤ter erneut versuchen."):e=s.request?"Keine Antwort vom Server. Bitte Verbindung prÃ¼fen.":`Netzwerkfehler: ${s.message}`,j({checking:!1,available:!1,message:e})}};return N&&v?e.jsxs("div",{className:"register-page",children:[e.jsx("nav",{className:"register-nav",children:e.jsxs("div",{className:"nav-container",children:[e.jsxs("div",{className:"nav-logo",onClick:()=>t("/"),children:[e.jsx("img",{src:i,alt:"DojoSoftware Logo",className:"nav-logo-image"}),e.jsx("span",{className:"logo-text",children:"DojoSoftware"})]}),e.jsxs("div",{className:"nav-links",children:[e.jsx("a",{href:"/",onClick:e=>{e.preventDefault(),t("/")},children:"Home"}),e.jsx("a",{href:"/#features",children:"Features"}),e.jsx("a",{href:"/galerie",children:"Galerie"}),e.jsx("a",{href:"/pricing",children:"Preise"}),e.jsx("a",{href:"/#testimonials",children:"Referenzen"}),e.jsx("button",{className:"nav-login-btn",onClick:()=>t("/login"),children:"Login"})]})]})}),e.jsx("div",{className:"register-container",children:e.jsxs("div",{className:"success-container",children:[e.jsxs("div",{className:"success-header",children:[e.jsx("h1",{children:"Willkommen bei DojoSoftware!"}),e.jsxs("p",{className:"success-message",children:["Dein Dojo ",e.jsx("strong",{children:d.dojoName})," wurde erfolgreich registriert!"]})]}),e.jsxs("div",{className:"success-info",children:[e.jsxs("div",{className:"info-box",children:[e.jsxs("h3",{children:[e.jsx("span",{className:"section-icon",children:"ğŸ“§"})," E-Mail gesendet"]}),e.jsxs("p",{children:["Wir haben dir eine BestÃ¤tigungs-E-Mail an ",e.jsx("strong",{children:d.ownerEmail})," geschickt."]})]}),e.jsxs("div",{className:"info-box",children:[e.jsxs("h3",{children:[e.jsx("span",{className:"section-icon",children:"ğŸŒ"})," Dein Zugang"]}),e.jsxs("p",{className:"subdomain-url",children:[d.subdomain,".dojo.tda-intl.org"]})]}),e.jsxs("div",{className:"info-box",children:[e.jsxs("h3",{children:[e.jsx("span",{className:"section-icon",children:"â±ï¸"})," Trial-Phase"]}),e.jsxs("p",{children:["Du hast ",e.jsx("strong",{children:"14 Tage"})," kostenlosen Zugriff auf alle Features."]}),e.jsxs("p",{className:"trial-date",children:["Endet am: ",new Date(v.trial_ends_at).toLocaleDateString("de-DE")]})]})]}),e.jsxs("div",{className:"next-steps",children:[e.jsxs("h3",{children:[e.jsx("span",{className:"section-icon",children:"ğŸš€"})," NÃ¤chste Schritte"]}),e.jsxs("ol",{children:[e.jsx("li",{children:"Logge dich mit deiner E-Mail und deinem Passwort ein"}),e.jsx("li",{children:"VervollstÃ¤ndige dein Dojo-Profil"}),e.jsx("li",{children:"Lade deine ersten Mitglieder ein"})]}),e.jsx("button",{className:"cta-btn",onClick:()=>{const e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;window.location.href=e?"/login":v.login_url},children:"Jetzt zum Login und loslegen"})]})]})})]}):e.jsxs("div",{className:"register-page",children:[e.jsx("nav",{className:"register-nav",children:e.jsxs("div",{className:"nav-container",children:[e.jsxs("div",{className:"nav-logo",onClick:()=>t("/"),children:[e.jsx("img",{src:i,alt:"DojoSoftware Logo",className:"nav-logo-image"}),e.jsx("span",{className:"logo-text",children:"DojoSoftware"})]}),e.jsxs("div",{className:"nav-links",children:[e.jsx("a",{href:"/",onClick:e=>{e.preventDefault(),t("/")},children:"Home"}),e.jsx("a",{href:"/#features",children:"Features"}),e.jsx("a",{href:"/galerie",children:"Galerie"}),e.jsx("a",{href:"/pricing",children:"Preise"}),e.jsx("a",{href:"/#testimonials",children:"Referenzen"}),e.jsx("button",{className:"nav-login-btn",onClick:()=>t("/login"),children:"Login"})]})]})}),e.jsxs("div",{className:"register-container",children:[e.jsxs("div",{className:"register-header",children:[e.jsx("h1",{children:"Registriere dein Dojo"}),e.jsx("p",{children:"14 Tage kostenlos testen - keine Kreditkarte erforderlich"})]}),e.jsx("div",{className:"plan-pills",children:["starter","professional","premium","enterprise"].map(s=>e.jsxs("button",{className:"plan-pill "+(d.selectedPlan===s?"active":""),onClick:()=>m({...d,selectedPlan:s}),children:[s.charAt(0).toUpperCase()+s.slice(1),"professional"===s&&e.jsx("span",{className:"popular-tag",children:"Beliebt"})]},s))}),e.jsxs("form",{onSubmit:async e=>{var s,a,n;if(e.preventDefault(),console.log("ğŸš€ Submit gestartet"),console.log("ğŸ“‹ Form Data:",d),console.log("ğŸ” Subdomain Status:",u),(()=>{const e={};return(!d.dojoName||d.dojoName.length<3)&&(e.dojoName="Dojo-Name muss mindestens 3 Zeichen haben"),!d.subdomain||d.subdomain.length<3?e.subdomain="Subdomain muss mindestens 3 Zeichen haben":!1===u.available?e.subdomain=u.message||"Diese Subdomain ist nicht verfÃ¼gbar":(null===u.available||u.checking)&&(e.subdomain="Bitte warte bis die Subdomain-PrÃ¼fung abgeschlossen ist"),(!d.ownerName||d.ownerName.length<2)&&(e.ownerName="Bitte gib deinen Namen ein"),d.ownerEmail&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.ownerEmail)||(e.ownerEmail="Bitte gib eine gÃ¼ltige E-Mail-Adresse ein"),(!d.password||d.password.length<8)&&(e.password="Passwort muss mindestens 8 Zeichen lang sein"),d.password!==d.passwordConfirm&&(e.passwordConfirm="PasswÃ¶rter stimmen nicht Ã¼berein"),d.acceptTerms||(e.acceptTerms="Bitte akzeptiere die AGB und DatenschutzerklÃ¤rung"),g(e),0===Object.keys(e).length})()){console.log("âœ… Validierung erfolgreich, sende Request..."),x(!0),g({});try{const e={dojo_name:d.dojoName,subdomain:d.subdomain,owner_name:d.ownerName,owner_email:d.ownerEmail,phone:d.phone,password:d.password,selected_plan:d.selectedPlan};console.log("ğŸ“¤ Payload:",e);const s=await r.post("/onboarding/register-dojo",e);console.log("ğŸ“¥ Response:",s.data),s.data.success&&(console.log("âœ… Registrierung erfolgreich!"),f(s.data),b(!0))}catch(i){console.error("âŒ Registrierungsfehler:",i),console.error("ğŸ“„ Error Response:",null==(s=i.response)?void 0:s.data),g({general:(null==(n=null==(a=i.response)?void 0:a.data)?void 0:n.error)||"Registrierung fehlgeschlagen. Bitte versuche es erneut."})}finally{x(!1)}}else console.log("âŒ Validierung fehlgeschlagen, Errors:",h)},className:"register-form",children:[h.general&&e.jsx("div",{className:"error-banner",children:h.general}),e.jsxs("section",{className:"form-section",children:[e.jsxs("h3",{children:[e.jsx("span",{className:"section-icon",children:"ğŸ¥‹"})," Dojo-Informationen"]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dojo-Name *"}),e.jsx("input",{type:"text",value:d.dojoName,onChange:e=>m({...d,dojoName:e.target.value}),placeholder:"z.B. Budokan Berlin",className:h.dojoName?"error":""}),h.dojoName&&e.jsx("span",{className:"error-text",children:h.dojoName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subdomain * (Deine Zugangs-URL)"}),e.jsxs("div",{className:"subdomain-input-group",children:[e.jsx("input",{type:"text",value:d.subdomain,onChange:e=>{let s=e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"").replace(/--+/g,"-").slice(0,30);m({...d,subdomain:s})},placeholder:"budokan-berlin",className:h.subdomain?"error":""}),e.jsx("span",{className:"subdomain-suffix",children:".dojo.tda-intl.org"})]}),u.checking&&e.jsx("span",{className:"subdomain-status checking",children:"PrÃ¼fe VerfÃ¼gbarkeit..."}),!u.checking&&!0===u.available&&e.jsxs("span",{className:"subdomain-status available",children:["âœ“ ",u.message]}),!u.checking&&!1===u.available&&e.jsxs("span",{className:"subdomain-status unavailable",children:["âœ— ",u.message]}),h.subdomain&&e.jsx("span",{className:"error-text",children:h.subdomain}),e.jsx("small",{className:"help-text",children:"Deine Mitglieder greifen Ã¼ber diese URL auf das System zu"})]})]}),e.jsxs("section",{className:"form-section",children:[e.jsxs("h3",{children:[e.jsx("span",{className:"section-icon",children:"ğŸ‘¤"})," Administrator-Zugang"]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dein Name *"}),e.jsx("input",{type:"text",value:d.ownerName,onChange:e=>m({...d,ownerName:e.target.value}),placeholder:"Max Mustermann",className:h.ownerName?"error":""}),h.ownerName&&e.jsx("span",{className:"error-text",children:h.ownerName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"E-Mail-Adresse *"}),e.jsx("input",{type:"email",value:d.ownerEmail,onChange:e=>m({...d,ownerEmail:e.target.value}),placeholder:"max@budokan-berlin.de",className:h.ownerEmail?"error":""}),h.ownerEmail&&e.jsx("span",{className:"error-text",children:h.ownerEmail})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Telefon (optional)"}),e.jsx("input",{type:"tel",value:d.phone,onChange:e=>m({...d,phone:e.target.value}),placeholder:"+49 30 12345678"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Passwort *"}),e.jsx("input",{type:"password",value:d.password,onChange:e=>m({...d,password:e.target.value}),placeholder:"Mindestens 8 Zeichen",className:h.password?"error":""}),h.password&&e.jsx("span",{className:"error-text",children:h.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Passwort bestÃ¤tigen *"}),e.jsx("input",{type:"password",value:d.passwordConfirm,onChange:e=>m({...d,passwordConfirm:e.target.value}),placeholder:"Passwort wiederholen",className:h.passwordConfirm?"error":""}),h.passwordConfirm&&e.jsx("span",{className:"error-text",children:h.passwordConfirm})]})]})]}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:d.acceptTerms,onChange:e=>m({...d,acceptTerms:e.target.checked})}),e.jsxs("span",{children:["Ich akzeptiere die ",e.jsx("a",{href:"/agb",target:"_blank",children:"AGB"})," und"," ",e.jsx("a",{href:"/datenschutz",target:"_blank",children:"DatenschutzerklÃ¤rung"})]})]}),h.acceptTerms&&e.jsx("span",{className:"error-text",children:h.acceptTerms})]}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:p||!u.available,children:p?"Wird registriert...":"Dojo jetzt registrieren - 14 Tage gratis"}),e.jsxs("div",{className:"security-notes",children:[e.jsxs("div",{className:"note",children:[e.jsx("span",{className:"note-icon",children:"ğŸ”’"})," Keine Kreditkarte erforderlich"]}),e.jsxs("div",{className:"note",children:[e.jsx("span",{className:"note-icon",children:"â±ï¸"})," Trial endet automatisch nach 14 Tagen"]}),e.jsxs("div",{className:"note",children:[e.jsx("span",{className:"note-icon",children:"ğŸ‡©ğŸ‡ª"})," Daten auf deutschen Servern (DSGVO-konform)"]})]})]}),e.jsx("div",{className:"register-footer",children:e.jsxs("p",{children:["Du hast bereits ein Dojo? ",e.jsx("a",{href:"/login",children:"Hier anmelden"})]})})]}),e.jsx(l,{})]})}export{o as default};
