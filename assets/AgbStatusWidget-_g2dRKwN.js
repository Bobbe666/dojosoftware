import{a as e,j as s}from"./query-Caj74EYQ.js";import{u as r,f as n,c as l}from"./index-BuAcXaay.js";import{F as i,g as a,T as t,d,f as o,H as c,o as g,a as p,b as x}from"./icons-eh0tbLFx.js";const m=()=>{const{selectedDojo:m}=r(),[k,S]=e.useState(!0),[B,F]=e.useState(null),[_,A]=e.useState(null),[D,G]=e.useState(!1);e.useEffect(()=>{R()},[m]);const R=async()=>{const e=null===(null==m?void 0:m.id)?"all":(null==m?void 0:m.id)||localStorage.getItem("activeDojoId");if(!e||"all"!==e&&("null"===e||"undefined"===e))return A({count:0,members:[],noDojoSelected:!0}),void S(!1);try{S(!0);const s=await n(`${l.apiBaseUrl}/agb/${e}/members-need-acceptance`);if(s.ok){const e=await s.json();A(e)}else F("Konnte AGB-Status nicht laden")}catch(s){console.error("Fehler beim Laden des AGB-Status:",s),F("Verbindungsfehler")}finally{S(!1)}};if(k)return s.jsxs("div",{style:h,children:[s.jsxs("div",{style:u,children:[s.jsx(i,{size:20}),s.jsx("span",{children:"AGB/DSGVO Status"})]}),s.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255,255,255,0.5)"},children:"Lade..."})]});if(B)return s.jsxs("div",{style:h,children:[s.jsxs("div",{style:u,children:[s.jsx(i,{size:20}),s.jsx("span",{children:"AGB/DSGVO Status"})]}),s.jsx("div",{style:{padding:"1rem",color:"#FCA5A5"},children:B})]});const w=(null==_?void 0:_.count)||0,V=(null==_?void 0:_.members)||[],I=0===w&&!(null==_?void 0:_.noDojoSelected);return(null==_?void 0:_.noDojoSelected)?null:s.jsxs("div",{style:h,children:[s.jsxs("div",{style:u,children:[I?s.jsx(a,{size:20,style:{color:"#86EFAC"}}):s.jsx(t,{size:20,style:{color:"#FBBF24"}}),s.jsx("span",{children:"AGB/DSGVO Status"}),w>0&&s.jsx("span",{style:j,children:w})]}),s.jsx("div",{style:b,children:I?s.jsxs("div",{style:{color:"#86EFAC",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(a,{size:16}),"Alle Mitglieder haben die aktuellen Versionen akzeptiert"]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{marginBottom:"0.75rem",color:"rgba(255,255,255,0.9)"},children:[s.jsxs("strong",{children:[w," Mitglied",1!==w?"er":""]})," ",1!==w?"haben":"hat"," noch nicht die aktuelle Version akzeptiert:"]}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",flexWrap:"wrap"},children:[s.jsxs("div",{style:f,children:[s.jsx(i,{size:14,style:{color:"#FFD700"}}),s.jsxs("span",{children:[V.filter(e=>e.agb_akzeptanz_fehlt).length," AGB"]})]}),s.jsxs("div",{style:f,children:[s.jsx(d,{size:14,style:{color:"#60A5FA"}}),s.jsxs("span",{children:[V.filter(e=>e.dsgvo_akzeptanz_fehlt).length," DSGVO"]})]}),s.jsxs("div",{style:f,children:[s.jsx(o,{size:14,style:{color:"#34D399"}}),s.jsxs("span",{children:[V.filter(e=>e.dojo_regeln_akzeptanz_fehlt).length," Regeln"]})]}),s.jsxs("div",{style:f,children:[s.jsx(c,{size:14,style:{color:"#F472B6"}}),s.jsxs("span",{children:[V.filter(e=>e.hausordnung_akzeptanz_fehlt).length," Hausordnung"]})]})]}),s.jsxs("button",{onClick:()=>G(!D),style:y,children:[s.jsx(g,{size:14}),D?"Liste ausblenden":"Mitglieder anzeigen",D?s.jsx(p,{size:14}):s.jsx(x,{size:14})]}),D&&s.jsxs("div",{style:z,children:[V.slice(0,10).map(e=>s.jsxs("div",{style:v,children:[s.jsxs("a",{href:`/dashboard/mitglieder/${e.mitglied_id}`,style:{color:"#FFD700",textDecoration:"none"},children:[e.vorname," ",e.nachname]}),s.jsxs("div",{style:{display:"flex",gap:"0.25rem",fontSize:"0.7rem",flexWrap:"wrap"},children:[1===e.agb_akzeptanz_fehlt&&s.jsx("span",{style:{color:"#FBBF24",padding:"0 0.25rem",background:"rgba(251,191,36,0.1)",borderRadius:"3px"},children:"AGB"}),1===e.dsgvo_akzeptanz_fehlt&&s.jsx("span",{style:{color:"#60A5FA",padding:"0 0.25rem",background:"rgba(96,165,250,0.1)",borderRadius:"3px"},children:"DSGVO"}),1===e.dojo_regeln_akzeptanz_fehlt&&s.jsx("span",{style:{color:"#34D399",padding:"0 0.25rem",background:"rgba(52,211,153,0.1)",borderRadius:"3px"},children:"Regeln"}),1===e.hausordnung_akzeptanz_fehlt&&s.jsx("span",{style:{color:"#F472B6",padding:"0 0.25rem",background:"rgba(244,114,182,0.1)",borderRadius:"3px"},children:"Haus"})]})]},e.mitglied_id)),V.length>10&&s.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",marginTop:"0.5rem"},children:["...und ",V.length-10," weitere"]})]})]})})]})},h={background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",marginTop:"1rem"},u={display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"rgba(255, 255, 255, 0.05)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontWeight:"600",fontSize:"0.9rem"},j={marginLeft:"auto",background:"#FBBF24",color:"#000",padding:"0.15rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"700"},b={padding:"1rem"},f={display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.85rem"},y={display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.8)",cursor:"pointer",fontSize:"0.85rem",width:"100%",justifyContent:"center"},z={marginTop:"0.75rem",maxHeight:"200px",overflowY:"auto",padding:"0.5rem",background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px"},v={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"};export{m as A};
