import{a as e,j as r}from"./query-Caj74EYQ.js";import{c as n}from"./index-NPitIXjM.js";import{V as t,k as i,g as s,aj as l,C as a,q as o,a0 as d}from"./icons-eh0tbLFx.js";import{b as c}from"./vendor-router-B2AaIOtG.js";import"./charts-QHQg_ypW.js";const u=()=>{var u;const[h]=c(),g=(()=>{const e=h.get("dojo");if(e)return e;const r=window.location.hostname.split(".");return r.length>=3&&"dojo"===r[1]?r[0]:"demo1"})(),[m,p]=e.useState(!0),[f,x]=e.useState(!1),[b,j]=e.useState(!1),[y,v]=e.useState(null),[k,S]=e.useState(null),[z,_]=e.useState([]),[w,C]=e.useState([]),[I,B]=e.useState({vorname:"",nachname:"",email:"",telefon:"",stil_id:"",kurs_id:"",wunschdatum:"",nachricht:"",datenschutz_akzeptiert:!1,wie_gefunden:""});e.useEffect(()=>{(async()=>{try{p(!0),v(null);const e=await fetch(`${n.apiBaseUrl}/public/probetraining/dojo/${g}`),r=await e.json();if(!r.success)return void v(r.error||"Dojo nicht gefunden");S(r.data.dojo),_(r.data.kurse),C(r.data.stile)}catch(e){console.error("Fehler beim Laden:",e),v("Verbindungsfehler. Bitte versuchen Sie es später erneut.")}finally{p(!1)}})()},[g]);const D=I.stil_id?z.filter(e=>{var r;return e.stil_name===(null==(r=w.find(e=>e.stil_id==I.stil_id))?void 0:r.name)}):z,T={container:{minHeight:"100vh",background:"linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%)",padding:"2rem 1rem",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},card:{maxWidth:"600px",margin:"0 auto",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",borderRadius:"16px",border:"1px solid rgba(255, 215, 0, 0.2)",overflow:"hidden"},header:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.05))",padding:"2rem",textAlign:"center",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},logo:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",marginBottom:"1rem",border:"3px solid rgba(255, 215, 0, 0.3)"},title:{color:"#ffd700",fontSize:"1.75rem",fontWeight:700,margin:"0 0 0.5rem 0"},subtitle:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem",margin:0},form:{padding:"2rem"},formGroup:{marginBottom:"1.5rem"},label:{display:"block",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem",fontWeight:500,marginBottom:"0.5rem"},input:{width:"100%",padding:"0.875rem 1rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"8px",color:"#ffffff",fontSize:"1rem",outline:"none",transition:"all 0.2s",boxSizing:"border-box"},select:{width:"100%",padding:"0.875rem 1rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"8px",color:"#ffffff",fontSize:"1rem",outline:"none",cursor:"pointer"},textarea:{width:"100%",padding:"0.875rem 1rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"8px",color:"#ffffff",fontSize:"1rem",minHeight:"100px",resize:"vertical",outline:"none",boxSizing:"border-box"},kursGrid:{display:"grid",gap:"0.75rem"},kursCard:{display:"flex",alignItems:"center",padding:"1rem",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},kursCardSelected:{background:"rgba(255, 215, 0, 0.1)",borderColor:"#ffd700"},kursRadio:{width:"20px",height:"20px",marginRight:"1rem",accentColor:"#ffd700"},kursInfo:{flex:1},kursName:{color:"#ffffff",fontWeight:600,fontSize:"0.95rem",marginBottom:"0.25rem"},kursDetails:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem"},checkbox:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"1.5rem"},checkboxInput:{width:"20px",height:"20px",marginTop:"2px",accentColor:"#ffd700",cursor:"pointer"},checkboxLabel:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.9rem",lineHeight:1.5},button:{width:"100%",padding:"1rem",background:"linear-gradient(135deg, #ffd700, #ffed4a)",color:"#1a1a2e",border:"none",borderRadius:"8px",fontSize:"1.1rem",fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s"},buttonDisabled:{opacity:.6,cursor:"not-allowed"},error:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem",color:"#ef4444"},success:{textAlign:"center",padding:"3rem 2rem"},successIcon:{width:"80px",height:"80px",background:"rgba(16, 185, 129, 0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},successTitle:{color:"#10b981",fontSize:"1.5rem",fontWeight:700,marginBottom:"1rem"},successText:{color:"rgba(255, 255, 255, 0.8)",fontSize:"1rem",lineHeight:1.6},loading:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",color:"rgba(255, 255, 255, 0.7)"},row:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"}};return m?r.jsx("div",{style:T.container,children:r.jsx("div",{style:T.card,children:r.jsxs("div",{style:T.loading,children:[r.jsx(t,{size:48,style:{animation:"spin 1s linear infinite",color:"#ffd700"}}),r.jsx("p",{style:{marginTop:"1rem"},children:"Lade Dojo-Daten..."})]})})}):k?b?r.jsx("div",{style:T.container,children:r.jsx("div",{style:T.card,children:r.jsxs("div",{style:T.success,children:[r.jsx("div",{style:T.successIcon,children:r.jsx(s,{size:48,color:"#10b981"})}),r.jsx("h2",{style:T.successTitle,children:"Vielen Dank!"}),r.jsxs("p",{style:T.successText,children:["Ihre Probetraining-Anfrage wurde erfolgreich übermittelt.",r.jsx("br",{}),r.jsx("br",{}),"Wir werden uns in Kürze bei Ihnen melden, um einen Termin zu vereinbaren."]})]})})}):r.jsxs("div",{style:T.container,children:[r.jsxs("div",{style:T.card,children:[r.jsxs("div",{style:T.header,children:[k.logo_url&&r.jsx("img",{src:k.logo_url,alt:k.name,style:T.logo}),r.jsx("h1",{style:T.title,children:"Probetraining buchen"}),r.jsx("p",{style:T.subtitle,children:k.name}),(null==(u=k.kontakt)?void 0:u.adresse)&&r.jsxs("p",{style:{...T.subtitle,fontSize:"0.85rem",marginTop:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[r.jsx(l,{size:14})," ",k.kontakt.adresse]})]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),I.datenschutz_akzeptiert)try{x(!0),v(null);const e=await fetch(`${n.apiBaseUrl}/public/probetraining/buchen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dojo_id:k.id,...I})}),r=await e.json();if(!r.success)return void v(r.error);j(!0)}catch(r){console.error("Fehler beim Absenden:",r),v("Ein Fehler ist aufgetreten. Bitte versuchen Sie es später erneut.")}finally{x(!1)}else v("Bitte akzeptieren Sie die Datenschutzerklärung.")},style:T.form,children:[y&&r.jsxs("div",{style:T.error,children:[r.jsx(i,{size:20}),r.jsx("span",{children:y})]}),r.jsxs("div",{style:T.row,children:[r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Vorname *"}),r.jsx("input",{type:"text",required:!0,value:I.vorname,onChange:e=>B({...I,vorname:e.target.value}),style:T.input,placeholder:"Max"})]}),r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Nachname *"}),r.jsx("input",{type:"text",required:!0,value:I.nachname,onChange:e=>B({...I,nachname:e.target.value}),style:T.input,placeholder:"Mustermann"})]})]}),r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"E-Mail *"}),r.jsx("input",{type:"email",required:!0,value:I.email,onChange:e=>B({...I,email:e.target.value}),style:T.input,placeholder:"max@beispiel.de"})]}),r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Telefon"}),r.jsx("input",{type:"tel",value:I.telefon,onChange:e=>B({...I,telefon:e.target.value}),style:T.input,placeholder:"+49 123 456789"})]}),w.length>0&&r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Welcher Stil interessiert Sie?"}),r.jsxs("select",{value:I.stil_id,onChange:e=>B({...I,stil_id:e.target.value,kurs_id:""}),style:T.select,children:[r.jsx("option",{value:"",children:"Alle Stile anzeigen"}),w.map(e=>r.jsx("option",{value:e.stil_id,children:e.name},e.stil_id))]})]}),D.length>0&&r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Wählen Sie einen Termin"}),r.jsx("div",{style:T.kursGrid,children:D.map(e=>{var n,t;return r.jsxs("label",{style:{...T.kursCard,...I.kurs_id==(e.stundenplan_id||e.kurs_id)?T.kursCardSelected:{}},children:[r.jsx("input",{type:"radio",name:"kurs",value:e.stundenplan_id||e.kurs_id,checked:I.kurs_id==(e.stundenplan_id||e.kurs_id),onChange:e=>B({...I,kurs_id:e.target.value}),style:T.kursRadio}),r.jsxs("div",{style:T.kursInfo,children:[r.jsx("div",{style:T.kursName,children:e.name}),r.jsxs("div",{style:T.kursDetails,children:[r.jsx(a,{size:14}),e.wochentag,r.jsx(o,{size:14,style:{marginLeft:"0.5rem"}}),null==(n=e.start_zeit)?void 0:n.substring(0,5)," - ",null==(t=e.end_zeit)?void 0:t.substring(0,5),e.stil_name&&r.jsx("span",{style:{marginLeft:"0.5rem",color:"#ffd700"},children:e.stil_name})]})]})]},e.stundenplan_id||e.kurs_id)})})]}),r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Wunschdatum (optional)"}),r.jsx("input",{type:"date",value:I.wunschdatum,onChange:e=>B({...I,wunschdatum:e.target.value}),style:T.input,min:(new Date).toISOString().split("T")[0]})]}),r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Nachricht (optional)"}),r.jsx("textarea",{value:I.nachricht,onChange:e=>B({...I,nachricht:e.target.value}),style:T.textarea,placeholder:"Haben Sie Fragen oder besondere Wünsche?"})]}),r.jsxs("div",{style:T.formGroup,children:[r.jsx("label",{style:T.label,children:"Wie sind Sie auf uns aufmerksam geworden?"}),r.jsxs("select",{value:I.wie_gefunden,onChange:e=>B({...I,wie_gefunden:e.target.value}),style:T.select,children:[r.jsx("option",{value:"",children:"Bitte auswählen"}),r.jsx("option",{value:"Google",children:"Google / Suchmaschine"}),r.jsx("option",{value:"Social Media",children:"Social Media"}),r.jsx("option",{value:"Empfehlung",children:"Empfehlung / Freunde"}),r.jsx("option",{value:"Flyer",children:"Flyer / Plakat"}),r.jsx("option",{value:"Vorbeigelaufen",children:"Vorbeigelaufen"}),r.jsx("option",{value:"Sonstiges",children:"Sonstiges"})]})]}),r.jsxs("div",{style:T.checkbox,children:[r.jsx("input",{type:"checkbox",id:"datenschutz",checked:I.datenschutz_akzeptiert,onChange:e=>B({...I,datenschutz_akzeptiert:e.target.checked}),style:T.checkboxInput}),r.jsxs("label",{htmlFor:"datenschutz",style:T.checkboxLabel,children:["Ich habe die ",r.jsx("a",{href:"/datenschutz",target:"_blank",style:{color:"#ffd700"},children:"Datenschutzerklärung"})," gelesen und bin mit der Verarbeitung meiner Daten einverstanden. *"]})]}),r.jsx("button",{type:"submit",disabled:f,style:{...T.button,...f?T.buttonDisabled:{}},children:f?r.jsxs(r.Fragment,{children:[r.jsx(t,{size:20,style:{animation:"spin 1s linear infinite"}}),"Wird gesendet..."]}):r.jsxs(r.Fragment,{children:["Probetraining anfragen",r.jsx(d,{size:20})]})})]})]}),r.jsx("style",{children:"\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        input::placeholder, textarea::placeholder {\n          color: rgba(255, 255, 255, 0.4);\n        }\n        select option {\n          background: #1a1a2e;\n          color: #ffffff;\n        }\n      "})]}):r.jsx("div",{style:T.container,children:r.jsx("div",{style:T.card,children:r.jsxs("div",{style:{...T.loading,color:"#ef4444"},children:[r.jsx(i,{size:48}),r.jsx("p",{style:{marginTop:"1rem"},children:y||"Dojo nicht gefunden"})]})})})};export{u as default};
