import{a as e,j as s}from"./query-Caj74EYQ.js";import{f as r,c as a}from"./index-NPitIXjM.js";import"./vendor-router-B2AaIOtG.js";import"./icons-eh0tbLFx.js";import"./charts-QHQg_ypW.js";const n=()=>{const[n,i]=e.useState("manual_sepa"),[l,t]=e.useState(null),[d,c]=e.useState(!0),[o,h]=e.useState(!1),[m,u]=e.useState(""),[p,j]=e.useState(""),[x,v]=e.useState({stripe_secret_key:"",stripe_publishable_key:""}),[g,_]=e.useState({datev_api_key:"",datev_consultant_number:"",datev_client_number:""});e.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0);const e=await r(`${a.apiBaseUrl}/payment-provider/status`);if(!e.ok)throw new Error("Fehler beim Laden der Einstellungen");const s=await e.json();t(s),i(s.current_provider),"stripe_datev"===s.current_provider&&(v({stripe_secret_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",stripe_publishable_key:s.stripe_publishable_key||""}),_({datev_api_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",datev_consultant_number:s.datev_consultant_number||"",datev_client_number:s.datev_client_number||""}))}catch(e){console.error("Fehler beim Laden der Einstellungen:",e),u("Fehler beim Laden der aktuellen Einstellungen")}finally{c(!1)}},N=e=>{i(e),u(""),j("")};return d?s.jsx("div",{className:"app-container",children:s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Lade Zahlungseinstellungen..."})]})}):s.jsxs("div",{className:"app-container",children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h2",{className:"page-title",children:"ðŸ’³ Zahlungssystem-Konfiguration"}),s.jsx("p",{className:"page-subtitle",children:"WÃ¤hlen Sie Ihr bevorzugtes Zahlungssystem"})]}),m&&s.jsxs("div",{className:"alert error",style:{marginBottom:"2rem"},children:["âŒ ",m]}),p&&s.jsxs("div",{className:"alert success",style:{marginBottom:"2rem"},children:["âœ… ",p]}),l&&s.jsx("div",{className:"standard-card",style:{marginBottom:"2rem"},children:s.jsxs("div",{className:"standard-card-content",children:[s.jsx("h3",{className:"standard-card-title",children:"Aktueller Status"}),s.jsxs("div",{className:"provider-status",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"System:"})," ",l.provider_name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"}),s.jsx("span",{className:"status-badge "+(l.is_configured?"success":"warning"),children:l.is_configured?"âœ… Konfiguriert":"âš ï¸ Nicht vollstÃ¤ndig konfiguriert"})]})]})]})}),s.jsx("div",{className:"provider-selection",style:{marginBottom:"2rem"},children:s.jsxs("div",{className:"payment-options",children:[s.jsx("div",{className:"provider-option "+("manual_sepa"===n?"selected":""),children:s.jsxs("label",{children:[s.jsx("input",{type:"radio",value:"manual_sepa",checked:"manual_sepa"===n,onChange:e=>N(e.target.value)}),s.jsxs("div",{className:"option-content",children:[s.jsxs("div",{className:"option-header",children:[s.jsx("h3",{children:"ðŸª Manuelle SEPA-Abwicklung"}),s.jsx("div",{className:"option-badge current",children:"Aktuell verfÃ¼gbar"})]}),s.jsx("p",{className:"option-description",children:"Bestehende manuelle Lastschrift-Verwaltung mit SEPA-Mandaten"}),s.jsxs("div",{className:"pros-cons",children:[s.jsxs("div",{className:"pros",children:[s.jsx("h4",{children:"âœ… Vorteile:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Bereits vollstÃ¤ndig implementiert"}),s.jsx("li",{children:"Keine externen Transaktionskosten"}),s.jsx("li",{children:"VollstÃ¤ndige Kontrolle Ã¼ber den Prozess"}),s.jsx("li",{children:"SEPA-konforme PDF-Generation"})]})]}),s.jsxs("div",{className:"cons",children:[s.jsx("h4",{children:"âŒ Nachteile:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Manuelle Buchhaltungsarbeit erforderlich"}),s.jsx("li",{children:"Zeitaufwand fÃ¼r Zahlungsabwicklung"}),s.jsx("li",{children:"Keine automatische DATEV-Integration"})]})]})]})]})]})}),s.jsx("div",{className:"provider-option "+("stripe_datev"===n?"selected":""),children:s.jsxs("label",{children:[s.jsx("input",{type:"radio",value:"stripe_datev",checked:"stripe_datev"===n,onChange:e=>N(e.target.value)}),s.jsxs("div",{className:"option-content",children:[s.jsxs("div",{className:"option-header",children:[s.jsx("h3",{children:"ðŸ’³ Stripe + DATEV Integration"}),s.jsx("div",{className:"option-badge new",children:"Neu & Professionell"})]}),s.jsx("p",{className:"option-description",children:"Professionelle Zahlungsabwicklung mit automatischer Buchhaltung"}),s.jsxs("div",{className:"pros-cons",children:[s.jsxs("div",{className:"pros",children:[s.jsx("h4",{children:"âœ… Vorteile:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Automatische DATEV-Ãœbertragung"}),s.jsx("li",{children:"Professionelle Zahlungsabwicklung"}),s.jsx("li",{children:"Zeitersparnis durch Automatisierung"}),s.jsx("li",{children:"Bessere Nachverfolgung und Reporting"}),s.jsx("li",{children:"Steuerberater hat sofort alle Daten"})]})]}),s.jsxs("div",{className:"cons",children:[s.jsx("h4",{children:"âŒ Nachteile:"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Stripe-GebÃ¼hren: 0,35â‚¬ + 1,4% pro Transaktion"}),s.jsx("li",{children:"Konfiguration von API-SchlÃ¼sseln erforderlich"}),s.jsx("li",{children:"AbhÃ¤ngigkeit von externen Diensten"})]})]})]})]})]})})]})}),"stripe_datev"===n&&s.jsxs("div",{className:"configuration-forms",children:[s.jsx("div",{className:"standard-card",style:{marginBottom:"1rem"},children:s.jsxs("div",{className:"standard-card-content",children:[s.jsx("h3",{className:"standard-card-title",children:"ðŸ”‘ Stripe Konfiguration"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"stripe_secret_key",children:"Secret Key (sk_...)"}),s.jsx("input",{type:"password",id:"stripe_secret_key",value:x.stripe_secret_key,onChange:e=>v({...x,stripe_secret_key:e.target.value}),placeholder:"sk_test_... oder sk_live_..."}),s.jsx("small",{children:"Geheimer SchlÃ¼ssel fÃ¼r Server-side API Aufrufe"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"stripe_publishable_key",children:"Publishable Key (pk_...)"}),s.jsx("input",{type:"text",id:"stripe_publishable_key",value:x.stripe_publishable_key,onChange:e=>v({...x,stripe_publishable_key:e.target.value}),placeholder:"pk_test_... oder pk_live_..."}),s.jsx("small",{children:"Ã–ffentlicher SchlÃ¼ssel fÃ¼r Frontend-Integration"})]})]})]})}),s.jsx("div",{className:"standard-card",style:{marginBottom:"1rem"},children:s.jsxs("div",{className:"standard-card-content",children:[s.jsx("h3",{className:"standard-card-title",children:"ðŸ“Š DATEV Konfiguration"}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"datev_api_key",children:"DATEV API Key"}),s.jsx("input",{type:"password",id:"datev_api_key",value:g.datev_api_key,onChange:e=>_({...g,datev_api_key:e.target.value}),placeholder:"DATEV API SchlÃ¼ssel"}),s.jsx("small",{children:"API-SchlÃ¼ssel fÃ¼r DATEV-Integration"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"datev_consultant_number",children:"Beraternummer"}),s.jsx("input",{type:"text",id:"datev_consultant_number",value:g.datev_consultant_number,onChange:e=>_({...g,datev_consultant_number:e.target.value}),placeholder:"12345"}),s.jsx("small",{children:"DATEV Beraternummer"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"datev_client_number",children:"Mandantennummer"}),s.jsx("input",{type:"text",id:"datev_client_number",value:g.datev_client_number,onChange:e=>_({...g,datev_client_number:e.target.value}),placeholder:"123"}),s.jsx("small",{children:"DATEV Mandantennummer"})]})]})]})})]}),s.jsx("div",{className:"standard-card",style:{marginBottom:"2rem"},children:s.jsxs("div",{className:"standard-card-content",children:[s.jsx("h3",{className:"standard-card-title",children:"ðŸ’° Kostenvergleich"}),s.jsxs("div",{className:"cost-comparison",children:[s.jsxs("div",{className:"cost-option",children:[s.jsx("h4",{children:"Manual SEPA"}),s.jsxs("div",{className:"cost-details",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"TransaktionsgebÃ¼hren:"})," 0â‚¬"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Zeitaufwand:"})," ~2h/Monat"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Buchhaltung:"})," Manuell"]})]})]}),s.jsxs("div",{className:"cost-option",children:[s.jsx("h4",{children:"Stripe + DATEV"}),s.jsxs("div",{className:"cost-details",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"TransaktionsgebÃ¼hren:"})," 0,35â‚¬ + 1,4%"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Zeitaufwand:"})," ~0h/Monat"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Buchhaltung:"})," Vollautomatisch"]})]})]})]})]})}),s.jsx("div",{className:"action-buttons",children:s.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{h(!0),u(""),j("");const e={payment_provider:n,...x,...g},s=await r(`${a.apiBaseUrl}/payment-provider/configure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const e=await s.json();throw new Error(e.error||"Fehler beim Speichern der Konfiguration")}j("Zahlungssystem erfolgreich konfiguriert!"),await b()}catch(e){console.error("Fehler beim Speichern:",e),u(e.message)}finally{h(!1)}},disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"loading-spinner small"}),"Speichere..."]}):s.jsx(s.Fragment,{children:"ðŸ’¾ Konfiguration speichern"})})})]})};export{n as default};
