import{g as e,a as n,j as r}from"./query-Caj74EYQ.js";import{a as t,b as a,l as i}from"./index-Bcs73ipe.js";import{r as o,_ as l}from"./editor-_pChrhAz.js";/* empty css                  */import"./vendor-router-Co3o87Zc.js";import"./icons-DiLw-1i5.js";import"./charts-C1Gv3M_c.js";const s=e(o()),d=({templateId:e,dojoId:a,onSave:i,onClose:o})=>{const d=n.useRef(null),[g,p]=n.useState(null),[c,u]=n.useState(""),[b,m]=n.useState("vertrag"),[h,x]=n.useState(!1),[f,y]=n.useState(null),[v,k]=n.useState(!1),j={mitglied:[{label:"Vorname",value:"{{mitglied.vorname}}"},{label:"Nachname",value:"{{mitglied.nachname}}"},{label:"E-Mail",value:"{{mitglied.email}}"},{label:"Telefon",value:"{{mitglied.telefon}}"},{label:"StraÃŸe",value:"{{mitglied.strasse}}"},{label:"Hausnummer",value:"{{mitglied.hausnummer}}"},{label:"PLZ",value:"{{mitglied.plz}}"},{label:"Ort",value:"{{mitglied.ort}}"},{label:"Geburtsdatum",value:"{{mitglied.geburtsdatum}}"},{label:"Mitgliedsnummer",value:"{{mitglied.mitgliedsnummer}}"}],vertrag:[{label:"Vertragsnummer",value:"{{vertrag.vertragsnummer}}"},{label:"Vertragsbeginn",value:"{{vertrag.vertragsbeginn}}"},{label:"Vertragsende",value:"{{vertrag.vertragsende}}"},{label:"Monatsbeitrag",value:"{{vertrag.monatsbeitrag}}"},{label:"Mindestlaufzeit",value:"{{vertrag.mindestlaufzeit_monate}}"},{label:"KÃ¼ndigungsfrist",value:"{{vertrag.kuendigungsfrist_monate}}"},{label:"Tarifname",value:"{{vertrag.tarifname}}"}],dojo:[{label:"Dojo Name",value:"{{dojo.dojoname}}"},{label:"StraÃŸe",value:"{{dojo.strasse}}"},{label:"Hausnummer",value:"{{dojo.hausnummer}}"},{label:"PLZ",value:"{{dojo.plz}}"},{label:"Ort",value:"{{dojo.ort}}"},{label:"Telefon",value:"{{dojo.telefon}}"},{label:"E-Mail",value:"{{dojo.email}}"},{label:"Website",value:"{{dojo.internet}}"}],system:[{label:"Heutiges Datum",value:"{{system.datum}}"},{label:"Jahr",value:"{{system.jahr}}"},{label:"Monat",value:"{{system.monat}}"}]};n.useEffect(()=>{if(!d.current)return;const n=l.init({container:d.current,height:"700px",width:"auto",plugins:[s],storageManager:!1,pluginsOpts:{[s]:{blocks:["link-block","quote","text","image","video","map"]}},canvas:{styles:["https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"]},assetManager:{upload:!1,uploadText:"Logo hochladen",addBtnText:"Bild hinzufÃ¼gen",modalTitle:"Bild auswÃ¤hlen",assets:[]}}),r=()=>{const e=n.StyleManager;if(!e)return;const r=new MutationObserver(()=>{e.getPanels().forEach(e=>{const n=e.get("el");if(!n)return;n.querySelectorAll('input[type="number"]').forEach(e=>{if("true"===e.dataset.arrowsEnabled)return;e.dataset.arrowsEnabled="true";let n=e.parentElement;for(;n&&!n.classList.contains("gjs-sm-field");)n=n.parentElement;if(n||(n=e.parentElement),"static"===getComputedStyle(n).position&&(n.style.position="relative"),!n.querySelector(".gjs-number-arrows")){const r=document.createElement("div");r.className="gjs-number-arrows",r.style.cssText="\n                position: absolute;\n                right: 2px;\n                top: 50%;\n                transform: translateY(-50%);\n                display: flex;\n                flex-direction: column;\n                gap: 1px;\n                z-index: 10;\n                height: calc(100% - 4px);\n              ";const t=document.createElement("button");t.type="button",t.innerHTML="â–²",t.style.cssText="\n                background: rgba(0, 0, 0, 0.3);\n                border: none;\n                color: #fff;\n                cursor: pointer;\n                padding: 0;\n                font-size: 8px;\n                line-height: 1;\n                flex: 1;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 2px 2px 0 0;\n                min-height: 0;\n                transition: background 0.2s;\n              ",t.onmouseenter=()=>t.style.background="rgba(0, 0, 0, 0.5)",t.onmouseleave=()=>t.style.background="rgba(0, 0, 0, 0.3)",t.onclick=n=>{n.preventDefault(),n.stopPropagation();const r=parseFloat(e.value)||0,t=parseFloat(e.step)||1,a=""!==e.max?parseFloat(e.max):void 0;let i=r+t;void 0!==a&&i>a&&(i=a),e.value=i,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))};const a=document.createElement("button");a.type="button",a.innerHTML="â–¼",a.style.cssText="\n                background: rgba(0, 0, 0, 0.3);\n                border: none;\n                color: #fff;\n                cursor: pointer;\n                padding: 0;\n                font-size: 8px;\n                line-height: 1;\n                flex: 1;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 0 0 2px 2px;\n                min-height: 0;\n                transition: background 0.2s;\n              ",a.onmouseenter=()=>a.style.background="rgba(0, 0, 0, 0.5)",a.onmouseleave=()=>a.style.background="rgba(0, 0, 0, 0.3)",a.onclick=n=>{n.preventDefault(),n.stopPropagation();const r=parseFloat(e.value)||0,t=parseFloat(e.step)||1,a=""!==e.min?parseFloat(e.min):void 0;let i=r-t;void 0!==a&&i<a&&(i=a),e.value=i,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))},r.appendChild(t),r.appendChild(a),n.appendChild(r)}})})}),t=e.getContainer();t&&r.observe(t,{childList:!0,subtree:!0}),setTimeout(()=>{e.getPanels().forEach(e=>{const n=e.get("el");n&&r.observe(n,{childList:!0,subtree:!0})})},500)};n.on("load",()=>{setTimeout(r,500);try{const e=n.Canvas.getDocument();if(e){const n=e.createElement("style");n.innerHTML="\n            /* A4-Seiten-Simulation */\n            body {\n              background: #f5f5f5 !important;\n              padding: 20px !important;\n            }\n\n            /* Simuliere A4-Seiten */\n            body > div, body > section, body > article {\n              background: white;\n              max-width: 210mm;\n              min-height: 297mm;\n              margin: 0 auto 20mm auto;\n              padding: 20mm;\n              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n              position: relative;\n            }\n\n            /* Seitenwechsel nach ca. 297mm HÃ¶he */\n            body > div:not(:last-child)::after,\n            body > section:not(:last-child)::after,\n            body > article:not(:last-child)::after {\n              content: 'â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Seitenwechsel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€';\n              display: block;\n              text-align: center;\n              color: #999;\n              font-size: 12px;\n              margin-top: 20mm;\n              padding: 10px;\n              background: #f0f0f0;\n              border-top: 2px dashed #ccc;\n              border-bottom: 2px dashed #ccc;\n              position: absolute;\n              bottom: -30px;\n              left: 0;\n              right: 0;\n              width: 100%;\n            }\n          ",e.head.appendChild(n)}}catch(e){console.warn("Konnte Seitenwechsel-CSS nicht einfÃ¼gen:",e)}}),n.on("styleManager:update",()=>{setTimeout(r,100)});const t=n.BlockManager;return t.add("free-text-block",{label:"ğŸ“ Freier Text",category:"1ï¸âƒ£ Basis",content:{type:"text",content:"Klicken Sie hier, um Text zu bearbeiten...",style:{padding:"10px"}}}),t.add("logo-block",{label:"ğŸ–¼ï¸ Logo/Bild",category:"1ï¸âƒ£ Basis",content:"\n        <div style=\"text-align: center; padding: 20px;\">\n          <img src=\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='100' viewBox='0 0 200 100'%3E%3Crect width='200' height='100' fill='%23e0e0e0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='14' fill='%23666'%3ELogo hier einfÃ¼gen%3C/text%3E%3C/svg%3E\"\n               alt=\"Logo\"\n               style=\"max-width: 200px; height: auto;\" />\n        </div>\n      "}),t.add("mitglied-block",{label:"ğŸ‘¤ Mitgliedsdaten",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div class="mitglied-daten" style="padding: 20px; background: #f5f5f5; border-radius: 8px; margin: 10px 0;">\n          <h3 style="color: #1976d2; margin-bottom: 15px;">PersÃ¶nliche Daten</h3>\n          <p><strong>Name:</strong> {{mitglied.vorname}} {{mitglied.nachname}}</p>\n          <p><strong>Adresse:</strong> {{mitglied.strasse}} {{mitglied.hausnummer}}, {{mitglied.plz}} {{mitglied.ort}}</p>\n          <p><strong>E-Mail:</strong> {{mitglied.email}}</p>\n          <p><strong>Telefon:</strong> {{mitglied.telefon}}</p>\n        </div>\n      '}),t.add("vertrag-block",{label:"ğŸ“„ Vertragsdaten",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div class="vertrag-daten" style="padding: 20px; background: #f5f5f5; border-radius: 8px; margin: 10px 0;">\n          <h3 style="color: #1976d2; margin-bottom: 15px;">Vertragsinformationen</h3>\n          <p><strong>Vertragsnummer:</strong> {{vertrag.vertragsnummer}}</p>\n          <p><strong>Vertragsbeginn:</strong> {{vertrag.vertragsbeginn}}</p>\n          <p><strong>Monatsbeitrag:</strong> â‚¬{{vertrag.monatsbeitrag}}</p>\n          <p><strong>Laufzeit:</strong> {{vertrag.mindestlaufzeit_monate}} Monate</p>\n        </div>\n      '}),t.add("dojo-block",{label:"ğŸ¢ Dojo-Informationen",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div class="dojo-daten" style="padding: 20px; background: #f5f5f5; border-radius: 8px; margin: 10px 0;">\n          <h2 style="color: #1976d2; text-align: center;">{{dojo.dojoname}}</h2>\n          <p style="text-align: center;">{{dojo.strasse}} {{dojo.hausnummer}}, {{dojo.plz}} {{dojo.ort}}</p>\n          <p style="text-align: center;">Tel: {{dojo.telefon}} | E-Mail: {{dojo.email}}</p>\n        </div>\n      '}),t.add("signature-block",{label:"âœï¸ Unterschriften",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div class="signature-section" style="display: flex; justify-content: space-between; margin-top: 60px; padding: 20px;">\n          <div style="text-align: center; width: 45%;">\n            <div style="border-bottom: 2px solid #000; height: 50px; margin-bottom: 10px;"></div>\n            <p><strong>Ort, Datum</strong></p>\n            <p>Unterschrift Dojo</p>\n          </div>\n          <div style="text-align: center; width: 45%;">\n            <div style="border-bottom: 2px solid #000; height: 50px; margin-bottom: 10px;"></div>\n            <p><strong>{{system.datum}}</strong></p>\n            <p>Unterschrift Mitglied</p>\n          </div>\n        </div>\n      '}),t.add("table-block",{label:"ğŸ“‹ Tabelle",category:"2ï¸âƒ£ Neumitglied",content:'\n        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">\n          <tr style="background: #1976d2; color: white;">\n            <th style="padding: 10px; border: 1px solid #ddd;">Bezeichnung</th>\n            <th style="padding: 10px; border: 1px solid #ddd;">Wert</th>\n          </tr>\n          <tr>\n            <td style="padding: 10px; border: 1px solid #ddd;">Monatsbeitrag</td>\n            <td style="padding: 10px; border: 1px solid #ddd;">â‚¬{{vertrag.monatsbeitrag}}</td>\n          </tr>\n          <tr>\n            <td style="padding: 10px; border: 1px solid #ddd;">Laufzeit</td>\n            <td style="padding: 10px; border: 1px solid #ddd;">{{vertrag.mindestlaufzeit_monate}} Monate</td>\n          </tr>\n        </table>\n      '}),t.add("widerruf-block",{label:"âš–ï¸ Widerrufsrecht",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div style="padding: 15px; background: #fff3e0; border-left: 4px solid #ff9800; margin: 20px 0;">\n          <h4 style="color: #e65100; margin-top: 0;">Widerrufsrecht</h4>\n          <p>Sie haben das Recht, binnen vierzehn Tagen ohne Angabe von GrÃ¼nden diesen Vertrag zu widerrufen.</p>\n          <p>Die Widerrufsfrist betrÃ¤gt vierzehn Tage ab dem Tag des Vertragsabschlusses.</p>\n          <p>Um Ihr Widerrufsrecht auszuÃ¼ben, mÃ¼ssen Sie uns ({{dojo.dojoname}}, {{dojo.strasse}} {{dojo.hausnummer}}, {{dojo.plz}} {{dojo.ort}}, E-Mail: {{dojo.email}}) mittels einer eindeutigen ErklÃ¤rung Ã¼ber Ihren Entschluss, diesen Vertrag zu widerrufen, informieren.</p>\n        </div>\n      '}),t.add("sepa-block",{label:"ğŸ¦ SEPA-Mandat",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div style="padding: 20px; border: 2px solid #1976d2; margin: 20px 0;">\n          <h3 style="color: #1976d2; text-align: center; margin-top: 0;">SEPA-Lastschriftmandat</h3>\n          <p><strong>GlÃ¤ubiger:</strong> {{dojo.dojoname}}</p>\n          <p><strong>GlÃ¤ubiger-ID:</strong> [GlÃ¤ubiger-ID eintragen]</p>\n          <p><strong>Mandatsreferenz:</strong> {{vertrag.vertragsnummer}}</p>\n          <br/>\n          <p>Ich/Wir ermÃ¤chtige(n) {{dojo.dojoname}}, Zahlungen von meinem/unserem Konto mittels Lastschrift einzuziehen. Zugleich weise(n) ich/wir mein/unser Kreditinstitut an, die von {{dojo.dojoname}} auf mein/unser Konto gezogenen Lastschriften einzulÃ¶sen.</p>\n          <br/>\n          <p style="font-size: 0.9em; color: #666;">Hinweis: Ich kann/Wir kÃ¶nnen innerhalb von acht Wochen, beginnend mit dem Belastungsdatum, die Erstattung des belasteten Betrages verlangen. Es gelten dabei die mit meinem/unserem Kreditinstitut vereinbarten Bedingungen.</p>\n          <br/>\n          <table style="width: 100%; margin-top: 20px;">\n            <tr>\n              <td style="width: 50%; padding-right: 10px;">\n                <p><strong>Kontoinhaber:</strong></p>\n                <p style="border-bottom: 1px solid #000; min-height: 25px;">{{mitglied.vorname}} {{mitglied.nachname}}</p>\n              </td>\n              <td style="width: 50%; padding-left: 10px;">\n                <p><strong>IBAN:</strong></p>\n                <p style="border-bottom: 1px solid #000; min-height: 25px;">&nbsp;</p>\n              </td>\n            </tr>\n            <tr>\n              <td style="padding-right: 10px; padding-top: 15px;">\n                <p><strong>BIC:</strong></p>\n                <p style="border-bottom: 1px solid #000; min-height: 25px;">&nbsp;</p>\n              </td>\n              <td style="padding-left: 10px; padding-top: 15px;">\n                <p><strong>Kreditinstitut:</strong></p>\n                <p style="border-bottom: 1px solid #000; min-height: 25px;">&nbsp;</p>\n              </td>\n            </tr>\n          </table>\n        </div>\n      '}),t.add("datenschutz-block",{label:"ğŸ”’ Datenschutz",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div style="padding: 15px; background: #e8f5e9; border-left: 4px solid #4caf50; margin: 20px 0;">\n          <h4 style="color: #2e7d32; margin-top: 0;">Datenschutzhinweise</h4>\n          <p>Mit der Unterzeichnung dieses Vertrags bestÃ¤tige ich, dass ich die DatenschutzerklÃ¤rung von {{dojo.dojoname}} zur Kenntnis genommen habe.</p>\n          <p>Ich bin damit einverstanden, dass meine personenbezogenen Daten zur Vertragsabwicklung und Mitgliederverwaltung gespeichert und verarbeitet werden.</p>\n          <p>Die vollstÃ¤ndige DatenschutzerklÃ¤rung ist einsehbar unter: {{dojo.internet}}/datenschutz</p>\n          <br/>\n          <p style="font-size: 0.85em;">â˜ Ich willige ein, dass {{dojo.dojoname}} mich per E-Mail Ã¼ber Angebote, Events und Neuigkeiten informieren darf. Diese Einwilligung kann ich jederzeit widerrufen.</p>\n        </div>\n      '}),t.add("gesundheit-block",{label:"ğŸ¥ GesundheitserklÃ¤rung",category:"2ï¸âƒ£ Neumitglied",content:'\n        <div style="padding: 20px; border: 2px solid #f44336; margin: 20px 0;">\n          <h4 style="color: #c62828; margin-top: 0;">GesundheitserklÃ¤rung & Haftungsausschluss</h4>\n          <p>Ich bestÃ¤tige, dass ich gesundheitlich in der Lage bin, am Trainingsangebot teilzunehmen und keine gesundheitlichen EinschrÃ¤nkungen vorliegen, die einer sportlichen BetÃ¤tigung entgegenstehen.</p>\n          <br/>\n          <p><strong>Bitte ankreuzen:</strong></p>\n          <p>â˜ Ich leide an keinen akuten oder chronischen Erkrankungen</p>\n          <p>â˜ Ich nehme keine regelmÃ¤ÃŸigen Medikamente ein</p>\n          <p>â˜ Ich bin nicht schwanger</p>\n          <br/>\n          <p style="font-size: 0.9em;"><strong>Haftungsausschluss:</strong></p>\n          <p style="font-size: 0.85em;">Die Teilnahme am Training erfolgt auf eigene Gefahr. {{dojo.dojoname}} Ã¼bernimmt keine Haftung fÃ¼r UnfÃ¤lle, Verletzungen oder SchÃ¤den, die wÃ¤hrend des Trainings oder auf dem Weg zum/vom Training entstehen, sofern kein grob fahrlÃ¤ssiges oder vorsÃ¤tzliches Verhalten vorliegt.</p>\n        </div>\n      '}),t.add("beitragsanpassung-block",{label:"ğŸ’° Beitragsanpassung",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 20px; background: #fff9c4; border: 2px solid #fbc02d; margin: 20px 0; border-radius: 8px;">\n          <h4 style="color: #f57f17; margin-top: 0;">Mitteilung zur Beitragsanpassung</h4>\n          <p>Sehr geehrte/r {{mitglied.vorname}} {{mitglied.nachname}},</p>\n          <br/>\n          <p>wir mÃ¶chten Sie rechtzeitig Ã¼ber eine Anpassung Ihres Monatsbeitrags informieren.</p>\n          <br/>\n          <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0;">\n            <p><strong>Aktueller Beitrag:</strong> â‚¬{{vertrag.monatsbeitrag}} pro Monat</p>\n            <p><strong>Neuer Beitrag:</strong> â‚¬[Neuer Betrag] pro Monat</p>\n            <p><strong>GÃ¼ltig ab:</strong> [Datum einfÃ¼gen]</p>\n          </div>\n          <p><strong>Grund fÃ¼r die Anpassung:</strong></p>\n          <p>[Hier BegrÃ¼ndung einfÃ¼gen, z.B. gestiegene Betriebskosten, Inflation, erweiterte Leistungen]</p>\n          <br/>\n          <p style="background: #e3f2fd; padding: 10px; border-radius: 4px;">\n            â„¹ï¸ Sie haben ein <strong>SonderkÃ¼ndigungsrecht</strong> innerhalb von 6 Wochen nach Erhalt dieser Mitteilung.\n          </p>\n          <br/>\n          <p>Bei Fragen stehen wir Ihnen gerne zur VerfÃ¼gung.</p>\n        </div>\n      '}),t.add("zahlungserinnerung-block",{label:"âš ï¸ Zahlungserinnerung",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 20px; background: #ffebee; border-left: 4px solid #f44336; margin: 20px 0;">\n          <h4 style="color: #c62828; margin-top: 0;">Freundliche Zahlungserinnerung</h4>\n          <p>Sehr geehrte/r {{mitglied.vorname}} {{mitglied.nachname}},</p>\n          <br/>\n          <p>uns ist aufgefallen, dass die Zahlung fÃ¼r Ihren Mitgliedsbeitrag noch aussteht.</p>\n          <br/>\n          <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0;">\n            <p><strong>Vertragsnummer:</strong> {{vertrag.vertragsnummer}}</p>\n            <p><strong>Offener Betrag:</strong> â‚¬{{vertrag.monatsbeitrag}}</p>\n            <p><strong>FÃ¤llig seit:</strong> [Datum einfÃ¼gen]</p>\n          </div>\n          <p>Bitte Ã¼berweisen Sie den offenen Betrag innerhalb der nÃ¤chsten 7 Tage auf folgendes Konto:</p>\n          <div style="background: #f5f5f5; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0;">\n            <p>EmpfÃ¤nger: {{dojo.dojoname}}</p>\n            <p>IBAN: [IBAN einfÃ¼gen]</p>\n            <p>Verwendungszweck: {{vertrag.vertragsnummer}}</p>\n          </div>\n          <p style="font-size: 0.9em; color: #666;">Falls Sie bereits gezahlt haben, betrachten Sie dieses Schreiben bitte als gegenstandslos.</p>\n        </div>\n      '}),t.add("vertragsaenderung-block",{label:"ğŸ“ VertragsÃ¤nderung",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 20px; background: #e3f2fd; border: 2px solid #2196f3; margin: 20px 0; border-radius: 8px;">\n          <h4 style="color: #1565c0; margin-top: 0;">BestÃ¤tigung VertragsÃ¤nderung</h4>\n          <p>Sehr geehrte/r {{mitglied.vorname}} {{mitglied.nachname}},</p>\n          <br/>\n          <p>wir bestÃ¤tigen hiermit die vereinbarte Ã„nderung Ihres Mitgliedsvertrags.</p>\n          <br/>\n          <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0;">\n            <p><strong>Vertragsnummer:</strong> {{vertrag.vertragsnummer}}</p>\n            <p><strong>Datum der Ã„nderung:</strong> {{system.datum}}</p>\n            <p><strong>GÃ¼ltig ab:</strong> [Datum einfÃ¼gen]</p>\n          </div>\n          <p><strong>Folgende Ã„nderungen wurden vorgenommen:</strong></p>\n          <ul style="margin: 10px 0; padding-left: 20px;">\n            <li>[Ã„nderung 1, z.B. Tarifwechsel von Standard zu Premium]</li>\n            <li>[Ã„nderung 2, z.B. Beitragsanpassung]</li>\n            <li>[Ã„nderung 3]</li>\n          </ul>\n          <br/>\n          <p>Alle anderen Vertragsbestandteile bleiben unverÃ¤ndert.</p>\n        </div>\n      '}),t.add("kuendigung-block",{label:"ğŸ“… KÃ¼ndigungsregelungen",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 15px; background: #fff9c4; border-left: 4px solid #fbc02d; margin: 20px 0;">\n          <h4 style="color: #f57f17; margin-top: 0;">KÃ¼ndigungsregelungen</h4>\n          <p><strong>Mindestlaufzeit:</strong> {{vertrag.mindestlaufzeit_monate}} Monate ab Vertragsbeginn</p>\n          <p><strong>KÃ¼ndigungsfrist:</strong> {{vertrag.kuendigungsfrist_monate}} Monate zum Vertragsende</p>\n          <p><strong>Vertragsbeginn:</strong> {{vertrag.vertragsbeginn}}</p>\n          <br/>\n          <p>Nach Ablauf der Mindestlaufzeit verlÃ¤ngert sich der Vertrag automatisch um jeweils 12 Monate, sofern nicht fristgerecht gekÃ¼ndigt wird.</p>\n          <p>Die KÃ¼ndigung muss schriftlich (per Post oder E-Mail an {{dojo.email}}) erfolgen.</p>\n          <br/>\n          <p style="font-size: 0.85em;"><strong>SonderkÃ¼ndigungsrecht:</strong> Bei Umzug (> 50km), lÃ¤ngerer Krankheit (> 3 Monate mit Ã¤rztlichem Attest) oder Schwangerschaft ist eine vorzeitige KÃ¼ndigung mÃ¶glich.</p>\n        </div>\n      '}),t.add("zahlung-block",{label:"ğŸ’³ ZahlungsmodalitÃ¤ten",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 15px; background: #e1f5fe; border-left: 4px solid #0288d1; margin: 20px 0;">\n          <h4 style="color: #01579b; margin-top: 0;">ZahlungsmodalitÃ¤ten</h4>\n          <p><strong>Monatsbeitrag:</strong> â‚¬{{vertrag.monatsbeitrag}}</p>\n          <p><strong>Zahlungsweise:</strong> Monatlich per SEPA-Lastschrift</p>\n          <p><strong>FÃ¤lligkeit:</strong> Jeweils zum 1. des Monats</p>\n          <br/>\n          <p>Die BeitrÃ¤ge werden zum 1. eines jeden Monats im Voraus fÃ¤llig und per SEPA-Lastschrift eingezogen.</p>\n          <p>Bei RÃ¼cklastschriften werden die entstehenden BankgebÃ¼hren in Rechnung gestellt.</p>\n          <br/>\n          <p style="font-size: 0.85em;"><strong>Beitragsanpassung:</strong> {{dojo.dojoname}} behÃ¤lt sich vor, die BeitrÃ¤ge mit einer AnkÃ¼ndigungsfrist von 6 Wochen anzupassen.</p>\n        </div>\n      '}),t.add("agb-block",{label:"ğŸ“œ AGB-Hinweis",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 15px; background: #f3e5f5; border-left: 4px solid #9c27b0; margin: 20px 0;">\n          <h4 style="color: #6a1b9a; margin-top: 0;">Allgemeine GeschÃ¤ftsbedingungen</h4>\n          <p>Mit Unterzeichnung dieses Vertrags erkenne ich die Allgemeinen GeschÃ¤ftsbedingungen (AGB) sowie die Hausordnung von {{dojo.dojoname}} an.</p>\n          <br/>\n          <p>Die vollstÃ¤ndigen AGB und die Hausordnung wurden mir ausgehÃ¤ndigt und sind zudem einsehbar unter:</p>\n          <p><strong>{{dojo.internet}}/agb</strong></p>\n          <br/>\n          <p style="font-size: 0.85em;">â˜ Hiermit bestÃ¤tige ich, die AGB und Hausordnung gelesen und verstanden zu haben.</p>\n        </div>\n      '}),t.add("hausordnung-block",{label:"ğŸ¥‹ Hausordnung",category:"3ï¸âƒ£ Bestand",content:'\n        <div style="padding: 15px; background: #fce4ec; border-left: 4px solid #e91e63; margin: 20px 0;">\n          <h4 style="color: #880e4f; margin-top: 0;">Hausordnung & Verhaltensregeln</h4>\n          <p><strong>Wichtige Verhaltensregeln:</strong></p>\n          <ul style="margin: 10px 0; padding-left: 20px;">\n            <li>PÃ¼nktliches Erscheinen zum Training</li>\n            <li>Saubere Sportkleidung und Hygiene</li>\n            <li>Respektvoller Umgang mit Trainern und Mitgliedern</li>\n            <li>Nutzung von TrainingsgerÃ¤ten nur unter Anleitung</li>\n            <li>Umkleiden und Duschen sauber hinterlassen</li>\n          </ul>\n          <br/>\n          <p style="font-size: 0.85em;">Bei wiederholten VerstÃ¶ÃŸen gegen die Hausordnung behÃ¤lt sich {{dojo.dojoname}} das Recht vor, das VertragsverhÃ¤ltnis auÃŸerordentlich zu kÃ¼ndigen.</p>\n        </div>\n      '}),Object.entries(j.mitglied).forEach((e,n)=>{t.add(`placeholder-mitglied-${n}`,{label:e[1].label,category:"5ï¸âƒ£ Mitglied",content:`<span style="background: #e3f2fd; padding: 2px 6px; border-radius: 4px; font-family: monospace; color: #1565c0; border: 1px solid #90caf9;">${e[1].value}</span>`})}),Object.entries(j.vertrag).forEach((e,n)=>{t.add(`placeholder-vertrag-${n}`,{label:e[1].label,category:"6ï¸âƒ£ Vertrag",content:`<span style="background: #fff3e0; padding: 2px 6px; border-radius: 4px; font-family: monospace; color: #e65100; border: 1px solid #ffb74d;">${e[1].value}</span>`})}),Object.entries(j.dojo).forEach((e,n)=>{t.add(`placeholder-dojo-${n}`,{label:e[1].label,category:"7ï¸âƒ£ Dojo",content:`<span style="background: #e8f5e9; padding: 2px 6px; border-radius: 4px; font-family: monospace; color: #2e7d32; border: 1px solid #81c784;">${e[1].value}</span>`})}),Object.entries(j.system).forEach((e,n)=>{t.add(`placeholder-system-${n}`,{label:e[1].label,category:"8ï¸âƒ£ System",content:`<span style="background: #f3e5f5; padding: 2px 6px; border-radius: 4px; font-family: monospace; color: #6a1b9a; border: 1px solid #ba68c8;">${e[1].value}</span>`})}),t.add("kuendigung-bestaetigung-block",{label:"ğŸ“‹ KÃ¼ndigungsbestÃ¤tigung",category:"4ï¸âƒ£ KÃ¼ndigung",content:'\n        <div style="padding: 20px; background: #ffebee; border: 2px solid #ef5350; margin: 20px 0; border-radius: 8px;">\n          <h3 style="color: #c62828; text-align: center; margin-top: 0;">KÃ¼ndigungsbestÃ¤tigung</h3>\n          <p>Sehr geehrte/r {{mitglied.vorname}} {{mitglied.nachname}},</p>\n          <br/>\n          <p>wir bestÃ¤tigen hiermit den Eingang Ihrer KÃ¼ndigung fÃ¼r Ihren Mitgliedsvertrag.</p>\n          <br/>\n          <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0;">\n            <p><strong>Vertragsnummer:</strong> {{vertrag.vertragsnummer}}</p>\n            <p><strong>KÃ¼ndigungsdatum (Eingang):</strong> {{system.datum}}</p>\n            <p><strong>Vertragsende:</strong> {{vertrag.vertragsende}}</p>\n            <p><strong>Letzte Zahlung fÃ¤llig am:</strong> [Datum einfÃ¼gen]</p>\n          </div>\n          <p>Ihr Vertrag endet somit ordnungsgemÃ¤ÃŸ zum oben genannten Datum. Bis dahin gilt Ihre Mitgliedschaft unverÃ¤ndert fort.</p>\n          <p>Wir bedanken uns fÃ¼r Ihr Vertrauen und wÃ¼nschen Ihnen alles Gute fÃ¼r die Zukunft.</p>\n          <br/>\n          <p>Mit freundlichen GrÃ¼ÃŸen,<br/>{{dojo.dojoname}}</p>\n        </div>\n      '}),t.add("kuendigung-eingang-block",{label:"âœ‰ï¸ KÃ¼ndigungseingang",category:"4ï¸âƒ£ KÃ¼ndigung",content:'\n        <div style="padding: 20px; background: #fff3e0; border-left: 4px solid #ff9800; margin: 20px 0;">\n          <h4 style="color: #e65100; margin-top: 0;">EingangsbestÃ¤tigung KÃ¼ndigung</h4>\n          <p>Hiermit bestÃ¤tigen wir den Eingang Ihrer KÃ¼ndigungserklÃ¤rung vom {{system.datum}}.</p>\n          <br/>\n          <p><strong>Betroffener Vertrag:</strong> {{vertrag.vertragsnummer}}</p>\n          <p><strong>Mitgliedsnummer:</strong> {{mitglied.mitgliedsnummer}}</p>\n          <br/>\n          <p>Ihre KÃ¼ndigung wird geprÃ¼ft und Sie erhalten in KÃ¼rze eine detaillierte KÃ¼ndigungsbestÃ¤tigung mit dem genauen Vertragsende.</p>\n        </div>\n      '}),t.add("vertragsauslauf-block",{label:"â° Vertragsauslauf",category:"4ï¸âƒ£ KÃ¼ndigung",content:'\n        <div style="padding: 20px; background: #e3f2fd; border-left: 4px solid #2196f3; margin: 20px 0;">\n          <h4 style="color: #1565c0; margin-top: 0;">Hinweis zum Vertragsende</h4>\n          <p>Sehr geehrte/r {{mitglied.vorname}} {{mitglied.nachname}},</p>\n          <br/>\n          <p>wir mÃ¶chten Sie daran erinnern, dass Ihr Vertrag am <strong>{{vertrag.vertragsende}}</strong> auslÃ¤uft.</p>\n          <br/>\n          <p><strong>Wichtige Informationen:</strong></p>\n          <ul style="margin: 10px 0; padding-left: 20px;">\n            <li>Bis zum Vertragsende kÃ¶nnen Sie alle Leistungen in vollem Umfang nutzen</li>\n            <li>Die letzte Abbuchung erfolgt zum [Datum einfÃ¼gen]</li>\n            <li>Ihre Zugangskarte/Mitgliedschaft erlischt automatisch am {{vertrag.vertragsende}}</li>\n            <li>PersÃ¶nliche GegenstÃ¤nde bitte bis zum Vertragsende abholen</li>\n          </ul>\n          <br/>\n          <p style="background: #fff3e0; padding: 10px; border-radius: 4px; font-size: 0.9em;">\n            ğŸ’¡ <strong>MÃ¶chten Sie doch bleiben?</strong> Gerne kÃ¶nnen Sie Ihre KÃ¼ndigung bis [Frist] zurÃ¼ckziehen. Kontaktieren Sie uns einfach!\n          </p>\n        </div>\n      '}),t.add("austritt-block",{label:"ğŸ‘‹ Austrittsdokument",category:"4ï¸âƒ£ KÃ¼ndigung",content:'\n        <div style="padding: 20px; background: #f3e5f5; border: 2px solid #9c27b0; margin: 20px 0; border-radius: 8px;">\n          <h3 style="color: #6a1b9a; text-align: center; margin-top: 0;">AustrittsbestÃ¤tigung</h3>\n          <p>{{dojo.dojoname}} bestÃ¤tigt hiermit, dass</p>\n          <br/>\n          <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">\n            <h4 style="margin: 0; color: #6a1b9a;">{{mitglied.vorname}} {{mitglied.nachname}}</h4>\n            <p style="margin: 5px 0; color: #666;">Mitgliedsnummer: {{mitglied.mitgliedsnummer}}</p>\n          </div>\n          <p>die Mitgliedschaft zum <strong>{{vertrag.vertragsende}}</strong> ordnungsgemÃ¤ÃŸ beendet hat.</p>\n          <br/>\n          <p><strong>Zusammenfassung:</strong></p>\n          <ul style="margin: 10px 0; padding-left: 20px;">\n            <li>Mitglied seit: {{vertrag.vertragsbeginn}}</li>\n            <li>Vertrag beendet am: {{vertrag.vertragsende}}</li>\n            <li>Alle finanziellen Verpflichtungen wurden erfÃ¼llt</li>\n            <li>Keine offenen Forderungen</li>\n          </ul>\n          <br/>\n          <p>Wir bedanken uns fÃ¼r die gemeinsame Zeit und wÃ¼nschen alles Gute fÃ¼r die Zukunft!</p>\n          <br/>\n          <p style="text-align: center; margin-top: 40px;">\n            <strong>{{dojo.dojoname}}</strong><br/>\n            {{dojo.strasse}} {{dojo.hausnummer}}, {{dojo.plz}} {{dojo.ort}}<br/>\n            {{dojo.email}} | {{dojo.telefon}}\n          </p>\n        </div>\n      '}),t.add("kuendigung-widerruf-block",{label:"ğŸ”„ Widerruf KÃ¼ndigung",category:"4ï¸âƒ£ KÃ¼ndigung",content:'\n        <div style="padding: 20px; background: #e8f5e9; border-left: 4px solid #4caf50; margin: 20px 0;">\n          <h4 style="color: #2e7d32; margin-top: 0;">BestÃ¤tigung: RÃ¼cknahme der KÃ¼ndigung</h4>\n          <p>Sehr geehrte/r {{mitglied.vorname}} {{mitglied.nachname}},</p>\n          <br/>\n          <p>wir freuen uns, dass Sie sich entschieden haben, Mitglied bei {{dojo.dojoname}} zu bleiben!</p>\n          <br/>\n          <p>Hiermit bestÃ¤tigen wir die RÃ¼cknahme Ihrer KÃ¼ndigung vom {{system.datum}}.</p>\n          <br/>\n          <div style="background: white; padding: 15px; border-radius: 8px; margin: 20px 0;">\n            <p><strong>Vertragsnummer:</strong> {{vertrag.vertragsnummer}}</p>\n            <p><strong>Status:</strong> <span style="color: #4caf50; font-weight: bold;">âœ“ AKTIV</span></p>\n            <p><strong>Vertragslaufzeit:</strong> LÃ¤uft unverÃ¤ndert weiter</p>\n          </div>\n          <p>Ihre Mitgliedschaft lÃ¤uft nun wie gewohnt weiter. Die Beitragszahlungen werden regulÃ¤r fortgesetzt.</p>\n          <br/>\n          <p>Bei Fragen stehen wir Ihnen gerne zur VerfÃ¼gung.</p>\n          <p>Mit freundlichen GrÃ¼ÃŸen,<br/>Ihr {{dojo.dojoname}} Team</p>\n        </div>\n      '}),p(n),e&&S(e,n),()=>{n&&n.destroy()}},[e]);const S=async(e,n)=>{try{const r=(await t.get(`/vertragsvorlagen/${e}`)).data.data;if(u(r.name),m(r.template_type),!n)return void console.warn("Editor noch nicht initialisiert, warte auf Initialisierung");r.grapesjs_components&&r.grapesjs_styles?(n.setComponents(JSON.parse(r.grapesjs_components)),n.setStyle(JSON.parse(r.grapesjs_styles))):r.grapesjs_html&&(n.setComponents(r.grapesjs_html),r.grapesjs_css&&n.setStyle(r.grapesjs_css))}catch(r){console.error("Fehler beim Laden der Vorlage:",r),r.message&&!r.message.includes("setComponents")&&alert("Fehler beim Laden der Vorlage")}};return r.jsxs("div",{style:{padding:"20px",background:"#1e1e1e",minHeight:"100vh"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"20px",background:"#2d2d2d",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.3)",color:"#e0e0e0"},children:[r.jsx("h2",{style:{color:"#e0e0e0",margin:0},children:"ğŸ“ Vertragsvorlage bearbeiten"}),r.jsxs("div",{style:{display:"flex",gap:"10px"},children:[r.jsx("button",{className:"btn btn-secondary",onClick:o,children:"Abbrechen"}),r.jsx("button",{className:"btn btn-info",onClick:async()=>{if(g)try{if(e){console.log("ğŸ“¡ Lade Vorschau mit echten Daten fÃ¼r Template:",e);const n=await t.get(`/vertragsvorlagen/${e}/preview`),r=new Blob([n.data],{type:"text/html"}),a=URL.createObjectURL(r);f&&URL.revokeObjectURL(f),y(a)}else{console.log("ğŸ“ Zeige lokale Vorschau (Template noch nicht gespeichert)");const e=g.getHtml(),n=`\n          <!DOCTYPE html>\n          <html>\n            <head>\n              <meta charset="UTF-8">\n              <style>${g.getCss()}</style>\n              <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">\n            </head>\n            <body style="padding: 20px;">\n              ${e}\n              <div style="margin-top: 40px; padding: 20px; background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px;">\n                <p style="margin: 0 0 10px 0;"><strong>â„¹ï¸ Hinweis:</strong> Dies ist eine neue, noch nicht gespeicherte Vorlage.</p>\n                <p style="margin: 0;"><strong>Speichern Sie die Vorlage</strong>, um eine Vorschau mit echten Daten aus der Datenbank zu sehen.</p>\n              </div>\n            </body>\n          </html>\n        `,r=new Blob([n],{type:"text/html"}),t=URL.createObjectURL(r);f&&URL.revokeObjectURL(f),y(t)}}catch(n){console.error("Fehler bei der Vorschau:",n),alert("âŒ Fehler bei der Vorschau-Erstellung: "+n.message)}},disabled:!g,children:"ğŸ‘ï¸ Vorschau"}),r.jsx("button",{className:"btn btn-primary",onClick:async()=>{if(g)if(c.trim()){x(!0);try{const n=g.getHtml(),r=g.getCss(),o=JSON.stringify(g.getComponents()),l=JSON.stringify(g.getStyle()),s={name:c,beschreibung:"",dojo_id:a,template_type:b,grapesjs_html:n,grapesjs_css:r,grapesjs_components:o,grapesjs_styles:l,available_placeholders:JSON.stringify(j)};e?(await t.put(`/vertragsvorlagen/${e}`,s),alert("âœ… Vorlage erfolgreich aktualisiert")):(await t.post("/vertragsvorlagen",s),alert("âœ… Vorlage erfolgreich erstellt")),i&&i()}catch(n){console.error("Fehler beim Speichern:",n),alert("âŒ Fehler beim Speichern der Vorlage")}finally{x(!1)}}else alert("Bitte geben Sie einen Namen fÃ¼r die Vorlage ein")},disabled:h,children:h?"Speichert...":"ğŸ’¾ Speichern"})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"15px",marginBottom:"20px"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#e0e0e0"},children:"Vorlagen-Name:"}),r.jsx("input",{type:"text",className:"form-control",value:c,onChange:e=>u(e.target.value),placeholder:"z.B. Standard Mitgliedsvertrag",style:{background:"#2d2d2d",color:"#e0e0e0",border:"1px solid #444"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#e0e0e0"},children:"Typ:"}),r.jsxs("select",{className:"form-control",value:b,onChange:e=>m(e.target.value),style:{background:"#2d2d2d",color:"#e0e0e0",border:"1px solid #444"},children:[r.jsx("option",{value:"vertrag",children:"Vertrag (Neumitglied)"}),r.jsx("option",{value:"sepa",children:"SEPA-Mandat"}),r.jsx("option",{value:"agb",children:"AGB (Bestand)"}),r.jsx("option",{value:"datenschutz",children:"Datenschutz (Bestand)"}),r.jsx("option",{value:"kuendigung",children:"KÃ¼ndigung"}),r.jsx("option",{value:"custom",children:"Benutzerdefiniert"})]})]})]}),r.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#2d2d2d",borderRadius:"8px",border:"1px solid #4a90e2",position:"relative"},children:[r.jsxs("h4",{onClick:()=>k(!v),style:{marginTop:0,marginBottom:v?"1rem":0,color:"#64b5f6",cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"space-between",padding:0,position:"relative"},children:[r.jsx("span",{children:"ğŸ’¡ VerfÃ¼gbare Platzhalter"}),r.jsx("span",{style:{fontSize:"1em",marginLeft:"10px"},children:v?"â–¼":"â–¶"})]}),v&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px"},children:Object.entries(j).map(([e,n])=>r.jsxs("div",{children:[r.jsxs("strong",{style:{color:"#90caf9"},children:[e.charAt(0).toUpperCase()+e.slice(1),":"]}),r.jsx("div",{style:{fontSize:"0.85rem",marginTop:"5px"},children:n.map((e,n)=>r.jsx("div",{style:{cursor:"pointer",padding:"2px 5px",background:"#3a3a3a",margin:"2px 0",borderRadius:"4px",color:"#e0e0e0"},onClick:()=>(e=>{if(!g)return;const n=g.getSelected();if(n){const r=n.get("content")||"";n.set("content",r+" "+e)}})(e.value),title:`Klicken um ${e.value} einzufÃ¼gen`,children:e.label},n))})]},e))}),r.jsxs("p",{style:{marginTop:"10px",marginBottom:0,fontSize:"0.9rem",color:"#90caf9"},children:[r.jsx("strong",{children:"Tipps:"}),r.jsx("br",{}),"â€¢ Ziehen Sie die vorgefertigten BlÃ¶cke aus der rechten Sidebar",r.jsx("br",{}),"â€¢ Klicken Sie auf einen Platzhalter, um ihn einzufÃ¼gen",r.jsx("br",{}),'â€¢ Verwenden Sie den "ğŸ“ Freier Text" Block, um beliebigen Text einzugeben',r.jsx("br",{}),'â€¢ FÃ¼r Logos: FÃ¼gen Sie den "ğŸ–¼ï¸ Logo/Bild" Block ein, klicken Sie darauf, und Ã¤ndern Sie dann die Bild-URL in den Einstellungen (rechts)']})]})]}),r.jsx("div",{ref:d,style:{borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),f&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},onClick:()=>{URL.revokeObjectURL(f),y(null)},children:r.jsxs("div",{style:{background:"white",borderRadius:"8px",width:"90%",height:"90%",display:"flex",flexDirection:"column",overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.3)"},onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{style:{padding:"15px 20px",background:"#2d2d2d",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{style:{margin:0,fontSize:"1.2rem"},children:"ğŸ‘ï¸ Vorschau"}),r.jsx("button",{className:"btn btn-danger",onClick:()=>{URL.revokeObjectURL(f),y(null)},style:{background:"#f44336",border:"none",color:"white",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",transition:"all 0.2s"},onMouseEnter:e=>e.target.style.background="#d32f2f",onMouseLeave:e=>e.target.style.background="#f44336",children:"âœ• SchlieÃŸen"})]}),r.jsx("iframe",{src:f,title:"Vorschau",style:{flex:1,border:"none",width:"100%"}})]})})]})},g=()=>{const{activeDojo:e,dojos:o}=a(),[l,s]=n.useState([]),[g,p]=n.useState(!0),[c,u]=n.useState(""),[b,m]=n.useState("alle"),[h,x]=n.useState(!1),[f,y]=n.useState(null),[v,k]=n.useState(!1),[j,S]=n.useState(null),[w,z]=n.useState("dokumente"),[B,D]=n.useState([]),[F,C]=n.useState(!1),[M,I]=n.useState("alle"),[V,E]=n.useState("vorlagen"),[R,L]=n.useState(!1),[T,_]=n.useState([]),[W,A]=n.useState([]),[K,N]=n.useState(null),[H,G]=n.useState(!0),[$,U]=n.useState(!0),[O,P]=n.useState(null),[Y,Z]=n.useState({dokumenttyp:"agb",version:"",titel:"",inhalt:"",gueltig_ab:(new Date).toISOString().split("T")[0],gueltig_bis:null,aktiv:!0,dojo_id:null}),J=[{value:"alle",label:"Alle Dokumente",icon:"ğŸ“š"},{value:"agb",label:"AGB (Allgemeine GeschÃ¤ftsbedingungen)",icon:"ğŸ“‹"},{value:"datenschutz",label:"DatenschutzerklÃ¤rung",icon:"ğŸ”’"},{value:"widerruf",label:"Widerrufsbelehrung",icon:"â†©ï¸"},{value:"hausordnung",label:"Hausordnung",icon:"ğŸ "},{value:"dojokun",label:"Dojo Regeln (Dojokun)",icon:"ğŸ¥‹"},{value:"haftung",label:"Haftungsausschluss",icon:"âš ï¸"},{value:"kuendigung",label:"KÃ¼ndigungsschreiben",icon:"ğŸ“¤"},{value:"sonstiges",label:"Sonstige Dokumente",icon:"ğŸ“„"}],q=[{value:"alle",label:"Alle Vorlagen",icon:"ğŸ“š"},{value:"vertrag",label:"Neumitglied",icon:"âœ¨"},{value:"bestand",label:"Bestand",icon:"ğŸ“Š"},{value:"kuendigung",label:"KÃ¼ndigung",icon:"ğŸ“¤"}];n.useEffect(()=>{e&&(Q(),X())},[e]);const Q=async()=>{var n,r,a;try{p(!0),console.log("ğŸ” Loading documents for dojo:",null==e?void 0:e.id,e);const r=await t.get(`/vertraege/dokumente/${e.id}`);console.log("ğŸ“¦ Received documents:",null==(n=r.data.data)?void 0:n.length,"documents"),s(r.data.data||[]),u("")}catch(i){console.error("âŒ Fehler beim Laden der Dokumente:",i),u("Fehler beim Laden der Dokumente: "+((null==(a=null==(r=i.response)?void 0:r.data)?void 0:a.error)||i.message))}finally{p(!1)}},X=async()=>{try{C(!0);const n=await t.get(`/vertragsvorlagen?dojo_id=${e.id}&aktiv=true`);D(n.data.data||[])}catch(n){console.error("âŒ Fehler beim Laden der Vorlagen:",n)}finally{C(!1)}},ee=async e=>{if(confirm("MÃ¶chten Sie diese Vorlage wirklich lÃ¶schen?"))try{await t.delete(`/vertragsvorlagen/${e}`),alert("âœ… Vorlage erfolgreich gelÃ¶scht"),X()}catch(n){console.error("âŒ Fehler beim LÃ¶schen der Vorlage:",n),alert("âŒ Fehler beim LÃ¶schen der Vorlage")}},ne=e=>{S(e),k(!0),z("vorlagen")},re=e=>{const n=null==o?void 0:o.find(n=>n.id===e);return(null==n?void 0:n.dojoname)||`Dojo ${e}`},te="alle"===M?B:"vertrag"===M?B.filter(e=>"vertrag"===e.template_type||"sepa"===e.template_type):"kuendigung"===M?B.filter(e=>"kuendigung"===e.template_type||"custom"===e.template_type):"bestand"===M?B.filter(e=>"agb"===e.template_type||"datenschutz"===e.template_type||!["vertrag","sepa","kuendigung"].includes(e.template_type)):B,ae="alle"===b?l:l.filter(e=>e.dokumenttyp===b),ie=e=>{const n=J.find(n=>n.value===e);return n?n.label:e},oe=e=>{const n=J.find(n=>n.value===e);return n?n.icon:"ğŸ“„"};return r.jsx("div",{style:{padding:"1rem 2rem 2rem 2rem",background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",minHeight:"100vh",color:"white"},children:r.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[r.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"2rem",flexWrap:"wrap"},children:r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",flex:1,minWidth:0},children:[r.jsxs("h2",{style:{fontSize:"2rem",fontWeight:"700",margin:0,background:"linear-gradient(135deg, #FFD700, #FFA500)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",position:"relative",zIndex:2,display:"flex",alignItems:"center",gap:"0.75rem"},children:[r.jsx("span",{style:{filter:"drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3))",position:"relative",zIndex:2,WebkitTextFillColor:"initial",color:"inherit"},children:"ğŸ“š"}),"Dokumentenverwaltung"]}),r.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.95rem",margin:0,whiteSpace:"nowrap",position:"relative",zIndex:2},children:"Verwalten Sie rechtliche Dokumente mit Versionierung und GÃ¼ltigkeitszeitrÃ¤umen"})]})}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center",marginBottom:"1.5rem",position:"relative",zIndex:1},children:[r.jsxs("button",{onClick:()=>z("dokumente"),className:"dokumente"===w?"":"logout-button",style:{padding:"dokumente"===w?"0.875rem 1.5rem":"10px 20px",background:"dokumente"===w?"linear-gradient(135deg, #FFD700, #FFA500)":"linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 215, 0, 0.1) 50%, transparent 100%)",border:"dokumente"===w?"none":"1px solid rgba(255, 215, 0, 0.2)",color:"dokumente"===w?"#1a1a2e":"rgba(255, 255, 255, 0.95)",fontSize:"0.95rem",fontWeight:"dokumente"===w?"600":"700",cursor:"pointer",transition:"all 0.3s ease",borderRadius:"12px",position:"relative",zIndex:2,display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"dokumente"===w?"0 4px 12px rgba(255, 215, 0, 0.3)":"0 2px 8px rgba(255, 215, 0, 0.2)",backdropFilter:"blur(10px)",overflow:"hidden"},onMouseEnter:e=>{"dokumente"!==w&&(e.target.style.background="linear-gradient(135deg, rgba(255, 215, 0, 0.4) 0%, rgba(255, 215, 0, 0.2) 50%, rgba(255, 107, 53, 0.1) 100%)",e.target.style.borderColor="rgba(255, 215, 0, 0.4)",e.target.style.color="#ffd700",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 4px 15px rgba(255, 215, 0, 0.4)")},onMouseLeave:e=>{"dokumente"!==w&&(e.target.style.background="linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 215, 0, 0.1) 50%, transparent 100%)",e.target.style.borderColor="rgba(255, 215, 0, 0.2)",e.target.style.color="rgba(255, 255, 255, 0.95)",e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 2px 8px rgba(255, 215, 0, 0.2)")},children:[r.jsx("span",{style:{position:"relative",zIndex:2},children:"ğŸ“„"}),r.jsx("span",{children:"Dokumente & Versionen"})]}),r.jsxs("button",{onClick:()=>z("vorlagen"),className:"vorlagen"===w?"":"logout-button",style:{padding:"vorlagen"===w?"0.875rem 1.5rem":"10px 20px",background:"vorlagen"===w?"linear-gradient(135deg, #FFD700, #FFA500)":"linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 215, 0, 0.1) 50%, transparent 100%)",border:"vorlagen"===w?"none":"1px solid rgba(255, 215, 0, 0.2)",color:"vorlagen"===w?"#1a1a2e":"rgba(255, 255, 255, 0.95)",fontSize:"0.95rem",fontWeight:"vorlagen"===w?"600":"700",cursor:"pointer",transition:"all 0.3s ease",borderRadius:"12px",position:"relative",zIndex:2,display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"vorlagen"===w?"0 4px 12px rgba(255, 215, 0, 0.3)":"0 2px 8px rgba(255, 215, 0, 0.2)",backdropFilter:"blur(10px)",overflow:"hidden"},onMouseEnter:e=>{"vorlagen"!==w&&(e.target.style.background="linear-gradient(135deg, rgba(255, 215, 0, 0.4) 0%, rgba(255, 215, 0, 0.2) 50%, rgba(255, 107, 53, 0.1) 100%)",e.target.style.borderColor="rgba(255, 215, 0, 0.4)",e.target.style.color="#ffd700",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 4px 15px rgba(255, 215, 0, 0.4)")},onMouseLeave:e=>{"vorlagen"!==w&&(e.target.style.background="linear-gradient(135deg, rgba(255, 215, 0, 0.3) 0%, rgba(255, 215, 0, 0.1) 50%, transparent 100%)",e.target.style.borderColor="rgba(255, 215, 0, 0.2)",e.target.style.color="rgba(255, 255, 255, 0.95)",e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 2px 8px rgba(255, 215, 0, 0.2)")},children:[r.jsx("span",{style:{position:"relative",zIndex:2},children:"âœï¸"}),r.jsx("span",{children:"Editor"}),r.jsx("span",{style:{position:"absolute",top:"0.25rem",right:"0.25rem",background:"#22c55e",color:"white",fontSize:"0.6rem",padding:"0.15rem 0.35rem",borderRadius:"4px",fontWeight:"bold",zIndex:3,lineHeight:"1"},children:"NEU"})]}),o&&o.length>1&&"dokumente"===w&&r.jsx("button",{onClick:()=>{L(!0)},className:"logout-button",style:{marginLeft:"auto",position:"relative",zIndex:2},children:"ğŸ“‹ Dokumente kopieren"}),"dokumente"===w&&r.jsx("button",{onClick:async()=>{var e,n;if(confirm("MÃ¶chten Sie die Dokumente aus den Dojo-Einstellungen importieren? Bereits vorhandene Dokumente werden Ã¼bersprungen."))try{const e=await t.post("/vertraege/dokumente/import-from-dojos");e.data.success&&(alert(`âœ… ${e.data.message}`),Q())}catch(r){console.error("Fehler beim Import:",r),alert("âŒ Fehler beim Import: "+((null==(n=null==(e=r.response)?void 0:e.data)?void 0:n.error)||r.message))}},className:"logout-button",style:{marginLeft:o&&o.length>1?"0.5rem":"auto",position:"relative",zIndex:2,background:"linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(34, 197, 94, 0.1) 50%, transparent 100%)",borderColor:"rgba(34, 197, 94, 0.3)"},onMouseEnter:e=>{e.target.style.background="linear-gradient(135deg, rgba(34, 197, 94, 0.4) 0%, rgba(34, 197, 94, 0.2) 50%, rgba(34, 197, 94, 0.1) 100%)",e.target.style.borderColor="rgba(34, 197, 94, 0.5)",e.target.style.color="#22c55e"},onMouseLeave:e=>{e.target.style.background="linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(34, 197, 94, 0.1) 50%, transparent 100%)",e.target.style.borderColor="rgba(34, 197, 94, 0.3)",e.target.style.color="rgba(255, 255, 255, 0.95)"},children:"ğŸ“¥ Dokumente importieren"})]}),"dokumente"===w&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{marginBottom:"1.5rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"16px",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 215, 0, 0.1)",overflow:"hidden"},children:[r.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid rgba(255, 215, 0, 0.1)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.1rem"},children:"ğŸ“"}),r.jsx("h4",{style:{margin:0,color:"#FFD700",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.9},children:"Vertragsvorlagen"})]}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:q.map(e=>r.jsxs("button",{onClick:()=>{E(e.value),I(e.value)},style:{padding:"0.65rem 1.1rem",background:V===e.value?"linear-gradient(135deg, #FFD700, #FFA500)":"rgba(255, 255, 255, 0.05)",border:V===e.value?"none":"1px solid rgba(255, 215, 0, 0.15)",borderRadius:"10px",color:V===e.value?"#1a1a2e":"rgba(255, 255, 255, 0.85)",fontSize:"0.875rem",fontWeight:V===e.value?"600":"500",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap",boxShadow:V===e.value?"0 4px 12px rgba(255, 215, 0, 0.25)":"none",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:n=>{V!==e.value&&(n.target.style.background="rgba(255, 215, 0, 0.1)",n.target.style.borderColor="rgba(255, 215, 0, 0.3)",n.target.style.color="#FFD700")},onMouseLeave:n=>{V!==e.value&&(n.target.style.background="rgba(255, 255, 255, 0.05)",n.target.style.borderColor="rgba(255, 215, 0, 0.15)",n.target.style.color="rgba(255, 255, 255, 0.85)")},children:[r.jsx("span",{children:e.icon}),r.jsx("span",{children:e.label})]},e.value))})]}),r.jsxs("div",{style:{padding:"1.25rem"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[r.jsx("span",{style:{fontSize:"1.1rem"},children:"ğŸ“„"}),r.jsx("h4",{style:{margin:0,color:"#FFD700",fontSize:"0.85rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.9},children:"Rechtliche Dokumente"})]}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:J.map(e=>r.jsxs("button",{onClick:()=>{E(e.value),m(e.value)},style:{padding:"0.65rem 1.1rem",background:V===e.value?"linear-gradient(135deg, #FFD700, #FFA500)":"rgba(255, 255, 255, 0.05)",border:V===e.value?"none":"1px solid rgba(255, 215, 0, 0.15)",borderRadius:"10px",color:V===e.value?"#1a1a2e":"rgba(255, 255, 255, 0.85)",fontSize:"0.875rem",fontWeight:V===e.value?"600":"500",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap",boxShadow:V===e.value?"0 4px 12px rgba(255, 215, 0, 0.25)":"none",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:n=>{V!==e.value&&(n.target.style.background="rgba(255, 215, 0, 0.1)",n.target.style.borderColor="rgba(255, 215, 0, 0.3)",n.target.style.color="#FFD700")},onMouseLeave:n=>{V!==e.value&&(n.target.style.background="rgba(255, 255, 255, 0.05)",n.target.style.borderColor="rgba(255, 215, 0, 0.15)",n.target.style.color="rgba(255, 255, 255, 0.85)")},children:[r.jsx("span",{children:e.icon}),r.jsx("span",{children:e.label.replace(" (Allgemeine GeschÃ¤ftsbedingungen)","").replace("Dojo Regeln (Dojokun)","Dojokun")})]},e.value))})]})]}),r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("div",{onClick:()=>G(!H),style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"1rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s ease",transform:H?"rotate(90deg)":"rotate(0deg)",color:"#FFD700"},children:"â–¶"}),r.jsx("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.5rem",fontWeight:"700",minWidth:"150px"},children:"ğŸ“ Vorlagen"})]}),r.jsx("div",{style:{flex:1,height:"2px",background:"linear-gradient(to right, rgba(255, 215, 0, 0.5), transparent)"}})]}),H&&r.jsx("div",{children:F?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"rgba(255,255,255,0.6)"},children:"Lade Vorlagen..."}):0===B.length?r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"3rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.1rem"},children:"Noch keine Vorlagen erstellt"}),r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.9rem"},children:'Wechseln Sie zum "Editor" Tab um eine neue Vorlage zu erstellen'})]}):0===te.length?r.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"3rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.1rem"},children:"Keine Vorlagen in dieser Kategorie"})}):r.jsx("div",{style:{display:"grid",gap:"1rem"},children:te.map(e=>r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease"},children:[e.is_default&&r.jsx("div",{style:{position:"absolute",top:0,right:0,padding:"0.5rem 1rem",background:"linear-gradient(135deg, #FFD700, #FFA500)",borderRadius:"0 12px 0 12px",fontSize:"0.75rem",fontWeight:"bold",color:"#1a1a2e"},children:"â­ STANDARD"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"white",fontSize:"1.2rem"},children:e.name}),e.beschreibung&&r.jsx("p",{style:{margin:"0 0 0.75rem 0",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.9rem"},children:e.beschreibung}),r.jsxs("div",{style:{display:"flex",gap:"1rem",fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.5)",flexWrap:"wrap"},children:[r.jsxs("span",{children:["ğŸ¢ ",re(e.dojo_id)]}),r.jsxs("span",{children:["ğŸ“‹ Typ: ",e.template_type]}),r.jsxs("span",{children:["ğŸ“… Version: ",e.version]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"flex-start"},children:[r.jsx("button",{onClick:()=>ne(e.id),style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"none",borderRadius:"6px",color:"white",fontSize:"0.85rem",cursor:"pointer"},children:"âœï¸ Bearbeiten"}),r.jsx("button",{onClick:()=>ee(e.id),style:{padding:"0.5rem 1rem",background:"transparent",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"6px",color:"rgba(239, 68, 68, 0.8)",fontSize:"0.85rem",cursor:"pointer"},children:"ğŸ—‘ï¸ LÃ¶schen"})]})]})]},e.id))})})]}),r.jsxs("div",{style:{marginBottom:"2rem"},children:[r.jsxs("div",{onClick:()=>U(!$),style:{display:"flex",alignItems:"center",gap:"2rem",marginBottom:"1rem",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[r.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s ease",transform:$?"rotate(90deg)":"rotate(0deg)",color:"#FFD700"},children:"â–¶"}),r.jsx("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.5rem",fontWeight:"700",minWidth:"150px"},children:"ğŸ“„ Dokumente"})]}),r.jsx("div",{style:{flex:1,height:"2px",background:"linear-gradient(to right, rgba(255, 215, 0, 0.5), transparent)"}})]}),$&&r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsxs("h3",{style:{fontSize:"1.3rem",fontWeight:"600",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[oe(b),ie(b)," - Versionen"]}),r.jsxs("button",{onClick:()=>x(!0),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #FFD700, #FFA500)",border:"1px solid #FFD700",borderRadius:"8px",color:"#1a1a2e",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 15px rgba(255, 215, 0, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(255, 215, 0, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(255, 215, 0, 0.3)"},children:[r.jsx("span",{children:"+"}),"Neue Version erstellen"]})]}),g?r.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"rgba(255,255,255,0.6)"},children:"Lade Dokumente..."}):0===ae.length?r.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 215, 0, 0.05)",borderRadius:"10px",border:"2px dashed rgba(255, 215, 0, 0.3)"},children:[r.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"ğŸ“„"}),r.jsx("h4",{style:{marginBottom:"0.5rem",color:"#FFD700"},children:"Keine Versionen vorhanden"}),r.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},children:"Erstellen Sie die erste Version dieses Dokumenttyps."})]}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ae.sort((e,n)=>n.version.localeCompare(e.version)).map(e=>r.jsxs("div",{style:{background:e.aktiv?"linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 165, 0, 0.15))":"rgba(255, 255, 255, 0.05)",border:e.aktiv?"2px solid #FFD700":"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"2rem",transition:"all 0.3s ease",boxShadow:e.aktiv?"0 8px 32px rgba(255, 215, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 16px rgba(0, 0, 0, 0.2)",position:"relative",overflow:"hidden"},onMouseEnter:n=>{n.currentTarget.style.transform="translateY(-4px)",n.currentTarget.style.boxShadow=e.aktiv?"0 12px 48px rgba(255, 215, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 8px 32px rgba(0, 0, 0, 0.3)"},onMouseLeave:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow=e.aktiv?"0 8px 32px rgba(255, 215, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 16px rgba(0, 0, 0, 0.2)"},children:[r.jsx("div",{style:{position:"absolute",top:0,right:0,width:"200px",height:"200px",background:"radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%)",pointerEvents:"none"}}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[r.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"700",color:e.aktiv?"#FFD700":"rgba(255,255,255,0.8)"},children:["Version ",e.version]}),e.aktiv&&r.jsx("span",{style:{padding:"0.25rem 0.75rem",background:"linear-gradient(135deg, #FFD700, #FFA500)",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",color:"#1a1a2e"},children:"âœ“ AKTIV"})]}),r.jsx("h4",{style:{fontSize:"1.1rem",fontWeight:"600",margin:"0 0 0.5rem 0",color:"white"},children:e.titel}),r.jsxs("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)",display:"flex",flexWrap:"wrap",gap:"1rem"},children:[r.jsxs("span",{children:["ğŸ¢ ",re(e.dojo_id)]}),r.jsxs("span",{children:["ğŸ“… GÃ¼ltig ab: ",new Date(e.gueltig_ab).toLocaleDateString("de-DE")]}),e.gueltig_bis&&r.jsxs("span",{children:["ğŸ“… GÃ¼ltig bis: ",new Date(e.gueltig_bis).toLocaleDateString("de-DE")]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>y(e),style:{padding:"0.5rem 1rem",background:"transparent",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",color:"#3B82F6",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(59, 130, 246, 0.1)",e.target.style.borderColor="rgba(59, 130, 246, 0.6)",e.target.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(59, 130, 246, 0.4)",e.target.style.transform="translateY(0)"},children:"ğŸ‘ï¸ Anzeigen"}),r.jsx("button",{onClick:()=>{return n=e,P(null),Z({dokumenttyp:n.dokumenttyp,version:(e=>{const n=e.split(".");if(2===n.length){const e=parseInt(n[0]),r=parseInt(n[1]);return r>=9?`${e+1}.0`:`${e}.${r+1}`}return e+".1"})(n.version),titel:n.titel,inhalt:n.inhalt,gueltig_ab:n.gueltig_ab?n.gueltig_ab.split("T")[0]:(new Date).toISOString().split("T")[0],gueltig_bis:n.gueltig_bis?n.gueltig_bis.split("T")[0]:null,aktiv:n.aktiv,dojo_id:n.dojo_id}),m(n.dokumenttyp),void x(!0);var n},style:{padding:"0.5rem 1rem",background:"transparent",border:"1px solid rgba(245, 158, 11, 0.4)",borderRadius:"8px",color:"#F59E0B",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(245, 158, 11, 0.1)",e.target.style.borderColor="rgba(245, 158, 11, 0.6)",e.target.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(245, 158, 11, 0.4)",e.target.style.transform="translateY(0)"},children:"âœï¸ Bearbeiten"})]})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02))",borderRadius:"8px",padding:"1.25rem",fontSize:"0.85rem",color:"rgba(255,255,255,0.7)",maxHeight:"120px",overflow:"hidden",position:"relative",border:"1px solid rgba(255, 215, 0, 0.1)",fontFamily:"Georgia, serif",lineHeight:"1.5"},children:[r.jsxs("div",{style:{filter:"brightness(0.9)",textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:[e.inhalt.replace(/<[^>]*>/g,"").substring(0,180),"..."]}),r.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"60px",background:"linear-gradient(to bottom, transparent, rgba(30, 41, 59, 0.95))",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"0.5rem"},children:r.jsx("span",{style:{fontSize:"0.75rem",color:"#ffd700",fontStyle:"italic"},children:'Klicken Sie auf "Anzeigen" fÃ¼r den vollstÃ¤ndigen Text'})})]})]},e.id))})]})]}),h&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"2rem"},children:r.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",borderRadius:"12px",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",border:"2px solid rgba(255, 215, 0, 0.3)"},children:[r.jsxs("h3",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",color:"#FFD700"},children:["âœ¨ Neue Version erstellen: ",ie(b)]}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:["all"===(null==e?void 0:e.id)&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.8)"},children:"Dojo *"}),r.jsxs("select",{value:Y.dojo_id||"",onChange:e=>Z({...Y,dojo_id:parseInt(e.target.value)}),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"0.95rem"},children:[r.jsx("option",{value:"",style:{background:"#1e293b",color:"white"},children:"-- Dojo auswÃ¤hlen --"}),null==o?void 0:o.filter(e=>"all"!==e.id).map(e=>r.jsx("option",{value:e.id,style:{background:"#1e293b",color:"white"},children:e.dojoname},e.id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.8)"},children:["Version * ",r.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 215, 0, 0.7)"},children:"(automatisch erhÃ¶ht)"})]}),r.jsx("input",{type:"text",placeholder:"z.B. 1.1, 2.0",value:Y.version,readOnly:!0,style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.95rem",cursor:"not-allowed"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.8)"},children:"Titel *"}),r.jsx("input",{type:"text",placeholder:"z.B. Allgemeine GeschÃ¤ftsbedingungen",value:Y.titel,onChange:e=>Z({...Y,titel:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"0.95rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.8)"},children:"Inhalt * (HTML mÃ¶glich)"}),r.jsx("textarea",{rows:"10",placeholder:"Dokumenteninhalt...",value:Y.inhalt,onChange:e=>Z({...Y,inhalt:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"0.95rem",fontFamily:"monospace",resize:"vertical"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.8)"},children:"GÃ¼ltig ab *"}),r.jsx("input",{type:"date",value:Y.gueltig_ab,onChange:e=>Z({...Y,gueltig_ab:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"0.95rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",color:"rgba(255,255,255,0.8)"},children:"GÃ¼ltig bis (optional)"}),r.jsx("input",{type:"date",value:Y.gueltig_bis||"",onChange:e=>Z({...Y,gueltig_bis:e.target.value||null}),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"0.95rem"}})]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>{x(!1)},style:{padding:"0.75rem 1.5rem",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.8)",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.borderColor="rgba(255, 255, 255, 0.5)",e.target.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(255, 255, 255, 0.3)",e.target.style.transform="translateY(0)"},children:"Abbrechen"}),r.jsx("button",{onClick:async()=>{var n,r;try{if(!Y.version||!Y.titel||!Y.inhalt)return void alert("Bitte fÃ¼llen Sie alle Pflichtfelder aus.");if(!e)return void alert("Kein aktives Dojo ausgewÃ¤hlt.");if("all"===e.id&&!Y.dojo_id&&!O)return void alert("Bitte wÃ¤hlen Sie ein Dojo aus, dem dieses Dokument zugeordnet werden soll.");const n=e=>e?/^\d{4}-\d{2}-\d{2}$/.test(e)?e:e.split("T")[0]:null,r={dojo_id:"all"===e.id?Y.dojo_id:e.id,dokumenttyp:b,version:Y.version,titel:Y.titel,inhalt:Y.inhalt,gueltig_ab:n(Y.gueltig_ab),gueltig_bis:n(Y.gueltig_bis),aktiv:Y.aktiv};console.log("ğŸ“¤ Sending payload:",r),console.log("âœ¨ Creating new document version");const i=await t.post("/vertraege/dokumente",r);if(console.log("ğŸ“¥ Server response:",i.data),i.data.success){alert("âœ… Neue Dokumentversion erfolgreich erstellt!");if(confirm("ğŸ“¢ MÃ¶chten Sie alle Mitglieder Ã¼ber die neue Dokumentversion benachrichtigen?\n\nDie Mitglieder erhalten eine Push-Benachrichtigung, die sie bestÃ¤tigen mÃ¼ssen."))try{const n="all"===e.id?Y.dojo_id:e.id,r=await t.post("/notifications/document-update",{dojo_id:n,document_type:b,document_title:Y.titel,document_version:Y.version});r.data.success&&alert(`âœ… ${r.data.sent} Benachrichtigungen wurden versendet!`)}catch(a){console.error("Fehler beim Versenden der Benachrichtigungen:",a),alert("âš ï¸ Dokument wurde gespeichert, aber Benachrichtigungen konnten nicht versendet werden.")}x(!1),console.log("ğŸ”„ Reloading documents..."),Q(),Z({dokumenttyp:b,version:"",titel:"",inhalt:"",gueltig_ab:(new Date).toISOString().split("T")[0],gueltig_bis:null,aktiv:!0,dojo_id:null})}}catch(i){console.error("Fehler beim Speichern:",i),alert("Fehler beim Speichern: "+((null==(r=null==(n=i.response)?void 0:n.data)?void 0:r.error)||i.message))}},style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #FFD700, #FFA500)",border:"1px solid #FFD700",borderRadius:"8px",color:"#1a1a2e",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 215, 0, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(255, 215, 0, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(255, 215, 0, 0.3)"},children:"âœ¨ Version erstellen"})]})]})}),f&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"2rem",overflow:"auto"},onClick:()=>y(null),children:r.jsxs("div",{style:{background:"white",borderRadius:"12px",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflow:"auto",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:e=>e.stopPropagation(),children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",padding:"1.5rem",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottom:"3px solid #ffd700",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:10},children:[r.jsxs("div",{children:[r.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ffd700",margin:0,marginBottom:"0.5rem"},children:[oe(f.dokumenttyp)," ",f.titel]}),r.jsxs("p",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",margin:0},children:["Version ",f.version," | GÃ¼ltig ab ",new Date(f.gueltig_ab).toLocaleDateString("de-DE")]})]}),r.jsx("button",{onClick:()=>y(null),style:{background:"transparent",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",fontSize:"1.5rem",width:"40px",height:"40px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.borderColor="rgba(255, 255, 255, 0.5)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(255, 255, 255, 0.3)"},children:"âœ•"})]}),r.jsxs("div",{style:{padding:"3rem 4rem",color:"#1a1a2e",lineHeight:"1.8",background:"linear-gradient(to bottom, #ffffff, #fafafa)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'},children:[r.jsx("style",{children:"\n                    @media print {\n                      body * {\n                        visibility: hidden;\n                      }\n                      .print-content, .print-content * {\n                        visibility: visible;\n                      }\n                      .print-content {\n                        position: absolute;\n                        left: 0;\n                        top: 0;\n                        width: 100%;\n                      }\n                    }\n                  "}),r.jsx("div",{className:"print-content",style:{maxWidth:"800px",margin:"0 auto"},dangerouslySetInnerHTML:i(f.inhalt)})]}),r.jsxs("div",{style:{position:"sticky",bottom:0,background:"#f8f9fa",padding:"1.5rem",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>window.print(),style:{padding:"0.75rem 1.5rem",background:"transparent",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",color:"#3B82F6",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(59, 130, 246, 0.1)",e.target.style.borderColor="rgba(59, 130, 246, 0.6)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(59, 130, 246, 0.4)"},children:"ğŸ–¨ï¸ Drucken"}),r.jsx("button",{onClick:()=>y(null),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #ffd700, #ff6b35)",border:"1px solid #ffd700",borderRadius:"8px",color:"#1a1a2e",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(255, 215, 0, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(255, 215, 0, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(255, 215, 0, 0.3)"},children:"SchlieÃŸen"})]})]})})]}),"vorlagen"===w&&r.jsx("div",{children:v?r.jsx(d,{templateId:j,dojoId:null==e?void 0:e.id,onSave:()=>{k(!1),S(null),X()},onClose:()=>{k(!1),S(null)}}):r.jsxs("div",{children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[r.jsx("h3",{style:{margin:0,color:"#FFD700",fontSize:"1.5rem"},children:"ğŸ“ Vertragsvorlagen"}),r.jsx("button",{onClick:()=>{S(null),k(!0)},style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #22c55e, #10b981)",border:"none",borderRadius:"8px",color:"white",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"transform 0.3s ease",boxShadow:"0 4px 15px rgba(34, 197, 94, 0.3)"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:"â• Neue Vorlage erstellen"})]}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0.5rem"},children:q.map(e=>r.jsxs("button",{onClick:()=>I(e.value),style:{padding:"0.75rem 1.5rem",background:M===e.value?"linear-gradient(135deg, #FFD700, #FFA500)":"rgba(255, 255, 255, 0.05)",border:M===e.value?"2px solid #FFD700":"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:M===e.value?"#1a1a2e":"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:n=>{M!==e.value&&(n.target.style.background="rgba(255, 255, 255, 0.08)",n.target.style.borderColor="rgba(255, 255, 255, 0.2)")},onMouseLeave:n=>{M!==e.value&&(n.target.style.background="rgba(255, 255, 255, 0.05)",n.target.style.borderColor="rgba(255, 255, 255, 0.1)")},children:[r.jsx("span",{children:e.icon}),r.jsx("span",{children:e.label})]},e.value))}),F?r.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"rgba(255,255,255,0.6)"},children:"Lade Vorlagen..."}):0===B.length?r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"3rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.1rem"},children:"Noch keine Vorlagen erstellt"}),r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.9rem"},children:"Erstellen Sie Ihre erste Vorlage mit dem Button oben"})]}):0===te.length?r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"3rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.1rem"},children:"Keine Vorlagen in dieser Kategorie"}),r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.9rem"},children:"Erstellen Sie eine neue Vorlage mit dem Button oben"})]}):r.jsx("div",{style:{display:"grid",gap:"1rem"},children:te.map(e=>r.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"1.5rem",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:[e.is_default&&r.jsx("div",{style:{position:"absolute",top:0,right:0,padding:"0.5rem 1rem",background:"linear-gradient(135deg, #FFD700, #FFA500)",borderRadius:"0 12px 0 12px",fontSize:"0.75rem",fontWeight:"bold",color:"#1a1a2e"},children:"â­ STANDARD"}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"white",fontSize:"1.2rem",fontWeight:"600"},children:e.name}),e.beschreibung&&r.jsx("p",{style:{margin:"0 0 0.75rem 0",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.9rem"},children:e.beschreibung}),r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.5)"},children:[r.jsxs("span",{children:["ğŸ“„ Typ: ",e.template_type||"vertrag"]}),r.jsxs("span",{children:["ğŸ“… Version: ",e.version||1]}),r.jsxs("span",{children:["ğŸ•’ Erstellt: ",new Date(e.erstellt_am).toLocaleDateString("de-DE")]}),e.aktualisiert_am&&e.erstellt_am!==e.aktualisiert_am&&r.jsxs("span",{children:["âœï¸ Bearbeitet: ",new Date(e.aktualisiert_am).toLocaleDateString("de-DE")]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexShrink:0},children:[r.jsx("button",{onClick:()=>ne(e.id),style:{padding:"0.5rem 1rem",background:"transparent",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"8px",color:"#3B82F6",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(59, 130, 246, 0.1)",e.target.style.borderColor="rgba(59, 130, 246, 0.6)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(59, 130, 246, 0.4)"},children:"âœï¸ Bearbeiten"}),r.jsx("button",{onClick:()=>ee(e.id),style:{padding:"0.5rem 1rem",background:"transparent",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"8px",color:"#EF4444",fontSize:"0.85rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.borderColor="rgba(239, 68, 68, 0.6)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(239, 68, 68, 0.4)"},children:"ğŸ—‘ï¸ LÃ¶schen"})]})]})]},e.id))})]})}),R&&r.jsx("div",{onClick:()=>L(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",borderRadius:"16px",padding:"2rem",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[r.jsx("button",{onClick:()=>L(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"#ef4444",color:"white",border:"none",width:"40px",height:"40px",borderRadius:"50%",fontSize:"1.5rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.4)"},children:"âœ•"}),r.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#ffd700",fontSize:"1.5rem",fontWeight:"700"},children:"ğŸ“‹ Dokumente kopieren"}),r.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"WÃ¤hlen Sie die Dokumente aus, die Sie in ein anderes Dojo kopieren mÃ¶chten"}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"600",color:"#ffd700"},children:"Ziel-Dojo:"}),r.jsxs("select",{value:K||"",onChange:e=>N(parseInt(e.target.value)),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"white",fontSize:"1rem"},children:[r.jsx("option",{value:"",children:"-- Dojo auswÃ¤hlen --"}),null==o?void 0:o.filter(n=>n.id!==(null==e?void 0:e.id)).map(e=>r.jsx("option",{value:e.id,style:{background:"#1e293b",color:"white"},children:e.dojoname},e.id))]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",marginBottom:"1rem",fontSize:"0.9rem",fontWeight:"600",color:"#ffd700"},children:"Dokumente auswÃ¤hlen:"}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h4",{style:{color:"rgba(255, 215, 0, 0.9)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"ğŸ“ Vertragsvorlagen"}),r.jsx("div",{style:{maxHeight:"200px",overflow:"auto",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",padding:"1rem",border:"1px solid rgba(255, 215, 0, 0.2)"},children:0===B.length?r.jsx("p",{style:{color:"rgba(255,255,255,0.5)",textAlign:"center",margin:0},children:"Keine Vertragsvorlagen vorhanden"}):B.map(e=>r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.75rem",marginBottom:"0.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.1)",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>{_(n=>n.includes(e.id)?n.filter(n=>n!==e.id):[...n,e.id])},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 215, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},children:[r.jsx("input",{type:"checkbox",checked:T.includes(e.id),onChange:()=>{},style:{marginRight:"0.75rem",width:"18px",height:"18px",cursor:"pointer"}}),r.jsxs("label",{style:{margin:0,cursor:"pointer",flex:1,color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem"},children:[e.name," (",e.template_type,")"]})]},e.id))})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("h4",{style:{color:"rgba(255, 215, 0, 0.9)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"ğŸ“„ Rechtliche Dokumente (AGB, Dojokun, etc.)"}),r.jsx("div",{style:{maxHeight:"200px",overflow:"auto",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",padding:"1rem",border:"1px solid rgba(255, 215, 0, 0.2)"},children:0===l.length?r.jsx("p",{style:{color:"rgba(255,255,255,0.5)",textAlign:"center",margin:0},children:"Keine rechtlichen Dokumente vorhanden"}):l.map(e=>r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0.75rem",marginBottom:"0.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.1)",cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>{A(n=>n.includes(e.id)?n.filter(n=>n!==e.id):[...n,e.id])},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 215, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},children:[r.jsx("input",{type:"checkbox",checked:W.includes(e.id),onChange:()=>{},style:{marginRight:"0.75rem",width:"18px",height:"18px",cursor:"pointer"}}),r.jsxs("label",{style:{margin:0,cursor:"pointer",flex:1,color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem"},children:[oe(e.dokumenttyp)," ",e.titel," (v",e.version,")"]})]},e.id))})]})]}),r.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"2rem"},children:[r.jsxs("button",{onClick:async()=>{var e,n,r,a;if(!K)return void alert("Bitte wÃ¤hlen Sie ein Ziel-Dojo aus");if(0!==T.length+W.length)try{let o=0,l=0;for(const r of T)try{await t.post(`/vertragsvorlagen/${r}/copy`,{target_dojo_id:K}),o++}catch(i){console.error(`Fehler beim Kopieren der Vorlage ${r}:`,(null==(n=null==(e=i.response)?void 0:e.data)?void 0:n.error)||i.message),l++}for(const e of W)try{await t.post(`/vertraege/dokumente/${e}/copy`,{target_dojo_id:K}),o++}catch(i){console.error(`Fehler beim Kopieren des Dokuments ${e}:`,(null==(a=null==(r=i.response)?void 0:r.data)?void 0:a.error)||i.message),l++}l>0?alert(`âš ï¸ ${o} Dokument(e) kopiert, ${l} Fehler`):alert(`âœ… ${o} Dokument(e) erfolgreich kopiert`),L(!1),_([]),A([]),N(null),Q(),X()}catch(o){console.error("Fehler beim Kopieren:",o),alert("âŒ Fehler beim Kopieren der Dokumente")}else alert("Bitte wÃ¤hlen Sie mindestens ein Dokument aus")},disabled:!K||0===T.length&&0===W.length,style:{padding:"0.75rem 1.5rem",background:!K||0===T.length&&0===W.length?"rgba(255, 255, 255, 0.1)":"linear-gradient(135deg, #22c55e, #10b981)",border:"none",borderRadius:"8px",color:!K||0===T.length&&0===W.length?"rgba(255, 255, 255, 0.3)":"white",fontSize:"0.95rem",fontWeight:"600",cursor:!K||0===T.length&&0===W.length?"not-allowed":"pointer",transition:"transform 0.3s ease",boxShadow:!K||0===T.length&&0===W.length?"none":"0 4px 15px rgba(34, 197, 94, 0.3)"},onMouseEnter:e=>{K&&(T.length>0||W.length>0)&&(e.target.style.transform="translateY(-2px)")},onMouseLeave:e=>e.target.style.transform="translateY(0)",children:["âœ… ",T.length+W.length," Dokument(e) kopieren"]}),r.jsx("button",{onClick:()=>{L(!1),_([]),A([]),N(null)},style:{padding:"0.75rem 1.5rem",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.7)",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.borderColor="rgba(255, 255, 255, 0.5)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(255, 255, 255, 0.3)"},children:"âŒ Abbrechen"})]})]})})]})})};export{g as default};
