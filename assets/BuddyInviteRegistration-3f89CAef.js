import{a as e,j as i}from"./query-Caj74EYQ.js";import n from"./PublicRegistration-CsZqN4QK.js";import{f as s,u as r}from"./vendor-router-B2AaIOtG.js";import"./index-1YdTwRLp.js";import"./icons-UlaFLuKM.js";import"./charts-QHQg_ypW.js";const t=()=>{var t,d;const{token:a}=s(),l=r(),[c,o]=e.useState(null),[h,u]=e.useState(!0),[m,j]=e.useState(""),[x,g]=e.useState(!1);e.useEffect(()=>{a?(async()=>{try{u(!0),j("");const e=await fetch(`/buddy/invitation/${a}`),i=await e.json();if(!e.ok)return void("INVITATION_NOT_FOUND"===i.code?j("Diese Einladung ist nicht mehr gÃ¼ltig oder bereits abgelaufen."):j(i.error||"Fehler beim Laden der Einladung"));o(i.invitation)}catch(e){console.error("Fehler beim Laden der Einladung:",e),j("Verbindungsfehler. Bitte versuche es spÃ¤ter erneut.")}finally{u(!1)}})():(j("UngÃ¼ltiger Einladungslink"),u(!1))},[a]);const p=async e=>{try{if(!(await fetch(`/buddy/invitation/${a}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Fehler bei der Buddy-Registrierung");l("/registration-success?source=buddy",{replace:!0})}catch(i){console.error("Fehler bei Buddy-Registrierung:",i),j("Fehler bei der Registrierung. Bitte versuche es erneut."),g(!1)}};return h?i.jsxs("div",{className:"loading-container",children:[i.jsx("div",{className:"loading-spinner-large"}),i.jsx("p",{children:"Einladung wird geladen..."})]}):m?i.jsx("div",{className:"error-container",children:i.jsxs("div",{className:"error-content",children:[i.jsx("h2",{children:"âŒ Einladung nicht verfÃ¼gbar"}),i.jsx("p",{children:m}),i.jsxs("div",{className:"error-actions",children:[i.jsx("button",{onClick:()=>l("/home"),className:"btn btn-primary",children:"Zur Startseite"}),i.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"Erneut versuchen"})]})]})}):x?i.jsx(n,{invitationData:{token:a,buddyGroup:c.gruppe_name,inviterName:c.ersteller_name,prefilledData:{vorname:(null==(t=c.freund_name)?void 0:t.split(" ")[0])||"",nachname:(null==(d=c.freund_name)?void 0:d.split(" ").slice(1).join(" "))||"",email:c.freund_email}},onComplete:p,onCancel:()=>g(!1)}):i.jsxs("div",{className:"buddy-invite-page",children:[i.jsx("div",{className:"buddy-invite-header",children:i.jsxs("div",{className:"container",children:[i.jsx("h1",{children:"ğŸ¥‹ Buddy-Gruppen Einladung"}),i.jsx("p",{children:"Du wurdest zu einer Kampfkunst-Gruppe eingeladen!"})]})}),i.jsx("div",{className:"container",children:i.jsxs("div",{className:"buddy-invite-content",children:[i.jsxs("div",{className:"welcome-section",children:[i.jsxs("h2",{children:["Hallo ",c.freund_name,"!"]}),i.jsxs("p",{children:[i.jsx("strong",{children:c.ersteller_name||"Ein Freund"})," hat dich zur Buddy-Gruppe ",i.jsxs("strong",{children:['"',c.gruppe_name||"Kampfkunst-Freunde",'"']})," eingeladen."]})]}),i.jsxs("div",{className:"buddy-benefits",children:[i.jsx("h3",{children:"ğŸ¯ Vorteile einer Buddy-Mitgliedschaft"}),i.jsxs("div",{className:"benefits-grid",children:[i.jsxs("div",{className:"benefit-item",children:[i.jsx("div",{className:"benefit-icon",children:"ğŸ‘¥"}),i.jsx("h4",{children:"Gemeinsames Training"}),i.jsx("p",{children:"Trainiere zusammen mit deinen Freunden und motiviert euch gegenseitig"})]}),i.jsxs("div",{className:"benefit-item",children:[i.jsx("div",{className:"benefit-icon",children:"ğŸš€"}),i.jsx("h4",{children:"Gegenseitige Motivation"}),i.jsx("p",{children:"Erreiche deine Ziele schneller durch UnterstÃ¼tzung der Gruppe"})]}),i.jsxs("div",{className:"benefit-item",children:[i.jsx("div",{className:"benefit-icon",children:"ğŸ‰"}),i.jsx("h4",{children:"Spezielle Events"}),i.jsx("p",{children:"Exklusive Buddy-Workshops, Veranstaltungen und Gruppenrabatte"})]}),i.jsxs("div",{className:"benefit-item",children:[i.jsx("div",{className:"benefit-icon",children:"ğŸ†"}),i.jsx("h4",{children:"Teamgeist"}),i.jsx("p",{children:"Entwickle Kameradschaft und feiere gemeinsame Erfolge"})]})]})]}),i.jsxs("div",{className:"invitation-info",children:[i.jsx("h3",{children:"ğŸ“‹ Einladungsdetails"}),i.jsxs("div",{className:"info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Gruppe:"}),i.jsx("span",{children:c.gruppe_name||"Kampfkunst-Freunde"})]}),i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Eingeladen von:"}),i.jsx("span",{children:c.ersteller_name||"Freund"})]}),i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"Deine Email:"}),i.jsx("span",{children:c.freund_email})]}),i.jsxs("div",{className:"info-item",children:[i.jsx("strong",{children:"GÃ¼ltig bis:"}),i.jsx("span",{children:new Date(c.token_gueltig_bis).toLocaleDateString("de-DE")})]})]})]}),i.jsxs("div",{className:"registration-actions",children:[i.jsx("h3",{children:"ğŸš€ Bereit zum Beitreten?"}),i.jsx("p",{children:"Starte jetzt deine Registrierung und werde Teil der Gruppe!"}),i.jsxs("div",{className:"action-buttons",children:[i.jsx("button",{onClick:()=>{g(!0)},className:"btn btn-primary btn-large",children:"âœ¨ Jetzt registrieren"}),i.jsx("button",{onClick:()=>l("/home"),className:"btn btn-secondary",children:"ğŸ“– Mehr erfahren"})]}),i.jsx("div",{className:"registration-note",children:i.jsxs("p",{children:[i.jsx("strong",{children:"Hinweis:"})," Die Registrierung ist komplett kostenlos und unverbindlich. Du kannst alle Details eingeben und entscheidest am Ende, ob du beitreten mÃ¶chtest."]})})]}),i.jsxs("div",{className:"security-notice",children:[i.jsx("h4",{children:"ğŸ”’ Deine Daten sind sicher"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Alle Daten werden DSGVO-konform behandelt"}),i.jsx("li",{children:"Keine Weitergabe an Dritte"}),i.jsx("li",{children:"Jederzeit widerrufbar"}),i.jsx("li",{children:"Sichere SSL-VerschlÃ¼sselung"})]})]})]})})]})};export{t as default};
