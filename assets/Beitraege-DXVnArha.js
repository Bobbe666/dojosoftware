import{j as e}from"./animation-1wuIdCBS.js";import{u as n,r as s}from"./vendor-router-BhMXg4Z-.js";import{e as a,b as r,k as i,c as t}from"./index-DUnH23_2.js";import{p as d,k as l,o as c,ax as o,v as m,ag as h,D as g,F as x,C as u,ay as j,c as b}from"./icons-D7rg4pDH.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";const v=()=>{const v=n(),{updateTrigger:f}=a(),{getDojoFilterParam:p,activeDojo:y,filter:N}=r(),[k,z]=s.useState({totalEinnahmen:0,offeneRechnungen:0,aktiveMitglieder:0,monatlicheEinnahmen:0}),[S,w]=s.useState(!0),[E,B]=s.useState(!1),[R,C]=s.useState(null),[D,M]=s.useState(!1);s.useEffect(()=>{V()},[f,y,N]);const F=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e),L=e=>e?new Date(e).toLocaleDateString("de-DE"):"",V=async()=>{try{w(!0);const e=p(),n=e?"?":"",[s,a]=await Promise.all([i(`${t.apiBaseUrl}/mitglieder${n}${e}`),i(`${t.apiBaseUrl}/vertraege${n}${e}`)]);if(!s.ok||!a.ok)throw new Error("Fehler beim Laden der Daten");const r=await s.json(),d=await a.json(),l=Array.isArray(r)?r:r.data||[],c=Array.isArray(d)?d:d.data||[],o=l.length,m=c.filter(e=>"aktiv"===e.status).reduce((e,n)=>e+(parseFloat(n.monatsbeitrag)||0),0);z({totalEinnahmen:12*m,offeneRechnungen:0,aktiveMitglieder:o,monatlicheEinnahmen:m}),w(!1)}catch(e){console.error("Fehler beim Laden der Beitrags-Statistiken:",e),z({totalEinnahmen:0,offeneRechnungen:0,aktiveMitglieder:0,monatlicheEinnahmen:0}),w(!1)}};return S?e.jsx("div",{className:"beitraege-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Beitragsdaten..."})]})}):e.jsxs("div",{className:"beitraege-container",children:[e.jsxs("div",{className:"beitraege-header",children:[e.jsx("h1",{children:"ðŸ’° Beitrags-Verwaltung"}),e.jsx("p",{children:"Verwalte alle MitgliedsbeitrÃ¤ge, Rechnungen und Zahlungen zentral"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card positive",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(d,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Gesamteinnahmen"}),e.jsxs("p",{className:"stat-value",children:["â‚¬",k.totalEinnahmen.toLocaleString("de-DE",{minimumFractionDigits:2})]}),e.jsx("span",{className:"stat-trend",children:"+12% vs. Vormonat"})]})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(l,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Offene Rechnungen"}),e.jsxs("p",{className:"stat-value",children:["â‚¬",k.offeneRechnungen.toLocaleString("de-DE",{minimumFractionDigits:2})]}),e.jsx("span",{className:"stat-trend",children:"7 Rechnungen offen"})]})]}),e.jsxs("div",{className:"stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(c,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Aktive Mitglieder"}),e.jsx("p",{className:"stat-value",children:k.aktiveMitglieder}),e.jsx("span",{className:"stat-trend",children:"Zahlende Mitglieder"})]})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(o,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Monatliche Einnahmen"}),e.jsxs("p",{className:"stat-value",children:["â‚¬",k.monatlicheEinnahmen.toLocaleString("de-DE",{minimumFractionDigits:2})]}),e.jsx("span",{className:"stat-trend",children:"Durchschnitt"})]})]})]}),e.jsxs("div",{className:"management-grid",children:[e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(m,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Lastschriften"}),e.jsx("p",{children:"SEPA-Lastschriftlauf generieren, Mandate verwalten und an Bank Ã¼bermitteln"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>v("/dashboard/lastschriftlauf"),children:"Lastschriftlauf"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>v("/dashboard/sepa-mandate"),children:"SEPA-Mandate"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(h,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Rechnungen erstellen"}),e.jsx("p",{children:"Neue Rechnungen fÃ¼r MitgliedsbeitrÃ¤ge, Kurse oder Sonderleistungen erstellen"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>v("/dashboard/rechnungen"),children:"Rechnungen verwalten"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Vorlagenverwaltung wird implementiert"),children:"Vorlagen verwalten"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(m,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Zahlungen verwalten"}),e.jsx("p",{children:"Eingehende Zahlungen erfassen, Zahlungsarten verwalten und SEPA-Lastschriften"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Zahlungserfassung wird implementiert"),children:"Zahlung erfassen"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("SEPA-Verwaltung wird implementiert"),children:"SEPA-Verwaltung"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(l,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Mahnwesen"}),e.jsx("p",{children:"Offene Rechnungen Ã¼berwachen, Mahnungen versenden und Zahlungserinnerungen"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>v("/dashboard/mahnwesen"),children:"Offene Posten"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>v("/dashboard/mahnstufen-einstellungen"),children:"Mahnstufen"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(g,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Tarife & Preise"}),e.jsx("p",{children:"Mitgliedstarife definieren, Sonderpreise verwalten und Rabatte konfigurieren"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>v("/dashboard/tarife"),children:"Tarife bearbeiten"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>v("/dashboard/rabattsystem"),children:"Rabatt-System"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(x,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Berichte & Export"}),e.jsx("p",{children:"Finanzberichte erstellen, Umsatzstatistiken anzeigen und Daten exportieren"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-info",onClick:async()=>{try{M(!0);const e=p(),n=e?"&":"?",s=await i(`${t.apiBaseUrl}/monatsreport${e?`?${e}`:""}${n}${e?"":"?"}`),a=await s.json();a.success?(C(a),B(!0)):alert("Fehler beim Laden des Monatsreports: "+(a.error||"Unbekannter Fehler"))}catch(e){console.error("Fehler beim Laden des Monatsreports:",e),alert("Fehler beim Laden des Monatsreports")}finally{M(!1)}},disabled:D,children:D?"LÃ¤dt...":"Monatsreport"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Datenexport wird implementiert"),children:"Daten exportieren"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(u,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Zahlungszyklen"}),e.jsx("p",{children:"Wiederkehrende Rechnungen automatisieren und Zahlungsintervalle verwalten"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>v("/dashboard/zahlungszyklen"),children:"Zyklen verwalten"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Zahlungsplan wird implementiert"),children:"Zahlungsplan"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(j,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Suche & Filter"}),e.jsx("p",{children:"Zahlungen durchsuchen, nach Kriterien filtern und Transaktionen analysieren"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-info",children:"Erweiterte Suche"}),e.jsx("button",{className:"btn btn-secondary",children:"Transaktionslog"})]})]})]}),e.jsxs("div",{className:"standard-card",children:[e.jsx("div",{className:"card-icon",children:e.jsx(b,{size:48})}),e.jsxs("div",{className:"card-content",children:[e.jsx("h3",{children:"Einstellungen"}),e.jsx("p",{children:"Zahlungsmethoden konfigurieren, Steuereinstellungen und Rechnungsvorlagen"}),e.jsxs("div",{className:"card-actions",children:[e.jsx("button",{className:"btn btn-secondary",children:"Konfiguration"}),e.jsx("button",{className:"btn btn-secondary",children:"Vorlagen"})]})]})]})]}),E&&R&&e.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(5px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{background:"rgba(26, 26, 46, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"20px",padding:"2rem",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("h2",{style:{color:"#ffd700",fontSize:"1.75rem",margin:0,textShadow:"0 2px 8px rgba(0, 0, 0, 0.9), 0 0 4px rgba(255, 215, 0, 0.6)"},children:["Monatsreport ",new Date(R.jahr,R.monat-1).toLocaleDateString("de-DE",{month:"long",year:"numeric"})]}),e.jsx("button",{onClick:()=>B(!1),style:{background:"transparent",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#fff",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"1rem"},children:"âœ•"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:"UmsÃ¤tze"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Gesamtumsatz"}),e.jsx("div",{style:{color:"#ffd700",fontSize:"1.5rem",fontWeight:"bold"},children:F(R.umsaetze.gesamt)})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Umsatz Verkauf"}),e.jsx("div",{style:{color:"#ffd700",fontSize:"1.5rem",fontWeight:"bold"},children:F(R.umsaetze.verkauf.brutto)}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.75rem",marginTop:"0.25rem"},children:[R.umsaetze.verkauf.anzahl," VerkÃ¤ufe"]})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Umsatz BeitrÃ¤ge"}),e.jsx("div",{style:{color:"#ffd700",fontSize:"1.5rem",fontWeight:"bold"},children:F(R.umsaetze.beitraege.gesamt)}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.75rem",marginTop:"0.25rem"},children:[R.umsaetze.beitraege.anzahl," Rechnungen"]})]})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:["Neue VertrÃ¤ge (",R.neueVertraege.anzahl,")"]}),R.neueVertraege.liste.length>0?e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",maxHeight:"200px",overflow:"auto"},children:R.neueVertraege.liste.map(n=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#fff",fontWeight:"600"},children:n.mitglied_name}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:[n.vertragsnummer," â€¢ ",L(n.vertragsbeginn)]})]}),e.jsx("div",{style:{color:"#ffd700",fontWeight:"bold"},children:F(n.monatsbeitrag)})]},n.vertrag_id))}):e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontStyle:"italic"},children:"Keine neuen VertrÃ¤ge"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:["KÃ¼ndigungen (",R.kuendigungen.anzahl,")"]}),R.kuendigungen.liste.length>0?e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",maxHeight:"200px",overflow:"auto"},children:R.kuendigungen.liste.map(n=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:"600"},children:n.mitglied_name}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:[n.vertragsnummer," â€¢ KÃ¼ndigungsdatum: ",L(n.kuendigungsdatum)]}),n.kuendigungsgrund&&e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Grund: ",n.kuendigungsgrund]})]},n.vertrag_id))}):e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontStyle:"italic"},children:"Keine KÃ¼ndigungen"})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:["Pausen (",R.pausen.anzahl,")"]}),R.pausen.liste.length>0?e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",maxHeight:"200px",overflow:"auto"},children:R.pausen.liste.map(n=>e.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:"600"},children:n.mitglied_name}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:[n.vertragsnummer," â€¢ Von: ",L(n.ruhepause_von)," bis: ",L(n.ruhepause_bis)]}),n.ruhepause_dauer_monate&&e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Dauer: ",n.ruhepause_dauer_monate," Monate"]})]},n.vertrag_id))}):e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontStyle:"italic"},children:"Keine Pausen"})]})]})})]})};export{v as default};
