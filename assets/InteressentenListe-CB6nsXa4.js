import{a as e,j as t}from"./query-Caj74EYQ.js";import{b as n,a as r}from"./index-DJzZu8AC.js";import{l as a,s as i,ao as s,ap as o,aq as l,ar as d}from"./icons-DiLw-1i5.js";import{u as c}from"./vendor-router-Co3o87Zc.js";import"./charts-C1Gv3M_c.js";const g=()=>{const{getDojoFilterParam:g}=n(),[p,b]=e.useState([]),[h,m]=e.useState(!0),[u,x]=e.useState(""),[j,f]=e.useState(""),[y,v]=e.useState(""),[k,w]=e.useState(""),S=c(),[P,N]=e.useState({page:1,limit:50,total:0,totalPages:0});e.useEffect(()=>{const e=setTimeout(()=>{f(y),N(e=>({...e,page:1}))},300);return()=>clearTimeout(e)},[y]),e.useEffect(()=>{N(e=>({...e,page:1}))},[k]);const _=e.useCallback(async()=>{try{m(!0);const e=g(),t=new URLSearchParams;if(e){const[n,r]=e.split("=");t.append(n,r)}t.append("page",P.page),t.append("limit",P.limit),j&&t.append("search",j),k&&t.append("status",k);const n=await r.get(`/interessenten?${t.toString()}`);n.data.data?(b(n.data.data),N(e=>({...e,...n.data.pagination}))):(b(n.data),N(e=>({...e,total:n.data.length,totalPages:1}))),m(!1)}catch(e){console.error("Fehler beim Laden der Interessenten:",e),x("Fehler beim Laden der Daten"),m(!1)}},[g,P.page,P.limit,j,k]);e.useEffect(()=>{_()},[_]);const C=e=>{e>=1&&e<=P.totalPages&&N(t=>({...t,page:e}))},I=e=>({neu:"#3b82f6",kontaktiert:"#8b5cf6",probetraining_vereinbart:"#f59e0b",probetraining_absolviert:"#10b981",angebot_gesendet:"#06b6d4",interessiert:"#84cc16",nicht_interessiert:"#6b7280",konvertiert:"#22c55e"}[e]||"#6b7280"),z=()=>{if(P.totalPages<=1)return null;const e=[];let n=Math.max(1,P.page-Math.floor(2.5)),r=Math.min(P.totalPages,n+5-1);r-n+1<5&&(n=Math.max(1,r-5+1));for(let t=n;t<=r;t++)e.push(t);return t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.5rem",marginTop:"2rem",flexWrap:"wrap"},children:[t.jsx("button",{onClick:()=>C(1),disabled:1===P.page,className:"pagination-btn",title:"Erste Seite",children:t.jsx(s,{size:18})}),t.jsx("button",{onClick:()=>C(P.page-1),disabled:1===P.page,className:"pagination-btn",title:"Vorherige Seite",children:t.jsx(o,{size:18})}),n>1&&t.jsx("span",{style:{color:"rgba(255,255,255,0.5)"},children:"..."}),e.map(e=>t.jsx("button",{onClick:()=>C(e),className:"pagination-btn "+(P.page===e?"active":""),children:e},e)),r<P.totalPages&&t.jsx("span",{style:{color:"rgba(255,255,255,0.5)"},children:"..."}),t.jsx("button",{onClick:()=>C(P.page+1),disabled:P.page===P.totalPages,className:"pagination-btn",title:"N채chste Seite",children:t.jsx(l,{size:18})}),t.jsx("button",{onClick:()=>C(P.totalPages),disabled:P.page===P.totalPages,className:"pagination-btn",title:"Letzte Seite",children:t.jsx(d,{size:18})})]})};return u?t.jsx("div",{className:"dashboard-container",children:t.jsx("div",{className:"error",children:u})}):t.jsxs("div",{className:"dashboard-container",children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsxs("h1",{style:{margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(a,{size:28}),"Interessenten"]}),t.jsx("button",{className:"primary-button",onClick:()=>S("/dashboard/mitglieder"),children:"Zur체ck zu Mitgliedern"})]}),t.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[t.jsxs("div",{style:{position:"relative",flex:1,minWidth:"250px"},children:[t.jsx(i,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.5)"}}),t.jsx("input",{type:"text",placeholder:"Suchen nach Name, Email...",value:y,onChange:e=>v(e.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 40px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(31, 41, 55, 0.6)",color:"white"}})]}),t.jsxs("select",{value:k,onChange:e=>w(e.target.value),style:{padding:"0.75rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(31, 41, 55, 0.6)",color:"white",minWidth:"200px"},children:[t.jsx("option",{value:"",style:{background:"#1f2937",color:"white"},children:"Alle Status"}),t.jsx("option",{value:"neu",style:{background:"#1f2937",color:"white"},children:"Neu"}),t.jsx("option",{value:"kontaktiert",style:{background:"#1f2937",color:"white"},children:"Kontaktiert"}),t.jsx("option",{value:"probetraining_vereinbart",style:{background:"#1f2937",color:"white"},children:"Probetraining vereinbart"}),t.jsx("option",{value:"probetraining_absolviert",style:{background:"#1f2937",color:"white"},children:"Probetraining absolviert"}),t.jsx("option",{value:"angebot_gesendet",style:{background:"#1f2937",color:"white"},children:"Angebot gesendet"}),t.jsx("option",{value:"interessiert",style:{background:"#1f2937",color:"white"},children:"Interessiert"}),t.jsx("option",{value:"nicht_interessiert",style:{background:"#1f2937",color:"white"},children:"Nicht interessiert"}),t.jsx("option",{value:"konvertiert",style:{background:"#1f2937",color:"white"},children:"Konvertiert"})]}),t.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.7)",background:"rgba(31, 41, 55, 0.6)",padding:"0.75rem 1rem",borderRadius:"6px",whiteSpace:"nowrap"},children:[h?"...":`${P.total} Interessenten`,P.totalPages>1&&` | Seite ${P.page}/${P.totalPages}`]})]}),h?t.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"rgba(255,255,255,0.7)"},children:"Lade Interessenten..."}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:p.length>0?p.map(e=>{return t.jsxs("div",{className:"stat-card",style:{padding:"1rem",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",borderLeft:`4px solid ${I(e.status)}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[t.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:0,color:"#ffd700"},children:[e.nachname,", ",e.vorname]}),t.jsx("span",{style:{fontSize:"0.7rem",padding:"0.25rem 0.5rem",borderRadius:"4px",background:I(e.status),color:"white",fontWeight:"500"},children:(n=e.status,{neu:"Neu",kontaktiert:"Kontaktiert",probetraining_vereinbart:"Probetraining vereinbart",probetraining_absolviert:"Probetraining absolviert",angebot_gesendet:"Angebot gesendet",interessiert:"Interessiert",nicht_interessiert:"Nicht interessiert",konvertiert:"Konvertiert"}[n]||n)})]}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:"1.6"},children:[e.email&&t.jsxs("p",{style:{margin:"0.2rem 0"},children:[t.jsx("strong",{children:"Email:"})," ",e.email]}),e.telefon&&t.jsxs("p",{style:{margin:"0.2rem 0"},children:[t.jsx("strong",{children:"Telefon:"})," ",e.telefon]}),e.erstkontakt_datum&&t.jsxs("p",{style:{margin:"0.2rem 0"},children:[t.jsx("strong",{children:"Erstkontakt:"})," ",new Date(e.erstkontakt_datum).toLocaleDateString("de-DE")]}),e.interessiert_an&&t.jsxs("p",{style:{margin:"0.2rem 0"},children:[t.jsx("strong",{children:"Interesse:"})," ",e.interessiert_an]}),e.prioritaet&&t.jsxs("p",{style:{margin:"0.2rem 0"},children:[t.jsx("strong",{children:"Priorit채t:"})," ",e.prioritaet]})]})]},e.id);var n}):t.jsxs("div",{className:"stat-card",style:{gridColumn:"1 / -1",padding:"2rem",textAlign:"center"},children:[t.jsx("h3",{children:"Keine Interessenten gefunden"}),t.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)"},children:j||k?"Keine Treffer f체r die Suche.":"Es sind noch keine Interessenten im System erfasst."})]})}),t.jsx(z,{})]}),t.jsx("style",{children:"\n        .pagination-btn {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          min-width: 36px;\n          height: 36px;\n          padding: 0 0.5rem;\n          background: rgba(31, 41, 55, 0.6);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 6px;\n          color: rgba(255, 255, 255, 0.8);\n          cursor: pointer;\n          transition: all 0.2s;\n          font-weight: 500;\n        }\n        .pagination-btn:hover:not(:disabled) {\n          background: rgba(59, 130, 246, 0.3);\n          border-color: rgba(59, 130, 246, 0.5);\n        }\n        .pagination-btn:disabled {\n          opacity: 0.4;\n          cursor: not-allowed;\n        }\n        .pagination-btn.active {\n          background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);\n          border-color: transparent;\n          color: white;\n        }\n      "})]})};export{g as default};
