import{j as e}from"./animation-1wuIdCBS.js";import{r as s}from"./vendor-router-BhMXg4Z-.js";import{k as r,c as n}from"./index-DUnH23_2.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-D7rg4pDH.js";const a=()=>{const[a,i]=s.useState("manual_sepa"),[l,t]=s.useState(null),[d,c]=s.useState(!0),[o,h]=s.useState(!1),[m,u]=s.useState(""),[p,j]=s.useState(""),[x,v]=s.useState({stripe_secret_key:"",stripe_publishable_key:""}),[g,_]=s.useState({datev_api_key:"",datev_consultant_number:"",datev_client_number:""});s.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0);const e=await r(`${n.apiBaseUrl}/payment-provider/status`);if(!e.ok)throw new Error("Fehler beim Laden der Einstellungen");const s=await e.json();t(s),i(s.current_provider),"stripe_datev"===s.current_provider&&(v({stripe_secret_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",stripe_publishable_key:s.stripe_publishable_key||""}),_({datev_api_key:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",datev_consultant_number:s.datev_consultant_number||"",datev_client_number:s.datev_client_number||""}))}catch(e){console.error("Fehler beim Laden der Einstellungen:",e),u("Fehler beim Laden der aktuellen Einstellungen")}finally{c(!1)}},N=e=>{i(e),u(""),j("")};return d?e.jsx("div",{className:"app-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Zahlungseinstellungen..."})]})}):e.jsxs("div",{className:"app-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h2",{className:"page-title",children:"ðŸ’³ Zahlungssystem-Konfiguration"}),e.jsx("p",{className:"page-subtitle",children:"WÃ¤hlen Sie Ihr bevorzugtes Zahlungssystem"})]}),m&&e.jsxs("div",{className:"alert error",style:{marginBottom:"2rem"},children:["âŒ ",m]}),p&&e.jsxs("div",{className:"alert success",style:{marginBottom:"2rem"},children:["âœ… ",p]}),l&&e.jsx("div",{className:"standard-card",style:{marginBottom:"2rem"},children:e.jsxs("div",{className:"standard-card-content",children:[e.jsx("h3",{className:"standard-card-title",children:"Aktueller Status"}),e.jsxs("div",{className:"provider-status",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"System:"})," ",l.provider_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:"status-badge "+(l.is_configured?"success":"warning"),children:l.is_configured?"âœ… Konfiguriert":"âš ï¸ Nicht vollstÃ¤ndig konfiguriert"})]})]})]})}),e.jsx("div",{className:"provider-selection",style:{marginBottom:"2rem"},children:e.jsxs("div",{className:"payment-options",children:[e.jsx("div",{className:"provider-option "+("manual_sepa"===a?"selected":""),children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"manual_sepa",checked:"manual_sepa"===a,onChange:e=>N(e.target.value)}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("h3",{children:"ðŸª Manuelle SEPA-Abwicklung"}),e.jsx("div",{className:"option-badge current",children:"Aktuell verfÃ¼gbar"})]}),e.jsx("p",{className:"option-description",children:"Bestehende manuelle Lastschrift-Verwaltung mit SEPA-Mandaten"}),e.jsxs("div",{className:"pros-cons",children:[e.jsxs("div",{className:"pros",children:[e.jsx("h4",{children:"âœ… Vorteile:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Bereits vollstÃ¤ndig implementiert"}),e.jsx("li",{children:"Keine externen Transaktionskosten"}),e.jsx("li",{children:"VollstÃ¤ndige Kontrolle Ã¼ber den Prozess"}),e.jsx("li",{children:"SEPA-konforme PDF-Generation"})]})]}),e.jsxs("div",{className:"cons",children:[e.jsx("h4",{children:"âŒ Nachteile:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Manuelle Buchhaltungsarbeit erforderlich"}),e.jsx("li",{children:"Zeitaufwand fÃ¼r Zahlungsabwicklung"}),e.jsx("li",{children:"Keine automatische DATEV-Integration"})]})]})]})]})]})}),e.jsx("div",{className:"provider-option "+("stripe_datev"===a?"selected":""),children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"stripe_datev",checked:"stripe_datev"===a,onChange:e=>N(e.target.value)}),e.jsxs("div",{className:"option-content",children:[e.jsxs("div",{className:"option-header",children:[e.jsx("h3",{children:"ðŸ’³ Stripe + DATEV Integration"}),e.jsx("div",{className:"option-badge new",children:"Neu & Professionell"})]}),e.jsx("p",{className:"option-description",children:"Professionelle Zahlungsabwicklung mit automatischer Buchhaltung"}),e.jsxs("div",{className:"pros-cons",children:[e.jsxs("div",{className:"pros",children:[e.jsx("h4",{children:"âœ… Vorteile:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Automatische DATEV-Ãœbertragung"}),e.jsx("li",{children:"Professionelle Zahlungsabwicklung"}),e.jsx("li",{children:"Zeitersparnis durch Automatisierung"}),e.jsx("li",{children:"Bessere Nachverfolgung und Reporting"}),e.jsx("li",{children:"Steuerberater hat sofort alle Daten"})]})]}),e.jsxs("div",{className:"cons",children:[e.jsx("h4",{children:"âŒ Nachteile:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Stripe-GebÃ¼hren: 0,35â‚¬ + 1,4% pro Transaktion"}),e.jsx("li",{children:"Konfiguration von API-SchlÃ¼sseln erforderlich"}),e.jsx("li",{children:"AbhÃ¤ngigkeit von externen Diensten"})]})]})]})]})]})})]})}),"stripe_datev"===a&&e.jsxs("div",{className:"configuration-forms",children:[e.jsx("div",{className:"standard-card",style:{marginBottom:"1rem"},children:e.jsxs("div",{className:"standard-card-content",children:[e.jsx("h3",{className:"standard-card-title",children:"ðŸ”‘ Stripe Konfiguration"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"stripe_secret_key",children:"Secret Key (sk_...)"}),e.jsx("input",{type:"password",id:"stripe_secret_key",value:x.stripe_secret_key,onChange:e=>v({...x,stripe_secret_key:e.target.value}),placeholder:"sk_test_... oder sk_live_..."}),e.jsx("small",{children:"Geheimer SchlÃ¼ssel fÃ¼r Server-side API Aufrufe"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"stripe_publishable_key",children:"Publishable Key (pk_...)"}),e.jsx("input",{type:"text",id:"stripe_publishable_key",value:x.stripe_publishable_key,onChange:e=>v({...x,stripe_publishable_key:e.target.value}),placeholder:"pk_test_... oder pk_live_..."}),e.jsx("small",{children:"Ã–ffentlicher SchlÃ¼ssel fÃ¼r Frontend-Integration"})]})]})]})}),e.jsx("div",{className:"standard-card",style:{marginBottom:"1rem"},children:e.jsxs("div",{className:"standard-card-content",children:[e.jsx("h3",{className:"standard-card-title",children:"ðŸ“Š DATEV Konfiguration"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"datev_api_key",children:"DATEV API Key"}),e.jsx("input",{type:"password",id:"datev_api_key",value:g.datev_api_key,onChange:e=>_({...g,datev_api_key:e.target.value}),placeholder:"DATEV API SchlÃ¼ssel"}),e.jsx("small",{children:"API-SchlÃ¼ssel fÃ¼r DATEV-Integration"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"datev_consultant_number",children:"Beraternummer"}),e.jsx("input",{type:"text",id:"datev_consultant_number",value:g.datev_consultant_number,onChange:e=>_({...g,datev_consultant_number:e.target.value}),placeholder:"12345"}),e.jsx("small",{children:"DATEV Beraternummer"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"datev_client_number",children:"Mandantennummer"}),e.jsx("input",{type:"text",id:"datev_client_number",value:g.datev_client_number,onChange:e=>_({...g,datev_client_number:e.target.value}),placeholder:"123"}),e.jsx("small",{children:"DATEV Mandantennummer"})]})]})]})})]}),e.jsx("div",{className:"standard-card",style:{marginBottom:"2rem"},children:e.jsxs("div",{className:"standard-card-content",children:[e.jsx("h3",{className:"standard-card-title",children:"ðŸ’° Kostenvergleich"}),e.jsxs("div",{className:"cost-comparison",children:[e.jsxs("div",{className:"cost-option",children:[e.jsx("h4",{children:"Manual SEPA"}),e.jsxs("div",{className:"cost-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"TransaktionsgebÃ¼hren:"})," 0â‚¬"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zeitaufwand:"})," ~2h/Monat"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Buchhaltung:"})," Manuell"]})]})]}),e.jsxs("div",{className:"cost-option",children:[e.jsx("h4",{children:"Stripe + DATEV"}),e.jsxs("div",{className:"cost-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"TransaktionsgebÃ¼hren:"})," 0,35â‚¬ + 1,4%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zeitaufwand:"})," ~0h/Monat"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Buchhaltung:"})," Vollautomatisch"]})]})]})]})]})}),e.jsx("div",{className:"action-buttons",children:e.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{h(!0),u(""),j("");const e={payment_provider:a,...x,...g},s=await r(`${n.apiBaseUrl}/payment-provider/configure`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const e=await s.json();throw new Error(e.error||"Fehler beim Speichern der Konfiguration")}j("Zahlungssystem erfolgreich konfiguriert!"),await b()}catch(e){console.error("Fehler beim Speichern:",e),u(e.message)}finally{h(!1)}},disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner small"}),"Speichere..."]}):e.jsx(e.Fragment,{children:"ðŸ’¾ Konfiguration speichern"})})})]})};export{a as default};
