import{a as e,j as t}from"./query-Caj74EYQ.js";import{u as a,a as i}from"./index-B0gO-Ppw.js";/* empty css                     */import{aY as s,g as n,t as r,o as l,a2 as d,a3 as o,a5 as m,b2 as c,D as g,C as b,bc as h,_ as p,X as x}from"./icons-eh0tbLFx.js";import"./vendor-router-B2AaIOtG.js";import"./charts-QHQg_ypW.js";const u=()=>{const{activeDojo:u}=a(),[j,f]=e.useState([]),[y,_]=e.useState(!0),[v,z]=e.useState(null),[N,k]=e.useState(!1),[S,B]=e.useState({name:"",beschreibung:"",rabatt_typ:"prozent",rabatt_prozent:"",rabatt_betrag_euro:"",gueltig_von:"",gueltig_bis:"",max_nutzungen:"",aktiv:!0,ist_familien_rabatt:!1,familie_position_min:"",familie_position_max:""}),C=()=>u&&"super-admin"!==u?u.id:null;e.useEffect(()=>{w()},[u]);const w=async()=>{try{_(!0);const e=C(),t=e?`?dojo_id=${e}`:"",a=(await i.get(`/tarife/rabatte${t}`)).data;if(a.success){const e=a.data.map(e=>({id:e.rabatt_id,name:e.name,beschreibung:e.beschreibung,rabatt_typ:e.rabatt_typ||"prozent",rabatt_prozent:e.rabatt_prozent?parseFloat(e.rabatt_prozent):null,rabatt_betrag_cents:e.rabatt_betrag_cents,gueltig_von:e.gueltig_von,gueltig_bis:e.gueltig_bis,max_nutzungen:e.max_nutzungen,aktiv:1===e.aktiv,genutzt:e.genutzt||0,ist_familien_rabatt:1===e.ist_familien_rabatt,familie_position_min:e.familie_position_min,familie_position_max:e.familie_position_max}));f(e)}}catch(e){console.error("Fehler beim Laden der Rabatte:",e)}finally{_(!1)}},R=async e=>{try{const t=C(),a=t?`?dojo_id=${t}`:"",s={...e,rabatt_betrag_cents:e.rabatt_betrag_euro?Math.round(100*parseFloat(e.rabatt_betrag_euro.replace(",","."))):null};let n;delete s.rabatt_betrag_euro,n=e.id?await i.put(`/tarife/rabatte/${e.id}${a}`,s):await i.post(`/tarife/rabatte${a}`,s),n.data.success?(await w(),k(!1),z(null),B({name:"",beschreibung:"",rabatt_typ:"prozent",rabatt_prozent:"",rabatt_betrag_euro:"",gueltig_von:"",gueltig_bis:"",max_nutzungen:"",aktiv:!0,ist_familien_rabatt:!1,familie_position_min:"",familie_position_max:""})):alert("Fehler beim Speichern: "+n.data.error)}catch(t){console.error("Fehler beim Speichern des Rabatts:",t),alert("Fehler beim Speichern des Rabatts")}},W=async e=>{if(window.confirm("Sind Sie sicher, dass Sie diesen Rabatt löschen möchten?"))try{const t=C(),a=t?`?dojo_id=${t}`:"",s=await i.delete(`/tarife/rabatte/${e}${a}`);s.data.success?await w():alert("Fehler beim Löschen: "+s.data.error)}catch(t){console.error("Fehler beim Löschen des Rabatts:",t),alert("Fehler beim Löschen des Rabatts")}},F=e=>e?new Date(e).toLocaleDateString("de-DE"):"Unbegrenzt",T=e=>"betrag"===e.rabatt_typ&&e.rabatt_betrag_cents?`${(e.rabatt_betrag_cents/100).toFixed(2)} €`:`${e.rabatt_prozent||0}%`,I=e=>{if(!e.aktiv)return!1;const t=new Date,a=e.gueltig_von?new Date(e.gueltig_von):null,i=e.gueltig_bis?new Date(e.gueltig_bis):null;return!(a&&t<a)&&(!(i&&t>i)&&!(e.max_nutzungen&&e.genutzt>=e.max_nutzungen))},$=e=>({...e,rabatt_betrag_euro:e.rabatt_betrag_cents?(e.rabatt_betrag_cents/100).toFixed(2):"",familie_position_min:e.familie_position_min||"",familie_position_max:e.familie_position_max||""}),G={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid var(--border-color, #e5e7eb)",background:"var(--card-bg, #1e293b)",borderRadius:"0.5rem 0.5rem 0 0"},L={margin:0,fontSize:"1.25rem",fontWeight:"600",color:"var(--text-primary, #f8fafc)"};if(y)return t.jsx("div",{className:"tarife-container",children:t.jsxs("div",{className:"loading-state",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"Lade Rabatt-Daten..."})]})});const M=j.filter(e=>I(e)),D=j.filter(e=>!I(e));return t.jsxs("div",{className:"tarife-container",children:[t.jsxs("div",{className:"tarife-header",children:[t.jsx("h1",{children:"Rabattsystem"}),t.jsx("p",{children:"Verwalte alle Rabatte und Sonderkonditionen für Mitgliedschaften"})]}),t.jsxs("div",{className:"stats-grid",children:[t.jsxs("div",{className:"stat-card primary",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(s,{size:32})}),t.jsxs("div",{className:"stat-info",children:[t.jsx("h3",{children:"Gesamt Rabatte"}),t.jsx("p",{className:"stat-value",children:j.length}),t.jsx("span",{className:"stat-trend",children:"definiert"})]})]}),t.jsxs("div",{className:"stat-card success",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(n,{size:32})}),t.jsxs("div",{className:"stat-info",children:[t.jsx("h3",{children:"Aktive Rabatte"}),t.jsx("p",{className:"stat-value",children:M.length}),t.jsx("span",{className:"stat-trend",children:"aktuell nutzbar"})]})]}),t.jsxs("div",{className:"stat-card warning",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(r,{size:32})}),t.jsxs("div",{className:"stat-info",children:[t.jsx("h3",{children:"Inaktive Rabatte"}),t.jsx("p",{className:"stat-value",children:D.length}),t.jsx("span",{className:"stat-trend",children:"abgelaufen/deaktiviert"})]})]}),t.jsxs("div",{className:"stat-card info",children:[t.jsx("div",{className:"stat-icon",children:t.jsx(l,{size:32})}),t.jsxs("div",{className:"stat-info",children:[t.jsx("h3",{children:"Gesamtnutzungen"}),t.jsx("p",{className:"stat-value",children:j.reduce((e,t)=>e+(t.genutzt||0),0)}),t.jsx("span",{className:"stat-trend",children:"angewendet"})]})]})]}),t.jsxs("div",{className:"section",children:[t.jsxs("div",{className:"section-header",children:[t.jsxs("h2",{children:[t.jsx(n,{size:24})," Aktive Rabatte",t.jsxs("span",{className:"tarif-count",children:["(",M.length,")"]})]}),t.jsx("div",{className:"header-actions",children:t.jsxs("button",{className:"btn btn-primary",onClick:()=>k(!0),children:[t.jsx(d,{size:20}),"Neuer Rabatt"]})})]}),0===M.length?t.jsx("div",{className:"info-box",children:t.jsx("p",{children:"Keine aktiven Rabatte vorhanden. Erstellen Sie einen neuen Rabatt."})}):t.jsx("div",{className:"tarife-grid",children:M.map(e=>t.jsxs("div",{className:"tarif-card",children:[t.jsxs("div",{className:"tarif-header",children:[t.jsxs("div",{className:"tarif-title",children:[t.jsx("h3",{children:e.name}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[t.jsx("span",{className:"status-badge active",children:"Aktiv"}),e.ist_familien_rabatt&&t.jsxs("span",{className:"status-badge",style:{background:"#8b5cf6"},children:[t.jsx(l,{size:12,style:{marginRight:"0.25rem"}}),"Familie"]})]})]}),t.jsxs("div",{className:"tarif-actions",children:[t.jsx("button",{className:"action-btn edit",onClick:()=>z($(e)),title:"Bearbeiten",children:t.jsx(o,{size:16})}),t.jsx("button",{className:"action-btn delete",onClick:()=>W(e.id),title:"Löschen",children:t.jsx(m,{size:16})})]})]}),t.jsxs("div",{className:"tarif-price",children:[t.jsx("span",{className:"currency",children:(e.rabatt_typ,"-")}),T(e)]}),t.jsxs("div",{className:"tarif-details",children:[e.beschreibung&&t.jsxs("div",{className:"detail-item",style:{gridColumn:"1 / -1"},children:[t.jsxs("span",{className:"label",children:[t.jsx(c,{size:14})," Beschreibung"]}),t.jsx("div",{className:"value",children:e.beschreibung})]}),t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:["betrag"===e.rabatt_typ?t.jsx(g,{size:14}):t.jsx(s,{size:14})," Typ"]}),t.jsx("div",{className:"value",children:"betrag"===e.rabatt_typ?"Festbetrag":"Prozent"})]}),t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:[t.jsx(b,{size:14})," Gültig von"]}),t.jsx("div",{className:"value",children:F(e.gueltig_von)})]}),t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:[t.jsx(b,{size:14})," Gültig bis"]}),t.jsx("div",{className:"value",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:e.gueltig_bis?F(e.gueltig_bis):t.jsxs(t.Fragment,{children:[t.jsx(h,{size:14})," Unbegrenzt"]})})]}),t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:[t.jsx(l,{size:14})," Nutzungen"]}),t.jsxs("div",{className:"value",children:[e.genutzt||0,e.max_nutzungen?` / ${e.max_nutzungen}`:" (unbegrenzt)"]})]}),e.ist_familien_rabatt&&t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:[t.jsx(l,{size:14})," Gilt für"]}),t.jsx("div",{className:"value",children:e.familie_position_min===e.familie_position_max?`${e.familie_position_min}. Familienmitglied`:e.familie_position_max?`${e.familie_position_min}. - ${e.familie_position_max}. Familienmitglied`:`${e.familie_position_min}.+ Familienmitglied`})]})]})]},e.id))})]}),D.length>0&&t.jsxs("div",{className:"section",children:[t.jsx("div",{className:"section-header",style:{background:"rgba(107, 114, 128, 0.1)",borderLeft:"4px solid #6b7280"},children:t.jsxs("h2",{style:{color:"#6b7280"},children:[t.jsx(r,{size:24})," Inaktive Rabatte",t.jsxs("span",{className:"tarif-count",children:["(",D.length,")"]})]})}),t.jsx("div",{className:"tarife-grid",children:D.map(e=>t.jsxs("div",{className:"tarif-card",style:{opacity:.7,border:"2px solid #6b7280"},children:[t.jsxs("div",{className:"tarif-header",children:[t.jsxs("div",{className:"tarif-title",children:[t.jsx("h3",{children:e.name}),t.jsx("span",{className:"status-badge",style:{background:"#6b7280"},children:"Inaktiv"})]}),t.jsxs("div",{className:"tarif-actions",children:[t.jsx("button",{className:"action-btn edit",onClick:()=>z($(e)),title:"Bearbeiten",children:t.jsx(o,{size:16})}),t.jsx("button",{className:"action-btn delete",onClick:()=>W(e.id),title:"Löschen",children:t.jsx(m,{size:16})})]})]}),t.jsxs("div",{className:"tarif-price",children:[t.jsx("span",{className:"currency",children:"-"}),T(e)]}),t.jsxs("div",{className:"tarif-details",children:[t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:[t.jsx(b,{size:14})," Gültig von"]}),t.jsx("div",{className:"value",children:F(e.gueltig_von)})]}),t.jsxs("div",{className:"detail-item",children:[t.jsxs("span",{className:"label",children:[t.jsx(b,{size:14})," Gültig bis"]}),t.jsx("div",{className:"value",children:F(e.gueltig_bis)})]})]})]},e.id))})]}),N&&t.jsx("div",{className:"modal-overlay",children:t.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[t.jsxs("div",{style:G,children:[t.jsx("h3",{style:L,children:"Neuer Rabatt"}),t.jsx("button",{className:"close-btn",onClick:()=>k(!1),style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem"},children:t.jsx(p,{size:20,style:{color:"var(--text-primary, #f8fafc)"}})})]}),t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),t.jsx("input",{type:"text",value:S.name,onChange:e=>B({...S,name:e.target.value}),placeholder:"z.B. Familienrabatt, Studentenrabatt",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Beschreibung"}),t.jsx("textarea",{value:S.beschreibung,onChange:e=>B({...S,beschreibung:e.target.value}),placeholder:"Beschreibung des Rabatts...",rows:3,style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Typ *"}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"radio",name:"rabatt_typ",value:"prozent",checked:"prozent"===S.rabatt_typ,onChange:e=>B({...S,rabatt_typ:e.target.value,rabatt_betrag_euro:""})}),t.jsx(s,{size:16})," Prozent"]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"radio",name:"rabatt_typ",value:"betrag",checked:"betrag"===S.rabatt_typ,onChange:e=>B({...S,rabatt_typ:e.target.value,rabatt_prozent:""})}),t.jsx(g,{size:16})," Festbetrag"]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:["prozent"===S.rabatt_typ?t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt (%) *"}),t.jsx("input",{type:"number",min:"1",max:"100",value:S.rabatt_prozent,onChange:e=>B({...S,rabatt_prozent:e.target.value}),placeholder:"z.B. 10",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}):t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Betrag (EUR) *"}),t.jsx("input",{type:"text",inputMode:"decimal",value:S.rabatt_betrag_euro,onChange:e=>B({...S,rabatt_betrag_euro:e.target.value}),placeholder:"z.B. 5.00 oder 10,50",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Max. Nutzungen"}),t.jsx("input",{type:"number",min:"0",value:S.max_nutzungen,onChange:e=>B({...S,max_nutzungen:e.target.value}),placeholder:"Leer = unbegrenzt",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Gültig von *"}),t.jsx("input",{type:"date",value:S.gueltig_von,onChange:e=>B({...S,gueltig_von:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Gültig bis ",t.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),t.jsx("input",{type:"date",value:S.gueltig_bis,onChange:e=>B({...S,gueltig_bis:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:S.aktiv,onChange:e=>B({...S,aktiv:e.target.checked})}),"Rabatt ist aktiv"]})}),t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"var(--background-secondary, #f3f4f6)",borderRadius:"0.5rem"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer",marginBottom:"0.75rem"},children:[t.jsx("input",{type:"checkbox",checked:S.ist_familien_rabatt,onChange:e=>B({...S,ist_familien_rabatt:e.target.checked})}),t.jsx(l,{size:16}),"Familien-Rabatt (für 2., 3., ... Familienmitglied)"]}),S.ist_familien_rabatt&&t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"0.75rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Ab Position *"}),t.jsx("input",{type:"number",min:"2",value:S.familie_position_min,onChange:e=>B({...S,familie_position_min:e.target.value}),placeholder:"z.B. 2 für 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Bis Position ",t.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),t.jsx("input",{type:"number",min:"2",value:S.familie_position_max,onChange:e=>B({...S,familie_position_max:e.target.value}),placeholder:"z.B. 2 für nur 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>k(!1),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),t.jsxs("button",{className:"btn btn-primary",onClick:()=>R(S),disabled:!(S.name&&S.gueltig_von&&("prozent"===S.rabatt_typ?S.rabatt_prozent:S.rabatt_betrag_euro)),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(x,{size:16}),"Speichern"]})]})]})]})}),v&&t.jsx("div",{className:"modal-overlay",children:t.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[t.jsxs("div",{style:G,children:[t.jsx("h3",{style:L,children:"Rabatt bearbeiten"}),t.jsx("button",{className:"close-btn",onClick:()=>z(null),style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem"},children:t.jsx(p,{size:20,style:{color:"var(--text-primary, #f8fafc)"}})})]}),t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),t.jsx("input",{type:"text",value:v.name,onChange:e=>z({...v,name:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Beschreibung"}),t.jsx("textarea",{value:v.beschreibung||"",onChange:e=>z({...v,beschreibung:e.target.value}),rows:3,style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Typ *"}),t.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"radio",name:"edit_rabatt_typ",value:"prozent",checked:"prozent"===v.rabatt_typ,onChange:e=>z({...v,rabatt_typ:e.target.value,rabatt_betrag_euro:""})}),t.jsx(s,{size:16})," Prozent"]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[t.jsx("input",{type:"radio",name:"edit_rabatt_typ",value:"betrag",checked:"betrag"===v.rabatt_typ,onChange:e=>z({...v,rabatt_typ:e.target.value,rabatt_prozent:null})}),t.jsx(g,{size:16})," Festbetrag"]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:["prozent"===v.rabatt_typ?t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt (%) *"}),t.jsx("input",{type:"number",min:"1",max:"100",value:v.rabatt_prozent||"",onChange:e=>z({...v,rabatt_prozent:parseFloat(e.target.value)}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}):t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Betrag (EUR) *"}),t.jsx("input",{type:"text",inputMode:"decimal",value:v.rabatt_betrag_euro||"",onChange:e=>z({...v,rabatt_betrag_euro:e.target.value}),placeholder:"z.B. 5.00 oder 10,50",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Max. Nutzungen"}),t.jsx("input",{type:"number",min:"0",value:v.max_nutzungen||"",onChange:e=>z({...v,max_nutzungen:e.target.value?parseInt(e.target.value):null}),placeholder:"Leer = unbegrenzt",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Gültig von *"}),t.jsx("input",{type:"date",value:v.gueltig_von?v.gueltig_von.split("T")[0]:"",onChange:e=>z({...v,gueltig_von:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Gültig bis ",t.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),t.jsx("input",{type:"date",value:v.gueltig_bis?v.gueltig_bis.split("T")[0]:"",onChange:e=>z({...v,gueltig_bis:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),t.jsx("div",{style:{marginBottom:"1rem"},children:t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:v.aktiv,onChange:e=>z({...v,aktiv:e.target.checked})}),"Rabatt ist aktiv"]})}),t.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"var(--background-secondary, #f3f4f6)",borderRadius:"0.5rem"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer",marginBottom:"0.75rem"},children:[t.jsx("input",{type:"checkbox",checked:v.ist_familien_rabatt,onChange:e=>z({...v,ist_familien_rabatt:e.target.checked})}),t.jsx(l,{size:16}),"Familien-Rabatt (für 2., 3., ... Familienmitglied)"]}),v.ist_familien_rabatt&&t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"0.75rem"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Ab Position *"}),t.jsx("input",{type:"number",min:"2",value:v.familie_position_min||"",onChange:e=>z({...v,familie_position_min:e.target.value}),placeholder:"z.B. 2 für 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),t.jsxs("div",{children:[t.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Bis Position ",t.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),t.jsx("input",{type:"number",min:"2",value:v.familie_position_max||"",onChange:e=>z({...v,familie_position_max:e.target.value}),placeholder:"z.B. 2 für nur 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[t.jsx("button",{className:"btn btn-secondary",onClick:()=>z(null),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),t.jsxs("button",{className:"btn btn-primary",onClick:()=>R(v),disabled:!v.name||("prozent"===v.rabatt_typ?!v.rabatt_prozent:!v.rabatt_betrag_euro),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx(x,{size:16}),"Speichern"]})]})]})]})})]})};export{u as default};
