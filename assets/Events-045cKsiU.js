import{j as e}from"./animation-1wuIdCBS.js";import{r as n}from"./vendor-router-BhMXg4Z-.js";import{u as a,a as s,b as r}from"./index-DUnH23_2.js";/* empty css               *//* empty css                  */import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-D7rg4pDH.js";const i=()=>{const{token:r}=a(),[i,l]=n.useState([]),[t,d]=n.useState(!1),[c,o]=n.useState(""),[h,m]=n.useState("upcoming"),u=n.useCallback(async()=>{var e,n;d(!0),o("");try{const e=new URLSearchParams;"upcoming"===h&&e.append("upcoming","true");const n=await s.get(`/tda-turniere?${e.toString()}`,{headers:{Authorization:`Bearer ${r}`}});if(n.data.success){let e=n.data.turniere||[];"past"===h&&(e=e.filter(e=>e.ist_vergangen)),l(e)}else l([])}catch(a){console.error("Fehler beim Laden der TDA-Turniere:",a),o("Fehler beim Laden der Turniere: "+((null==(n=null==(e=a.response)?void 0:e.data)?void 0:n.error)||a.message)),l([])}finally{d(!1)}},[r,h]);n.useEffect(()=>{r&&u()},[r,u]);const g=e=>e?new Date(e).toLocaleDateString("de-DE",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}):"",x=e=>{if(!e.datum)return"";const n=new Date;n.setHours(0,0,0,0);const a=new Date(e.datum);a.setHours(0,0,0,0);const s=a-n,r=Math.ceil(s/864e5);return 0===r?"Heute!":1===r?"Morgen":r<0?`Vor ${Math.abs(r)} Tagen`:r<=7?`In ${r} Tagen`:r<=30?`In ${Math.ceil(r/7)} Wochen`:`In ${Math.ceil(r/30)} Monaten`};return e.jsxs("div",{className:"tda-turniere-container",children:[e.jsxs("div",{className:"tda-filter-bar",children:[e.jsxs("div",{className:"filter-buttons",children:[e.jsx("button",{className:"filter-btn "+("upcoming"===h?"active":""),onClick:()=>m("upcoming"),children:"Kommende"}),e.jsx("button",{className:"filter-btn "+("all"===h?"active":""),onClick:()=>m("all"),children:"Alle"}),e.jsx("button",{className:"filter-btn "+("past"===h?"active":""),onClick:()=>m("past"),children:"Vergangene"})]}),e.jsx("button",{className:"btn-refresh",onClick:u,disabled:t,title:"Aktualisieren",children:t?"...":""})]}),c&&e.jsx("div",{className:"tda-error-message",children:c}),t?e.jsxs("div",{className:"tda-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Turniere..."})]}):0===i.length?e.jsxs("div",{className:"tda-empty-state",children:[e.jsx("div",{className:"empty-icon",children:e.jsx("span",{role:"img","aria-label":"trophy",children:"üèÜ"})}),e.jsx("h3",{children:"Keine Turniere gefunden"}),e.jsx("p",{children:"upcoming"===h?"Aktuell sind keine kommenden TDA-Turniere geplant.":"past"===h?"Keine vergangenen Turniere vorhanden.":"Es sind keine TDA-Turniere in der Datenbank."})]}):e.jsx("div",{className:"tda-turniere-grid",children:i.map(n=>{const a=(e=>e.ist_vergangen?{text:"Beendet",class:"badge-secondary"}:e.anmeldung_moeglich?{text:"Anmeldung offen",class:"badge-success"}:{text:"Anmeldung geschlossen",class:"badge-warning"})(n);return e.jsxs("div",{className:"tda-turnier-card "+(n.ist_vergangen?"vergangen":""),children:[e.jsxs("div",{className:"turnier-card-header",children:[e.jsxs("div",{className:"turnier-badges",children:[n.disziplin&&e.jsx("span",{className:"badge badge-disziplin",children:n.disziplin}),e.jsx("span",{className:`badge ${a.class}`,children:a.text})]}),e.jsx("div",{className:"turnier-tage",children:x(n)})]}),e.jsx("h3",{className:"turnier-titel",children:n.name}),e.jsxs("div",{className:"turnier-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",role:"img","aria-label":"kalender",children:"üìÖ"}),e.jsx("span",{children:g(n.datum)}),n.datum_ende&&n.datum_ende!==n.datum&&e.jsxs("span",{children:[" - ",g(n.datum_ende)]})]}),n.ort&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",role:"img","aria-label":"ort",children:"üìç"}),e.jsx("span",{children:n.ort})]}),n.adresse&&e.jsxs("div",{className:"info-row info-sub",children:[e.jsx("span",{className:"info-icon"}),e.jsx("span",{className:"text-muted",children:n.adresse})]}),n.anmeldeschluss&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",role:"img","aria-label":"uhr",children:"‚è∞"}),e.jsxs("span",{children:["Anmeldeschluss: ",g(n.anmeldeschluss)]})]}),n.teilnahmegebuehr>0&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",role:"img","aria-label":"geld",children:"üí∞"}),e.jsxs("span",{children:["Startgeb√ºhr: ",parseFloat(n.teilnahmegebuehr).toFixed(2)," EUR"]})]}),n.max_teilnehmer&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",role:"img","aria-label":"personen",children:"üë•"}),e.jsxs("span",{children:["Max. ",n.max_teilnehmer," Teilnehmer"]})]}),n.veranstalter&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",role:"img","aria-label":"organisation",children:"üè¢"}),e.jsx("span",{children:n.veranstalter})]})]}),n.beschreibung&&e.jsx("div",{className:"turnier-beschreibung",children:e.jsx("p",{children:n.beschreibung})}),e.jsx("div",{className:"turnier-card-footer",children:n.anmeldung_moeglich&&!n.ist_vergangen?e.jsxs("button",{className:"btn-anmelden",onClick:()=>(e=>{e.tda_registration_url?window.open(e.tda_registration_url,"_blank","noopener,noreferrer"):alert("Keine Anmelde-URL verf√ºgbar")})(n),children:[e.jsx("span",{role:"img","aria-label":"registrieren",className:"btn-icon",children:"‚úç"}),"Jetzt anmelden"]}):n.ist_vergangen?e.jsx("span",{className:"turnier-vergangen-text",children:"Turnier beendet"}):e.jsx("span",{className:"turnier-geschlossen-text",children:"Anmeldung geschlossen"})})]},n.id)})}),e.jsx("div",{className:"tda-info-box",children:e.jsxs("p",{children:[e.jsx("span",{role:"img","aria-label":"info",children:"‚ÑπÔ∏è"}),"Turniere werden automatisch von TDA International synchronisiert. Die Anmeldung erfolgt √ºber das TDA-Turniersystem."]})})]})},l=()=>{var l,t;const{token:d,isAdmin:c}=a(),{activeDojo:o}=r(),[h,m]=n.useState([]),[u,g]=n.useState([]),[x,v]=n.useState([]),[j,b]=n.useState(!1),[p,N]=n.useState(""),[f,y]=n.useState("aktuelle"),[_,k]=n.useState(!1),[z,A]=n.useState(!1),[C,w]=n.useState(!1),[T,S]=n.useState(null),[$,E]=n.useState(!1),[B,F]=n.useState(null),[D,L]=n.useState([]),[M,P]=n.useState(""),[I,R]=n.useState(""),[H,K]=n.useState(!1),[W,G]=n.useState({}),[O,V]=n.useState({titel:"",beschreibung:"",event_typ:"Sonstiges",datum:"",uhrzeit_beginn:"",uhrzeit_ende:"",ort:"",raum_id:"",max_teilnehmer:"",teilnahmegebuehr:"0.00",anmeldefrist:"",status:"geplant",trainer_ids:[],anforderungen:""}),U=n.useCallback(async()=>{b(!0),N("");try{const e=(null==o?void 0:o.id)?`?dojo_id=${o.id}`:"",n=await s.get(`/events${e}`,{headers:{Authorization:`Bearer ${d}`}});Array.isArray(n.data)?m(n.data):(console.error("Events API returned non-array:",n.data),m([]))}catch(e){console.error("Fehler beim Laden der Events:",e),N("Fehler beim Laden der Events: "+e.message),m([])}finally{b(!1)}},[d,o]),q=n.useCallback(async()=>{try{const e=await s.get("/raeume",{headers:{Authorization:`Bearer ${d}`}}),n=e.data.data||e.data||[];Array.isArray(n)?g(n):(console.error("Raeume API returned non-array:",n),g([]))}catch(e){console.error("Fehler beim Laden der R√§ume:",e),g([])}},[d]),J=n.useCallback(async()=>{try{const e=await s.get("/trainer",{headers:{Authorization:`Bearer ${d}`}});Array.isArray(e.data)?v(e.data):(console.error("Trainer API returned non-array:",e.data),v([]))}catch(e){console.error("Fehler beim Laden der Trainer:",e),v([])}},[d]);n.useEffect(()=>{d&&(U(),q(),J())},[d,U,q,J]);const Z=async e=>{var n,a;if(window.confirm("M√∂chten Sie dieses Event wirklich l√∂schen?")){N("");try{await s.delete(`/events/${e}`,{headers:{Authorization:`Bearer ${d}`}}),U()}catch(r){console.error("Fehler beim L√∂schen des Events:",r),N("Fehler beim L√∂schen: "+((null==(a=null==(n=r.response)?void 0:n.data)?void 0:a.error)||r.message))}}},Q=async e=>{S(e),w(!0);try{const n=await s.get(`/events/${e.event_id}/anmeldungen`,{headers:{Authorization:`Bearer ${d}`}});S({...e,anmeldungen:n.data})}catch(n){console.error("Fehler beim Laden der Anmeldungen:",n)}};n.useEffect(()=>{(async()=>{if(c)try{const e=await s.get("/mitglieder/all",{headers:{Authorization:`Bearer ${d}`}});L(e.data||[])}catch(e){console.error("Fehler beim Laden der Mitglieder:",e)}})()},[c,d]);const X=async e=>{F(e),P(""),R(""),K(!1);try{const n=(await s.get(`/events/${e.event_id}/anmeldungen`,{headers:{Authorization:`Bearer ${d}`}})).data.map(e=>e.mitglied_id);G(a=>({...a,[e.event_id]:n}))}catch(n){console.error("Fehler beim Laden der Anmeldungen:",n)}E(!0)},Y=e=>e?new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}):"",ee=e=>e?e.substring(0,5):"",ne=e=>({Turnier:"badge-danger",Lehrgang:"badge-info","Pr√ºfung":"badge-warning",Seminar:"badge-success",Workshop:"badge-primary",Feier:"badge-special",Sonstiges:"badge-secondary"}[e]||"badge-secondary"),ae=e=>({geplant:"badge-secondary",anmeldung_offen:"badge-success",ausgebucht:"badge-danger",abgeschlossen:"badge-info",abgesagt:"badge-dark"}[e]||"badge-secondary"),se=e=>({geplant:"Geplant",anmeldung_offen:"Anmeldung offen",ausgebucht:"Ausgebucht",abgeschlossen:"Abgeschlossen",abgesagt:"Abgesagt"}[e]||e),re=e=>{if(!e)return"Keine Trainer zugewiesen";const n=e.split(",").map(e=>parseInt(e.trim())).map(e=>{const n=x.find(n=>n.trainer_id===e);return n?`${n.vorname} ${n.nachname}`:null}).filter(Boolean);return n.length>0?n.join(", "):"Keine Trainer zugewiesen"},ie=(()=>{const e=new Date;return e.setHours(0,0,0,0),h.filter(n=>{const a=new Date(n.datum);return a.setHours(0,0,0,0),"aktuelle"===f?a.getTime()===e.getTime():"geplante"===f?a.getTime()>e.getTime():"vergangene"!==f||a.getTime()<e.getTime()})})();return e.jsxs("div",{className:"events-container",children:[e.jsxs("div",{className:"events-layout",children:[e.jsxs("aside",{className:"events-sidebar",children:[e.jsxs("div",{className:"events-sidebar-header",children:[e.jsx("div",{className:"events-icon",children:"üìÖ"}),e.jsx("h2",{className:"events-sidebar-title",children:"Events"})]}),c&&e.jsxs("button",{className:"btn-create-event",onClick:()=>k(!0),children:[e.jsx("span",{children:"‚ûï"}),e.jsx("span",{children:"Neues Event erstellen"})]}),e.jsx("nav",{className:"tabs-vertical",children:[{key:"aktuelle",label:"Aktuelle",icon:"üìÖ"},{key:"geplante",label:"Geplante",icon:"üóìÔ∏è"},{key:"vergangene",label:"Vergangene",icon:"üìú"},{key:"tda-turniere",label:"TDA Turniere",icon:"üèÜ"}].map(n=>e.jsxs("button",{className:"tab-vertical-btn "+(f===n.key?"active":""),onClick:()=>y(n.key),children:[e.jsx("span",{className:"tab-icon",children:n.icon}),e.jsx("span",{className:"tab-label",children:n.label})]},n.key))})]}),e.jsxs("div",{className:"events-content",children:[p&&e.jsxs("div",{className:"error-message",style:{marginBottom:"1rem"},children:["‚ö†Ô∏è ",p]}),e.jsx("div",{className:"glass-card",children:e.jsx("div",{className:"card-body",children:"tda-turniere"===f?e.jsx(i,{}):j?e.jsx("div",{className:"loading-state",children:e.jsx("p",{children:"Lade Events..."})}):0===ie.length?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"üìÖ"}),e.jsxs("h3",{children:["Keine ","aktuelle"===f?"aktuellen":"geplante"===f?"geplanten":"vergangenen"," Events"]}),e.jsx("p",{children:"aktuelle"===f?"Heute finden keine Events statt.":"geplante"===f?"Es sind noch keine Events geplant.":"Es gibt noch keine vergangenen Events."})]}):e.jsx("div",{className:"events-list",children:ie.map(n=>e.jsx("div",{className:"event-card "+("vergangene"===f?"event-card-compact":""),onClick:"vergangene"===f?()=>Q(n):void 0,style:"vergangene"===f?{cursor:"pointer"}:{},children:"vergangene"===f?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"event-card-header",children:[e.jsxs("div",{className:"event-title-section",children:[e.jsx("h3",{children:n.titel}),e.jsxs("div",{className:"event-info-row",style:{marginTop:"0.5rem"},children:[e.jsx("span",{className:"event-icon",children:"üìÖ"}),e.jsx("span",{children:Y(n.datum)})]})]}),c&&e.jsxs("div",{className:"event-actions",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{className:"btn-icon btn-success",onClick:()=>X(n),title:"Teilnehmer hinzuf√ºgen",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1))",border:"1px solid rgba(255, 215, 0, 0.3)",fontSize:"0.85rem"},children:"üë§‚ûï"}),e.jsx("button",{className:"btn-icon",onClick:()=>{S(n),A(!0)},title:"Bearbeiten",children:"‚úèÔ∏è"}),e.jsx("button",{className:"btn-icon btn-danger",onClick:()=>Z(n.event_id),title:"L√∂schen",children:"üóëÔ∏è"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"event-card-header",children:[e.jsxs("div",{className:"event-title-section",children:[e.jsx("h3",{children:n.titel}),e.jsxs("div",{className:"event-badges",children:[e.jsx("span",{className:`badge ${ne(n.event_typ)}`,children:n.event_typ}),e.jsx("span",{className:`badge ${ae(n.status)}`,children:se(n.status)})]})]}),c&&e.jsxs("div",{className:"event-actions",children:[e.jsx("button",{className:"btn-icon",onClick:()=>Q(n),title:"Details anzeigen",children:"üëÅÔ∏è"}),e.jsx("button",{className:"btn-icon btn-success",onClick:()=>X(n),title:"Teilnehmer hinzuf√ºgen",style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.1))",border:"1px solid rgba(255, 215, 0, 0.3)",fontSize:"0.85rem"},children:"üë§‚ûï"}),e.jsx("button",{className:"btn-icon",onClick:()=>{S(n),A(!0)},title:"Bearbeiten",children:"‚úèÔ∏è"}),e.jsx("button",{className:"btn-icon btn-danger",onClick:()=>Z(n.event_id),title:"L√∂schen",children:"üóëÔ∏è"})]})]}),e.jsxs("div",{className:"event-card-body",children:[e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"üìÖ"}),e.jsx("span",{children:Y(n.datum)}),n.uhrzeit_beginn&&e.jsxs("span",{children:[ee(n.uhrzeit_beginn),n.uhrzeit_ende&&` - ${ee(n.uhrzeit_ende)}`]})]}),n.ort&&e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"üìç"}),e.jsx("span",{children:n.ort})]}),n.raum_name&&e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"üö™"}),e.jsxs("span",{children:["Raum: ",n.raum_name]})]}),n.max_teilnehmer&&e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"üë•"}),e.jsxs("span",{children:[n.anzahl_anmeldungen||0," / ",n.max_teilnehmer," Teilnehmer",null!==n.verfuegbare_plaetze&&e.jsxs("span",{className:0===n.verfuegbare_plaetze?"text-danger":"text-success",children:[" ","(",n.verfuegbare_plaetze," Pl√§tze frei)"]})]})]}),n.teilnahmegebuehr>0&&e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"üí∞"}),e.jsxs("span",{children:[parseFloat(n.teilnahmegebuehr).toFixed(2)," ‚Ç¨"]})]}),n.beschreibung&&e.jsx("div",{className:"event-description",children:e.jsx("p",{children:n.beschreibung})}),e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"üë®‚Äçüè´"}),e.jsx("span",{children:re(n.trainer_ids)})]}),n.anmeldefrist&&e.jsxs("div",{className:"event-info-row",children:[e.jsx("span",{className:"event-icon",children:"‚è∞"}),e.jsxs("span",{children:["Anmeldefrist: ",Y(n.anmeldefrist)]})]})]}),!c&&e.jsx("div",{className:"event-card-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>Q(n),children:"Details anzeigen"})})]})},n.event_id))})})})]})]}),_&&c&&e.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Neues Event erstellen"}),e.jsx("button",{className:"modal-close",onClick:()=>k(!1),children:"‚úï"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Titel *"}),e.jsx("input",{type:"text",value:O.titel,onChange:e=>V({...O,titel:e.target.value}),placeholder:"z.B. Sommerturnier 2025"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Event-Typ"}),e.jsxs("select",{value:O.event_typ,onChange:e=>V({...O,event_typ:e.target.value}),children:[e.jsx("option",{value:"Turnier",children:"Turnier"}),e.jsx("option",{value:"Lehrgang",children:"Lehrgang"}),e.jsx("option",{value:"Pr√ºfung",children:"Pr√ºfung"}),e.jsx("option",{value:"Seminar",children:"Seminar"}),e.jsx("option",{value:"Workshop",children:"Workshop"}),e.jsx("option",{value:"Feier",children:"Feier"}),e.jsx("option",{value:"Sonstiges",children:"Sonstiges"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Datum *"}),e.jsx("input",{type:"date",value:O.datum,onChange:e=>V({...O,datum:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Beginn"}),e.jsx("input",{type:"time",value:O.uhrzeit_beginn,onChange:e=>V({...O,uhrzeit_beginn:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ende"}),e.jsx("input",{type:"time",value:O.uhrzeit_ende,onChange:e=>V({...O,uhrzeit_ende:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ort"}),e.jsx("input",{type:"text",value:O.ort,onChange:e=>V({...O,ort:e.target.value}),placeholder:"z.B. Haupthalle"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Raum"}),e.jsxs("select",{value:O.raum_id,onChange:e=>V({...O,raum_id:e.target.value}),children:[e.jsx("option",{value:"",children:"Kein Raum"}),Array.isArray(u)&&u.map(n=>e.jsx("option",{value:n.raum_id||n.id,children:n.name},n.raum_id||n.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Max. Teilnehmer"}),e.jsx("input",{type:"number",value:O.max_teilnehmer,onChange:e=>V({...O,max_teilnehmer:e.target.value}),placeholder:"Leer = unbegrenzt",min:"1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Teilnahmegeb√ºhr (‚Ç¨)"}),e.jsx("input",{type:"number",step:"0.01",value:O.teilnahmegebuehr,onChange:e=>V({...O,teilnahmegebuehr:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Anmeldefrist"}),e.jsx("input",{type:"date",value:O.anmeldefrist,onChange:e=>V({...O,anmeldefrist:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:O.status,onChange:e=>V({...O,status:e.target.value}),children:[e.jsx("option",{value:"geplant",children:"Geplant"}),e.jsx("option",{value:"anmeldung_offen",children:"Anmeldung offen"}),e.jsx("option",{value:"ausgebucht",children:"Ausgebucht"}),e.jsx("option",{value:"abgeschlossen",children:"Abgeschlossen"}),e.jsx("option",{value:"abgesagt",children:"Abgesagt"})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Beschreibung"}),e.jsx("textarea",{value:O.beschreibung,onChange:e=>V({...O,beschreibung:e.target.value}),rows:"3",placeholder:"Beschreiben Sie das Event..."})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Anforderungen / Voraussetzungen"}),e.jsx("textarea",{value:O.anforderungen,onChange:e=>V({...O,anforderungen:e.target.value}),rows:"2",placeholder:"z.B. Mindestgraduierung, Ausr√ºstung, etc."})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Trainer"}),e.jsx("div",{className:"trainer-multiselect",children:x.map(n=>e.jsxs("label",{className:"trainer-checkbox",children:[e.jsx("input",{type:"checkbox",checked:O.trainer_ids.includes(n.trainer_id),onChange:e=>{e.target.checked?V({...O,trainer_ids:[...O.trainer_ids,n.trainer_id]}):V({...O,trainer_ids:O.trainer_ids.filter(e=>e!==n.trainer_id)})}}),n.vorname," ",n.nachname]},n.trainer_id))})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>k(!1),children:"Abbrechen"}),e.jsx("button",{className:"btn btn-primary",onClick:async()=>{var e,n;N("");try{await s.post("/events",{...O,dojo_id:(null==o?void 0:o.id)||1,raum_id:O.raum_id||null,max_teilnehmer:O.max_teilnehmer?parseInt(O.max_teilnehmer):null},{headers:{Authorization:`Bearer ${d}`}}),k(!1),V({titel:"",beschreibung:"",event_typ:"Sonstiges",datum:"",uhrzeit_beginn:"",uhrzeit_ende:"",ort:"",raum_id:"",max_teilnehmer:"",teilnahmegebuehr:"0.00",anmeldefrist:"",status:"geplant",trainer_ids:[],anforderungen:""}),U()}catch(a){console.error("Fehler beim Erstellen des Events:",a),N("Fehler beim Erstellen des Events: "+((null==(n=null==(e=a.response)?void 0:e.data)?void 0:n.error)||a.message))}},children:"Event erstellen"})]})]})}),z&&T&&c&&e.jsx("div",{className:"modal-overlay",onClick:()=>A(!1),children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Event bearbeiten"}),e.jsx("button",{className:"modal-close",onClick:()=>A(!1),children:"‚úï"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Titel *"}),e.jsx("input",{type:"text",value:T.titel,onChange:e=>S({...T,titel:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Event-Typ"}),e.jsxs("select",{value:T.event_typ,onChange:e=>S({...T,event_typ:e.target.value}),children:[e.jsx("option",{value:"Turnier",children:"Turnier"}),e.jsx("option",{value:"Lehrgang",children:"Lehrgang"}),e.jsx("option",{value:"Pr√ºfung",children:"Pr√ºfung"}),e.jsx("option",{value:"Seminar",children:"Seminar"}),e.jsx("option",{value:"Workshop",children:"Workshop"}),e.jsx("option",{value:"Feier",children:"Feier"}),e.jsx("option",{value:"Sonstiges",children:"Sonstiges"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Datum *"}),e.jsx("input",{type:"date",value:null==(l=T.datum)?void 0:l.substring(0,10),onChange:e=>S({...T,datum:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Beginn"}),e.jsx("input",{type:"time",value:T.uhrzeit_beginn||"",onChange:e=>S({...T,uhrzeit_beginn:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ende"}),e.jsx("input",{type:"time",value:T.uhrzeit_ende||"",onChange:e=>S({...T,uhrzeit_ende:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ort"}),e.jsx("input",{type:"text",value:T.ort||"",onChange:e=>S({...T,ort:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Raum"}),e.jsxs("select",{value:T.raum_id||"",onChange:e=>S({...T,raum_id:e.target.value}),children:[e.jsx("option",{value:"",children:"Kein Raum"}),Array.isArray(u)&&u.map(n=>e.jsx("option",{value:n.raum_id||n.id,children:n.name},n.raum_id||n.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Max. Teilnehmer"}),e.jsx("input",{type:"number",value:T.max_teilnehmer||"",onChange:e=>S({...T,max_teilnehmer:e.target.value}),min:"1"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Teilnahmegeb√ºhr (‚Ç¨)"}),e.jsx("input",{type:"number",step:"0.01",value:T.teilnahmegebuehr,onChange:e=>S({...T,teilnahmegebuehr:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Anmeldefrist"}),e.jsx("input",{type:"date",value:(null==(t=T.anmeldefrist)?void 0:t.substring(0,10))||"",onChange:e=>S({...T,anmeldefrist:e.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:T.status,onChange:e=>S({...T,status:e.target.value}),children:[e.jsx("option",{value:"geplant",children:"Geplant"}),e.jsx("option",{value:"anmeldung_offen",children:"Anmeldung offen"}),e.jsx("option",{value:"ausgebucht",children:"Ausgebucht"}),e.jsx("option",{value:"abgeschlossen",children:"Abgeschlossen"}),e.jsx("option",{value:"abgesagt",children:"Abgesagt"})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Beschreibung"}),e.jsx("textarea",{value:T.beschreibung||"",onChange:e=>S({...T,beschreibung:e.target.value}),rows:"3"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Anforderungen / Voraussetzungen"}),e.jsx("textarea",{value:T.anforderungen||"",onChange:e=>S({...T,anforderungen:e.target.value}),rows:"2"})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>A(!1),children:"Abbrechen"}),e.jsx("button",{className:"btn btn-primary",onClick:async()=>{var e,n;N("");try{await s.put(`/events/${T.event_id}`,{...T,raum_id:T.raum_id||null,max_teilnehmer:T.max_teilnehmer?parseInt(T.max_teilnehmer):null},{headers:{Authorization:`Bearer ${d}`}}),A(!1),S(null),U()}catch(a){console.error("Fehler beim Aktualisieren des Events:",a),N("Fehler beim Aktualisieren: "+((null==(n=null==(e=a.response)?void 0:e.data)?void 0:n.error)||a.message))}},children:"Speichern"})]})]})}),C&&T&&e.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:e.jsxs("div",{className:"modal-content modal-large",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:T.titel}),e.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:"‚úï"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"event-details-grid",children:[e.jsxs("div",{className:"details-section",children:[e.jsx("h3",{children:"Event-Informationen"}),e.jsxs("div",{className:"details-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Typ:"}),e.jsx("span",{className:`badge ${ne(T.event_typ)}`,children:T.event_typ})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Status:"}),e.jsx("span",{className:`badge ${ae(T.status)}`,children:se(T.status)})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Datum:"}),e.jsx("span",{children:Y(T.datum)})]}),T.uhrzeit_beginn&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Uhrzeit:"}),e.jsxs("span",{children:[ee(T.uhrzeit_beginn),T.uhrzeit_ende&&` - ${ee(T.uhrzeit_ende)}`]})]}),T.ort&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Ort:"}),e.jsx("span",{children:T.ort})]}),T.raum_name&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Raum:"}),e.jsx("span",{children:T.raum_name})]}),T.max_teilnehmer&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Teilnehmer:"}),e.jsxs("span",{children:[T.anzahl_anmeldungen||0," / ",T.max_teilnehmer]})]}),T.teilnahmegebuehr>0&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Geb√ºhr:"}),e.jsxs("span",{children:[parseFloat(T.teilnahmegebuehr).toFixed(2)," ‚Ç¨"]})]}),T.anmeldefrist&&e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Anmeldefrist:"}),e.jsx("span",{children:Y(T.anmeldefrist)})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Trainer:"}),e.jsx("span",{children:re(T.trainer_ids)})]})]}),T.beschreibung&&e.jsxs("div",{className:"details-description",children:[e.jsx("h4",{children:"Beschreibung"}),e.jsx("p",{children:T.beschreibung})]}),T.anforderungen&&e.jsxs("div",{className:"details-description",children:[e.jsx("h4",{children:"Anforderungen"}),e.jsx("p",{children:T.anforderungen})]})]}),c&&T.anmeldungen&&e.jsxs("div",{className:"details-section",children:[e.jsxs("h3",{children:["Anmeldungen (",T.anmeldungen.length,")"]}),0===T.anmeldungen.length?e.jsx("p",{className:"text-muted",children:"Noch keine Anmeldungen"}):e.jsx("div",{className:"anmeldungen-liste",children:T.anmeldungen.map(n=>e.jsxs("div",{className:"anmeldung-card",children:[e.jsxs("div",{className:"anmeldung-header",children:[e.jsxs("strong",{children:[n.vorname," ",n.nachname]}),e.jsx("span",{className:`badge ${ae(n.status)}`,children:se(n.status)})]}),e.jsxs("div",{className:"anmeldung-info",children:[n.email&&e.jsxs("div",{children:["üìß ",n.email]}),n.telefon&&e.jsxs("div",{children:["üì± ",n.telefon]}),e.jsxs("div",{children:["Angemeldet: ",Y(n.anmeldedatum)]}),n.bezahlt?e.jsx("div",{className:"text-success",children:"‚úÖ Bezahlt"}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("div",{className:"text-warning",children:"‚è≥ Nicht bezahlt"}),c&&e.jsx("button",{className:"btn btn-sm",onClick:()=>(async e=>{var n,a;if(confirm("Anmeldung als bezahlt markieren?"))try{const n=await s.put(`/events/anmeldung/${e}/bezahlt`,{},{headers:{Authorization:`Bearer ${d}`}});if(n.data.success&&(alert(n.data.message||"Anmeldung als bezahlt markiert"),T)){const e=await s.get(`/events/${T.event_id}`,{headers:{Authorization:`Bearer ${d}`}});S(e.data)}}catch(r){console.error("Fehler beim Markieren als bezahlt:",r),alert("Fehler: "+((null==(a=null==(n=r.response)?void 0:n.data)?void 0:a.error)||r.message))}})(n.anmeldung_id),style:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 215, 0, 0.1))",border:"1px solid rgba(255, 215, 0, 0.4)",borderRadius:"6px",cursor:"pointer",color:"rgba(255, 215, 0, 0.9)",fontWeight:"600"},children:"Bezahlt"})]}),n.bemerkung&&e.jsx("div",{className:"anmeldung-bemerkung",children:e.jsx("em",{children:n.bemerkung})})]})]},n.anmeldung_id))})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>w(!1),children:"Schlie√üen"})})]})}),$&&B&&c&&e.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:['Teilnehmer zu "',B.titel,'" hinzuf√ºgen']}),e.jsx("button",{className:"btn-close",onClick:()=>E(!1),children:"‚úï"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mitglied ausw√§hlen *"}),e.jsxs("select",{className:"form-control",value:M,onChange:e=>P(e.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Mitglied w√§hlen --"}),D.filter(e=>!(W[B.event_id]||[]).includes(e.mitglied_id)).map(n=>e.jsxs("option",{value:n.mitglied_id,children:[n.vorname," ",n.nachname," (",n.email,")"]},n.mitglied_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bemerkung (optional)"}),e.jsx("textarea",{className:"form-control",rows:"3",value:I,onChange:e=>R(e.target.value),placeholder:"Optionale Notiz zur Anmeldung..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Zahlungsstatus *"}),e.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"bezahlt",checked:!0===H,onChange:()=>K(!0),style:{cursor:"pointer"}}),e.jsx("span",{children:"Bezahlt"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"bezahlt",checked:!1===H,onChange:()=>K(!1),style:{cursor:"pointer"}}),e.jsx("span",{children:"Offen"})]})]})]}),e.jsx("div",{className:"alert alert-info",style:{marginTop:"1rem",padding:"0.75rem",borderRadius:"8px",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)"},children:"‚ÑπÔ∏è Das Mitglied erh√§lt eine Benachrichtigung √ºber die Anmeldung."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>E(!1),children:"Abbrechen"}),e.jsx("button",{className:"btn btn-primary",onClick:async()=>{var e,n;if(M){N("");try{const e=await s.post(`/events/${B.event_id}/admin-anmelden`,{mitglied_id:parseInt(M),bemerkung:I||void 0,bezahlt:H},{headers:{Authorization:`Bearer ${d}`}});e.data.success&&(alert(e.data.message||"Teilnehmer erfolgreich hinzugef√ºgt"),E(!1),U())}catch(a){console.error("Fehler beim Hinzuf√ºgen des Teilnehmers:",a),alert("Fehler: "+((null==(n=null==(e=a.response)?void 0:e.data)?void 0:n.error)||a.message))}}else alert("Bitte w√§hlen Sie ein Mitglied aus")},disabled:!M,style:{background:M?"linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 215, 0, 0.1))":void 0,border:M?"1px solid rgba(255, 215, 0, 0.4)":void 0},children:"‚úì Hinzuf√ºgen"})]})]})})]})};export{l as default};
