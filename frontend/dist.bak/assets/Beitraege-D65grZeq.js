import{a as e,j as n}from"./query-Caj74EYQ.js";import{g as s,b as a,f as r,c as i}from"./index-BfO9IvyN.js";import{p as t,k as d,o as l,aE as c,a0 as o,z as m,D as h,F as g,C as x,s as u,c as j}from"./icons-DiLw-1i5.js";import{u as b}from"./vendor-router-Co3o87Zc.js";import"./charts-C1Gv3M_c.js";const f=()=>{const f=b(),{updateTrigger:v}=s(),{getDojoFilterParam:p,activeDojo:y,filter:N}=a(),[k,z]=e.useState({totalEinnahmen:0,offeneRechnungen:0,aktiveMitglieder:0,monatlicheEinnahmen:0}),[S,w]=e.useState(!0),[E,B]=e.useState(!1),[R,C]=e.useState(null),[D,M]=e.useState(!1);e.useEffect(()=>{V()},[v,y,N]);const F=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e),L=e=>e?new Date(e).toLocaleDateString("de-DE"):"",V=async()=>{try{w(!0);const e=p(),n=e?"?":"",[s,a]=await Promise.all([r(`${i.apiBaseUrl}/mitglieder${n}${e}`),r(`${i.apiBaseUrl}/vertraege${n}${e}`)]);if(!s.ok||!a.ok)throw new Error("Fehler beim Laden der Daten");const t=await s.json(),d=await a.json(),l=Array.isArray(t)?t:t.data||[],c=Array.isArray(d)?d:d.data||[],o=l.length,m=c.filter(e=>"aktiv"===e.status).reduce((e,n)=>e+(parseFloat(n.monatsbeitrag)||0),0);z({totalEinnahmen:12*m,offeneRechnungen:0,aktiveMitglieder:o,monatlicheEinnahmen:m}),w(!1)}catch(e){console.error("Fehler beim Laden der Beitrags-Statistiken:",e),z({totalEinnahmen:0,offeneRechnungen:0,aktiveMitglieder:0,monatlicheEinnahmen:0}),w(!1)}};return S?n.jsx("div",{className:"beitraege-container",children:n.jsxs("div",{className:"loading-state",children:[n.jsx("div",{className:"loading-spinner"}),n.jsx("p",{children:"Lade Beitragsdaten..."})]})}):n.jsxs("div",{className:"beitraege-container",children:[n.jsxs("div",{className:"beitraege-header",children:[n.jsx("h1",{children:"ðŸ’° Beitrags-Verwaltung"}),n.jsx("p",{children:"Verwalte alle MitgliedsbeitrÃ¤ge, Rechnungen und Zahlungen zentral"})]}),n.jsxs("div",{className:"stats-grid",children:[n.jsxs("div",{className:"stat-card positive",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(t,{size:32})}),n.jsxs("div",{className:"stat-info",children:[n.jsx("h3",{children:"Gesamteinnahmen"}),n.jsxs("p",{className:"stat-value",children:["â‚¬",k.totalEinnahmen.toLocaleString("de-DE",{minimumFractionDigits:2})]}),n.jsx("span",{className:"stat-trend",children:"+12% vs. Vormonat"})]})]}),n.jsxs("div",{className:"stat-card warning",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(d,{size:32})}),n.jsxs("div",{className:"stat-info",children:[n.jsx("h3",{children:"Offene Rechnungen"}),n.jsxs("p",{className:"stat-value",children:["â‚¬",k.offeneRechnungen.toLocaleString("de-DE",{minimumFractionDigits:2})]}),n.jsx("span",{className:"stat-trend",children:"7 Rechnungen offen"})]})]}),n.jsxs("div",{className:"stat-card info",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(l,{size:32})}),n.jsxs("div",{className:"stat-info",children:[n.jsx("h3",{children:"Aktive Mitglieder"}),n.jsx("p",{className:"stat-value",children:k.aktiveMitglieder}),n.jsx("span",{className:"stat-trend",children:"Zahlende Mitglieder"})]})]}),n.jsxs("div",{className:"stat-card success",children:[n.jsx("div",{className:"stat-icon",children:n.jsx(c,{size:32})}),n.jsxs("div",{className:"stat-info",children:[n.jsx("h3",{children:"Monatliche Einnahmen"}),n.jsxs("p",{className:"stat-value",children:["â‚¬",k.monatlicheEinnahmen.toLocaleString("de-DE",{minimumFractionDigits:2})]}),n.jsx("span",{className:"stat-trend",children:"Durchschnitt"})]})]})]}),n.jsxs("div",{className:"management-grid",children:[n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(o,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Lastschriften"}),n.jsx("p",{children:"SEPA-Lastschriftlauf generieren, Mandate verwalten und an Bank Ã¼bermitteln"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>f("/dashboard/lastschriftlauf"),children:"Lastschriftlauf"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>f("/dashboard/sepa-mandate"),children:"SEPA-Mandate"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(m,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Rechnungen erstellen"}),n.jsx("p",{children:"Neue Rechnungen fÃ¼r MitgliedsbeitrÃ¤ge, Kurse oder Sonderleistungen erstellen"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>f("/dashboard/rechnungen"),children:"Rechnungen verwalten"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Vorlagenverwaltung wird implementiert"),children:"Vorlagen verwalten"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(o,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Zahlungen verwalten"}),n.jsx("p",{children:"Eingehende Zahlungen erfassen, Zahlungsarten verwalten und SEPA-Lastschriften"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>alert("Zahlungserfassung wird implementiert"),children:"Zahlung erfassen"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("SEPA-Verwaltung wird implementiert"),children:"SEPA-Verwaltung"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(d,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Mahnwesen"}),n.jsx("p",{children:"Offene Rechnungen Ã¼berwachen, Mahnungen versenden und Zahlungserinnerungen"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>f("/dashboard/mahnwesen"),children:"Offene Posten"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>f("/dashboard/mahnstufen-einstellungen"),children:"Mahnstufen"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(h,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Tarife & Preise"}),n.jsx("p",{children:"Mitgliedstarife definieren, Sonderpreise verwalten und Rabatte konfigurieren"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>f("/dashboard/tarife"),children:"Tarife bearbeiten"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>f("/dashboard/rabattsystem"),children:"Rabatt-System"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(g,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Berichte & Export"}),n.jsx("p",{children:"Finanzberichte erstellen, Umsatzstatistiken anzeigen und Daten exportieren"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-info",onClick:async()=>{try{M(!0);const e=p(),n=e?"&":"?",s=await r(`${i.apiBaseUrl}/monatsreport${e?`?${e}`:""}${n}${e?"":"?"}`),a=await s.json();a.success?(C(a),B(!0)):alert("Fehler beim Laden des Monatsreports: "+(a.error||"Unbekannter Fehler"))}catch(e){console.error("Fehler beim Laden des Monatsreports:",e),alert("Fehler beim Laden des Monatsreports")}finally{M(!1)}},disabled:D,children:D?"LÃ¤dt...":"Monatsreport"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Datenexport wird implementiert"),children:"Daten exportieren"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(x,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Zahlungszyklen"}),n.jsx("p",{children:"Wiederkehrende Rechnungen automatisieren und Zahlungsintervalle verwalten"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-primary",onClick:()=>f("/dashboard/zahlungszyklen"),children:"Zyklen verwalten"}),n.jsx("button",{className:"btn btn-secondary",onClick:()=>alert("Zahlungsplan wird implementiert"),children:"Zahlungsplan"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(u,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Suche & Filter"}),n.jsx("p",{children:"Zahlungen durchsuchen, nach Kriterien filtern und Transaktionen analysieren"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-info",children:"Erweiterte Suche"}),n.jsx("button",{className:"btn btn-secondary",children:"Transaktionslog"})]})]})]}),n.jsxs("div",{className:"standard-card",children:[n.jsx("div",{className:"card-icon",children:n.jsx(j,{size:48})}),n.jsxs("div",{className:"card-content",children:[n.jsx("h3",{children:"Einstellungen"}),n.jsx("p",{children:"Zahlungsmethoden konfigurieren, Steuereinstellungen und Rechnungsvorlagen"}),n.jsxs("div",{className:"card-actions",children:[n.jsx("button",{className:"btn btn-secondary",children:"Konfiguration"}),n.jsx("button",{className:"btn btn-secondary",children:"Vorlagen"})]})]})]})]}),E&&R&&n.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(5px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:n.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{background:"rgba(26, 26, 46, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"20px",padding:"2rem",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[n.jsxs("h2",{style:{color:"#ffd700",fontSize:"1.75rem",margin:0,textShadow:"0 2px 8px rgba(0, 0, 0, 0.9), 0 0 4px rgba(255, 215, 0, 0.6)"},children:["Monatsreport ",new Date(R.jahr,R.monat-1).toLocaleDateString("de-DE",{month:"long",year:"numeric"})]}),n.jsx("button",{onClick:()=>B(!1),style:{background:"transparent",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#fff",borderRadius:"8px",padding:"0.5rem 1rem",cursor:"pointer",fontSize:"1rem"},children:"âœ•"})]}),n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsx("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:"UmsÃ¤tze"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Gesamtumsatz"}),n.jsx("div",{style:{color:"#ffd700",fontSize:"1.5rem",fontWeight:"bold"},children:F(R.umsaetze.gesamt)})]}),n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Umsatz Verkauf"}),n.jsx("div",{style:{color:"#ffd700",fontSize:"1.5rem",fontWeight:"bold"},children:F(R.umsaetze.verkauf.brutto)}),n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.75rem",marginTop:"0.25rem"},children:[R.umsaetze.verkauf.anzahl," VerkÃ¤ufe"]})]}),n.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginBottom:"0.5rem"},children:"Umsatz BeitrÃ¤ge"}),n.jsx("div",{style:{color:"#ffd700",fontSize:"1.5rem",fontWeight:"bold"},children:F(R.umsaetze.beitraege.gesamt)}),n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.75rem",marginTop:"0.25rem"},children:[R.umsaetze.beitraege.anzahl," Rechnungen"]})]})]})]}),n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsxs("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:["Neue VertrÃ¤ge (",R.neueVertraege.anzahl,")"]}),R.neueVertraege.liste.length>0?n.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",maxHeight:"200px",overflow:"auto"},children:R.neueVertraege.liste.map(e=>n.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs("div",{children:[n.jsx("div",{style:{color:"#fff",fontWeight:"600"},children:e.mitglied_name}),n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:[e.vertragsnummer," â€¢ ",L(e.vertragsbeginn)]})]}),n.jsx("div",{style:{color:"#ffd700",fontWeight:"bold"},children:F(e.monatsbeitrag)})]},e.vertrag_id))}):n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontStyle:"italic"},children:"Keine neuen VertrÃ¤ge"})]}),n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsxs("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:["KÃ¼ndigungen (",R.kuendigungen.anzahl,")"]}),R.kuendigungen.liste.length>0?n.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",maxHeight:"200px",overflow:"auto"},children:R.kuendigungen.liste.map(e=>n.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("div",{style:{color:"#fff",fontWeight:"600"},children:e.mitglied_name}),n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:[e.vertragsnummer," â€¢ KÃ¼ndigungsdatum: ",L(e.kuendigungsdatum)]}),e.kuendigungsgrund&&n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Grund: ",e.kuendigungsgrund]})]},e.vertrag_id))}):n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontStyle:"italic"},children:"Keine KÃ¼ndigungen"})]}),n.jsxs("div",{style:{marginBottom:"2rem"},children:[n.jsxs("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.25rem"},children:["Pausen (",R.pausen.anzahl,")"]}),R.pausen.liste.length>0?n.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",maxHeight:"200px",overflow:"auto"},children:R.pausen.liste.map(e=>n.jsxs("div",{style:{padding:"0.75rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[n.jsx("div",{style:{color:"#fff",fontWeight:"600"},children:e.mitglied_name}),n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:[e.vertragsnummer," â€¢ Von: ",L(e.ruhepause_von)," bis: ",L(e.ruhepause_bis)]}),e.ruhepause_dauer_monate&&n.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",marginTop:"0.25rem"},children:["Dauer: ",e.ruhepause_dauer_monate," Monate"]})]},e.vertrag_id))}):n.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",fontStyle:"italic"},children:"Keine Pausen"})]})]})})]})};export{f as default};
