import{a as e,j as s}from"./query-Caj74EYQ.js";import{b as a,a as i}from"./index-BfO9IvyN.js";/* empty css                     */import{aN as t,b8 as n,K as r,U as l,D as c,P as d,b as h,a as o,a2 as m,t as u,C as x,a0 as j,w as v,aV as p,c as g,X as b,u as f}from"./icons-DiLw-1i5.js";import"./vendor-router-Co3o87Zc.js";import"./charts-C1Gv3M_c.js";function N(e){if(!e)return"";return{monthly:"Monatlich",monatlich:"Monatlich",quarterly:"VierteljÃ¤hrlich",vierteljaehrlich:"VierteljÃ¤hrlich","semi-annually":"HalbjÃ¤hrlich",halbjaehrlich:"HalbjÃ¤hrlich",annually:"JÃ¤hrlich",jaehrlich:"JÃ¤hrlich",yearly:"JÃ¤hrlich"}[e.toLowerCase()]||e}const y=()=>{var y,_;const{activeDojo:z}=a(),[k,C]=e.useState([]),[S,A]=e.useState([]),[w,T]=e.useState([]),[B,L]=e.useState([]),[P,R]=e.useState(!0),[F,E]=e.useState(null),[M,W]=e.useState(null),[$,D]=e.useState(!1),[K,I]=e.useState(!1),[U,V]=e.useState(!1),[Y,Z]=e.useState(!1),[H,J]=e.useState(!1),[q,O]=e.useState(!1),[G,Q]=e.useState(!0),[X,ee]=e.useState(!1),se=()=>z&&"super-admin"!==z?z.id:null,[ae,ie]=e.useState({name:"",duration_months:"",mindestlaufzeit_monate:"",kuendigungsfrist_monate:"",price_cents:"",aufnahmegebuehr_cents:4999}),[te,ne]=e.useState({name:"",price_cents:"",aufnahmegebuehr_cents:4999,currency:"EUR",duration_months:"",billing_cycle:"monthly",payment_method:"bank_transfer",active:!0}),[re,le]=e.useState({name:"",beschreibung:"",rabatt_prozent:"",gueltig_von:"",gueltig_bis:"",max_nutzungen:"",aktiv:!0});e.useEffect(()=>{ce()},[z]);const ce=async()=>{try{R(!0);const e=se(),s=e?`?dojo_id=${e}`:"";console.log("ðŸ“Š TarifePreise: Lade Tarife fÃ¼r Dojo:",e,"activeDojo:",z);const[a,t,n,r]=await Promise.all([i.get(`/tarife${s}`),i.get(`/tarife/rabatte${s}`),i.get(`/zahlungszyklen${s}`).catch(()=>({data:{data:[]}})),i.get(`/laufzeiten${s}`).catch(()=>({data:{data:[]}}))]),l=a.data,c=t.data,d=n.data,h=r.data;if(l.success&&c.success){const e=l.data.map(e=>({id:e.id,name:e.name,price_euros:(e.price_cents/100).toFixed(2),price_cents:e.price_cents,aufnahmegebuehr_euros:((e.aufnahmegebuehr_cents||4999)/100).toFixed(2),aufnahmegebuehr_cents:e.aufnahmegebuehr_cents||4999,currency:e.currency||"EUR",duration_months:e.duration_months,billing_cycle:e.billing_cycle,payment_method:e.payment_method,active:1===e.active,ist_archiviert:1===e.ist_archiviert||!0===e.ist_archiviert,isChildRate:(e.name.toLowerCase().includes("kinder")||e.name.toLowerCase().includes("kids")||e.name.toLowerCase().includes("jugendliche"))&&!e.name.toLowerCase().includes("studenten")&&!e.name.toLowerCase().includes("schÃ¼ler"),isStudentRate:e.name.toLowerCase().includes("studenten")||e.name.toLowerCase().includes("schÃ¼ler")||e.name.toLowerCase().includes("kids"),isAdultRate:e.name.toLowerCase().includes("erwachsene")||e.name.toLowerCase().includes("18+")})),s=c.data.map(e=>({id:e.rabatt_id,name:e.name,beschreibung:e.beschreibung,rabatt_prozent:parseFloat(e.rabatt_prozent),gueltig_von:e.gueltig_von,gueltig_bis:e.gueltig_bis,max_nutzungen:e.max_nutzungen,aktiv:1===e.aktiv,genutzt:e.genutzt||0}));C(e),A(s),console.log("Zahlungszyklen geladen:",d.data||[]),T(d.data||[]),L(h.data||[])}else console.error("API Error:",l.error||c.error)}catch(e){console.error("Fehler beim Laden der Tarife und Rabatte:",e)}finally{R(!1)}},de=async e=>{try{const s=se(),a=s?`?dojo_id=${s}`:"";let t;t=e.id?await i.put(`/tarife/${e.id}${a}`,e):await i.post(`/tarife${a}`,e);const n=t.data;n.success?(await ce(),D(!1),E(null),ne({name:"",price_cents:"",aufnahmegebuehr_cents:4999,currency:"EUR",duration_months:"",billing_cycle:"monthly",payment_method:"bank_transfer",active:!0})):alert("Fehler beim Speichern: "+n.error)}catch(s){console.error("Fehler beim Speichern des Tarifs:",s),alert("Fehler beim Speichern des Tarifs")}},he=async e=>{if(window.confirm("Sind Sie sicher, dass Sie diesen Tarif lÃ¶schen mÃ¶chten?"))try{const s=se(),a=s?`?dojo_id=${s}`:"",t=(await i.delete(`/tarife/${e}${a}`)).data;t.success?await ce():alert("Fehler beim LÃ¶schen: "+t.error)}catch(s){console.error("Fehler beim LÃ¶schen des Tarifs:",s),alert("Fehler beim LÃ¶schen des Tarifs")}},oe=async(e,s)=>{const a=!s,t=a?'Diesen Tarif als "Alter Tarif" markieren? Er wird dann nicht mehr fÃ¼r neue Mitglieder verfÃ¼gbar sein.':"Diesen Tarif reaktivieren? Er wird dann wieder fÃ¼r neue Mitglieder verfÃ¼gbar sein.";if(window.confirm(t))try{const s=se(),t=s?`?dojo_id=${s}`:"",n=await i.patch(`/tarife/${e}/archivieren${t}`,{ist_archiviert:a});n.data.success?await ce():alert("Fehler beim Archivieren: "+n.data.error)}catch(n){console.error("Fehler beim Archivieren des Tarifs:",n),alert("Fehler beim Archivieren des Tarifs")}};return P?s.jsx("div",{className:"tarife-container",children:s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Lade Tarif-Daten..."})]})}):s.jsxs("div",{className:"tarife-container",children:[s.jsxs("div",{className:"tarife-header",children:[s.jsx("h1",{children:"ðŸ’° Tarife & Preise"}),s.jsx("p",{children:"Verwalte alle Mitgliedstarife, Zahlungszyklen und Preisstrukturen"})]}),s.jsxs("div",{className:"stats-grid",children:[s.jsxs("div",{className:"stat-card primary",children:[s.jsx("div",{className:"stat-icon",children:s.jsx(t,{size:32})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:"Aktive Tarife"}),s.jsx("p",{className:"stat-value",children:k.filter(e=>e.active).length}),s.jsxs("span",{className:"stat-trend",children:["von ",k.length," Gesamt"]})]})]}),s.jsxs("div",{className:"stat-card success",children:[s.jsx("div",{className:"stat-icon",children:s.jsx(n,{size:32})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:"Kinder-Tarife"}),s.jsx("p",{className:"stat-value",children:k.filter(e=>e.isChildRate&&!e.ist_archiviert).length}),s.jsx("span",{className:"stat-trend",children:"verfÃ¼gbar"})]})]}),s.jsxs("div",{className:"stat-card info",children:[s.jsx("div",{className:"stat-icon",children:s.jsx(r,{size:32})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:"Studenten-Tarife"}),s.jsx("p",{className:"stat-value",children:k.filter(e=>e.isStudentRate&&!e.ist_archiviert).length}),s.jsx("span",{className:"stat-trend",children:"verfÃ¼gbar"})]})]}),s.jsxs("div",{className:"stat-card warning",children:[s.jsx("div",{className:"stat-icon",children:s.jsx(l,{size:32})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:"Erwachsenen-Tarife"}),s.jsx("p",{className:"stat-value",children:k.filter(e=>e.isAdultRate&&!e.ist_archiviert).length}),s.jsx("span",{className:"stat-trend",children:"verfÃ¼gbar"})]})]}),s.jsxs("div",{className:"stat-card purple",children:[s.jsx("div",{className:"stat-icon",children:s.jsx(c,{size:32})}),s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:"Durchschnittspreis"}),s.jsxs("p",{className:"stat-value",children:["â‚¬",k.length>0?(k.reduce((e,s)=>e+parseFloat(s.price_euros),0)/k.length).toFixed(2):"0.00"]}),s.jsx("span",{className:"stat-trend",children:"monatlich"})]})]})]}),s.jsxs("div",{className:"section",children:[s.jsxs("div",{className:"section-header collapsible",onClick:()=>V(!U),children:[s.jsxs("h2",{children:[s.jsx(n,{size:24})," Kinder & Jugendliche (6-17 Jahre)",s.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.isChildRate&&!e.ist_archiviert).length,")"]})]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),D(!0)},children:[s.jsx(d,{size:20}),"Neuer Tarif"]}),U?s.jsx(h,{size:24}):s.jsx(o,{size:24})]})]}),!U&&s.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.isChildRate&&!e.ist_archiviert).map(e=>s.jsxs("div",{className:"tarif-card",children:[s.jsxs("div",{className:"tarif-header",children:[s.jsxs("div",{className:"tarif-title",children:[s.jsx("h3",{children:e.name}),s.jsx("span",{className:"status-badge "+(e.active?"active":"inactive"),children:e.active?"Aktiv":"Inaktiv"})]}),s.jsxs("div",{className:"tarif-actions",children:[s.jsx("button",{className:"action-btn edit",onClick:()=>E(e),title:"Bearbeiten",children:s.jsx(m,{size:16})}),s.jsx("button",{className:"action-btn delete",onClick:()=>he(e.id),title:"LÃ¶schen",children:s.jsx(u,{size:16})}),s.jsx("button",{className:"action-btn archive",onClick:()=>oe(e.id,e.ist_archiviert),title:e.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:e.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:e.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),s.jsxs("div",{className:"tarif-price",children:[s.jsx("span",{className:"currency",children:"â‚¬"}),e.price_euros,s.jsx("span",{className:"period",children:"/Monat"})]}),s.jsxs("div",{className:"tarif-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),s.jsxs("div",{className:"value",children:["â‚¬",e.aufnahmegebuehr_euros]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(x,{size:14})," Laufzeit"]}),s.jsxs("div",{className:"value",children:[e.duration_months," Monate"]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(j,{size:14})," Zahlungsmethode"]}),s.jsx("div",{className:"value",children:"SEPA"===e.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===e.payment_method?"BankÃ¼berweisung":"CARD"===e.payment_method?"Kreditkarte":"PAYPAL"===e.payment_method?"PayPal":e.payment_method})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(v,{size:14})," Abrechnung"]}),s.jsx("div",{className:"value",children:N(e.billing_cycle)})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(p,{size:14})," WÃ¤hrung"]}),s.jsx("div",{className:"value",children:e.currency})]})]})]},e.id))})]}),s.jsxs("div",{className:"section",children:[s.jsxs("div",{className:"section-header collapsible",onClick:()=>Z(!Y),children:[s.jsxs("h2",{children:[s.jsx(r,{size:24})," Studenten & SchÃ¼ler Tarife (18+)",s.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.isStudentRate&&!e.ist_archiviert).length,")"]})]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),D(!0)},children:[s.jsx(d,{size:20}),"Neuer Tarif"]}),Y?s.jsx(h,{size:24}):s.jsx(o,{size:24})]})]}),!Y&&s.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.isStudentRate&&!e.ist_archiviert).map(e=>s.jsxs("div",{className:"tarif-card",children:[s.jsxs("div",{className:"tarif-header",children:[s.jsxs("div",{className:"tarif-title",children:[s.jsx("h3",{children:e.name}),s.jsx("span",{className:"status-badge "+(e.active?"active":"inactive"),children:e.active?"Aktiv":"Inaktiv"})]}),s.jsxs("div",{className:"tarif-actions",children:[s.jsx("button",{className:"action-btn edit",onClick:()=>E(e),title:"Bearbeiten",children:s.jsx(m,{size:16})}),s.jsx("button",{className:"action-btn delete",onClick:()=>he(e.id),title:"LÃ¶schen",children:s.jsx(u,{size:16})}),s.jsx("button",{className:"action-btn archive",onClick:()=>oe(e.id,e.ist_archiviert),title:e.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:e.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:e.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),s.jsxs("div",{className:"tarif-price",children:[s.jsx("span",{className:"currency",children:"â‚¬"}),e.price_euros,s.jsx("span",{className:"period",children:"/Monat"})]}),s.jsxs("div",{className:"tarif-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),s.jsxs("div",{className:"value",children:["â‚¬",e.aufnahmegebuehr_euros]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(x,{size:14})," Laufzeit"]}),s.jsxs("div",{className:"value",children:[e.duration_months," Monate"]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(j,{size:14})," Zahlungsmethode"]}),s.jsx("div",{className:"value",children:"SEPA"===e.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===e.payment_method?"BankÃ¼berweisung":"CARD"===e.payment_method?"Kreditkarte":"PAYPAL"===e.payment_method?"PayPal":e.payment_method})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(v,{size:14})," Abrechnung"]}),s.jsx("div",{className:"value",children:N(e.billing_cycle)})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(p,{size:14})," WÃ¤hrung"]}),s.jsx("div",{className:"value",children:e.currency})]})]})]},e.id))})]}),s.jsxs("div",{className:"section",children:[s.jsxs("div",{className:"section-header collapsible",onClick:()=>J(!H),children:[s.jsxs("h2",{children:[s.jsx(l,{size:24})," Erwachsenen-Tarife (18+)",s.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.isAdultRate&&!e.ist_archiviert).length,")"]})]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),D(!0)},children:[s.jsx(d,{size:20}),"Neuer Tarif"]}),H?s.jsx(h,{size:24}):s.jsx(o,{size:24})]})]}),!H&&s.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.isAdultRate&&!e.ist_archiviert).map(e=>s.jsxs("div",{className:"tarif-card",children:[s.jsxs("div",{className:"tarif-header",children:[s.jsxs("div",{className:"tarif-title",children:[s.jsx("h3",{children:e.name}),s.jsx("span",{className:"status-badge "+(e.active?"active":"inactive"),children:e.active?"Aktiv":"Inaktiv"})]}),s.jsxs("div",{className:"tarif-actions",children:[s.jsx("button",{className:"action-btn edit",onClick:()=>E(e),title:"Bearbeiten",children:s.jsx(m,{size:16})}),s.jsx("button",{className:"action-btn delete",onClick:()=>he(e.id),title:"LÃ¶schen",children:s.jsx(u,{size:16})}),s.jsx("button",{className:"action-btn archive",onClick:()=>oe(e.id,e.ist_archiviert),title:e.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:e.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:e.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),s.jsxs("div",{className:"tarif-price",children:[s.jsx("span",{className:"currency",children:"â‚¬"}),e.price_euros,s.jsx("span",{className:"period",children:"/Monat"})]}),s.jsxs("div",{className:"tarif-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),s.jsxs("div",{className:"value",children:["â‚¬",e.aufnahmegebuehr_euros]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(x,{size:14})," Laufzeit"]}),s.jsxs("div",{className:"value",children:[e.duration_months," Monate"]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(j,{size:14})," Zahlungsmethode"]}),s.jsx("div",{className:"value",children:"SEPA"===e.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===e.payment_method?"BankÃ¼berweisung":"CARD"===e.payment_method?"Kreditkarte":"PAYPAL"===e.payment_method?"PayPal":e.payment_method})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(v,{size:14})," Abrechnung"]}),s.jsx("div",{className:"value",children:N(e.billing_cycle)})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(p,{size:14})," WÃ¤hrung"]}),s.jsx("div",{className:"value",children:e.currency})]})]})]},e.id))})]}),s.jsxs("div",{className:"section",children:[s.jsxs("div",{className:"section-header collapsible",onClick:()=>Q(!G),style:{background:"rgba(107, 114, 128, 0.1)",borderLeft:"4px solid #6b7280"},children:[s.jsxs("h2",{style:{color:"#6b7280"},children:[s.jsx(t,{size:24})," Alte Tarife (Archiviert)",s.jsxs("span",{className:"tarif-count",children:["(",k.filter(e=>e.ist_archiviert).length,")"]})]}),s.jsx("div",{className:"header-actions",children:G?s.jsx(h,{size:24}):s.jsx(o,{size:24})})]}),!G&&s.jsx(s.Fragment,{children:0===k.filter(e=>e.ist_archiviert).length?s.jsx("div",{className:"info-box",style:{background:"rgba(107, 114, 128, 0.05)"},children:s.jsx("p",{style:{color:"#6b7280"},children:"Keine archivierten Tarife vorhanden. Tarife kÃ¶nnen Ã¼ber den ðŸ“¦-Button archiviert werden."})}):s.jsx("div",{className:"tarife-grid",children:k.filter(e=>e.ist_archiviert).map(e=>s.jsxs("div",{className:"tarif-card",style:{opacity:.7,border:"2px solid #6b7280"},children:[s.jsxs("div",{className:"tarif-header",children:[s.jsxs("div",{className:"tarif-title",children:[s.jsx("h3",{children:e.name}),s.jsx("span",{className:"status-badge",style:{background:"#6b7280"},children:"Archiviert"})]}),s.jsxs("div",{className:"tarif-actions",children:[s.jsx("button",{className:"action-btn edit",onClick:()=>E(e),title:"Bearbeiten",children:s.jsx(m,{size:16})}),s.jsx("button",{className:"action-btn delete",onClick:()=>he(e.id),title:"LÃ¶schen",children:s.jsx(u,{size:16})}),s.jsx("button",{className:"action-btn archive",onClick:()=>oe(e.id,e.ist_archiviert),title:e.ist_archiviert?"Reaktivieren":"Als alter Tarif markieren",style:{backgroundColor:e.ist_archiviert?"#10b981":"#f59e0b",color:"white"},children:e.ist_archiviert?"â†º":"ðŸ“¦"})]})]}),s.jsxs("div",{className:"tarif-price",children:[s.jsx("span",{className:"currency",children:"â‚¬"}),e.price_euros,s.jsx("span",{className:"period",children:"/Monat"})]}),s.jsxs("div",{className:"tarif-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(c,{size:14})," AufnahmegebÃ¼hr"]}),s.jsxs("div",{className:"value",children:["â‚¬",e.aufnahmegebuehr_euros]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(x,{size:14})," Laufzeit"]}),s.jsxs("div",{className:"value",children:[e.duration_months," Monate"]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(j,{size:14})," Zahlungsmethode"]}),s.jsx("div",{className:"value",children:"SEPA"===e.payment_method?"SEPA-Lastschrift":"BANK_TRANSFER"===e.payment_method?"BankÃ¼berweisung":"CARD"===e.payment_method?"Kreditkarte":"PAYPAL"===e.payment_method?"PayPal":e.payment_method})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(v,{size:14})," Abrechnung"]}),s.jsx("div",{className:"value",children:N(e.billing_cycle)})]}),s.jsxs("div",{className:"detail-item",children:[s.jsxs("span",{className:"label",children:[s.jsx(p,{size:14})," WÃ¤hrung"]}),s.jsx("div",{className:"value",children:e.currency})]})]})]},e.id))})})]}),s.jsxs("div",{className:"tarif-section",children:[s.jsxs("div",{className:"section-header collapsible",onClick:()=>O(!q),children:[s.jsxs("h2",{children:[s.jsx(g,{size:24})," Individuelle VertrÃ¤ge",s.jsx("span",{className:"tarif-count",children:"(Admin Only)"})]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("button",{className:"btn btn-primary",onClick:e=>{e.stopPropagation(),ee(!0)},children:[s.jsx(d,{size:20}),"Neuer individueller Vertrag"]}),q?s.jsx(h,{size:24}):s.jsx(o,{size:24})]})]}),!q&&s.jsx("div",{className:"info-box",children:s.jsx("p",{children:"Hier kÃ¶nnen individuelle VertrÃ¤ge mit benutzerdefinierten Konditionen erstellt werden. Diese Funktion ist nur fÃ¼r Administratoren verfÃ¼gbar."})})]}),X&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Neuer individueller Vertrag"}),s.jsx("button",{className:"close-btn",onClick:()=>ee(!1),children:s.jsx(b,{size:20})})]}),s.jsxs("div",{className:"form-grid",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Vertragsname *"}),s.jsx("input",{type:"text",value:ae.name,onChange:e=>ie({...ae,name:e.target.value}),placeholder:"z.B. Individualtarif Max Mustermann"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Laufzeit (Monate) *"}),s.jsx("input",{type:"number",min:"1",value:ae.duration_months,onChange:e=>ie({...ae,duration_months:e.target.value}),placeholder:"z.B. 12"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Vertragsdauer/Mindestlaufzeit (Monate) *"}),s.jsx("input",{type:"number",min:"1",value:ae.mindestlaufzeit_monate,onChange:e=>ie({...ae,mindestlaufzeit_monate:e.target.value}),placeholder:"z.B. 12"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"KÃ¼ndigungsfrist (Monate) *"}),s.jsx("input",{type:"number",min:"0",value:ae.kuendigungsfrist_monate,onChange:e=>ie({...ae,kuendigungsfrist_monate:e.target.value}),placeholder:"z.B. 3"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Monatlicher Beitrag (â‚¬) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:ae.price_cents?(ae.price_cents/100).toFixed(2):"",onChange:e=>ie({...ae,price_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"z.B. 49.90"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"AufnahmegebÃ¼hr (â‚¬)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:ae.aufnahmegebuehr_cents?(ae.aufnahmegebuehr_cents/100).toFixed(2):"",onChange:e=>ie({...ae,aufnahmegebuehr_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"49.99"})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>ee(!1),children:"Abbrechen"}),s.jsxs("button",{className:"btn btn-primary",onClick:async()=>{var e,s;try{const e=se(),s=e?`?dojo_id=${e}`:"";await i.post(`/tarife${s}`,{name:ae.name,duration_months:parseInt(ae.duration_months),mindestlaufzeit_monate:parseInt(ae.mindestlaufzeit_monate),kuendigungsfrist_monate:parseInt(ae.kuendigungsfrist_monate),price_cents:ae.price_cents,aufnahmegebuehr_cents:ae.aufnahmegebuehr_cents,currency:"EUR",billing_cycle:"MONTHLY",payment_method:"SEPA",active:!0}),ee(!1),ie({name:"",duration_months:"",mindestlaufzeit_monate:"",kuendigungsfrist_monate:"",price_cents:"",aufnahmegebuehr_cents:4999}),ce(),alert("Individueller Vertrag erfolgreich erstellt!")}catch(a){console.error("Fehler beim Erstellen:",a),alert("Fehler beim Erstellen: "+((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.error)||a.message))}},children:[s.jsx(f,{size:20}),"Vertrag erstellen"]})]})]})}),$&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Neuer Tarif"}),s.jsx("button",{className:"close-btn",onClick:()=>D(!1),children:s.jsx(b,{size:20})})]}),s.jsxs("div",{style:{padding:"1.5rem"},children:[s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),s.jsx("input",{type:"text",value:te.name,onChange:e=>ne({...te,name:e.target.value}),placeholder:"Tarif-Bezeichnung",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Preis (â‚¬) *"}),s.jsx("input",{type:"number",step:"0.01",value:te.price_cents?(te.price_cents/100).toFixed(2):"",onChange:e=>ne({...te,price_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"0.00",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"AufnahmegebÃ¼hr (â‚¬)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:te.aufnahmegebuehr_cents?(te.aufnahmegebuehr_cents/100).toFixed(2):"",onChange:e=>ne({...te,aufnahmegebuehr_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"49.99",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Laufzeit (Monate) *"}),s.jsx("input",{type:"number",min:"1",value:te.duration_months,onChange:e=>ne({...te,duration_months:parseInt(e.target.value)||""}),placeholder:"12",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsintervall *"}),s.jsxs("select",{value:te.billing_cycle,onChange:e=>ne({...te,billing_cycle:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),w.length>0?w.map(e=>{var a,i;const t=(null==(a=e.name)?void 0:a.toLowerCase())||(null==(i=e.intervall)?void 0:i.toLowerCase())||"";return s.jsx("option",{value:t,children:e.name||e.intervall},e.id||e.zyklus_id)}):s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"daily",children:"TÃ¤glich"}),s.jsx("option",{value:"weekly",children:"WÃ¶chentlich"}),s.jsx("option",{value:"monthly",children:"Monatlich"}),s.jsx("option",{value:"quarterly",children:"VierteljÃ¤hrlich"}),s.jsx("option",{value:"yearly",children:"JÃ¤hrlich"})]})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsmethode *"}),s.jsxs("select",{value:te.payment_method,onChange:e=>ne({...te,payment_method:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("option",{value:"bank_transfer",children:"BankÃ¼berweisung"}),s.jsx("option",{value:"direct_debit",children:"Lastschrift"}),s.jsx("option",{value:"credit_card",children:"Kreditkarte"}),s.jsx("option",{value:"cash",children:"Bar"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"WÃ¤hrung"}),s.jsxs("select",{value:te.currency,onChange:e=>ne({...te,currency:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("option",{value:"EUR",children:"EUR (â‚¬)"}),s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"CHF",children:"CHF"})]})]})]}),s.jsx("div",{style:{marginBottom:"1.5rem"},children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:te.active,onChange:e=>ne({...te,active:e.target.checked})}),"Tarif ist aktiv"]})}),s.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>D(!1),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),s.jsxs("button",{className:"btn btn-primary",onClick:()=>de(te),disabled:!te.name||!te.price_cents||!te.duration_months,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(f,{size:16}),"Speichern"]})]})]})]})}),F&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Tarif bearbeiten"}),s.jsx("button",{className:"close-btn",onClick:()=>E(null),children:s.jsx(b,{size:20})})]}),s.jsxs("div",{style:{padding:"1.5rem"},children:[s.jsxs("div",{style:{marginBottom:"1rem"},children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),s.jsx("input",{type:"text",value:F.name,onChange:e=>E({...F,name:e.target.value}),placeholder:"Tarif-Bezeichnung",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Preis (â‚¬) *"}),s.jsx("input",{type:"number",step:"0.01",value:F.price_euros||"",onChange:e=>E({...F,price_euros:e.target.value,price_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"0.00",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"AufnahmegebÃ¼hr (â‚¬)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:F.aufnahmegebuehr_euros||"",onChange:e=>E({...F,aufnahmegebuehr_euros:e.target.value,aufnahmegebuehr_cents:Math.round(100*parseFloat(e.target.value||0))}),placeholder:"49.99",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Laufzeit (Monate) *"}),s.jsx("input",{type:"number",min:"1",value:F.duration_months,onChange:e=>E({...F,duration_months:parseInt(e.target.value)||""}),placeholder:"12",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsintervall *"}),s.jsxs("select",{value:(null==(y=F.billing_cycle)?void 0:y.toUpperCase())||"",onChange:e=>E({...F,billing_cycle:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("option",{value:"",children:"Bitte wÃ¤hlen..."}),s.jsx("option",{value:"MONTHLY",children:"Monatlich"}),s.jsx("option",{value:"QUARTERLY",children:"VierteljÃ¤hrlich"}),s.jsx("option",{value:"YEARLY",children:"JÃ¤hrlich"})]})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Zahlungsmethode *"}),s.jsxs("select",{value:(null==(_=F.payment_method)?void 0:_.toUpperCase())||"",onChange:e=>E({...F,payment_method:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("option",{value:"SEPA",children:"SEPA"}),s.jsx("option",{value:"CARD",children:"Kreditkarte"}),s.jsx("option",{value:"PAYPAL",children:"PayPal"}),s.jsx("option",{value:"BANK_TRANSFER",children:"BankÃ¼berweisung"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"WÃ¤hrung"}),s.jsxs("select",{value:F.currency,onChange:e=>E({...F,currency:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"},children:[s.jsx("option",{value:"EUR",children:"EUR (â‚¬)"}),s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"CHF",children:"CHF"})]})]})]}),s.jsx("div",{style:{marginBottom:"1.5rem"},children:s.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[s.jsx("input",{type:"checkbox",checked:F.active,onChange:e=>E({...F,active:e.target.checked})}),"Tarif ist aktiv"]})}),s.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>E(null),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),s.jsxs("button",{className:"btn btn-primary",onClick:()=>de(F),disabled:!F.name||!F.price_cents||!F.duration_months,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(f,{size:16}),"Speichern"]})]})]})]})})]})};export{y as default};
