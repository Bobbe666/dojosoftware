import{a as e,j as t,b as n}from"./query-Caj74EYQ.js";import{u as i,d as r}from"./vendor-router-Co3o87Zc.js";import{d as o,b as l,g as s,a,N as c}from"./index-BfO9IvyN.js";import"./icons-DiLw-1i5.js";import"./charts-C1Gv3M_c.js";const d=typeof window<"u"?e.useLayoutEffect:e.useEffect;function u(e){if(void 0!==e)switch(typeof e){case"number":return e;case"string":if(e.endsWith("px"))return parseFloat(e)}}let g=null;function m({containerElement:e,direction:t,isRtl:n,scrollOffset:i}){if("horizontal"===t&&n)switch(function(e=!1){if(null===g||e){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?g="positive-descending":(e.scrollLeft=1,g=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),g}return g}()){case"negative":return-i;case"positive-descending":if(e){const{clientWidth:t,scrollLeft:n,scrollWidth:i}=e;return i-t-n}}return i}function h(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function p(e,t){if(e===t)return!0;if(!!e!=!!t||(h(void 0!==e),h(void 0!==t),Object.keys(e).length!==Object.keys(t).length))return!1;for(const n in e)if(!Object.is(t[n],e[n]))return!1;return!0}function f({cachedBounds:e,itemCount:t,itemSize:n}){if(0===t)return 0;if("number"==typeof n)return t*n;{const n=e.get(0===e.size?0:e.size-1);h(void 0!==n,"Unexpected bounds cache miss");return t*((n.scrollOffset+n.size)/e.size)}}function x({cachedBounds:e,containerScrollOffset:t,containerSize:n,itemCount:i,overscanCount:r}){const o=i-1;let l=0,s=-1,a=0,c=-1,d=0;for(;d<o;){const n=e.get(d);if(n.scrollOffset+n.size>t)break;d++}for(l=d,a=Math.max(0,l-r);d<o;){const i=e.get(d);if(i.scrollOffset+i.size>=t+n)break;d++}return s=Math.min(o,d),c=Math.min(i-1,s+r),l<0&&(l=0,s=-1,a=0,c=-1),{startIndexVisible:l,stopIndexVisible:s,startIndexOverscan:a,stopIndexOverscan:c}}function b({itemCount:t,itemProps:n,itemSize:i}){return e.useMemo(()=>function({itemCount:e,itemProps:t,itemSize:n}){const i=new Map;return{get(r){for(h(r<e,`Invalid index ${r}`);i.size-1<r;){const e=i.size;let o;switch(typeof n){case"function":o=n(e,t);break;case"number":o=n}if(0===e)i.set(e,{size:o,scrollOffset:0});else{const t=i.get(e-1);h(void 0!==t,`Unexpected bounds cache miss for index ${r}`),i.set(e,{scrollOffset:t.scrollOffset+t.size,size:o})}}const o=i.get(r);return h(void 0!==o,`Unexpected bounds cache miss for index ${r}`),o},set(e,t){i.set(e,t)},get size(){return i.size}}}({itemCount:t,itemProps:n,itemSize:i}),[t,n,i])}function v({containerElement:t,containerStyle:n,defaultContainerSize:i=0,direction:r,isRtl:o=!1,itemCount:l,itemProps:s,itemSize:a,onResize:c,overscanCount:g}){const{height:v=i,width:y=i}=function({box:t,defaultHeight:n,defaultWidth:i,disabled:r,element:o,mode:l,style:s}){const{styleHeight:a,styleWidth:c}=e.useMemo(()=>({styleHeight:u(null==s?void 0:s.height),styleWidth:u(null==s?void 0:s.width)}),[null==s?void 0:s.height,null==s?void 0:s.width]),[g,m]=e.useState({height:n,width:i}),h=r||"only-height"===l&&void 0!==a||"only-width"===l&&void 0!==c||void 0!==a&&void 0!==c;return d(()=>{if(null===o||h)return;const e=new ResizeObserver(e=>{for(const t of e){const{contentRect:e,target:n}=t;o===n&&m(t=>t.height===e.height&&t.width===e.width?t:{height:e.height,width:e.width})}});return e.observe(o,{box:t}),()=>{null==e||e.unobserve(o)}},[t,h,o,a,c]),e.useMemo(()=>({height:a??g.height,width:c??g.width}),[g,a,c])}({defaultHeight:"vertical"===r?i:void 0,defaultWidth:"horizontal"===r?i:void 0,element:t,mode:"vertical"===r?"only-height":"only-width",style:n}),w=e.useRef({height:0,width:0}),S="vertical"===r?v:y,C=function({containerSize:e,itemSize:t}){let n;"string"==typeof t?(h(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),h(void 0!==e,"Container size must be defined if a percentage item size is specified"),n=e*parseInt(t)/100):n=t;return n}({containerSize:S,itemSize:a});e.useLayoutEffect(()=>{if("function"==typeof c){const e=w.current;(e.height!==v||e.width!==y)&&(c({height:v,width:y},{...e}),e.height=v,e.width=y)}},[v,c,y]);const j=b({itemCount:l,itemProps:s,itemSize:C}),z=e.useCallback(e=>j.get(e),[j]),[I,M]=e.useState(()=>x({cachedBounds:j,containerScrollOffset:0,containerSize:S,itemCount:l,overscanCount:g})),{startIndexVisible:k,startIndexOverscan:E,stopIndexVisible:O,stopIndexOverscan:R}={startIndexVisible:Math.min(l-1,I.startIndexVisible),startIndexOverscan:Math.min(l-1,I.startIndexOverscan),stopIndexVisible:Math.min(l-1,I.stopIndexVisible),stopIndexOverscan:Math.min(l-1,I.stopIndexOverscan)},L=e.useCallback(()=>f({cachedBounds:j,itemCount:l,itemSize:C}),[j,l,C]),N=e.useCallback(e=>{const n=m({containerElement:t,direction:r,isRtl:o,scrollOffset:e});return x({cachedBounds:j,containerScrollOffset:n,containerSize:S,itemCount:l,overscanCount:g})},[j,t,S,r,o,l,g]);d(()=>{const e=("vertical"===r?null==t?void 0:t.scrollTop:null==t?void 0:t.scrollLeft)??0;M(N(e))},[t,r,N]),d(()=>{if(!t)return;const e=()=>{M(e=>{const{scrollLeft:n,scrollTop:i}=t,s=m({containerElement:t,direction:r,isRtl:o,scrollOffset:"vertical"===r?i:n}),a=x({cachedBounds:j,containerScrollOffset:s,containerSize:S,itemCount:l,overscanCount:g});return p(a,e)?e:a})};return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e)}},[j,t,S,r,l,g]);const A=function(t){const n=e.useRef(()=>{throw new Error("Cannot call during render.")});return d(()=>{n.current=t},[t]),e.useCallback(e=>{var t;return null==(t=n.current)?void 0:t.call(n,e)},[n])}(({align:e="auto",containerScrollOffset:n,index:i})=>{let s=function({align:e,cachedBounds:t,index:n,itemCount:i,itemSize:r,containerScrollOffset:o,containerSize:l}){if(n<0||n>=i)throw RangeError(`Invalid index specified: ${n}`,{cause:`Index ${n} is not within the range of 0 - ${i-1}`});const s=f({cachedBounds:t,itemCount:i,itemSize:r}),a=t.get(n),c=Math.max(0,Math.min(s-l,a.scrollOffset)),d=Math.max(0,a.scrollOffset-l+a.size);switch("smart"===e&&(e=o>=d&&o<=c?"auto":"center"),e){case"start":return c;case"end":return d;case"center":return a.scrollOffset<=l/2?0:a.scrollOffset+a.size/2>=s-l/2?s-l:a.scrollOffset+a.size/2-l/2;default:return o>=d&&o<=c?o:o<d?d:c}}({align:e,cachedBounds:j,containerScrollOffset:n,containerSize:S,index:i,itemCount:l,itemSize:C});if(t){if(s=m({containerElement:t,direction:r,isRtl:o,scrollOffset:s}),"function"!=typeof t.scrollTo){const e=N(s);p(I,e)||M(e)}return s}});return{getCellBounds:z,getEstimatedSize:L,scrollToIndex:A,startIndexOverscan:E,startIndexVisible:k,stopIndexOverscan:R,stopIndexVisible:O}}function y(e,t){const{ariaAttributes:n,style:i,...r}=e,{ariaAttributes:o,style:l,...s}=t;return p(n,o)&&p(i,l)&&p(r,s)}function w({cellComponent:n,cellProps:i,children:r,className:o,columnCount:l,columnWidth:s,defaultHeight:a=0,defaultWidth:c=0,dir:d,gridRef:u,onCellsRendered:g,onResize:m,overscanCount:h=3,rowCount:p,rowHeight:f,style:x,tagName:b="div",...w}){const S=function(t){return e.useMemo(()=>t,Object.values(t))}(i),C=e.useMemo(()=>e.memo(n,y),[n]),[j,z]=e.useState(null),I=function(t,n){const[i,r]=e.useState("rtl"===n);return e.useLayoutEffect(()=>{t&&(n||r(function(e){let t=e;for(;t;){if(t.dir)return"rtl"===t.dir;t=t.parentElement}return!1}(t)))},[n,t]),i}(j,d),{getCellBounds:M,getEstimatedSize:k,startIndexOverscan:E,startIndexVisible:O,scrollToIndex:R,stopIndexOverscan:L,stopIndexVisible:N}=v({containerElement:j,containerStyle:x,defaultContainerSize:c,direction:"horizontal",isRtl:I,itemCount:l,itemProps:S,itemSize:s,onResize:m,overscanCount:h}),{getCellBounds:A,getEstimatedSize:T,startIndexOverscan:W,startIndexVisible:B,scrollToIndex:$,stopIndexOverscan:D,stopIndexVisible:P}=v({containerElement:j,containerStyle:x,defaultContainerSize:a,direction:"vertical",itemCount:p,itemProps:S,itemSize:f,onResize:m,overscanCount:h});e.useImperativeHandle(u,()=>({get element(){return j},scrollToCell({behavior:e="auto",columnAlign:t="auto",columnIndex:n,rowAlign:i="auto",rowIndex:r}){const o=R({align:t,containerScrollOffset:(null==j?void 0:j.scrollLeft)??0,index:n}),l=$({align:i,containerScrollOffset:(null==j?void 0:j.scrollTop)??0,index:r});"function"==typeof(null==j?void 0:j.scrollTo)&&j.scrollTo({behavior:e,left:o,top:l})},scrollToColumn({align:e="auto",behavior:t="auto",index:n}){const i=R({align:e,containerScrollOffset:(null==j?void 0:j.scrollLeft)??0,index:n});"function"==typeof(null==j?void 0:j.scrollTo)&&j.scrollTo({behavior:t,left:i})},scrollToRow({align:e="auto",behavior:t="auto",index:n}){const i=$({align:e,containerScrollOffset:(null==j?void 0:j.scrollTop)??0,index:n});"function"==typeof(null==j?void 0:j.scrollTo)&&j.scrollTo({behavior:t,top:i})}}),[j,R,$]),e.useEffect(()=>{E>=0&&L>=0&&W>=0&&D>=0&&g&&g({columnStartIndex:O,columnStopIndex:N,rowStartIndex:B,rowStopIndex:P},{columnStartIndex:E,columnStopIndex:L,rowStartIndex:W,rowStopIndex:D})},[g,E,O,L,N,W,B,D,P]);const _=e.useMemo(()=>{const n=[];if(l>0&&p>0)for(let i=W;i<=D;i++){const r=A(i),o=[];for(let t=E;t<=L;t++){const n=M(t);o.push(e.createElement(C,{...S,ariaAttributes:{"aria-colindex":t+1,role:"gridcell"},columnIndex:t,key:t,rowIndex:i,style:{position:"absolute",left:I?void 0:0,right:I?0:void 0,transform:`translate(${I?-n.scrollOffset:n.scrollOffset}px, ${r.scrollOffset}px)`,height:r.size,width:n.size}}))}n.push(t.jsx("div",{role:"row","aria-rowindex":i+1,children:o},i))}return n},[C,S,l,E,L,M,A,I,p,W,D]),F=t.jsx("div",{"aria-hidden":!0,style:{height:T(),width:k(),zIndex:-1}});return e.createElement(b,{"aria-colcount":l,"aria-rowcount":p,role:"grid",...w,className:o,dir:d,ref:z,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",flexGrow:1,overflow:"auto",...x}},_,r,F)}const S=n.memo(({mitglied:e,selectionMode:n,isSelected:i,onToggleSelection:r,onNavigate:o})=>t.jsxs("div",{className:"stat-card",onClick:t=>{n?(t.stopPropagation(),r(e.mitglied_id)):o(e.mitglied_id)},style:{padding:"0.8rem",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",minHeight:"130px",display:"flex",flexDirection:"column",justifyContent:"flex-start",position:"relative",border:n&&i?"2px solid rgba(139, 92, 246, 0.6)":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:n&&i?"0 0 15px rgba(139, 92, 246, 0.3)":"none"},children:[n&&t.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",width:"24px",height:"24px",borderRadius:"4px",border:i?"2px solid #8b5cf6":"2px solid rgba(255, 255, 255, 0.4)",background:i?"#8b5cf6":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",zIndex:10},onClick:t=>{t.stopPropagation(),r(e.mitglied_id)},children:i&&t.jsx("span",{style:{color:"white",fontSize:"0.9rem",fontWeight:"bold"},children:"âœ“"})}),t.jsx("div",{style:{marginBottom:"0.3rem"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.3rem"},children:[t.jsx("img",{src:e.foto_pfad?`http://localhost:3000/${e.foto_pfad}`:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="40" height="40"%3E%3Crect fill="%232a2a4e" width="40" height="40"/%3E%3Ctext fill="%23ffd700" font-family="sans-serif" font-size="20" dy=".35em" x="50%25" y="50%25" text-anchor="middle"%3EðŸ‘¤%3C/text%3E%3C/svg%3E',alt:`${e.vorname} ${e.nachname}`,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover",border:"2px solid #e5e7eb"},onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="40" height="40"%3E%3Crect fill="%232a2a4e" width="40" height="40"/%3E%3Ctext fill="%23ffd700" font-family="sans-serif" font-size="20" dy=".35em" x="50%25" y="50%25" text-anchor="middle"%3EðŸ‘¤%3C/text%3E%3C/svg%3E'}}),t.jsxs("h3",{className:"member-name",style:{fontSize:"1.2rem",fontWeight:"600",margin:"0",whiteSpace:"normal",overflow:"visible",textOverflow:"unset",lineHeight:"1.3"},children:[e.nachname||"Unbekannt",", ",e.vorname||"Unbekannt"]})]})}),t.jsxs("div",{className:"member-info",style:{fontSize:"0.8rem",lineHeight:"1.4"},children:[t.jsxs("p",{style:{margin:"0 0 0.2rem 0",fontSize:"0.7rem"},children:[t.jsx("strong",{children:"Geburtsdatum:"})," ",e.geburtsdatum?new Date(e.geburtsdatum).toLocaleDateString("de-DE"):"N/A"]}),t.jsxs("p",{style:{margin:"0",whiteSpace:"normal",overflow:"visible",textOverflow:"unset",lineHeight:"1.3"},children:[t.jsx("strong",{children:"Stile:"})," ",e.stile?e.stile.replace(/,/g,", "):"Keine Stile"]})]})]}));S.displayName="MemberCard";const C=n.memo(({members:n,selectionMode:i,selectedMembers:r,onToggleSelection:o,onNavigate:l,t:s})=>{const a=e.useRef(null),[c,d]=e.useState(0);e.useEffect(()=>{const e=()=>{a.current&&d(a.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const u=e.useMemo(()=>c<500?2:c<800?3:c<1100?4:5,[c]),g=e.useMemo(()=>Math.ceil(n.length/u),[n.length,u]),m=e.useMemo(()=>Math.floor((c-6*(u-1))/u),[c,u]),h=e.useCallback(({columnIndex:e,rowIndex:s,style:a})=>{const c=s*u+e;if(c>=n.length)return null;const d=n[c];return t.jsx("div",{style:{...a,left:a.left+3,top:a.top+3,width:a.width-6,height:a.height-6},children:t.jsx(S,{mitglied:d,selectionMode:i,isSelected:r.includes(d.mitglied_id),onToggleSelection:o,onNavigate:l})})},[n,u,i,r,o,l]);return 0===n.length?t.jsxs("div",{className:"stat-card",style:{padding:"2rem",textAlign:"center",marginTop:"0.5rem"},children:[t.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:"0 0 0.5rem 0"},children:s("list.noMembers","Keine Mitglieder gefunden")}),t.jsx("p",{style:{margin:"0",color:"rgba(255, 255, 255, 0.6)"},children:s("list.noMembersDescription","Es sind noch keine Mitglieder im System registriert.")})]}):n.length<50?t.jsx("div",{ref:a,className:"stats-grid",style:{display:"grid",gridTemplateColumns:`repeat(${u}, 1fr)`,gap:"6px",marginTop:"0.2rem",marginBottom:"0.5rem"},children:n.map(e=>t.jsx(S,{mitglied:e,selectionMode:i,isSelected:r.includes(e.mitglied_id),onToggleSelection:o,onNavigate:l},e.mitglied_id))}):t.jsx("div",{ref:a,style:{marginTop:"0.2rem",marginBottom:"0.5rem",width:"100%"},children:c>0&&t.jsx(w,{columnCount:u,columnWidth:m+6,height:Math.min(156*g,600),rowCount:g,rowHeight:156,width:c,style:{overflowX:"hidden"},children:h})})});C.displayName="VirtualizedMemberGrid";const j=()=>{const{t:d}=o(["members","common"]),u=Date.now(),{getDojoFilterParam:g,activeDojo:m,filter:h}=l(),{updateTrigger:p}=s();n.useEffect(()=>{const e=document.createElement("style");return e.textContent="\n      .search-input-dark::placeholder {\n        color: rgba(255, 255, 255, 0.5) !important;\n        opacity: 1 !important;\n      }\n      .search-input-dark::-webkit-input-placeholder {\n        color: rgba(255, 255, 255, 0.5) !important;\n        opacity: 1 !important;\n      }\n      .search-input-dark::-moz-placeholder {\n        color: rgba(255, 255, 255, 0.5) !important;\n        opacity: 1 !important;\n      }\n      .search-input-dark:-ms-input-placeholder {\n        color: rgba(255, 255, 255, 0.5) !important;\n        opacity: 1 !important;\n      }\n    ",document.head.appendChild(e),()=>document.head.removeChild(e)},[]);const[f,x]=e.useState([]),[b,v]=e.useState(!0),[y,w]=e.useState(""),[S,j]=e.useState(!1),[z,I]=e.useState(""),[M,k]=e.useState(""),[E,O]=e.useState([]),[R,L]=e.useState(!1),[N,A]=e.useState([]),[T,W]=e.useState(!1),[B,$]=e.useState({top:0,left:0}),D=n.useRef(null),P=i(),[_,F]=e.useState(""),[V,H]=e.useState(""),[U,J]=e.useState(""),[G,Y]=e.useState([]),[K,q]=e.useState([]);e.useEffect(()=>{const e=g(),t=e?`/mitglieder/all?${e}`:"/mitglieder/all";console.log("ðŸ¢ Lade Mitglieder mit Filter:",e),console.log("ðŸ” API URL:",t),Promise.all([a.get(t),a.get("/mitglieder/filter-options/stile"),a.get("/mitglieder/filter-options/gurte")]).then(([t,n,i])=>{const r=t.data;if(!Array.isArray(r))throw new Error("Unerwartetes API-Format!");x(r);const o=[...new Set(r.map(e=>{var t,n;return null==(n=null==(t=e.nachname)?void 0:t.charAt(0))?void 0:n.toUpperCase()}).filter(Boolean))].sort();O(o),n.data.success&&(console.log("âœ… VerfÃ¼gbare Stile aus API:",n.data.stile),Y(n.data.stile)),i.data.success&&(console.log("âœ… VerfÃ¼gbare Gurte aus API:",i.data.gurte),q(i.data.gurte)),console.log(`âœ… ${r.length} Mitglieder geladen (Filter: ${e||"alle"})`)}).catch(e=>{console.error("Fehler beim Laden der Mitglieder:",e),w(d("errors.loadingError"))}).finally(()=>v(!1))},[m,h,p]);const X=e.useMemo(()=>{let e=f;if(z){const t=z.toLowerCase();e=e.filter(e=>{var n,i,r,o,l,s,a;return(null==(n=e.vorname)?void 0:n.toLowerCase().includes(t))||(null==(i=e.nachname)?void 0:i.toLowerCase().includes(t))||(null==(r=e.email)?void 0:r.toLowerCase().includes(t))||(null==(o=e.stile)?void 0:o.toLowerCase().includes(t))||(null==(l=e.telefon)?void 0:l.toLowerCase().includes(t))||(null==(s=e.adresse)?void 0:s.toLowerCase().includes(t))||(null==(a=e.notizen)?void 0:a.toLowerCase().includes(t))})}return M&&(e=e.filter(e=>{var t,n;return(null==(n=null==(t=e.nachname)?void 0:t.charAt(0))?void 0:n.toUpperCase())===M})),_&&(e="__OHNE_STIL__"===_?e.filter(e=>!e.stile||""===e.stile.trim()):e.filter(e=>{var t;return null==(t=e.stile)?void 0:t.split(",").map(e=>e.trim()).includes(_)})),V&&(e=e.filter(e=>{if(!e.geburtsdatum)return!1;const t=(e=>{if(!e)return 0;const t=new Date,n=new Date(e);let i=t.getFullYear()-n.getFullYear();const r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&i--,i})(e.geburtsdatum);switch(V){case"0-6":return t>=0&&t<=6;case"7-12":return t>=7&&t<=12;case"13-17":return t>=13&&t<=17;case"18-25":return t>=18&&t<=25;case"26-40":return t>=26&&t<=40;case"41+":return t>=41;default:return!0}})),U&&(e=e.filter(e=>{var t;return null==(t=e.aktuelle_graduierung)?void 0:t.split(",").map(e=>e.trim()).includes(U)})),e},[f,z,M,_,V,U]);e.useEffect(()=>{const e=e=>{if(T){const t=e.target.closest(".menu-container"),n=e.target.closest(".dropdown-content");t||n||(console.log("ðŸš« Click outside detected, closing menu"),W(!1))}};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[T]);const Q=e.useCallback(()=>{j(!0)},[]),Z=e.useCallback(e=>{I(e.target.value),k("")},[]),ee=e.useCallback(()=>{I(""),k(""),F(""),H(""),J("")},[]),te=e.useMemo(()=>z||M||_||V||U,[z,M,_,V,U]),ne=e.useCallback(e=>{k(t=>t===e?"":(I(""),e))},[]),ie=()=>{console.log("ðŸŽ¯ handleToggleSelectionMode called!"),console.log("Current selectionMode:",R),L(!R),A([]),W(!1),console.log("âœ… Selection mode toggled, menu closed")},re=e.useCallback(e=>{A(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]);return t.jsxs("div",{className:"app-container",children:[t.jsxs("div",{className:"page-header",style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginBottom:"0.5rem",paddingTop:"0.3rem",alignItems:"center"},"data-cache-break":u,children:[t.jsx("h2",{className:"page-title",style:{margin:0,fontSize:"1.6rem",fontWeight:"700",textAlign:"center",color:"#ffd700",textTransform:"uppercase",letterSpacing:"0.05em"},children:d("list.title")}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",justifyContent:"center"},children:[t.jsx("input",{type:"text",placeholder:d("list.searchPlaceholder"),value:z,onChange:Z,style:{width:"160px",padding:"0 0.6rem",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",fontSize:"0.8rem",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(12px)",transition:"all 0.3s ease",outline:"none",color:"white",boxSizing:"border-box",height:"34px"},className:"search-input-dark",onFocus:e=>{e.target.style.borderColor="#F59E0B",e.target.style.boxShadow="0 4px 20px rgba(245, 158, 11, 0.2)"},onBlur:e=>{e.target.style.borderColor="rgba(255, 255, 255, 0.3)",e.target.style.boxShadow="none"}}),t.jsxs("select",{value:_,onChange:e=>F(e.target.value),className:"filter-select "+(_?"active":""),style:{padding:"0 0.6rem",fontSize:"0.8rem",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",height:"34px",outline:"none",paddingRight:"1.8rem"},children:[t.jsxs("option",{value:"",children:["ðŸŽ¯ ",d("list.filters.allStyles","Alle Stile")]}),t.jsxs("option",{value:"__OHNE_STIL__",className:"option-warning",children:["âŒ ",d("list.filters.noStyle","Ohne Stil")]}),G.map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsxs("select",{value:V,onChange:e=>H(e.target.value),className:"filter-select "+(V?"active":""),style:{padding:"0 0.6rem",fontSize:"0.8rem",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",height:"34px",outline:"none",paddingRight:"1.8rem"},children:[t.jsxs("option",{value:"",children:["ðŸ“… ",d("list.filters.age","Alter")]}),t.jsx("option",{value:"0-6",children:"0-6 J."}),t.jsx("option",{value:"7-12",children:"7-12 J."}),t.jsx("option",{value:"13-17",children:"13-17 J."}),t.jsx("option",{value:"18-25",children:"18-25 J."}),t.jsx("option",{value:"26-40",children:"26-40 J."}),t.jsx("option",{value:"41+",children:"41+ J."})]}),t.jsxs("select",{value:U,onChange:e=>J(e.target.value),className:"filter-select "+(U?"active":""),style:{padding:"0 0.6rem",fontSize:"0.8rem",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",height:"34px",outline:"none",paddingRight:"1.8rem"},children:[t.jsxs("option",{value:"",children:["ðŸ¥‹ ",d("list.filters.allBelts","Alle Gurte")]}),K.map(e=>t.jsx("option",{value:e,children:e},e))]}),te&&t.jsx("button",{onClick:ee,className:"filter-reset-btn",style:{padding:"0 0.6rem",fontSize:"0.8rem",borderRadius:"6px",cursor:"pointer",transition:"all 0.3s ease",height:"34px",display:"inline-flex",alignItems:"center",gap:"0.3rem",fontWeight:"600"},children:"âœ• Reset"}),t.jsx("div",{className:"menu-container",style:{position:"relative",display:"inline-block",zIndex:1e4},children:t.jsxs("button",{ref:D,onClick:()=>{if(console.log("ðŸ”˜ Menu Toggle clicked, current showMenu:",T),!T&&D.current){const e=D.current.getBoundingClientRect(),t={top:e.bottom+8,left:e.left};console.log("ðŸ“ Menu position calculated:",t),console.log("ðŸ“ Button rect:",e),$(t)}W(!T),console.log("âœ… Menu state changed to:",!T)},className:"actions-btn",style:{padding:"0 0.6rem",fontSize:"0.8rem",display:"inline-flex",alignItems:"center",gap:"0.25rem",whiteSpace:"nowrap",borderRadius:"6px",cursor:"pointer",fontWeight:"600",transition:"all 0.3s ease",boxSizing:"border-box",height:"34px"},children:[t.jsx("span",{style:{fontSize:"1rem",fontWeight:"900"},children:"â‹®"}),t.jsx("span",{children:d("common:labels.actions")})]})}),T&&r.createPortal(t.jsxs("div",{className:"actions-dropdown",style:{position:"fixed",top:`${B.top}px`,left:`${B.left}px`,borderRadius:"8px",zIndex:999999,minWidth:"220px",overflow:"visible",display:"block",visibility:"visible",opacity:1,padding:"0.5rem"},onClick:e=>e.stopPropagation(),children:[t.jsxs("button",{className:"actions-dropdown-item",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),W(!1),Q()},style:{width:"100%",padding:"0.75rem 1rem",border:"none",textAlign:"left",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"600",borderRadius:"6px",marginBottom:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.3rem"},children:"âž•"}),t.jsx("span",{children:d("list.addMember")})]}),t.jsxs("button",{className:"actions-dropdown-item",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),(async()=>{console.log("ðŸ–¨ï¸ Drucken Mitgliederliste!");try{W(!1);const e=g(),t=e?`/mitglieder/print?${e}`:"/mitglieder/print";console.log("ðŸ–¨ï¸ PDF URL:",t);const n=await a.get(t,{responseType:"blob"}),i=new Blob([n.data],{type:"application/pdf"}),r=window.URL.createObjectURL(i);window.open(r,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(r),100)}catch(e){console.error("âŒ Fehler beim Drucken der Mitgliederliste:",e),alert("Fehler beim Erstellen der PDF-Liste")}})()},style:{width:"100%",padding:"0.75rem 1rem",border:"none",textAlign:"left",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"600",borderRadius:"6px",marginBottom:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"1.3rem"},children:"ðŸ–¨ï¸"}),t.jsx("span",{children:d("list.printList","Mitgliederliste drucken")})]}),t.jsxs("button",{className:"actions-dropdown-item",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),ie()},style:{width:"100%",padding:"0.75rem 1rem",border:"none",textAlign:"left",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"600",borderRadius:"6px"},children:[t.jsx("span",{style:{fontSize:"1.3rem"},children:"ðŸ“¦"}),t.jsx("span",{children:R?d("list.endSelection","Auswahl beenden"):d("list.bulkArchive","Mehrfach archivieren")})]})]}),document.body),t.jsxs("span",{style:{fontSize:"0.75rem",color:"rgba(255,255,255,0.6)",whiteSpace:"nowrap",padding:"0 0.5rem"},children:[X.length,"/",f.length]})]}),E.length>0&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",flexWrap:"wrap",justifyContent:"center"},children:[t.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(255,255,255,0.7)",whiteSpace:"nowrap"},children:[d("detail.fields.lastName","Nachname"),":"]}),E.map(e=>t.jsx("button",{onClick:()=>ne(e),className:"letter-filter-btn "+(M===e?"active":""),style:{padding:"0.2rem 0.45rem",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"0.7rem",transition:"all 0.2s ease",minWidth:"24px",height:"24px",display:"inline-flex",alignItems:"center",justifyContent:"center"},children:e},e)),M&&t.jsx("button",{onClick:()=>k(""),className:"letter-filter-reset-btn",style:{padding:"0.2rem 0.45rem",borderRadius:"4px",cursor:"pointer",fontWeight:"600",fontSize:"0.7rem",transition:"all 0.2s ease",height:"24px",display:"inline-flex",alignItems:"center"},children:"âœ– Alle"})]})]}),R&&t.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.15)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"0.75rem",marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",backdropFilter:"blur(12px)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[t.jsx("span",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",fontWeight:"600"},children:d("list.selectedCount","{{count}} ausgewÃ¤hlt",{count:N.length})}),t.jsx("button",{onClick:()=>{N.length===X.length?A([]):A(X.map(e=>e.mitglied_id))},style:{padding:"0.3rem 0.6rem",fontSize:"0.75rem",background:"transparent",color:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)",e.target.style.borderColor="rgba(255, 255, 255, 0.5)"},onMouseLeave:e=>{e.target.style.background="transparent",e.target.style.borderColor="rgba(255, 255, 255, 0.3)"},children:N.length===X.length?d("list.deselectAll","Alle abwÃ¤hlen"):d("list.selectAll","Alle auswÃ¤hlen")})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsxs("button",{onClick:async()=>{var e,t;if(0===N.length)return void alert("Bitte wÃ¤hle mindestens ein Mitglied aus.");if(window.confirm(`MÃ¶chtest du wirklich ${N.length} Mitglied(er) archivieren?\n\nDiese Aktion kann nicht rÃ¼ckgÃ¤ngig gemacht werden.`))try{const e=await a.post("/mitglieder/bulk-archivieren",{mitglied_ids:N,grund:"Bulk-Archivierung durch Admin",archiviert_von:null});if(e.data.success){const{results:t}=e.data;t.failed.length>0?alert(`Archivierung abgeschlossen:\n\nâœ… Erfolgreich: ${t.success.length}\nâŒ Fehlgeschlagen: ${t.failed.length}\n\nFehlgeschlagene Mitglieder:\n${t.failed.map(e=>`- ID ${e.mitglied_id}: ${e.error}`).join("\n")}`):alert(`âœ… ${t.success.length} Mitglied(er) erfolgreich archiviert!`),L(!1),A([]);const n=g(),i=n?`/mitglieder/all?${n}`:"/mitglieder/all",r=await a.get(i);x(r.data)}}catch(n){console.error("Fehler bei der Bulk-Archivierung:",n),alert(`Fehler bei der Archivierung: ${(null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.error)||n.message}`)}},disabled:0===N.length,style:{padding:"0.4rem 0.8rem",fontSize:"0.8rem",background:N.length>0?"linear-gradient(135deg, #EF4444, #DC2626)":"rgba(128, 128, 128, 0.3)",color:N.length>0?"white":"rgba(255, 255, 255, 0.5)",border:"none",borderRadius:"6px",cursor:N.length>0?"pointer":"not-allowed",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem"},onMouseEnter:e=>{N.length>0&&(e.target.style.transform="translateY(-1px)",e.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.4)")},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="none"},children:[t.jsx("span",{children:"ðŸ“¦"}),"Archivieren"]}),t.jsx("button",{onClick:ie,style:{padding:"0.4rem 0.8rem",fontSize:"0.8rem",background:"transparent",color:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)"},onMouseLeave:e=>{e.target.style.background="transparent"},children:"Abbrechen"})]})]}),y&&t.jsx("div",{className:"alert error",children:y}),b&&t.jsxs("div",{className:"loading-state",children:[t.jsx("div",{className:"loading-spinner"}),t.jsx("p",{children:"Lade Mitglieder..."})]}),!b&&t.jsx(C,{members:X,selectionMode:R,selectedMembers:N,onToggleSelection:re,onNavigate:e=>P(`/dashboard/mitglieder/${e}`),t:d}),S&&t.jsx(c,{onClose:()=>j(!1)})]})};export{j as default};
