import{a as e,j as r,b as i}from"./query-Caj74EYQ.js";import{b as a,m as l}from"./index-BfO9IvyN.js";import{ag as n,A as t,c as d,P as o,w as s,s as g,a9 as c,at as b,t as m,d as p,ah as u,ai as h,aj as x,p as f,Z as y,ak as v,o as j,al as k,n as w,am as z,an as _,ae as S,e as C}from"./icons-DiLw-1i5.js";import"./vendor-router-Co3o87Zc.js";import"./charts-C1Gv3M_c.js";const B={award:t,star:C,trophy:n,medal:S,crown:_,flame:z,target:w,heart:k,users:j,swords:v,zap:y,"trending-up":f,footprints:x,layers:h,brain:u,shield:p},R=[{value:"award",label:"Award"},{value:"star",label:"Star"},{value:"trophy",label:"Trophy"},{value:"medal",label:"Medal"},{value:"crown",label:"Crown"},{value:"flame",label:"Flame"},{value:"target",label:"Target"},{value:"heart",label:"Heart"},{value:"users",label:"Users"},{value:"swords",label:"Swords"},{value:"zap",label:"Zap"},{value:"trending-up",label:"Trending Up"},{value:"footprints",label:"Footprints"},{value:"layers",label:"Layers"},{value:"brain",label:"Brain"},{value:"shield",label:"Shield"}],$=[{value:"training",label:"Training"},{value:"pruefung",label:"Pruefung"},{value:"skill",label:"Skill"},{value:"special",label:"Spezial"}],A=[{value:"",label:"Manuell (kein Kriterium)"},{value:"trainings_anzahl",label:"Anzahl Trainings"},{value:"pruefung_bestanden",label:"Pruefungen bestanden"},{value:"skill_gemeistert",label:"Skills gemeistert"}],I=["#FFD700","#22c55e","#3b82f6","#f97316","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f59e0b"],T=()=>{var p,u,h;const{activeDojo:x}=a(),[f,y]=e.useState({members:[],badges:[],pendingAwards:[],summary:{}}),[v,j]=e.useState(!0),[k,w]=e.useState([]),[z,_]=e.useState(""),[S,C]=e.useState(!1),[T,W]=e.useState(!1),[F,P]=e.useState({mitglied_id:null,badge_id:null}),[L,D]=e.useState(null),[V,K]=e.useState(null),[M,N]=e.useState("vergeben");e.useEffect(()=>{O()},[x]);const O=async()=>{const e=l();if(!e)return K("Kein gueltiger Token gefunden. Bitte neu einloggen."),void j(!1);K(null),j(!0);try{const r=!x||"super-admin"===x||"all"===x||"all"===(null==x?void 0:x.id),i=!r&&(null==x?void 0:x.id)?`dojo_id=${x.id}`:"";console.log("Badge loadData:",{activeDojo:x,isAllDojos:r,dojoParam:i});const a=await fetch(`/api/badges/admin/overview?${i}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){const e=await a.json();y(e)}else 403===a.status?K("Keine Berechtigung (403). Bitte neu einloggen."):K(`Server-Fehler: ${a.status}`)}catch(r){console.error("Fehler beim Laden:",r),K(`Netzwerkfehler: ${r.message}`)}finally{j(!1)}},E=e=>B[e]||t,U=f.pendingAwards.filter(e=>`${e.vorname} ${e.nachname}`.toLowerCase().includes(z.toLowerCase())||e.badge_name.toLowerCase().includes(z.toLowerCase()));return v?r.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"rgba(255,255,255,0.5)"},children:"Lade Daten..."}):V?r.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[r.jsxs("div",{style:{color:"#ef4444",marginBottom:"1rem"},children:["Fehler: ",V]}),r.jsx("button",{onClick:()=>window.location.href="/login",style:{background:"#ffd700",color:"#1a1a1a",border:"none",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Zum Login"})]}):r.jsxs("div",{style:{padding:"1rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[r.jsx("div",{children:r.jsxs("h2",{style:{color:"#ffd700",margin:0,fontSize:"1.25rem"},children:[r.jsx(n,{size:24,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Badge-Verwaltung"]})}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("button",{onClick:()=>N("vergeben"),style:{background:"vergeben"===M?"rgba(255, 215, 0, 0.3)":"rgba(255,255,255,0.1)",border:"1px solid "+("vergeben"===M?"rgba(255, 215, 0, 0.5)":"rgba(255,255,255,0.2)"),color:"vergeben"===M?"#ffd700":"rgba(255,255,255,0.7)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:500},children:[r.jsx(t,{size:16,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Vergeben"]}),r.jsxs("button",{onClick:()=>N("verwalten"),style:{background:"verwalten"===M?"rgba(255, 215, 0, 0.3)":"rgba(255,255,255,0.1)",border:"1px solid "+("verwalten"===M?"rgba(255, 215, 0, 0.5)":"rgba(255,255,255,0.2)"),color:"verwalten"===M?"#ffd700":"rgba(255,255,255,0.7)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:500},children:[r.jsx(d,{size:16,style:{marginRight:"0.5rem",verticalAlign:"middle"}}),"Verwalten"]})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"10px",padding:"1rem",border:"1px solid rgba(255, 215, 0, 0.2)",textAlign:"center"},children:[r.jsx("div",{style:{color:"#ffd700",fontSize:"2rem",fontWeight:700},children:f.summary.total_members||0}),r.jsx("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.8rem"},children:"Aktive Mitglieder"})]}),r.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"10px",padding:"1rem",border:"1px solid rgba(34, 197, 94, 0.3)",textAlign:"center"},children:[r.jsx("div",{style:{color:"#22c55e",fontSize:"2rem",fontWeight:700},children:f.badges.length}),r.jsx("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.8rem"},children:"Verfuegbare Badges"})]}),r.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(249, 115, 22, 0.05))",borderRadius:"10px",padding:"1rem",border:"2px solid rgba(249, 115, 22, 0.4)",textAlign:"center"},children:[r.jsx("div",{style:{color:"#f97316",fontSize:"2rem",fontWeight:700},children:f.summary.pending_awards||0}),r.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem",fontWeight:600},children:"Ausstehende Badges"})]})]}),"vergeben"===M&&r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{marginBottom:"1rem"},children:r.jsxs("button",{onClick:()=>C(!0),style:{background:"linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 215, 0, 0.1))",border:"1px solid rgba(255, 215, 0, 0.4)",color:"#ffd700",padding:"0.5rem 1rem",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600},children:[r.jsx(o,{size:18})," Manuell verleihen"]})}),f.pendingAwards.length>0&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(249, 115, 22, 0.3)",marginBottom:"1.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsxs("h3",{style:{color:"#f97316",margin:0,fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(s,{size:18})," Verdiente Badges zum Verleihen"]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsxs("div",{style:{position:"relative"},children:[r.jsx(g,{size:16,style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"rgba(255,255,255,0.4)"}}),r.jsx("input",{type:"text",placeholder:"Suchen...",value:z,onChange:e=>_(e.target.value),style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.4rem 0.75rem 0.4rem 2rem",color:"white",fontSize:"0.85rem",width:"180px"}})]}),r.jsxs("button",{onClick:()=>{k.length===f.pendingAwards.length?w([]):w(f.pendingAwards.map(e=>`${e.mitglied_id}_${e.badge_id}`))},style:{background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.8)",padding:"0.4rem 0.75rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:[k.length===f.pendingAwards.length?"Keine":"Alle"," auswaehlen"]}),k.length>0&&r.jsxs("button",{onClick:async()=>{if(0===k.length)return;const e=k.map(e=>{const[r,i]=e.split("_");return{mitglied_id:parseInt(r),badge_id:parseInt(i)}});try{(await fetch("/api/badges/admin/award-pending",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l()}`},body:JSON.stringify({awards:e,verliehen_von_name:"Admin"})})).ok&&(w([]),O())}catch(r){console.error("Fehler beim Verleihen:",r)}},style:{background:"linear-gradient(135deg, #22c55e, #16a34a)",border:"none",color:"white",padding:"0.4rem 1rem",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,display:"flex",alignItems:"center",gap:"0.5rem"},children:[r.jsx(c,{size:16})," ",k.length," verleihen"]})]})]}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem",maxHeight:"400px",overflowY:"auto"},children:U.map((e,i)=>{const a=`${e.mitglied_id}_${e.badge_id}`,l=k.includes(a),n=E(e.badge_icon);return r.jsxs("div",{onClick:()=>(e=>{const r=`${e.mitglied_id}_${e.badge_id}`;w(e=>e.includes(r)?e.filter(e=>e!==r):[...e,r])})(e),style:{background:l?"rgba(34, 197, 94, 0.15)":"rgba(255,255,255,0.03)",borderRadius:"8px",padding:"0.75rem",border:l?"2px solid #22c55e":"1px solid rgba(255,255,255,0.1)",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",transition:"all 0.2s ease"},children:[r.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:`linear-gradient(135deg, ${e.badge_farbe}40, ${e.badge_farbe}20)`,border:`2px solid ${e.badge_farbe}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(n,{size:20,color:e.badge_farbe})}),r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{fontWeight:600,color:"rgba(255,255,255,0.9)",fontSize:"0.9rem"},children:[e.vorname," ",e.nachname]}),r.jsx("div",{style:{color:e.badge_farbe,fontSize:"0.8rem",fontWeight:500},children:e.badge_name}),r.jsxs("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.7rem"},children:[e.aktueller_wert," ",e.kriterium]})]}),r.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",border:l?"2px solid #22c55e":"2px solid rgba(255,255,255,0.2)",background:l?"#22c55e":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:l&&r.jsx(c,{size:16,color:"white"})})]},i)})})]})]}),"verwalten"===M&&r.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"12px",padding:"1.25rem",border:"1px solid rgba(255, 215, 0, 0.2)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[r.jsx("h3",{style:{color:"#ffd700",margin:0,fontSize:"1rem"},children:"Badge-Definitionen"}),r.jsxs("button",{onClick:()=>{D({name:"",beschreibung:"",icon:"award",farbe:"#FFD700",kategorie:"special",kriterium_typ:"",kriterium_wert:null,aktiv:!0}),W(!0)},style:{background:"linear-gradient(135deg, #22c55e, #16a34a)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:600},children:[r.jsx(o,{size:16})," Neuer Badge"]})]}),r.jsx("div",{style:{display:"grid",gap:"0.75rem"},children:f.badges.map(e=>{const i=E(e.icon);return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",background:"rgba(255,255,255,0.03)",borderRadius:"8px",padding:"0.75rem",border:"1px solid rgba(255,255,255,0.1)"},children:[r.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",background:`linear-gradient(135deg, ${e.farbe}40, ${e.farbe}20)`,border:`2px solid ${e.farbe}`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r.jsx(i,{size:24,color:e.farbe})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:600,color:e.farbe,fontSize:"1rem"},children:e.name}),r.jsx("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.8rem"},children:e.beschreibung||"Keine Beschreibung"}),r.jsxs("div",{style:{color:"rgba(255,255,255,0.4)",fontSize:"0.75rem",marginTop:"0.25rem"},children:[e.kategorie.toUpperCase()," | ",e.kriterium_typ?`${e.kriterium_wert} ${e.kriterium_typ.replace("_"," ")}`:"Manuell"]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("button",{onClick:()=>{D(e),W(!0)},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#3b82f6",padding:"0.4rem",borderRadius:"6px",cursor:"pointer"},children:r.jsx(b,{size:16})}),r.jsx("button",{onClick:()=>(async e=>{if(confirm("Badge wirklich deaktivieren?"))try{(await fetch(`/api/badges/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${l()}`}})).ok&&O()}catch(r){console.error("Fehler beim Loeschen:",r)}})(e.badge_id),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444",padding:"0.4rem",borderRadius:"6px",cursor:"pointer"},children:r.jsx(m,{size:16})})]})]},e.badge_id)})})]}),S&&r.jsx("div",{onClick:()=>C(!1),style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"#1a1a1a",borderRadius:"12px",padding:"1.5rem",width:"400px",maxWidth:"90%",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[r.jsx("h3",{style:{color:"#ffd700",margin:"0 0 1rem 0"},children:"Badge manuell verleihen"}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsxs("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:["Mitglied (",(null==(p=f.members)?void 0:p.length)||0," verfuegbar)"]}),r.jsxs("select",{value:F.mitglied_id||"",onChange:e=>P({...F,mitglied_id:e.target.value}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem",cursor:"pointer"},children:[r.jsx("option",{value:"",children:"Mitglied waehlen..."}),null==(u=f.members)?void 0:u.slice().sort((e,r)=>`${e.nachname} ${e.vorname}`.localeCompare(`${r.nachname} ${r.vorname}`)).map(e=>r.jsxs("option",{value:e.mitglied_id,children:[e.nachname,", ",e.vorname]},e.mitglied_id))]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Badge"}),r.jsxs("select",{value:F.badge_id||"",onChange:e=>P({...F,badge_id:e.target.value}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem",cursor:"pointer"},children:[r.jsx("option",{value:"",children:"Badge waehlen..."}),null==(h=f.badges)?void 0:h.map(e=>r.jsxs("option",{value:e.badge_id,children:[e.name," (",e.kategorie,")"]},e.badge_id))]})]}),r.jsxs("div",{style:{marginBottom:"1.5rem"},children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Kommentar (optional)"}),r.jsx("input",{type:"text",value:F.kommentar||"",onChange:e=>P({...F,kommentar:e.target.value}),placeholder:"Grund fuer die Auszeichnung...",style:{width:"100%",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem"}})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>C(!1),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"rgba(255,255,255,0.7)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer"},children:"Abbrechen"}),r.jsx("button",{onClick:async()=>{if(F.mitglied_id&&F.badge_id)try{(await fetch(`/api/badges/mitglied/${F.mitglied_id}/${F.badge_id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l()}`},body:JSON.stringify({verliehen_von_name:"Admin",kommentar:F.kommentar})})).ok&&(C(!1),P({mitglied_id:null,badge_id:null}),O())}catch(e){console.error("Fehler beim manuellen Verleihen:",e)}},disabled:!F.mitglied_id||!F.badge_id,style:{background:"linear-gradient(135deg, #22c55e, #16a34a)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600,opacity:F.mitglied_id&&F.badge_id?1:.5},children:"Verleihen"})]})]})}),T&&L&&r.jsx("div",{onClick:()=>W(!1),style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:r.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"#1a1a1a",borderRadius:"12px",padding:"1.5rem",width:"500px",maxWidth:"90%",maxHeight:"90vh",overflowY:"auto",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[r.jsx("h3",{style:{color:"#ffd700",margin:"0 0 1rem 0"},children:L.badge_id?"Badge bearbeiten":"Neuer Badge"}),r.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1.5rem"},children:r.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:`linear-gradient(135deg, ${L.farbe}40, ${L.farbe}20)`,border:`3px solid ${L.farbe}`,display:"flex",alignItems:"center",justifyContent:"center"},children:i.createElement(E(L.icon),{size:40,color:L.farbe})})}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Name *"}),r.jsx("input",{type:"text",value:L.name,onChange:e=>D({...L,name:e.target.value}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem"}})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Kategorie *"}),r.jsx("select",{value:L.kategorie,onChange:e=>D({...L,kategorie:e.target.value}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem"},children:$.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),r.jsxs("div",{style:{marginBottom:"1rem"},children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Beschreibung"}),r.jsx("textarea",{value:L.beschreibung||"",onChange:e=>D({...L,beschreibung:e.target.value}),rows:2,style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem",resize:"vertical"}})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Icon *"}),r.jsx("select",{value:L.icon,onChange:e=>D({...L,icon:e.target.value}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem"},children:R.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Farbe *"}),r.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:I.map(e=>r.jsx("div",{onClick:()=>D({...L,farbe:e}),style:{width:"28px",height:"28px",borderRadius:"50%",background:e,cursor:"pointer",border:L.farbe===e?"3px solid white":"2px solid rgba(255,255,255,0.2)"}},e))})]})]}),r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Kriterium"}),r.jsx("select",{value:L.kriterium_typ||"",onChange:e=>D({...L,kriterium_typ:e.target.value||null}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem"},children:A.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),L.kriterium_typ&&r.jsxs("div",{children:[r.jsx("label",{style:{display:"block",color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",marginBottom:"0.5rem"},children:"Wert"}),r.jsx("input",{type:"number",value:L.kriterium_wert||"",onChange:e=>D({...L,kriterium_wert:parseInt(e.target.value)||null}),style:{width:"100%",background:"#2a2a2a",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",padding:"0.6rem",color:"white",fontSize:"0.9rem"}})]})]}),r.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>{W(!1),D(null)},style:{background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"rgba(255,255,255,0.7)",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer"},children:"Abbrechen"}),r.jsx("button",{onClick:async()=>{if((null==L?void 0:L.name)&&(null==L?void 0:L.icon)&&(null==L?void 0:L.farbe)&&(null==L?void 0:L.kategorie))try{const e=!L.badge_id,r=e?"/api/badges":`/api/badges/${L.badge_id}`,i=e?"POST":"PUT",a=await fetch(r,{method:i,headers:{"Content-Type":"application/json",Authorization:`Bearer ${l()}`},body:JSON.stringify(L)});if(a.ok)W(!1),D(null),O();else{const e=await a.json();alert(e.error||"Fehler beim Speichern")}}catch(e){console.error("Fehler beim Speichern:",e)}else alert("Bitte alle Pflichtfelder ausfuellen")},style:{background:"linear-gradient(135deg, #22c55e, #16a34a)",border:"none",color:"white",padding:"0.5rem 1rem",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Speichern"})]})]})})]})};export{T as default};
