import{j as e}from"./animation-1wuIdCBS.js";import{r as t}from"./vendor-router-BhMXg4Z-.js";import{b as a,a as i}from"./index-BJCk5MxH.js";/* empty css                     */import{aI as s,g as n,t as r,o as l,P as d,J as o,K as m,aO as c,D as g,C as b,aU as h,X as p,N as x}from"./icons-C6KFH58b.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";const u=()=>{const{activeDojo:u}=a(),[j,f]=t.useState([]),[y,v]=t.useState(!0),[_,z]=t.useState(null),[N,k]=t.useState(!1),[S,B]=t.useState({name:"",beschreibung:"",rabatt_typ:"prozent",rabatt_prozent:"",rabatt_betrag_euro:"",gueltig_von:"",gueltig_bis:"",max_nutzungen:"",aktiv:!0,ist_familien_rabatt:!1,familie_position_min:"",familie_position_max:""}),C=()=>u&&"super-admin"!==u?u.id:null;t.useEffect(()=>{w()},[u]);const w=async()=>{try{v(!0);const e=C(),t=e?`?dojo_id=${e}`:"",a=(await i.get(`/tarife/rabatte${t}`)).data;if(a.success){const e=a.data.map(e=>({id:e.rabatt_id,name:e.name,beschreibung:e.beschreibung,rabatt_typ:e.rabatt_typ||"prozent",rabatt_prozent:e.rabatt_prozent?parseFloat(e.rabatt_prozent):null,rabatt_betrag_cents:e.rabatt_betrag_cents,gueltig_von:e.gueltig_von,gueltig_bis:e.gueltig_bis,max_nutzungen:e.max_nutzungen,aktiv:1===e.aktiv,genutzt:e.genutzt||0,ist_familien_rabatt:1===e.ist_familien_rabatt,familie_position_min:e.familie_position_min,familie_position_max:e.familie_position_max}));f(e)}}catch(e){console.error("Fehler beim Laden der Rabatte:",e)}finally{v(!1)}},R=async e=>{try{const t=C(),a=t?`?dojo_id=${t}`:"",s={...e,rabatt_betrag_cents:e.rabatt_betrag_euro?Math.round(100*parseFloat(e.rabatt_betrag_euro.replace(",","."))):null};let n;delete s.rabatt_betrag_euro,n=e.id?await i.put(`/tarife/rabatte/${e.id}${a}`,s):await i.post(`/tarife/rabatte${a}`,s),n.data.success?(await w(),k(!1),z(null),B({name:"",beschreibung:"",rabatt_typ:"prozent",rabatt_prozent:"",rabatt_betrag_euro:"",gueltig_von:"",gueltig_bis:"",max_nutzungen:"",aktiv:!0,ist_familien_rabatt:!1,familie_position_min:"",familie_position_max:""})):alert("Fehler beim Speichern: "+n.data.error)}catch(t){console.error("Fehler beim Speichern des Rabatts:",t),alert("Fehler beim Speichern des Rabatts")}},W=async e=>{if(window.confirm("Sind Sie sicher, dass Sie diesen Rabatt löschen möchten?"))try{const t=C(),a=t?`?dojo_id=${t}`:"",s=await i.delete(`/tarife/rabatte/${e}${a}`);s.data.success?await w():alert("Fehler beim Löschen: "+s.data.error)}catch(t){console.error("Fehler beim Löschen des Rabatts:",t),alert("Fehler beim Löschen des Rabatts")}},F=e=>e?new Date(e).toLocaleDateString("de-DE"):"Unbegrenzt",T=e=>"betrag"===e.rabatt_typ&&e.rabatt_betrag_cents?`${(e.rabatt_betrag_cents/100).toFixed(2)} €`:`${e.rabatt_prozent||0}%`,I=e=>{if(!e.aktiv)return!1;const t=new Date,a=e.gueltig_von?new Date(e.gueltig_von):null,i=e.gueltig_bis?new Date(e.gueltig_bis):null;return!(a&&t<a)&&(!(i&&t>i)&&!(e.max_nutzungen&&e.genutzt>=e.max_nutzungen))},$=e=>({...e,rabatt_betrag_euro:e.rabatt_betrag_cents?(e.rabatt_betrag_cents/100).toFixed(2):"",familie_position_min:e.familie_position_min||"",familie_position_max:e.familie_position_max||""}),G={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem",borderBottom:"1px solid var(--border-color, #e5e7eb)",background:"var(--card-bg, #1e293b)",borderRadius:"0.5rem 0.5rem 0 0"},L={margin:0,fontSize:"1.25rem",fontWeight:"600",color:"var(--text-primary, #f8fafc)"};if(y)return e.jsx("div",{className:"tarife-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Rabatt-Daten..."})]})});const M=j.filter(e=>I(e)),D=j.filter(e=>!I(e));return e.jsxs("div",{className:"tarife-container",children:[e.jsxs("div",{className:"tarife-header",children:[e.jsx("h1",{children:"Rabattsystem"}),e.jsx("p",{children:"Verwalte alle Rabatte und Sonderkonditionen für Mitgliedschaften"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(s,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Gesamt Rabatte"}),e.jsx("p",{className:"stat-value",children:j.length}),e.jsx("span",{className:"stat-trend",children:"definiert"})]})]}),e.jsxs("div",{className:"stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(n,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Aktive Rabatte"}),e.jsx("p",{className:"stat-value",children:M.length}),e.jsx("span",{className:"stat-trend",children:"aktuell nutzbar"})]})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(r,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Inaktive Rabatte"}),e.jsx("p",{className:"stat-value",children:D.length}),e.jsx("span",{className:"stat-trend",children:"abgelaufen/deaktiviert"})]})]}),e.jsxs("div",{className:"stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(l,{size:32})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:"Gesamtnutzungen"}),e.jsx("p",{className:"stat-value",children:j.reduce((e,t)=>e+(t.genutzt||0),0)}),e.jsx("span",{className:"stat-trend",children:"angewendet"})]})]})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:[e.jsx(n,{size:24})," Aktive Rabatte",e.jsxs("span",{className:"tarif-count",children:["(",M.length,")"]})]}),e.jsx("div",{className:"header-actions",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>k(!0),children:[e.jsx(d,{size:20}),"Neuer Rabatt"]})})]}),0===M.length?e.jsx("div",{className:"info-box",children:e.jsx("p",{children:"Keine aktiven Rabatte vorhanden. Erstellen Sie einen neuen Rabatt."})}):e.jsx("div",{className:"tarife-grid",children:M.map(t=>e.jsxs("div",{className:"tarif-card",children:[e.jsxs("div",{className:"tarif-header",children:[e.jsxs("div",{className:"tarif-title",children:[e.jsx("h3",{children:t.name}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e.jsx("span",{className:"status-badge active",children:"Aktiv"}),t.ist_familien_rabatt&&e.jsxs("span",{className:"status-badge",style:{background:"#8b5cf6"},children:[e.jsx(l,{size:12,style:{marginRight:"0.25rem"}}),"Familie"]})]})]}),e.jsxs("div",{className:"tarif-actions",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>z($(t)),title:"Bearbeiten",children:e.jsx(o,{size:16})}),e.jsx("button",{className:"action-btn delete",onClick:()=>W(t.id),title:"Löschen",children:e.jsx(m,{size:16})})]})]}),e.jsxs("div",{className:"tarif-price",children:[e.jsx("span",{className:"currency",children:(t.rabatt_typ,"-")}),T(t)]}),e.jsxs("div",{className:"tarif-details",children:[t.beschreibung&&e.jsxs("div",{className:"detail-item",style:{gridColumn:"1 / -1"},children:[e.jsxs("span",{className:"label",children:[e.jsx(c,{size:14})," Beschreibung"]}),e.jsx("div",{className:"value",children:t.beschreibung})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:["betrag"===t.rabatt_typ?e.jsx(g,{size:14}):e.jsx(s,{size:14})," Typ"]}),e.jsx("div",{className:"value",children:"betrag"===t.rabatt_typ?"Festbetrag":"Prozent"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(b,{size:14})," Gültig von"]}),e.jsx("div",{className:"value",children:F(t.gueltig_von)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(b,{size:14})," Gültig bis"]}),e.jsx("div",{className:"value",style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:t.gueltig_bis?F(t.gueltig_bis):e.jsxs(e.Fragment,{children:[e.jsx(h,{size:14})," Unbegrenzt"]})})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(l,{size:14})," Nutzungen"]}),e.jsxs("div",{className:"value",children:[t.genutzt||0,t.max_nutzungen?` / ${t.max_nutzungen}`:" (unbegrenzt)"]})]}),t.ist_familien_rabatt&&e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(l,{size:14})," Gilt für"]}),e.jsx("div",{className:"value",children:t.familie_position_min===t.familie_position_max?`${t.familie_position_min}. Familienmitglied`:t.familie_position_max?`${t.familie_position_min}. - ${t.familie_position_max}. Familienmitglied`:`${t.familie_position_min}.+ Familienmitglied`})]})]})]},t.id))})]}),D.length>0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",style:{background:"rgba(107, 114, 128, 0.1)",borderLeft:"4px solid #6b7280"},children:e.jsxs("h2",{style:{color:"#6b7280"},children:[e.jsx(r,{size:24})," Inaktive Rabatte",e.jsxs("span",{className:"tarif-count",children:["(",D.length,")"]})]})}),e.jsx("div",{className:"tarife-grid",children:D.map(t=>e.jsxs("div",{className:"tarif-card",style:{opacity:.7,border:"2px solid #6b7280"},children:[e.jsxs("div",{className:"tarif-header",children:[e.jsxs("div",{className:"tarif-title",children:[e.jsx("h3",{children:t.name}),e.jsx("span",{className:"status-badge",style:{background:"#6b7280"},children:"Inaktiv"})]}),e.jsxs("div",{className:"tarif-actions",children:[e.jsx("button",{className:"action-btn edit",onClick:()=>z($(t)),title:"Bearbeiten",children:e.jsx(o,{size:16})}),e.jsx("button",{className:"action-btn delete",onClick:()=>W(t.id),title:"Löschen",children:e.jsx(m,{size:16})})]})]}),e.jsxs("div",{className:"tarif-price",children:[e.jsx("span",{className:"currency",children:"-"}),T(t)]}),e.jsxs("div",{className:"tarif-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(b,{size:14})," Gültig von"]}),e.jsx("div",{className:"value",children:F(t.gueltig_von)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsxs("span",{className:"label",children:[e.jsx(b,{size:14})," Gültig bis"]}),e.jsx("div",{className:"value",children:F(t.gueltig_bis)})]})]})]},t.id))})]}),N&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{style:G,children:[e.jsx("h3",{style:L,children:"Neuer Rabatt"}),e.jsx("button",{className:"close-btn",onClick:()=>k(!1),style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem"},children:e.jsx(p,{size:20,style:{color:"var(--text-primary, #f8fafc)"}})})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),e.jsx("input",{type:"text",value:S.name,onChange:e=>B({...S,name:e.target.value}),placeholder:"z.B. Familienrabatt, Studentenrabatt",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Beschreibung"}),e.jsx("textarea",{value:S.beschreibung,onChange:e=>B({...S,beschreibung:e.target.value}),placeholder:"Beschreibung des Rabatts...",rows:3,style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Typ *"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"rabatt_typ",value:"prozent",checked:"prozent"===S.rabatt_typ,onChange:e=>B({...S,rabatt_typ:e.target.value,rabatt_betrag_euro:""})}),e.jsx(s,{size:16})," Prozent"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"rabatt_typ",value:"betrag",checked:"betrag"===S.rabatt_typ,onChange:e=>B({...S,rabatt_typ:e.target.value,rabatt_prozent:""})}),e.jsx(g,{size:16})," Festbetrag"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:["prozent"===S.rabatt_typ?e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt (%) *"}),e.jsx("input",{type:"number",min:"1",max:"100",value:S.rabatt_prozent,onChange:e=>B({...S,rabatt_prozent:e.target.value}),placeholder:"z.B. 10",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}):e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Betrag (EUR) *"}),e.jsx("input",{type:"text",inputMode:"decimal",value:S.rabatt_betrag_euro,onChange:e=>B({...S,rabatt_betrag_euro:e.target.value}),placeholder:"z.B. 5.00 oder 10,50",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Max. Nutzungen"}),e.jsx("input",{type:"number",min:"0",value:S.max_nutzungen,onChange:e=>B({...S,max_nutzungen:e.target.value}),placeholder:"Leer = unbegrenzt",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Gültig von *"}),e.jsx("input",{type:"date",value:S.gueltig_von,onChange:e=>B({...S,gueltig_von:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Gültig bis ",e.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),e.jsx("input",{type:"date",value:S.gueltig_bis,onChange:e=>B({...S,gueltig_bis:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:S.aktiv,onChange:e=>B({...S,aktiv:e.target.checked})}),"Rabatt ist aktiv"]})}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"var(--background-secondary, #f3f4f6)",borderRadius:"0.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer",marginBottom:"0.75rem"},children:[e.jsx("input",{type:"checkbox",checked:S.ist_familien_rabatt,onChange:e=>B({...S,ist_familien_rabatt:e.target.checked})}),e.jsx(l,{size:16}),"Familien-Rabatt (für 2., 3., ... Familienmitglied)"]}),S.ist_familien_rabatt&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Ab Position *"}),e.jsx("input",{type:"number",min:"2",value:S.familie_position_min,onChange:e=>B({...S,familie_position_min:e.target.value}),placeholder:"z.B. 2 für 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Bis Position ",e.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),e.jsx("input",{type:"number",min:"2",value:S.familie_position_max,onChange:e=>B({...S,familie_position_max:e.target.value}),placeholder:"z.B. 2 für nur 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>k(!1),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>R(S),disabled:!(S.name&&S.gueltig_von&&("prozent"===S.rabatt_typ?S.rabatt_prozent:S.rabatt_betrag_euro)),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(x,{size:16}),"Speichern"]})]})]})]})}),_&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",style:{maxWidth:"600px"},children:[e.jsxs("div",{style:G,children:[e.jsx("h3",{style:L,children:"Rabatt bearbeiten"}),e.jsx("button",{className:"close-btn",onClick:()=>z(null),style:{background:"transparent",border:"none",cursor:"pointer",padding:"0.5rem"},children:e.jsx(p,{size:20,style:{color:"var(--text-primary, #f8fafc)"}})})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Name *"}),e.jsx("input",{type:"text",value:_.name,onChange:e=>z({..._,name:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Beschreibung"}),e.jsx("textarea",{value:_.beschreibung||"",onChange:e=>z({..._,beschreibung:e.target.value}),rows:3,style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Typ *"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"edit_rabatt_typ",value:"prozent",checked:"prozent"===_.rabatt_typ,onChange:e=>z({..._,rabatt_typ:e.target.value,rabatt_betrag_euro:""})}),e.jsx(s,{size:16})," Prozent"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"edit_rabatt_typ",value:"betrag",checked:"betrag"===_.rabatt_typ,onChange:e=>z({..._,rabatt_typ:e.target.value,rabatt_prozent:null})}),e.jsx(g,{size:16})," Festbetrag"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:["prozent"===_.rabatt_typ?e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt (%) *"}),e.jsx("input",{type:"number",min:"1",max:"100",value:_.rabatt_prozent||"",onChange:e=>z({..._,rabatt_prozent:parseFloat(e.target.value)}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}):e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Rabatt-Betrag (EUR) *"}),e.jsx("input",{type:"text",inputMode:"decimal",value:_.rabatt_betrag_euro||"",onChange:e=>z({..._,rabatt_betrag_euro:e.target.value}),placeholder:"z.B. 5.00 oder 10,50",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Max. Nutzungen"}),e.jsx("input",{type:"number",min:"0",value:_.max_nutzungen||"",onChange:e=>z({..._,max_nutzungen:e.target.value?parseInt(e.target.value):null}),placeholder:"Leer = unbegrenzt",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Gültig von *"}),e.jsx("input",{type:"date",value:_.gueltig_von?_.gueltig_von.split("T")[0]:"",onChange:e=>z({..._,gueltig_von:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Gültig bis ",e.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),e.jsx("input",{type:"date",value:_.gueltig_bis?_.gueltig_bis.split("T")[0]:"",onChange:e=>z({..._,gueltig_bis:e.target.value}),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:_.aktiv,onChange:e=>z({..._,aktiv:e.target.checked})}),"Rabatt ist aktiv"]})}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"var(--background-secondary, #f3f4f6)",borderRadius:"0.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",cursor:"pointer",marginBottom:"0.75rem"},children:[e.jsx("input",{type:"checkbox",checked:_.ist_familien_rabatt,onChange:e=>z({..._,ist_familien_rabatt:e.target.checked})}),e.jsx(l,{size:16}),"Familien-Rabatt (für 2., 3., ... Familienmitglied)"]}),_.ist_familien_rabatt&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginTop:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:"Ab Position *"}),e.jsx("input",{type:"number",min:"2",value:_.familie_position_min||"",onChange:e=>z({..._,familie_position_min:e.target.value}),placeholder:"z.B. 2 für 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.4rem",fontSize:"0.875rem",fontWeight:"500"},children:["Bis Position ",e.jsx("span",{style:{fontWeight:"normal",color:"#6b7280"},children:"(leer = unbegrenzt)"})]}),e.jsx("input",{type:"number",min:"2",value:_.familie_position_max||"",onChange:e=>z({..._,familie_position_max:e.target.value}),placeholder:"z.B. 2 für nur 2. Mitglied",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem"}})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end",borderTop:"1px solid #e5e7eb",paddingTop:"1rem"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>z(null),style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:"Abbrechen"}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>R(_),disabled:!_.name||("prozent"===_.rabatt_typ?!_.rabatt_prozent:!_.rabatt_betrag_euro),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(x,{size:16}),"Speichern"]})]})]})]})})]})};export{u as default};
