import{j as e,A as r,m as i}from"./animation-1wuIdCBS.js";import{r as n,u as t,g as a,f as s,b as l}from"./vendor-router-BhMXg4Z-.js";import{g as o}from"./index-BJCk5MxH.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-C6KFH58b.js";var d,c;(c=d||(d={})).DragStart="dragStart",c.DragMove="dragMove",c.DragEnd="dragEnd",c.DragCancel="dragCancel",c.DragOver="dragOver",c.RegisterDroppable="registerDroppable",c.SetDroppableDisabled="setDroppableDisabled",c.UnregisterDroppable="unregisterDroppable";var g,u,h,m,p,b,x,f,j,y,k,v,S,z,w,N,_;function F(e,r,i){const n=e.slice();return n.splice(i<0?n.length+i:i,0,n.splice(r,1)[0]),n}(u=g||(g={}))[u.Forward=1]="Forward",u[u.Backward=-1]="Backward",(m=h||(h={})).Click="click",m.DragStart="dragstart",m.Keydown="keydown",m.ContextMenu="contextmenu",m.Resize="resize",m.SelectionChange="selectionchange",m.VisibilityChange="visibilitychange",(b=p||(p={})).Space="Space",b.Down="ArrowDown",b.Right="ArrowRight",b.Left="ArrowLeft",b.Up="ArrowUp",b.Esc="Escape",b.Enter="Enter",b.Tab="Tab",p.Space,p.Enter,p.Esc,p.Space,p.Enter,p.Tab,(f=x||(x={}))[f.RightClick=2]="RightClick",(y=j||(j={}))[y.Pointer=0]="Pointer",y[y.DraggableRect=1]="DraggableRect",(v=k||(k={}))[v.TreeOrder=0]="TreeOrder",v[v.ReversedTreeOrder=1]="ReversedTreeOrder",g.Backward,g.Forward,g.Backward,g.Forward,(z=S||(S={}))[z.Always=0]="Always",z[z.BeforeDragging=1]="BeforeDragging",z[z.WhileDragging=2]="WhileDragging",(w||(w={})).Optimized="optimized",S.WhileDragging,w.Optimized,(_=N||(N={}))[_.Uninitialized=0]="Uninitialized",_[_.Initializing=1]="Initializing",_[_.Initialized=2]="Initialized",p.Down,p.Right,p.Up,p.Left;const C=({grad:r,stilId:i,API_BASE:t})=>{const[a,s]=n.useState(!1),[l,o]=n.useState([]),[d,c]=n.useState(!1);return e.jsxs("div",{style:{borderRadius:"8px",overflow:"hidden",marginBottom:"8px"},children:[e.jsxs("div",{onClick:async()=>{if(!a&&0===l.length){c(!0);try{const e=await fetch(`${t}/stile/${i}/graduierungen/${r.graduierung_id}/mitglieder`);if(e.ok){const r=await e.json();o(r.mitglieder||[])}}catch(e){console.error("Fehler beim Laden der Mitglieder:",e)}finally{c(!1)}}s(!a)},style:{padding:"12px 15px",background:"rgba(255,255,255,0.05)",borderLeft:`4px solid ${r.farbe_hex||"#FFD700"}`,display:"flex",justifyContent:"space-between",alignItems:"center",transition:"transform 0.2s ease, background 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateX(5px)",e.currentTarget.style.background="rgba(255,255,255,0.08)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateX(0)",e.currentTarget.style.background="rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,0.9)",fontSize:"14px",fontWeight:"500"},children:r.graduierung}),e.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.5)",transform:a?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s ease"},children:"‚ñº"})]}),e.jsxs("span",{style:{color:"#FFD700",fontWeight:"bold",fontSize:"16px"},children:[r.anzahl_mitglieder||0," ",e.jsx("span",{style:{fontSize:"13px",fontWeight:"normal",color:"rgba(255,215,0,0.7)"},children:"Sch√ºler"})]})]}),a&&e.jsx("div",{style:{background:"rgba(0,0,0,0.3)",padding:"10px 15px",borderLeft:`4px solid ${r.farbe_hex||"#FFD700"}`,borderTop:"1px solid rgba(255,255,255,0.1)"},children:d?e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"13px",margin:0},children:"Lade Mitglieder..."}):0===l.length?e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"13px",margin:0},children:"Keine Mitglieder mit diesem G√ºrtel"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:l.map(r=>e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(255,255,255,0.05)",borderRadius:"4px",fontSize:"13px",color:"rgba(255,255,255,0.9)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:[r.nachname,", ",r.vorname]}),r.geburtsdatum&&e.jsxs("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.5)"},children:[(new Date).getFullYear()-new Date(r.geburtsdatum).getFullYear()," Jahre"]})]},r.mitglied_id))})})]})},B=()=>{var d,c,g,u,h,m,p,b,x,f,j;const y=t(),{stilId:k}=a(),[v,S]=n.useState([]),[z,w]=n.useState(null),[N,_]=n.useState(!1),[B,D]=n.useState(""),[I,A]=n.useState(""),[R,T]=n.useState("allgemein"),[G,W]=n.useState([]),[P,$]=n.useState(null),[M,E]=n.useState(null),[L,U]=n.useState(!1),[K,O]=n.useState(!1),[J,H]=n.useState(1),[V,Y]=n.useState(!1),[q,X]=n.useState(null),[Z,Q]=n.useState(!1),[ee,re]=n.useState(null),[ie,ne]=n.useState([]),[te,ae]=n.useState(null),[se,le]=n.useState(!1),[oe,de]=n.useState(null),[ce,ge]=n.useState(null),[ue,he]=n.useState(""),[me,pe]=n.useState(!1),[be,xe]=n.useState(null),[fe,je]=n.useState({name:"",beschreibung:"",aktiv:!0,kategorie:"kampfkunst",schwierigkeitsgrad:"mittel",altergruppe:"alle",trainingsdauer:60,ausruestung:[]}),ye=null==(d=o)?void 0:d.apiBaseUrl,ke=[{name:"Wei√ügurt",primaer:"#FFFFFF",sekundaer:null,kategorie:"grundstufe",reihenfolge:1},{name:"Wei√ü-Gelbgurt",primaer:"#FFFFFF",sekundaer:"#FFD700",kategorie:"grundstufe",reihenfolge:2},{name:"Gelbgurt",primaer:"#FFD700",sekundaer:null,kategorie:"grundstufe",reihenfolge:3},{name:"Gelb-Gr√ºngurt",primaer:"#FFD700",sekundaer:"#32CD32",kategorie:"grundstufe",reihenfolge:4},{name:"Gelb-Orangegurt",primaer:"#FFD700",sekundaer:"#FF8C00",kategorie:"grundstufe",reihenfolge:5},{name:"Orangegurt",primaer:"#FF8C00",sekundaer:null,kategorie:"grundstufe",reihenfolge:6},{name:"Orange-Gr√ºngurt",primaer:"#FF8C00",sekundaer:"#32CD32",kategorie:"mittelstufe",reihenfolge:7},{name:"Gr√ºngurt",primaer:"#32CD32",sekundaer:null,kategorie:"mittelstufe",reihenfolge:8},{name:"Gr√ºn-Blaugurt",primaer:"#32CD32",sekundaer:"#0066CC",kategorie:"mittelstufe",reihenfolge:9},{name:"Blaugurt",primaer:"#0066CC",sekundaer:null,kategorie:"mittelstufe",reihenfolge:10},{name:"Blau-Rotgurt",primaer:"#0066CC",sekundaer:"#DC143C",kategorie:"oberstufe",reihenfolge:11},{name:"Rotgurt",primaer:"#DC143C",sekundaer:null,kategorie:"oberstufe",reihenfolge:12},{name:"Blau-Braungurt",primaer:"#0066CC",sekundaer:"#8B4513",kategorie:"oberstufe",reihenfolge:13},{name:"Braungurt",primaer:"#8B4513",sekundaer:null,kategorie:"oberstufe",reihenfolge:14},{name:"Rot-Schwarzgurt",primaer:"#DC143C",sekundaer:"#000000",kategorie:"oberstufe",reihenfolge:15},{name:"Braun-Schwarzgurt",primaer:"#8B4513",sekundaer:"#000000",kategorie:"oberstufe",reihenfolge:16},{name:"1.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:1,reihenfolge:17},{name:"2.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:2,reihenfolge:18},{name:"3.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:3,reihenfolge:19},{name:"4.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:4,reihenfolge:20},{name:"5.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:5,reihenfolge:21},{name:"6.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:6,reihenfolge:22},{name:"7.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:7,reihenfolge:23},{name:"8.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:8,reihenfolge:24},{name:"9.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:9,reihenfolge:25},{name:"10.DAN Schwarzgurt",primaer:"#000000",sekundaer:null,kategorie:"dan",dan:10,reihenfolge:26},{name:"Rot-Wei√ügurt",primaer:"#DC143C",sekundaer:"#FFFFFF",kategorie:"meister",reihenfolge:27}],ve=({primaer:r,sekundaer:i,size:n="normal",className:t=""})=>{const a={small:"belt-preview-small",normal:"belt-preview",large:"belt-preview-large"}[n]||"belt-preview";return e.jsx("div",{className:`${a} ${t}`,children:e.jsx("div",{className:"belt-base",style:{backgroundColor:r||"#CCCCCC"},children:i&&e.jsx("div",{className:"belt-stripe",style:{backgroundColor:i}})})})},Se=async e=>{const r=await fetch(`${ye}/stile/${z.stil_id}/graduierungen/reorder`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({graduierungen:e.map(e=>({graduierung_id:e.graduierung_id,reihenfolge:e.reihenfolge}))})});if(!r.ok)throw new Error("Fehler beim Aktualisieren der Reihenfolge");return await r.json()},ze=async e=>{try{const r=[...z.graduierungen].sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)),i=r.findIndex(r=>r.graduierung_id===e.graduierung_id);if(i>0){const e=F(r,i,i-1);e.forEach((e,r)=>{e.reihenfolge=r+1}),w({...z,graduierungen:e}),Se(e).catch(e=>{console.error("Backend update failed:",e),D("Fehler beim Speichern der Reihenfolge")})}}catch(r){D("Fehler beim Verschieben")}},we=async e=>{try{const r=[...z.graduierungen].sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)),i=r.findIndex(r=>r.graduierung_id===e.graduierung_id);if(i>=0&&i<r.length-1){const e=F(r,i,i+1);e.forEach((e,r)=>{e.reihenfolge=r+1}),w({...z,graduierungen:e}),Se(e).catch(e=>{console.error("Backend update failed:",e),D("Fehler beim Speichern der Reihenfolge")})}}catch(r){D("Fehler beim Verschieben")}},Ne=async()=>{_(!0),console.log("üîÑ Lade Stile von:",`${ye}/stile`),console.log("üîß API_BASE ist:",ye);try{const e=await fetch(`${ye}/stile`);if(console.log("üì° API Response Status:",e.status),console.log("üì° API Response OK:",e.ok),e.ok){const r=await e.json();console.log("‚úÖ Stile geladen:",r),console.log("‚úÖ Anzahl Stile:",r.length),S(r)}else{const r=await e.text();console.error("‚ùå API Fehler:",e.status,r),S([]),D(`API Fehler ${e.status}: ${r}`)}}catch(e){console.error("‚ùå Fehler beim Laden der Stile:",e),D("Stile konnten nicht geladen werden. Bitte Server pr√ºfen.")}finally{_(!1)}},_e=async e=>{if(e){_(!0);try{const r=await fetch(`${ye}/stile/${e}`);if(r.ok){const e=await r.json();w(e),console.log("‚úÖ Stil geladen:",e.name)}else{const r=v.find(r=>r.stil_id===parseInt(e));r?w(r):D("Stil nicht gefunden")}}catch(r){console.error("‚ùå Fehler beim Laden des Stils:",r),D("Stil konnte nicht geladen werden")}finally{_(!1)}}},Fe=async e=>{if(z){_(!0);try{console.log("üì§ Sende Stil-Update:",e);const r=await fetch(`${ye}/stile/${z.stil_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){const e=await r.json();console.log("‚úÖ Stil-Update erfolgreich, Antwort:",e),w(e),S(v.map(r=>r.stil_id===z.stil_id?e:r)),A("Stil erfolgreich aktualisiert!"),setTimeout(()=>A(""),2e3)}else{const e=await r.json().catch(()=>({error:"Unbekannter Fehler"}));console.error("‚ùå Stil-Update fehlgeschlagen:",e),D(e.error||"Fehler beim Aktualisieren des Stils")}}catch(r){console.error("‚ùå Fehler beim Aktualisieren des Stils:",r),D("Stil konnte nicht aktualisiert werden")}finally{_(!1)}}},Ce=async e=>{var r;if(!e)return;const i=v.find(r=>r.stil_id===e);if(!i)return;if(i.anzahl_mitglieder&&i.anzahl_mitglieder>0||i.graduierungen&&i.graduierungen.length>0){if(confirm(`Der Stil "${i.name}" hat bereits Daten (${i.anzahl_mitglieder||0} Sch√ºler, ${(null==(r=i.graduierungen)?void 0:r.length)||0} Graduierungen).\n\nL√∂schen ist nicht m√∂glich. M√∂chten Sie den Stil stattdessen deaktivieren?\n\nDeaktivierte Stile werden nicht mehr in der Sch√ºlerverwaltung angezeigt.`)){_(!0);try{const r=await fetch(`${ye}/stile/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.name,beschreibung:i.beschreibung||"",aktiv:!1})});if(r.ok){const n=await r.json();S(v.map(r=>r.stil_id===e?n:r)),A(`Stil "${i.name}" wurde deaktiviert.`),setTimeout(()=>A(""),3e3),console.log("‚úÖ Stil deaktiviert:",e)}else{const e=await r.json().catch(()=>({error:"Unbekannter Fehler"}));D(e.error||"Fehler beim Deaktivieren des Stils")}}catch(n){console.error("‚ùå Fehler beim Deaktivieren des Stils:",n),D("Stil konnte nicht deaktiviert werden")}finally{_(!1)}}}else{if(confirm(`M√∂chten Sie den Stil "${i.name}" wirklich l√∂schen?\n\nDiese Aktion kann nicht r√ºckg√§ngig gemacht werden!`)){_(!0);try{const r=await fetch(`${ye}/stile/${e}`,{method:"DELETE"});if(r.ok){const n=await r.json();S(v.map(r=>r.stil_id===e?{...r,aktiv:!1}:r)),z&&z.stil_id===e&&(w(null),y("/dashboard/stile")),A(`Stil "${i.name}" wurde erfolgreich gel√∂scht (deaktiviert)!`),setTimeout(()=>A(""),3e3),console.log("‚úÖ Stil gel√∂scht:",n)}else if(409===r.status){const e=await r.json().catch(()=>({error:"Stil hat noch zugeordnete Mitglieder"})),n=e.mitglieder_anzahl||"mehrere";D(`Stil "${i.name}" kann nicht gel√∂scht werden!\n\nEs sind noch ${n} aktive Mitglieder diesem Stil zugeordnet.\n\nBitte weisen Sie die Mitglieder einem anderen Stil zu oder deaktivieren Sie diese zuerst.`),console.warn("‚ö†Ô∏è Stil-L√∂schung verhindert:",e)}else{const e=await r.json().catch(()=>({error:"Unbekannter Fehler"}));D(e.error||"Fehler beim L√∂schen des Stils"),console.error("‚ùå Fehler beim L√∂schen:",e)}}catch(n){console.error("‚ùå Fehler beim L√∂schen des Stils:",n),D("Stil konnte nicht gel√∂scht werden")}finally{_(!1)}}}},Be=async e=>{if(z){_(!0);try{const r=await fetch(`${ye}/stile/${z.stil_id}/graduierungen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,trainingsstunden_min:e.trainingsstunden_min,mindestzeit_monate:e.mindestzeit_monate,farbe_hex:e.farbe_hex,farbe_sekundaer:e.farbe_sekundaer||null,kategorie:e.kategorie||null,dan_grad:e.dan_grad||null})});if(r.ok){const e=await r.json(),i={...z,graduierungen:[...z.graduierungen||[],e]};w(i),S(v.map(e=>e.stil_id===z.stil_id?i:e)),A("Graduierung erfolgreich hinzugef√ºgt!"),setTimeout(()=>A(""),2e3),console.log("‚úÖ Graduierung hinzugef√ºgt:",e)}else{const e=await r.json().catch(()=>({error:"Unbekannter Fehler"}));D(e.error||"Fehler beim Hinzuf√ºgen der Graduierung")}}catch(r){console.error("‚ùå Fehler beim Hinzuf√ºgen der Graduierung:",r),D("Graduierung konnte nicht hinzugef√ºgt werden")}finally{_(!1)}}},De=async e=>{if(z&&confirm("Graduierung wirklich l√∂schen?")){_(!0);try{const r=await fetch(`${ye}/stile/graduierungen/${e}`,{method:"DELETE"});if(r.ok){const r={...z,graduierungen:z.graduierungen.filter(r=>r.graduierung_id!==e)};w(r),S(v.map(e=>e.stil_id===z.stil_id?r:e)),A("Graduierung erfolgreich gel√∂scht!"),setTimeout(()=>A(""),2e3),console.log("‚úÖ Graduierung gel√∂scht:",e)}else{const e=await r.json().catch(()=>({error:"Unbekannter Fehler"}));D(e.error||"Fehler beim L√∂schen der Graduierung")}}catch(r){console.error("‚ùå Fehler beim L√∂schen der Graduierung:",r),D("Graduierung konnte nicht gel√∂scht werden")}finally{_(!1)}}},Ie=(e,r)=>{je(i=>({...i,[e]:r}))},Ae=()=>{O(!1),H(1),je({name:"",beschreibung:"",aktiv:!0,kategorie:"kampfkunst",schwierigkeitsgrad:"mittel",altergruppe:"alle",trainingsdauer:60,ausruestung:[]})},Re=e=>{try{X({...e}),Y(!0)}catch(r){console.error("‚ùå Error in handleEditGraduierung:",r)}},Te=()=>{console.log("‚ùå Closing edit modal"),Y(!1),X(null)},Ge=(e,r)=>{ge(e),he(r),de(null),le(!0)},We=(e,r,i)=>{ge(e),he(r),de(i),le(!0)},Pe=async e=>{try{const r=await fetch(`${ye}/stile/${z.stil_id}/graduierungen/${e.graduierung_id}/pruefungsinhalte`);if(r.ok){const i=await r.json(),n={...e,pruefungsinhalte:i.pruefungsinhalte||{}};xe(n),pe(!0)}else console.log("Keine Pr√ºfungsinhalte gefunden, zeige leeres Modal"),xe({...e,pruefungsinhalte:{}}),pe(!0)}catch(r){console.error("Fehler beim Laden der Pr√ºfungsinhalte:",r),xe({...e,pruefungsinhalte:{}}),pe(!0)}},$e=()=>{B&&D(""),I&&A("")};n.useEffect(()=>{Ne()},[]),n.useEffect(()=>{k&&v.length>0?(_e(k),(async e=>{if(e){U(!0);try{const r=await fetch(`${ye}/stile/${e}/statistiken`);if(!r.ok)throw new Error("Fehler beim Laden der Stil-Statistiken");const i=await r.json();$(i);const n=await fetch(`${ye}/pruefungen/stats/statistiken`);if(!n.ok)throw new Error("Fehler beim Laden der Pr√ºfungs-Statistiken");const t=await n.json();E(t.statistiken)}catch(r){console.error("Fehler beim Laden der Statistiken:",r),D("Statistiken konnten nicht geladen werden: "+r.message)}finally{U(!1)}}})(k)):k||(w(null),$(null),E(null))},[k,v]),n.useEffect(()=>{if(B||I){const e=setTimeout($e,5e3);return()=>clearTimeout(e)}},[B,I]);const Me=async e=>{const r=[...v].filter(e=>e.aktiv).sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)),i=r.findIndex(r=>r.stil_id===e.stil_id);if(i<=0)return;const n=r[i-1],t=e.reihenfolge||i+1,a=n.reihenfolge||i;_(!0);try{const r={stile:[{stil_id:parseInt(e.stil_id),reihenfolge:parseInt(a)},{stil_id:parseInt(n.stil_id),reihenfolge:parseInt(t)}]};console.log("üîÑ Move Up Request:",r),console.log("  Current Stil:",e.stil_id,"to",a),console.log("  Prev Stil:",n.stil_id,"to",t);const i=await fetch(`${ye}/stile/reorder`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){const e=await i.json();throw console.error("‚ùå Backend Fehler:",e),new Error(e.error||"Fehler beim Aktualisieren der Reihenfolge")}await Ne(),A("Reihenfolge aktualisiert!"),setTimeout(()=>A(""),2e3)}catch(s){console.error("‚ùå Fehler beim Verschieben:",s),D(s.message||"Fehler beim Verschieben des Stils")}finally{_(!1)}},Ee=async e=>{const r=[...v].filter(e=>e.aktiv).sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)),i=r.findIndex(r=>r.stil_id===e.stil_id);if(i>=r.length-1)return;const n=r[i+1],t=e.reihenfolge||i+1,a=n.reihenfolge||i+2;_(!0);try{const r={stile:[{stil_id:parseInt(e.stil_id),reihenfolge:parseInt(a)},{stil_id:parseInt(n.stil_id),reihenfolge:parseInt(t)}]};console.log("üîÑ Move Down Request:",r),console.log("  Current Stil:",e.stil_id,"to",a),console.log("  Next Stil:",n.stil_id,"to",t);const i=await fetch(`${ye}/stile/reorder`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok){const e=await i.json();throw console.error("‚ùå Backend Fehler:",e),new Error(e.error||"Fehler beim Aktualisieren der Reihenfolge")}await Ne(),A("Reihenfolge aktualisiert!"),setTimeout(()=>A(""),2e3)}catch(s){console.error("‚ùå Fehler beim Verschieben:",s),D(s.message||"Fehler beim Verschieben des Stils")}finally{_(!1)}},Le=({graduierung:r,onEdit:i,onDelete:n,onMoveUp:t,onMoveDown:a,onShowPruefungsinhalte:s,loading:l,isFirst:o,isLast:d})=>e.jsxs("div",{className:"graduierung-item","data-border-color":r.farbe_hex,style:{position:"relative",zIndex:1},children:[e.jsxs("div",{className:"graduierung-header",children:[e.jsxs("div",{className:"graduierung-name",children:[e.jsx(ve,{primaer:r.farbe_hex,sekundaer:r.farbe_sekundaer,size:"normal"}),e.jsx("strong",{children:r.name}),e.jsxs("span",{className:"reihenfolge-badge",children:["#",r.reihenfolge]})]}),e.jsxs("div",{className:"graduierung-actions",style:{position:"relative",zIndex:9999},children:[e.jsx("button",{className:"btn btn-info move-btn move-up",onClick:e=>{e.stopPropagation(),t&&t(r)},disabled:o,title:"Nach oben verschieben",style:{position:"relative",zIndex:1e4,pointerEvents:"auto"},children:"‚Üë"}),e.jsx("button",{className:"btn btn-info move-btn move-down",onClick:e=>{e.stopPropagation(),a&&a(r)},disabled:d,title:"Nach unten verschieben",style:{position:"relative",zIndex:1e4,pointerEvents:"auto"},children:"‚Üì"}),e.jsx("span",{className:"button-divider"}),e.jsx("button",{className:"sub-tab-btn",onClick:e=>{e.stopPropagation(),s&&s(r)},disabled:l,title:"Pr√ºfungsinhalte anzeigen",style:{position:"relative",zIndex:1e4,pointerEvents:"auto",fontSize:"0.85rem",padding:"0.5rem 1rem"},children:"üìù Pr√ºfungsinhalte"}),e.jsx("button",{className:"sub-tab-btn",onClick:e=>{e.stopPropagation(),i&&i(r)},disabled:l,title:"Graduierung bearbeiten",style:{position:"relative",zIndex:1e4,pointerEvents:"auto",fontSize:"0.85rem",padding:"0.5rem 1rem"},children:"‚úèÔ∏è Bearbeiten"}),e.jsx("button",{className:"sub-tab-btn",onClick:e=>{e.stopPropagation(),n(r.graduierung_id)},disabled:l,title:"Graduierung l√∂schen",style:{position:"relative",zIndex:1e4,pointerEvents:"auto",fontSize:"0.85rem",padding:"0.5rem 1rem"},children:"üóëÔ∏è"})]})]}),e.jsxs("div",{className:"graduierung-details",children:[e.jsxs("span",{children:["‚è±Ô∏è ",r.trainingsstunden_min,"h Training"]}),e.jsxs("span",{children:["üìÖ ",r.mindestzeit_monate," Monate Mindestzeit"]}),e.jsxs("span",{children:["üèÜ Reihenfolge: ",r.reihenfolge]}),r.dan_grad&&e.jsxs("span",{children:["ü•ã ",r.dan_grad,". DAN"]}),r.kategorie&&e.jsxs("span",{children:["üìÇ ",r.kategorie]})]})]}),Ue=({stil:r,onDelete:n,onMoveUp:t,onMoveDown:a,isFirst:s,isLast:l})=>{var o,d;return e.jsxs(i.div,{className:"stil-card "+(r.aktiv?"":"inactive"),whileHover:{scale:1.02},whileTap:{scale:.98},title:`${r.name} - ${r.beschreibung}${r.aktiv?"":" (Inaktiv)"}`,children:[e.jsxs("div",{className:"stil-card-content",onClick:()=>y(`/dashboard/stile/${r.stil_id}`),children:[e.jsxs("div",{className:"stil-card-header",children:[e.jsx("h3",{children:r.name}),e.jsxs("div",{className:"stil-badge",children:[(null==(o=r.graduierungen)?void 0:o.length)||0," G√ºrtel"]})]}),e.jsx("p",{className:"stil-beschreibung",children:r.beschreibung||"Keine Beschreibung verf√ºgbar"}),e.jsxs("div",{className:"stil-card-stats",children:[e.jsxs("div",{className:"stil-stat",children:[e.jsx("span",{className:"stil-stat-number",children:r.anzahl_mitglieder||0}),e.jsx("span",{className:"stil-stat-label",children:"Sch√ºler"})]}),e.jsxs("div",{className:"stil-stat",children:[e.jsx("span",{className:"stil-stat-number",children:(null==(d=r.graduierungen)?void 0:d.length)||0}),e.jsx("span",{className:"stil-stat-label",children:"G√ºrtel"})]}),e.jsx("div",{className:"stil-stat",children:e.jsxs("div",{className:"stat-status",children:[e.jsx("span",{className:"status-dot "+(r.aktiv?"active":"inactive")}),r.aktiv?"Aktiv":"Inaktiv"]})})]})]}),e.jsxs("div",{className:"stil-card-actions",onClick:e=>e.stopPropagation(),children:[!r.aktiv&&e.jsx("button",{className:"btn btn-success btn-small move-btn",onClick:async e=>{e.stopPropagation();try{const e=localStorage.getItem("token"),i={name:r.name||r.stil_name,beschreibung:r.beschreibung||"",aktiv:!0,reihenfolge:r.reihenfolge||0};console.log("üîÑ Reaktiviere Stil:",i);const n=await fetch(`${ye}/stile/${r.stil_id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(n.ok)console.log("‚úÖ Stil reaktiviert:",i.name),await Ne(),setTimeout(()=>{Q(!1)},500);else{const e=await n.json();console.error("‚ùå Fehler beim Reaktivieren:",e),alert("Fehler beim Reaktivieren: "+(e.error||"Unbekannter Fehler"))}}catch(i){console.error("‚ùå Fehler beim Reaktivieren:",i),alert("Fehler beim Reaktivieren: "+i.message)}},title:"Stil reaktivieren",style:{minWidth:"40px",padding:"4px 8px",fontSize:"0.75rem"},children:"‚úì"}),r.aktiv&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-info btn-small move-btn",onClick:e=>{e.stopPropagation(),t&&t(r)},disabled:s||N,title:"Nach oben verschieben",children:"‚Üë"}),e.jsx("button",{className:"btn btn-info btn-small move-btn",onClick:e=>{e.stopPropagation(),a&&a(r)},disabled:l||N,title:"Nach unten verschieben",children:"‚Üì"})]}),e.jsx("button",{className:"btn btn-danger btn-small",onClick:e=>{e.stopPropagation(),n&&n(r.stil_id)},title:"Stil l√∂schen oder deaktivieren",children:"üóëÔ∏è"})]})]})},Ke=()=>{const[r,i]=n.useState(!1),[t,a]=n.useState(!1),[l,o]=n.useState("grundstufe"),[d,c]=n.useState({name:"",trainingsstunden_min:40,mindestzeit_monate:3,farbe_hex:"#FFFFFF",farbe_sekundaer:null,kategorie:null,dan_grad:null}),g=(null==z?void 0:z.graduierungen)?[...z.graduierungen].sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)):[];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"2px solid rgba(255, 215, 0, 0.2)",isolation:"isolate",position:"relative",zIndex:1e4},children:[e.jsx("h3",{style:{fontSize:"1.5rem",margin:0,color:"#ffd700",fontWeight:700,textTransform:"uppercase",letterSpacing:"2px",textShadow:"0 2px 10px rgba(255, 215, 0, 0.3)"},children:"Graduierungen verwalten"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>i(!0),disabled:N,title:"Standard-G√ºrtel hinzuf√ºgen",style:{position:"relative",zIndex:10001,backdropFilter:"none",WebkitBackdropFilter:"none",filter:"none",textShadow:"none",background:"rgba(30, 30, 50, 0.95)",border:"2px solid #ffd700",color:"#ffd700",fontWeight:700,fontSize:"0.95rem",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:N?"not-allowed":"pointer",isolation:"isolate",opacity:N?.5:1},children:"+ Graduierung hinzuf√ºgen"}),e.jsx("button",{onClick:()=>a(!0),disabled:N,title:"Eigene Farbe erstellen",style:{position:"relative",zIndex:10001,backdropFilter:"none",WebkitBackdropFilter:"none",filter:"none",textShadow:"none",background:"rgba(30, 30, 50, 0.95)",border:"2px solid #ffd700",color:"#ffd700",fontWeight:700,fontSize:"0.95rem",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:N?"not-allowed":"pointer",isolation:"isolate",opacity:N?.5:1},children:"Eigene Farbe"})]})]}),e.jsxs("div",{className:"graduierung-manager",children:[g.length>1&&e.jsxs("div",{className:"drag-drop-info",children:[e.jsx("span",{className:"info-icon",children:"‚ÑπÔ∏è"}),"Verwenden Sie die ",e.jsx("strong",{children:"‚Üë‚Üì"})," Buttons, um die Reihenfolge zu √§ndern"]}),g.length>0?e.jsx("div",{className:"graduierung-list",children:g.map(r=>{var i,n;return e.jsx(Le,{graduierung:r,onEdit:Re,onDelete:De,onMoveUp:ze,onMoveDown:we,onShowPruefungsinhalte:Pe,loading:N,isFirst:(null==(i=g[0])?void 0:i.graduierung_id)===r.graduierung_id,isLast:(null==(n=g[g.length-1])?void 0:n.graduierung_id)===r.graduierung_id},r.graduierung_id)})}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"üéñÔ∏è"}),e.jsx("h3",{children:"Noch keine Graduierungen angelegt"}),e.jsx("p",{children:"F√ºgen Sie die erste Graduierung f√ºr diesen Stil hinzu"})]}),r&&s.createPortal(e.jsx("div",{onClick:()=>i(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 0",overflowY:"auto",zIndex:1e3},children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{display:"block",width:"90%",maxWidth:"800px",margin:"0 auto",padding:"2rem",boxSizing:"border-box",overflowX:"hidden",overflowY:"visible",background:"rgba(26, 26, 46, 0.98)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",position:"relative"},children:[e.jsxs("div",{className:"modal-header",style:{marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("h3",{className:"modal-title",style:{margin:0,color:"#ffd700",fontSize:"1.5rem"},children:"Neue Graduierung hinzuf√ºgen"}),e.jsx("button",{className:"modal-close",onClick:()=>i(!1),title:"Schlie√üen",style:{background:"none",border:"none",color:"rgba(255,255,255,0.6)",fontSize:"2rem",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"√ó"})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",paddingBottom:"0.5rem",overflowX:"auto"},children:[{key:"grundstufe",label:"üü° Grundstufe"},{key:"mittelstufe",label:"üü¢ Mittelstufe"},{key:"oberstufe",label:"üü§ Oberstufe"},{key:"dan",label:"‚ö´ Dan-Grade"},{key:"meister",label:"üî¥ Meister"}].map(r=>e.jsx("button",{onClick:()=>o(r.key),style:{padding:"0.75rem 1.5rem",background:l===r.key?"rgba(255, 215, 0, 0.15)":"transparent",border:l===r.key?"1px solid rgba(255, 215, 0, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:l===r.key?"#ffd700":"rgba(255, 255, 255, 0.7)",cursor:"pointer",fontSize:"0.95rem",fontWeight:l===r.key?"600":"400",transition:"all 0.2s ease",whiteSpace:"nowrap"},children:r.label},r.key))}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx("div",{className:"belt-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"1rem",width:"100%",boxSizing:"border-box"},children:ke.filter(e=>e.kategorie===l).map(r=>e.jsxs("div",{className:"belt-option "+(d.name===r.name?"selected":""),onClick:()=>{let e=3;"grundstufe"===r.kategorie&&(null==z?void 0:z.wartezeit_grundstufe)?e=z.wartezeit_grundstufe:"mittelstufe"===r.kategorie&&(null==z?void 0:z.wartezeit_mittelstufe)?e=z.wartezeit_mittelstufe:"oberstufe"===r.kategorie&&(null==z?void 0:z.wartezeit_oberstufe)&&(e=z.wartezeit_oberstufe),c({...d,name:r.name,farbe_hex:r.primaer,farbe_sekundaer:r.sekundaer,kategorie:r.kategorie,dan_grad:r.dan||null,mindestzeit_monate:e})},title:r.name,style:{padding:"1rem 0.75rem",background:d.name===r.name?"rgba(255, 215, 0, 0.15)":"rgba(255, 255, 255, 0.05)",border:d.name===r.name?"2px solid #ffd700":"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"110px",boxSizing:"border-box"},children:[e.jsx(ve,{primaer:r.primaer,sekundaer:r.sekundaer,size:"small"}),e.jsx("span",{style:{fontSize:"0.85rem",color:d.name===r.name?"#ffd700":"rgba(255, 255, 255, 0.85)",marginTop:"0.5rem",textAlign:"center",lineHeight:"1.3",wordWrap:"break-word",width:"100%"},children:r.name})]},r.name))})}),d.name&&e.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 215, 0, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)",marginBottom:"1.5rem"},children:[e.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#ffd700",fontSize:"1rem"},children:"Vorschau:"}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsx(ve,{primaer:d.farbe_hex,sekundaer:d.farbe_sekundaer,size:"large"}),e.jsxs("div",{children:[e.jsx("strong",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"1.1rem",display:"block",marginBottom:"0.5rem"},children:d.name}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.7)"},children:[e.jsxs("span",{children:["Prim√§r: ",d.farbe_hex]}),d.farbe_sekundaer&&e.jsxs("span",{children:["Sekund√§r: ",d.farbe_sekundaer]}),d.dan_grad&&e.jsxs("span",{children:["DAN-Grad: ",d.dan_grad]})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Trainingsstunden (Minimum):"}),e.jsx("input",{type:"number",value:d.trainingsstunden_min,onChange:e=>c({...d,trainingsstunden_min:Math.max(0,parseInt(e.target.value)||0)}),min:"0",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Mindestzeit (Monate):"}),e.jsx("input",{type:"number",value:d.mindestzeit_monate,onChange:e=>c({...d,mindestzeit_monate:Math.max(0,parseInt(e.target.value)||0)}),min:"0",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("button",{onClick:()=>i(!1),disabled:N,style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem",cursor:N?"not-allowed":"pointer",opacity:N?.5:1},children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{if(!d.name.trim())return void D("Graduierung-Name ist erforderlich");const e=ke.find(e=>e.name===d.name),r={...d,kategorie:(null==e?void 0:e.kategorie)||d.kategorie,dan_grad:(null==e?void 0:e.dan)||d.dan_grad};await Be(r),c({name:"",trainingsstunden_min:40,mindestzeit_monate:3,farbe_hex:"#FFFFFF",farbe_sekundaer:null,kategorie:null,dan_grad:null}),i(!1)},disabled:!d.name||N,style:{padding:"0.75rem 1.5rem",background:!d.name||N?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.2)",border:"1px solid #ffd700",borderRadius:"8px",color:"#ffd700",fontSize:"1rem",fontWeight:"600",cursor:!d.name||N?"not-allowed":"pointer",opacity:!d.name||N?.5:1},children:N?"Wird gespeichert...":"Graduierung hinzuf√ºgen"})]})]})}),document.body),t&&s.createPortal(e.jsx("div",{onClick:()=>a(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 0",overflowY:"auto",zIndex:1e3},children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{display:"block",width:"90%",maxWidth:"600px",margin:"0 auto",padding:"2rem",boxSizing:"border-box",overflowX:"hidden",overflowY:"visible",background:"rgba(26, 26, 46, 0.98)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("h3",{style:{margin:0,color:"#ffd700",fontSize:"1.5rem"},children:"Eigene G√ºrtel-Farbe erstellen"}),e.jsx("button",{onClick:()=>a(!1),title:"Schlie√üen",style:{background:"none",border:"none",color:"rgba(255,255,255,0.6)",fontSize:"2rem",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"√ó"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:["Graduierung-Name: ",e.jsx("span",{style:{color:"#ff6b6b",fontWeight:"700"},children:"*"})]}),e.jsx("input",{type:"text",value:d.name,onChange:e=>c({...d,name:e.target.value}),placeholder:"z.B. Lila-Silbergurt",autoFocus:!0,style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:d.name?"1px solid rgba(255, 255, 255, 0.2)":"2px solid rgba(255, 107, 107, 0.5)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box",boxShadow:d.name?"none":"0 0 0 3px rgba(255, 107, 107, 0.1)"}}),!d.name&&e.jsx("small",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"0.25rem",display:"block"},children:"Bitte geben Sie einen Namen ein"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Prim√§rfarbe:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"color",value:d.farbe_hex,onChange:e=>c({...d,farbe_hex:e.target.value}),style:{width:"50px",height:"40px",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer"}}),e.jsx("input",{type:"text",value:d.farbe_hex,onChange:e=>{const r=e.target.value;if(r.match(/^#?[0-9A-Fa-f]{0,6}$/)){const e=r.startsWith("#")?r:"#"+r;c({...d,farbe_hex:e})}},placeholder:"#32CD32",style:{flex:1,padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",textAlign:"center",textTransform:"uppercase"}})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem",padding:"0.75rem",background:d.farbe_sekundaer?"rgba(255, 215, 0, 0.15)":"rgba(255, 255, 255, 0.05)",border:"1px solid "+(d.farbe_sekundaer?"rgba(255, 215, 0, 0.3)":"rgba(255, 255, 255, 0.2)"),borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},children:[e.jsx("input",{type:"checkbox",checked:null!==d.farbe_sekundaer,onChange:e=>c({...d,farbe_sekundaer:e.target.checked?"#FFFFFF":null}),style:{marginRight:"0.75rem",width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{style:{color:d.farbe_sekundaer?"#ffd700":"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:d.farbe_sekundaer?"600":"500"},children:"Sekund√§rfarbe (Streifen) hinzuf√ºgen"})]}),d.farbe_sekundaer?e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"color",value:d.farbe_sekundaer,onChange:e=>c({...d,farbe_sekundaer:e.target.value}),style:{width:"50px",height:"40px",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer"}}),e.jsx("input",{type:"text",value:d.farbe_sekundaer,onChange:e=>{const r=e.target.value;if(r.match(/^#?[0-9A-Fa-f]{0,6}$/)){const e=r.startsWith("#")?r:"#"+r;c({...d,farbe_sekundaer:e})}},placeholder:"#FFFFFF",style:{flex:1,padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",textAlign:"center",textTransform:"uppercase"}})]}):e.jsx("div",{style:{height:"40px",display:"flex",alignItems:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.85rem"},children:"Keine Sekund√§rfarbe"})]})]}),e.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 215, 0, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.2)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"500"},children:"Vorschau:"}),e.jsx(ve,{primaer:d.farbe_hex,sekundaer:d.farbe_sekundaer,size:"medium"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Trainingsstunden (Minimum):"}),e.jsx("input",{type:"number",value:d.trainingsstunden_min,onChange:e=>c({...d,trainingsstunden_min:Math.max(0,parseInt(e.target.value)||0)}),min:"0",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Mindestzeit (Monate):"}),e.jsx("input",{type:"number",value:d.mindestzeit_monate,onChange:e=>c({...d,mindestzeit_monate:Math.max(0,parseInt(e.target.value)||0)}),min:"0",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"1.5rem"},children:[e.jsx("button",{onClick:()=>a(!1),disabled:N,style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem",cursor:N?"not-allowed":"pointer",opacity:N?.5:1},children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{d.name.trim()?(await Be(d),c({name:"",trainingsstunden_min:40,mindestzeit_monate:3,farbe_hex:"#FFFFFF",farbe_sekundaer:null,kategorie:"custom",dan_grad:null}),a(!1)):D("Graduierung-Name ist erforderlich")},disabled:!d.name||N,title:d.name?"Graduierung erstellen":"Bitte geben Sie zuerst einen Namen ein",style:{padding:"0.75rem 1.5rem",background:!d.name||N?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.2)",border:"1px solid #ffd700",borderRadius:"8px",color:"#ffd700",fontSize:"1rem",fontWeight:"600",cursor:!d.name||N?"not-allowed":"pointer",opacity:!d.name||N?.5:1},children:N?"Wird erstellt...":"Eigene Graduierung erstellen"})]})]})}),document.body),V&&q&&s.createPortal(e.jsx("div",{onClick:()=>{Y(!1),X(null)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 0",overflowY:"auto",zIndex:1e3},children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{display:"block",width:"90%",maxWidth:"700px",margin:"0 auto",padding:"2rem",boxSizing:"border-box",overflowX:"hidden",overflowY:"visible",background:"rgba(26, 26, 46, 0.98)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("h3",{style:{margin:0,color:"#ffd700",fontSize:"1.5rem"},children:"Graduierung bearbeiten"}),e.jsx("button",{onClick:()=>{Y(!1),X(null)},title:"Schlie√üen",style:{background:"none",border:"none",color:"rgba(255,255,255,0.6)",fontSize:"2rem",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"√ó"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Graduierung-Name:"}),e.jsx("input",{type:"text",value:q.name,onChange:e=>X({...q,name:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Prim√§rfarbe:"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"color",value:q.farbe_hex,onChange:e=>X({...q,farbe_hex:e.target.value}),style:{width:"50px",height:"40px",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer"}}),e.jsx("input",{type:"text",value:q.farbe_hex,onChange:e=>{const r=e.target.value;if(r.match(/^#?[0-9A-Fa-f]{0,6}$/)){const e=r.startsWith("#")?r:"#"+r;X({...q,farbe_hex:e})}},placeholder:"#32CD32",style:{flex:1,padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",textAlign:"center",textTransform:"uppercase"}})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem",padding:"0.75rem",background:q.farbe_sekundaer?"rgba(255, 215, 0, 0.15)":"rgba(255, 255, 255, 0.05)",border:"1px solid "+(q.farbe_sekundaer?"rgba(255, 215, 0, 0.3)":"rgba(255, 255, 255, 0.2)"),borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease"},children:[e.jsx("input",{type:"checkbox",checked:null!==q.farbe_sekundaer,onChange:e=>X({...q,farbe_sekundaer:e.target.checked?"#FFFFFF":null}),style:{marginRight:"0.75rem",width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{style:{color:q.farbe_sekundaer?"#ffd700":"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:q.farbe_sekundaer?"600":"500"},children:"Sekund√§rfarbe (Streifen) hinzuf√ºgen"})]}),q.farbe_sekundaer?e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"color",value:q.farbe_sekundaer,onChange:e=>X({...q,farbe_sekundaer:e.target.value}),style:{width:"50px",height:"40px",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",cursor:"pointer"}}),e.jsx("input",{type:"text",value:q.farbe_sekundaer,onChange:e=>{const r=e.target.value;if(r.match(/^#?[0-9A-Fa-f]{0,6}$/)){const e=r.startsWith("#")?r:"#"+r;X({...q,farbe_sekundaer:e})}},placeholder:"#FFFFFF",style:{flex:1,padding:"0.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",textAlign:"center",textTransform:"uppercase"}})]}):e.jsx("div",{style:{height:"40px",display:"flex",alignItems:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.85rem"},children:"Keine Sekund√§rfarbe"})]})]}),e.jsxs("div",{style:{padding:"1rem",background:"rgba(255, 215, 0, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.2)",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"500"},children:"Vorschau:"}),e.jsx(ve,{primaer:q.farbe_hex,sekundaer:q.farbe_sekundaer,size:"medium"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Trainingsstunden:"}),e.jsx("input",{type:"number",value:q.trainingsstunden_min,onChange:e=>X({...q,trainingsstunden_min:Math.max(0,parseInt(e.target.value)||0)}),min:"0",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Mindestzeit (Monate):"}),e.jsx("input",{type:"number",value:q.mindestzeit_monate,onChange:e=>X({...q,mindestzeit_monate:Math.max(0,parseInt(e.target.value)||0)}),min:"0",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",marginTop:"1.5rem"},children:[e.jsx("button",{onClick:()=>{Y(!1),X(null)},disabled:N,style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem",cursor:N?"not-allowed":"pointer",opacity:N?.5:1},children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{await(async e=>{if(e.graduierung_id){_(!0);try{const r=await fetch(`${ye}/stile/graduierungen/${e.graduierung_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){const i=await r.json(),n={...z,graduierungen:z.graduierungen.map(r=>r.graduierung_id===e.graduierung_id?i:r)};w(n),S(v.map(e=>e.stil_id===z.stil_id?n:e)),A("Graduierung erfolgreich aktualisiert!"),setTimeout(()=>A(""),2e3),console.log("‚úÖ Graduierung aktualisiert:",i)}else{const e=await r.json().catch(()=>({error:"Unbekannter Fehler"}));D(e.error||"Fehler beim Aktualisieren der Graduierung")}}catch(r){console.error("‚ùå Fehler beim Aktualisieren der Graduierung:",r),D("Graduierung konnte nicht aktualisiert werden")}finally{_(!1)}}})(q),Y(!1),X(null)},disabled:!q.name||N,style:{padding:"0.75rem 1.5rem",background:!q.name||N?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.2)",border:"1px solid #ffd700",borderRadius:"8px",color:"#ffd700",fontSize:"1rem",fontWeight:"600",cursor:!q.name||N?"not-allowed":"pointer",opacity:!q.name||N?.5:1},children:N?"Wird gespeichert...":"√Ñnderungen speichern"})]})]})}),document.body)]})]})},Oe=()=>{const[r,i]=l.useState((null==oe?void 0:oe.inhalt)||"");l.useEffect(()=>{i((null==oe?void 0:oe.inhalt)||"")},[oe]);return se?s.createPortal(e.jsx("div",{onClick:()=>{le(!1),de(null),ge(null),he("")},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 0",overflowY:"auto",zIndex:1e3},children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{display:"block",width:"90%",maxWidth:"600px",margin:"0 auto",padding:"2rem",boxSizing:"border-box",background:"rgba(26, 26, 46, 0.98)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsx("h3",{style:{margin:0,color:"#ffd700",fontSize:"1.5rem"},children:oe?"Pr√ºfungsinhalt bearbeiten":"Pr√ºfungsinhalt hinzuf√ºgen"}),e.jsx("button",{onClick:()=>{le(!1),de(null),ge(null),he("")},title:"Schlie√üen",style:{background:"none",border:"none",color:"rgba(255,255,255,0.6)",fontSize:"2rem",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"√ó"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",alignItems:"center"},children:[e.jsx(ve,{primaer:null==ce?void 0:ce.farbe_hex,sekundaer:null==ce?void 0:ce.farbe_sekundaer,size:"small"}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.9)",fontWeight:"600"},children:null==ce?void 0:ce.name}),e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.85rem"},children:{grundtechniken:"Grundtechniken",kata:"Kata / Formen",kumite:"Kumite / Sparring",theorie:"Theorie"}[ue]})]})]}),e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"rgba(255, 255, 255, 0.85)",fontSize:"0.9rem",fontWeight:"500"},children:"Inhalt:"}),e.jsx("textarea",{value:r,onChange:e=>i(e.target.value),placeholder:"z.B. Grundstellungen, Heian Shodan, Grundkumite...",rows:"4",style:{width:"100%",padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"1rem",boxSizing:"border-box",resize:"vertical",fontFamily:"inherit"}})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{le(!1),de(null),ge(null),he("")},disabled:N,style:{padding:"0.75rem 1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem",cursor:N?"not-allowed":"pointer",opacity:N?.5:1},children:"Abbrechen"}),e.jsx("button",{onClick:()=>{(async e=>{if(ce&&ue&&e.trim())try{_(!0);const r=ce.pruefungsinhalte||{},i=r[ue]||[];let n;if(oe){const r=i.findIndex(e=>e.id===oe.id);n=[...i],n[r]={...oe,inhalt:e}}else{const r={id:Date.now(),inhalt:e,reihenfolge:i.length};n=[...i,r]}const t={...r,[ue]:n};if(!(await fetch(`${ye}/stile/${z.stil_id}/graduierungen/${ce.graduierung_id}/pruefungsinhalte`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pruefungsinhalte:t})})).ok)throw new Error("Fehler beim Speichern");w(e=>({...e,graduierungen:e.graduierungen.map(e=>e.graduierung_id===ce.graduierung_id?{...e,pruefungsinhalte:t}:e)})),A(oe?"Pr√ºfungsinhalt aktualisiert":"Pr√ºfungsinhalt hinzugef√ºgt"),le(!1),de(null),ge(null),he("")}catch(r){console.error("Fehler beim Speichern des Pr√ºfungsinhalts:",r),D("Pr√ºfungsinhalt konnte nicht gespeichert werden")}finally{_(!1)}else D("Bitte alle Felder ausf√ºllen")})(r)},disabled:!r.trim()||N,style:{padding:"0.75rem 1.5rem",background:!r.trim()||N?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.2)",border:"1px solid #ffd700",borderRadius:"8px",color:"#ffd700",fontSize:"1rem",fontWeight:"600",cursor:!r.trim()||N?"not-allowed":"pointer",opacity:!r.trim()||N?.5:1},children:N?"Wird gespeichert...":oe?"Speichern":"Hinzuf√ºgen"})]})]})}),document.body):null},Je=()=>{if(!me||!be)return null;const r=be.pruefungsinhalte||{};return s.createPortal(e.jsx("div",{onClick:()=>{pe(!1),xe(null)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(8px)",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 0",overflowY:"auto",zIndex:1e3},children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{display:"block",width:"90%",maxWidth:"900px",margin:"0 auto",padding:"2rem",boxSizing:"border-box",background:"rgba(26, 26, 46, 0.98)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx(ve,{primaer:be.farbe_hex,sekundaer:be.farbe_sekundaer,size:"normal"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"#ffd700",fontSize:"1.5rem"},children:"Pr√ºfungsinhalte"}),e.jsx("p",{style:{margin:"0.25rem 0 0 0",color:"rgba(255, 255, 255, 0.7)",fontSize:"1rem"},children:be.name})]})]}),e.jsx("button",{onClick:()=>{pe(!1),xe(null)},title:"Schlie√üen",style:{background:"none",border:"none",color:"rgba(255,255,255,0.6)",fontSize:"2rem",cursor:"pointer",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:"√ó"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:[{key:"grundtechniken",label:"Grundtechniken",icon:"ü•ã"},{key:"kata",label:"Kata / Formen",icon:"üé≠"},{key:"kumite",label:"Kumite / Sparring",icon:"‚öîÔ∏è"},{key:"theorie",label:"Theorie",icon:"üìö"}].map(i=>{const n=r[i.key]||[];return e.jsxs("div",{style:{padding:"1.5rem",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 1rem 0",color:"#ffd700",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{children:i.icon}),e.jsx("span",{children:i.label})]}),n.length>0?e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)).map(r=>e.jsx("li",{style:{padding:"0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.95rem",borderLeft:"3px solid rgba(255, 215, 0, 0.5)"},children:r.inhalt},r.id))}):e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"0.9rem",fontStyle:"italic",margin:0},children:"Noch keine Inhalte definiert"})]},i.key)})}),e.jsx("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:e.jsx("button",{onClick:()=>{pe(!1),xe(null)},className:"sub-tab-btn",style:{minWidth:"200px"},children:"Schlie√üen"})})]})}),document.body)},He=()=>{var r;const i=[{key:"grundtechniken",label:"Grundtechniken",icon:"ü•ã",beispiele:["Grundstellungen","Fu√üarbeit","Hand- und Fu√ütechniken"]},{key:"kata",label:"Kata / Formen",icon:"üé≠",beispiele:["Heian Shodan","Heian Nidan"]},{key:"kumite",label:"Kumite / Sparring",icon:"‚öîÔ∏è",beispiele:["Grundkumite","Situative Techniken"]},{key:"theorie",label:"Theorie",icon:"üìö",beispiele:["Dojo-Kun (Verhaltensregeln)","Grundbegriffe","Geschichte"]}];return e.jsxs("div",{className:"pruefungsinhalt-manager",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h3",{children:"Pr√ºfungsinhalte definieren"}),e.jsx("p",{children:"Legen Sie fest, was f√ºr jede Graduierung gelernt werden muss"})]}),(null==(r=null==z?void 0:z.graduierungen)?void 0:r.length)>0?z.graduierungen.sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)).map(r=>{const n=r.pruefungsinhalte||{},t=ie.includes(r.graduierung_id);return e.jsxs("div",{className:"graduierung-pruefung",children:[e.jsxs("div",{className:"graduierung-header clickable",onClick:()=>{return e=r.graduierung_id,void ne(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e]);var e},style:{cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[e.jsx(ve,{primaer:r.farbe_hex,sekundaer:r.farbe_sekundaer,size:"normal"}),e.jsx("h4",{style:{margin:0},children:r.name})]}),e.jsx("span",{style:{fontSize:"1.5rem",transition:"transform 0.3s ease",transform:t?"rotate(180deg)":"rotate(0deg)",display:"inline-block"},children:"‚ñº"})]}),t&&e.jsx("div",{className:"pruefungsinhalt-categories",children:i.map(i=>{const t=n[i.key]||[];return e.jsxs("div",{className:"category",children:[e.jsxs("h5",{children:[i.icon," ",i.label]}),e.jsx("ul",{children:t.length>0?t.sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0)).map(n=>e.jsxs("li",{children:[e.jsx("span",{children:n.inhalt}),e.jsxs("div",{className:"inhalt-actions",children:[e.jsx("button",{className:"sub-tab-btn",onClick:()=>We(r,i.key,n),title:"Bearbeiten",style:{fontSize:"0.75rem",padding:"0.35rem 0.75rem"},children:"‚úèÔ∏è"}),e.jsx("button",{className:"sub-tab-btn",onClick:()=>(async(e,r,i)=>{if(window.confirm("Pr√ºfungsinhalt wirklich l√∂schen?"))try{_(!0);const n=e.pruefungsinhalte||{},t=(n[r]||[]).filter(e=>e.id!==i),a={...n,[r]:t};if(!(await fetch(`${ye}/stile/${z.stil_id}/graduierungen/${e.graduierung_id}/pruefungsinhalte`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({pruefungsinhalte:a})})).ok)throw new Error("Fehler beim L√∂schen");w(r=>({...r,graduierungen:r.graduierungen.map(r=>r.graduierung_id===e.graduierung_id?{...r,pruefungsinhalte:a}:r)})),A("Pr√ºfungsinhalt gel√∂scht")}catch(n){console.error("Fehler beim L√∂schen:",n),D("Pr√ºfungsinhalt konnte nicht gel√∂scht werden")}finally{_(!1)}})(r,i.key,n.id),title:"L√∂schen",style:{fontSize:"0.75rem",padding:"0.35rem 0.75rem"},children:"üóëÔ∏è"})]})]},n.id)):i.beispiele.map((r,i)=>e.jsx("li",{children:r},`beispiel-${i}`))}),e.jsxs("div",{className:"sub-tabs",style:{marginTop:"0.5rem"},children:[e.jsx("button",{className:"sub-tab-btn",onClick:()=>Ge(r,i.key),children:"+ Hinzuf√ºgen"}),e.jsx("button",{className:"sub-tab-btn",onClick:()=>{t.length>0?We(r,i.key,t[0]):Ge(r,i.key)},title:"Bearbeiten",children:"‚úèÔ∏è Bearbeiten"})]})]},i.key)})})]},r.graduierung_id)}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"üìù"}),e.jsx("h3",{children:"Noch keine Graduierungen vorhanden"}),e.jsx("p",{children:"Legen Sie zuerst Graduierungen an, um Pr√ºfungsinhalte zu definieren"})]})]})};return N&&0===v.length?e.jsxs("div",{className:"stil-verwaltung-loading",children:[e.jsx("div",{className:"loading-spinner-large"}),e.jsx("p",{children:"Lade Stil-Verwaltung..."})]}):e.jsx("div",{className:"stil-verwaltung",children:e.jsxs("div",{className:"stil-verwaltung-container",children:[e.jsxs("div",{className:"stil-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"Stil-Verwaltung"}),e.jsx("p",{children:"Kampfkunst-Stile, Graduierungen und Pr√ºfungsanforderungen verwalten"})]}),e.jsxs("div",{className:"header-actions",children:[!z&&e.jsx("button",{className:"add-stil-btn",onClick:()=>O(!0),children:"‚ûï Neuen Stil hinzuf√ºgen"}),z&&e.jsx("button",{onClick:()=>{y("/dashboard/stile"),w(null),T("allgemein")},className:"back-btn",title:"Zur√ºck zur √úbersicht",children:"‚Üê Zur√ºck zur √úbersicht"})]})]}),e.jsxs(r,{children:[I&&e.jsx(i.div,{className:"success-message",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:I},"success-message"),B&&e.jsxs(i.div,{className:"error-message",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[B,e.jsx("button",{onClick:()=>D(""),className:"message-close",children:"√ó"})]},"error-message")]}),e.jsx("div",{className:"stil-content",children:z?e.jsxs("div",{className:"stil-detail",children:[e.jsx("div",{className:"stil-detail-header",children:e.jsxs("div",{children:[e.jsx("h2",{className:"stil-detail-title",children:z.name}),e.jsx("p",{children:z.beschreibung}),e.jsxs("div",{className:"stil-detail-stats",children:[e.jsxs("span",{children:["üë• ",z.anzahl_mitglieder||0," Sch√ºler"]}),e.jsxs("span",{children:["üéñÔ∏è ",(null==(c=z.graduierungen)?void 0:c.length)||0," G√ºrtel"]}),e.jsx("span",{className:"status "+(z.aktiv?"active":"inactive"),children:z.aktiv?"‚úÖ Aktiv":"‚ùå Inaktiv"})]})]})}),e.jsx("div",{className:"tab-navigation",children:[{id:"allgemein",label:"üìã Allgemein",title:"Grundeinstellungen des Stils"},{id:"pruefungseinstellungen",label:"‚è±Ô∏è Pr√ºfungseinstellungen",title:"Wartezeiten und Pr√ºfungsregeln"},{id:"graduierungen",label:"üéñÔ∏è Graduierungen",title:"G√ºrtel und Graduierungen verwalten"},{id:"pruefungsinhalte",label:"üìù Pr√ºfungsinhalte",title:"Pr√ºfungsinhalte definieren"},{id:"statistiken",label:"üìä Statistiken",title:"Auswertungen und Statistiken"}].map(r=>e.jsx("button",{className:"tab-btn "+(R===r.id?"active":""),onClick:()=>T(r.id),title:r.title,children:r.label},r.id))}),e.jsxs("div",{className:"tab-content",children:["allgemein"===R&&e.jsxs(i.div,{className:"allgemein-tab",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[e.jsx("h3",{children:"Grundeinstellungen"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Stil-Name:"}),e.jsx("input",{type:"text",value:z.name||"",onChange:e=>w({...z,name:e.target.value}),className:"form-input",placeholder:"Name des Kampfkunst-Stils"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Beschreibung:"}),e.jsx("textarea",{value:z.beschreibung||"",onChange:e=>w({...z,beschreibung:e.target.value}),rows:"4",className:"form-textarea",placeholder:"Beschreibung des Kampfkunst-Stils..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("input",{type:"checkbox",checked:z.aktiv||!1,onChange:e=>w({...z,aktiv:e.target.checked})}),"Stil ist aktiv"]}),e.jsx("small",{children:"Inaktive Stile werden nicht in der Sch√ºlerverwaltung angezeigt"})]}),e.jsxs("div",{className:"sub-tabs",children:[e.jsx("button",{className:"sub-tab-btn",onClick:()=>Fe({name:z.name,beschreibung:z.beschreibung,aktiv:z.aktiv}),disabled:N||!(null==(g=z.name)?void 0:g.trim()),children:N?"Wird gespeichert...":"üíæ √Ñnderungen speichern"}),e.jsx("button",{className:"sub-tab-btn",onClick:()=>Ce(z.stil_id),disabled:N,title:"Stil l√∂schen oder deaktivieren",children:"üóëÔ∏è Stil l√∂schen"})]})]}),"pruefungseinstellungen"===R&&e.jsxs(i.div,{className:"pruefungseinstellungen-tab",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[e.jsx("h3",{children:"Pr√ºfungseinstellungen"}),e.jsx("p",{className:"tab-description",children:"Definieren Sie die standardm√§√üigen Wartezeiten zwischen G√ºrtelpr√ºfungen f√ºr verschiedene Stufen."}),e.jsxs("div",{className:"pruefungseinstellungen-container",children:[e.jsxs("div",{className:"wartezeiten-section",children:[e.jsx("h4",{children:"Wartezeiten f√ºr Farbg√ºrtel"}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Grundstufe (Monate):",e.jsx("span",{className:"label-info",children:"Wei√ü-, Gelb-, Orangegurt"})]}),e.jsx("input",{type:"number",min:"1",max:"24",value:z.wartezeit_grundstufe||3,onChange:e=>w({...z,wartezeit_grundstufe:parseInt(e.target.value)||3}),className:"form-input",placeholder:"z.B. 3"}),e.jsx("small",{children:"Empfohlen: 3 Monate"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Mittelstufe (Monate):",e.jsx("span",{className:"label-info",children:"Gr√ºn-, Blaugurt"})]}),e.jsx("input",{type:"number",min:"1",max:"24",value:z.wartezeit_mittelstufe||4,onChange:e=>w({...z,wartezeit_mittelstufe:parseInt(e.target.value)||4}),className:"form-input",placeholder:"z.B. 4"}),e.jsx("small",{children:"Empfohlen: 4 Monate"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Oberstufe (Monate):",e.jsx("span",{className:"label-info",children:"Rot-, Braungurt"})]}),e.jsx("input",{type:"number",min:"1",max:"24",value:z.wartezeit_oberstufe||6,onChange:e=>w({...z,wartezeit_oberstufe:parseInt(e.target.value)||6}),className:"form-input",placeholder:"z.B. 6"}),e.jsx("small",{children:"Empfohlen: 6 Monate"})]})]}),e.jsxs("div",{className:"schwarzgurt-section",children:[e.jsx("h4",{children:"Schwarzgurt-Regelung (DAN-Grade)"}),e.jsxs("div",{className:"form-group checkbox-group",children:[e.jsxs("label",{className:"form-label checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:z.wartezeit_schwarzgurt_traditionell||!1,onChange:e=>w({...z,wartezeit_schwarzgurt_traditionell:e.target.checked})}),e.jsx("span",{className:"checkbox-text",children:"Traditionelle Wartezeiten verwenden"})]}),e.jsxs("div",{className:"checkbox-info",children:[e.jsx("p",{children:"Bei aktivierter Option gelten folgende Wartezeiten:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"1. DAN ‚Üí 2. DAN: 2 Jahre"}),e.jsx("li",{children:"2. DAN ‚Üí 3. DAN: 3 Jahre"}),e.jsx("li",{children:"3. DAN ‚Üí 4. DAN: 4 Jahre"}),e.jsx("li",{children:"4. DAN ‚Üí 5. DAN: 5 Jahre"}),e.jsx("li",{children:"usw. (DAN-Stufe = Jahre Wartezeit)"})]})]})]})]})]}),e.jsxs("div",{className:"sub-tabs",children:[e.jsx("button",{className:"sub-tab-btn",onClick:()=>Fe({name:z.name,beschreibung:z.beschreibung,aktiv:z.aktiv,wartezeit_grundstufe:z.wartezeit_grundstufe,wartezeit_mittelstufe:z.wartezeit_mittelstufe,wartezeit_oberstufe:z.wartezeit_oberstufe,wartezeit_schwarzgurt_traditionell:z.wartezeit_schwarzgurt_traditionell}),disabled:N||!(null==(u=z.name)?void 0:u.trim()),children:N?"Wird gespeichert...":"üíæ Einstellungen speichern"}),e.jsx("button",{className:"sub-tab-btn",style:{background:"linear-gradient(135deg, rgba(50, 205, 50, 0.2), rgba(34, 139, 34, 0.3))",borderColor:"#32CD32"},onClick:async()=>{if(confirm("M√∂chten Sie die aktuellen Wartezeiten auf ALLE bestehenden Graduierungen anwenden?\n\nDies √ºberschreibt die Mindestzeiten aller Graduierungen entsprechend ihrer Kategorie.\n\nHinweis: Kategorien werden automatisch basierend auf dem G√ºrtelnamen erkannt.")){_(!0);try{const e=z.graduierungen||[];let r=0;const i=e=>{const r=e.toLowerCase();return r.includes("dan")||r.includes("schwarzgurt")?"dan":r.includes("rot-wei√ü")||r.includes("meister")?"meister":r.includes("braun")||r.includes("rot")?"oberstufe":r.includes("blau")||r.includes("gr√ºn")?"mittelstufe":r.includes("wei√ü")||r.includes("gelb")||r.includes("orange")?"grundstufe":null};for(const n of e){const e=i(n.name),t=e||n.kategorie;let a=n.mindestzeit_monate;const s=e&&e!==n.kategorie;if("grundstufe"===t?a=z.wartezeit_grundstufe||3:"mittelstufe"===t?a=z.wartezeit_mittelstufe||4:"oberstufe"===t&&(a=z.wartezeit_oberstufe||6),a!==n.mindestzeit_monate||s){(await fetch(`${ye}/stile/graduierungen/${n.graduierung_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,reihenfolge:n.reihenfolge,trainingsstunden_min:n.trainingsstunden_min,mindestzeit_monate:a,farbe_hex:n.farbe_hex,farbe_sekundaer:n.farbe_sekundaer,kategorie:t,dan_grad:n.dan_grad,aktiv:n.aktiv})})).ok?(r++,console.log(`‚úÖ ${n.name} aktualisiert: ${n.mindestzeit_monate} ‚Üí ${a} Monate`)):console.error(`‚ùå Fehler beim Aktualisieren von ${n.name}`)}}await _e(z.stil_id),A(`${r} Graduierung(en) erfolgreich aktualisiert!`),setTimeout(()=>A(""),3e3)}catch(e){console.error("Fehler beim Aktualisieren der Graduierungen:",e),D("Fehler beim Anwenden der Wartezeiten")}finally{_(!1)}}},disabled:N||!(null==(h=z.graduierungen)?void 0:h.length),children:N?"Wird angewendet...":"üîÑ Auf alle Graduierungen anwenden"})]})]}),"graduierungen"===R&&e.jsx("div",{style:{isolation:"isolate",position:"relative",zIndex:1},children:e.jsx(Ke,{})}),"pruefungsinhalte"===R&&e.jsx(i.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsx(He,{})}),"statistiken"===R&&e.jsxs(i.div,{className:"statistiken-tab",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[L&&e.jsx("div",{className:"no-data-message",children:e.jsx("p",{children:"Statistiken werden geladen..."})}),!P&&!L&&e.jsx("div",{className:"no-data-message",children:e.jsx("p",{children:"Keine Statistiken verf√ºgbar. Bitte w√§hlen Sie einen Stil aus."})}),P&&!L&&e.jsxs("div",{className:"stats-container",children:[(null==P?void 0:P.summary)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{style:{padding:"20px",background:"rgba(20, 20, 35, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"14px",marginBottom:"10px"},children:"G√ºrtel gesamt"}),e.jsx("div",{style:{color:"#FFD700",fontSize:"36px",fontWeight:"bold"},children:P.summary.total_graduierungen||0})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(20, 20, 35, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"14px",marginBottom:"10px"},children:"Aktive Mitglieder"}),e.jsx("div",{style:{color:"#FFD700",fontSize:"36px",fontWeight:"bold"},children:P.summary.total_mitglieder||0})]}),e.jsxs("div",{style:{padding:"20px",background:"rgba(20, 20, 35, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",textAlign:"center"},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"14px",marginBottom:"10px"},children:"Kategorien"}),e.jsx("div",{style:{color:"#FFD700",fontSize:"36px",fontWeight:"bold"},children:P.summary.kategorien_count||0})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"25px",alignItems:"start"},children:[(null==P?void 0:P.graduierungen)&&P.graduierungen.length>0&&e.jsxs("div",{style:{padding:"25px",background:"rgba(20, 20, 35, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px"},children:[e.jsx("h4",{style:{color:"#FFD700",fontSize:"18px",marginBottom:"8px",fontWeight:"600"},children:"üë• Sch√ºler-Verteilung nach G√ºrteln"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"14px",marginBottom:"20px"},children:"Anzahl der Sch√ºler pro G√ºrtelfarbe"}),e.jsx("div",{style:{display:"grid",gap:"10px"},children:P.graduierungen.map((r,i)=>e.jsx(C,{grad:r,stilId:null==z?void 0:z.stil_id,API_BASE:ye},r.graduierung_id||i))})]}),(null==M?void 0:M.gesamt)&&e.jsxs("div",{style:{padding:"25px",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 215, 0, 0.05))",backdropFilter:"blur(20px)",border:"2px solid rgba(255, 215, 0, 0.3)",borderRadius:"12px",position:"sticky",top:"20px"},children:[e.jsx("h4",{style:{color:"#FFD700",fontSize:"18px",marginBottom:"8px",fontWeight:"600",textAlign:"center"},children:"‚úÖ Pr√ºfungs-Erfolgsrate"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"14px",marginBottom:"25px",textAlign:"center"},children:"Erfolgsquote bei G√ºrtelpr√ºfungen"}),e.jsx("div",{style:{textAlign:"center",marginBottom:"25px"},children:e.jsxs("div",{style:{width:"150px",height:"150px",margin:"0 auto",borderRadius:"50%",background:"linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 215, 0, 0.05))",border:"3px solid rgba(255, 215, 0, 0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxShadow:"0 0 30px rgba(255, 215, 0, 0.3)"},children:[e.jsxs("div",{style:{fontSize:"42px",fontWeight:"bold",color:"#FFD700",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)",lineHeight:"1"},children:[M.gesamt.gesamt>0?Math.round(M.gesamt.bestanden/M.gesamt.gesamt*100):0,"%"]}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)",marginTop:"5px"},children:"Erfolgsrate"})]})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsxs("div",{style:{padding:"10px 12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",borderLeft:"3px solid rgba(255,255,255,0.3)",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:"Gesamt:"}),e.jsx("span",{style:{color:"#FFD700",fontWeight:"600",fontSize:"14px"},children:M.gesamt.gesamt||0})]}),e.jsxs("div",{style:{padding:"10px 12px",background:"rgba(50,205,50,0.1)",borderRadius:"8px",borderLeft:"3px solid #32CD32",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:"Bestanden:"}),e.jsx("span",{style:{color:"#32CD32",fontWeight:"600",fontSize:"14px"},children:M.gesamt.bestanden||0})]}),e.jsxs("div",{style:{padding:"10px 12px",background:"rgba(220,20,60,0.1)",borderRadius:"8px",borderLeft:"3px solid #DC143C",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:"Nicht bestanden:"}),e.jsx("span",{style:{color:"#DC143C",fontWeight:"600",fontSize:"14px"},children:M.gesamt.nicht_bestanden||0})]}),e.jsxs("div",{style:{padding:"10px 12px",background:"rgba(255,165,0,0.1)",borderRadius:"8px",borderLeft:"3px solid #FFA500",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px"},children:"Geplant:"}),e.jsx("span",{style:{color:"#FFA500",fontWeight:"600",fontSize:"14px"},children:M.gesamt.geplant||0})]})]})]})]}),(null==(p=null==(m=null==P?void 0:P.pruefungsPunkte)?void 0:m.pro_graduierung)?void 0:p.length)>0&&e.jsxs("div",{style:{marginTop:"30px",padding:"25px",background:"rgba(20, 20, 35, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px"},children:[e.jsx("h4",{style:{color:"#FFD700",fontSize:"18px",marginBottom:"8px",fontWeight:"600"},children:"üìä Pruefungs-Punkte nach Graduierung"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"14px",marginBottom:"20px"},children:"Durchschnittliche Punktzahl bei Pruefungen"}),P.pruefungsPunkte.gesamt&&e.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"20px",padding:"15px",background:"rgba(255, 215, 0, 0.1)",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.3)"},children:[e.jsxs("div",{style:{textAlign:"center",flex:1},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"12px",marginBottom:"4px"},children:"Gesamt-Durchschnitt"}),e.jsx("div",{style:{color:"#FFD700",fontSize:"24px",fontWeight:"bold"},children:(null==(b=P.pruefungsPunkte.gesamt.durchschnitt)?void 0:b.toFixed(1))||"0"})]}),e.jsxs("div",{style:{textAlign:"center",flex:1},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"12px",marginBottom:"4px"},children:"Pruefungen gesamt"}),e.jsx("div",{style:{color:"#FFD700",fontSize:"24px",fontWeight:"bold"},children:P.pruefungsPunkte.gesamt.gesamt_pruefungen||0})]}),e.jsxs("div",{style:{textAlign:"center",flex:1},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"12px",marginBottom:"4px"},children:"Erfolgsquote"}),e.jsxs("div",{style:{color:"#32CD32",fontSize:"24px",fontWeight:"bold"},children:[P.pruefungsPunkte.gesamt.gesamt_pruefungen>0?Math.round(P.pruefungsPunkte.gesamt.gesamt_bestanden/P.pruefungsPunkte.gesamt.gesamt_pruefungen*100):0,"%"]})]})]}),e.jsx("div",{style:{display:"grid",gap:"10px"},children:P.pruefungsPunkte.pro_graduierung.map((r,i)=>{var n,t,a;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"10px 15px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",borderLeft:`4px solid ${r.graduierung_farbe||"#FFD700"}`},children:[e.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:r.graduierung_farbe||"#FFD700",border:"2px solid rgba(255,255,255,0.3)",flexShrink:0}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"14px",fontWeight:"600"},children:r.graduierung_name}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"12px"},children:[r.anzahl_pruefungen," Pruefungen"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:"#FFD700",fontSize:"18px",fontWeight:"bold"},children:(null==(n=parseFloat(r.durchschnitt_punkte))?void 0:n.toFixed(1))||"0"}),e.jsxs("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px"},children:["(",null==(t=r.min_punkte)?void 0:t.toFixed(0)," - ",null==(a=r.max_punkte)?void 0:a.toFixed(0),")"]})]})]},i)})})]}),(null==P?void 0:P.hochstufungen)&&e.jsxs("div",{style:{marginTop:"30px",padding:"25px",background:"rgba(20, 20, 35, 0.7)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px"},children:[e.jsx("h4",{style:{color:"#FFD700",fontSize:"18px",marginBottom:"8px",fontWeight:"600"},children:"üéì Hochstufungen (letzte 12 Monate)"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"14px",marginBottom:"20px"},children:"Erfolgreiche Pruefungen und Graduierungswechsel"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",padding:"20px",background:"linear-gradient(135deg, rgba(50, 205, 50, 0.2), rgba(50, 205, 50, 0.05))",borderRadius:"12px",border:"2px solid rgba(50, 205, 50, 0.3)"},children:[e.jsx("div",{style:{color:"#32CD32",fontSize:"48px",fontWeight:"bold"},children:P.hochstufungen.gesamt_12_monate||0}),e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"14px"},children:"Hochstufungen in 12 Monaten"})]}),(null==(x=P.hochstufungen.pro_monat)?void 0:x.length)>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px",marginBottom:"10px"},children:"Verlauf nach Monat:"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:P.hochstufungen.pro_monat.slice(0,6).map((r,i)=>e.jsxs("div",{style:{padding:"8px 12px",background:"rgba(255,255,255,0.05)",borderRadius:"6px",textAlign:"center",minWidth:"70px"},children:[e.jsx("div",{style:{color:"#FFD700",fontSize:"18px",fontWeight:"bold"},children:r.anzahl}),e.jsx("div",{style:{color:"rgba(255,255,255,0.5)",fontSize:"11px"},children:r.monat_label})]},i))})]}),(null==(f=P.hochstufungen.letzte)?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.7)",fontSize:"13px",marginBottom:"10px"},children:"Letzte Hochstufungen:"}),e.jsx("div",{style:{display:"grid",gap:"8px",maxHeight:"300px",overflowY:"auto"},children:P.hochstufungen.letzte.slice(0,10).map((r,i)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:"8px",borderLeft:`4px solid ${r.zu_farbe||"#FFD700"}`},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"14px",fontWeight:"600"},children:[r.vorname," ",r.nachname]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",backgroundColor:r.von_farbe||"#ccc",border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("span",{style:{color:"rgba(255,255,255,0.5)",fontSize:"12px"},children:"‚Üí"}),e.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",backgroundColor:r.zu_farbe||"#FFD700",border:"1px solid rgba(255,255,255,0.3)"}}),e.jsx("span",{style:{color:"rgba(255,255,255,0.7)",fontSize:"12px"},children:r.zu_graduierung})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{color:"rgba(255,255,255,0.6)",fontSize:"12px"},children:new Date(r.pruefungsdatum).toLocaleDateString("de-DE")}),r.punktzahl&&e.jsxs("div",{style:{color:"#FFD700",fontSize:"13px",fontWeight:"600"},children:[r.punktzahl,"/",r.max_punktzahl||100," Pkt."]})]})]},i))})]})]})]})]})]})]}):e.jsxs("div",{className:"stil-overview",children:[e.jsxs("div",{className:"stil-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:v.filter(e=>e.aktiv).length}),e.jsx("p",{children:"Aktive Stile"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:v.reduce((e,r)=>{var i;return e+((null==(i=r.graduierungen)?void 0:i.length)||0)},0)}),e.jsx("p",{children:"G√ºrtel gesamt"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:v.reduce((e,r)=>e+(r.anzahl_mitglieder||0),0)}),e.jsx("p",{children:"Sch√ºler gesamt"})]})]}),v.filter(e=>e.aktiv).length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"stil-grid",children:(()=>{const r=v.filter(e=>e.aktiv).sort((e,r)=>(e.reihenfolge||0)-(r.reihenfolge||0));return r.map((i,n)=>e.jsx(Ue,{stil:i,onDelete:Ce,onMoveUp:Me,onMoveDown:Ee,isFirst:0===n,isLast:n===r.length-1},i.stil_id))})()})}):0===v.length?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"üéñÔ∏è"}),e.jsx("h3",{children:"Noch keine Stile angelegt"}),e.jsx("p",{children:"Legen Sie Ihren ersten Kampfkunst-Stil an, um zu beginnen"}),e.jsx("button",{onClick:()=>O(!0),className:"sub-tab-btn",disabled:N,children:"+ Ersten Stil anlegen"})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"‚úì"}),e.jsx("h3",{children:"Alle Stile sind inaktiv"}),e.jsx("p",{children:"Aktivieren Sie einen Stil oder legen Sie einen neuen an"})]}),v.filter(e=>!e.aktiv).length>0&&e.jsxs("div",{className:"inactive-stile-section",children:[e.jsxs("button",{className:"inactive-stile-toggle",onClick:()=>Q(!Z),children:[e.jsx("span",{className:"toggle-icon",children:Z?"‚ñº":"‚ñ∂"}),e.jsxs("span",{className:"toggle-text",children:["Inaktive Stile (",v.filter(e=>!e.aktiv).length,")"]})]}),Z&&e.jsx(i.div,{className:"stil-grid inactive-grid",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:v.filter(e=>!e.aktiv).sort((e,r)=>(e.name||"").localeCompare(r.name||"")).map(r=>e.jsx(Ue,{stil:r,onDelete:Ce},r.stil_id))})]})]})}),e.jsx(r,{children:K&&e.jsx(i.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>Ae(),style:{display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"2rem 0",overflowY:"auto"},children:e.jsxs(i.div,{className:"modal-content create-stil-modal stil-modal",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:e=>e.stopPropagation(),style:{display:"block",width:"90%",maxWidth:"700px",margin:"0 auto",padding:"2rem",boxSizing:"border-box",overflowX:"hidden",overflowY:"visible",background:"rgba(26, 26, 46, 0.98)",borderRadius:"20px",border:"1px solid rgba(255, 215, 0, 0.3)",position:"relative"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"modal-title-section",children:[e.jsx("h3",{className:"modal-title",children:"Neuen Stil anlegen"}),e.jsxs("div",{className:"progress-indicator",children:[e.jsx("div",{className:"progress-step "+(J>=1?"active":""),children:"1"}),e.jsx("div",{className:"progress-line "+(J>=2?"active":"")}),e.jsx("div",{className:"progress-step "+(J>=2?"active":""),children:"2"}),e.jsx("div",{className:"progress-line "+(J>=3?"active":"")}),e.jsx("div",{className:"progress-step "+(J>=3?"active":""),children:"3"})]})]}),e.jsx("button",{className:"modal-close",onClick:()=>Ae(),title:"Schlie√üen",children:"√ó"})]}),1===J&&e.jsxs(i.div,{className:"modal-step",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"step-title",children:[e.jsx("h4",{children:"üìù Grundinformationen"}),e.jsx("p",{children:"Geben Sie die grundlegenden Informationen zum neuen Stil ein."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Stil-Name *"}),e.jsx("input",{type:"text",value:fe.name,onChange:e=>Ie("name",e.target.value),placeholder:"z.B. Karate, Taekwon-Do, Kickboxen...",className:"form-input",autoFocus:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Kategorie"}),e.jsxs("select",{value:fe.kategorie,onChange:e=>Ie("kategorie",e.target.value),className:"form-select",children:[e.jsx("option",{value:"kampfkunst",children:"ü•ã Kampfkunst"}),e.jsx("option",{value:"selbstverteidigung",children:"üõ°Ô∏è Selbstverteidigung"}),e.jsx("option",{value:"fitness",children:"üí™ Fitness & Kondition"}),e.jsx("option",{value:"sport",children:"üèÜ Wettkampfsport"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Beschreibung"}),e.jsx("textarea",{value:fe.beschreibung,onChange:e=>Ie("beschreibung",e.target.value),rows:"3",placeholder:"Kurze Beschreibung des Stils, seiner Herkunft und Besonderheiten...",className:"form-textarea"})]})]}),2===J&&e.jsxs(i.div,{className:"modal-step",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"step-title",children:[e.jsx("h4",{children:"‚öôÔ∏è Trainingsdetails"}),e.jsx("p",{children:"Definieren Sie die Trainingsparameter f√ºr diesen Stil."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Schwierigkeitsgrad"}),e.jsxs("select",{value:fe.schwierigkeitsgrad,onChange:e=>Ie("schwierigkeitsgrad",e.target.value),className:"form-select",children:[e.jsx("option",{value:"anfaenger",children:"üü¢ Anf√§nger"}),e.jsx("option",{value:"mittel",children:"üü° Mittel"}),e.jsx("option",{value:"fortgeschritten",children:"üî¥ Fortgeschritten"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Altersgruppe"}),e.jsxs("select",{value:fe.altergruppe,onChange:e=>Ie("altergruppe",e.target.value),className:"form-select",children:[e.jsx("option",{value:"kinder",children:"üë∂ Kinder (4-12)"}),e.jsx("option",{value:"jugendliche",children:"üßí Jugendliche (13-17)"}),e.jsx("option",{value:"erwachsene",children:"üë® Erwachsene (18+)"}),e.jsx("option",{value:"alle",children:"üë• Alle Altersgruppen"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Trainingsdauer (Minuten)"}),e.jsx("input",{type:"number",value:fe.trainingsdauer,onChange:e=>Ie("trainingsdauer",parseInt(e.target.value)),min:"30",max:"180",step:"15",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Ben√∂tigte Ausr√ºstung"}),e.jsx("div",{className:"equipment-tags",children:["Gi/Anzug","G√ºrtel","Handschuhe","Schienbeinschoner","Mundschutz","Boxhandschuhe"].map(r=>e.jsxs("label",{className:"equipment-tag",children:[e.jsx("input",{type:"checkbox",checked:fe.ausruestung.includes(r),onChange:e=>{e.target.checked?Ie("ausruestung",[...fe.ausruestung,r]):Ie("ausruestung",fe.ausruestung.filter(e=>e!==r))}}),e.jsx("span",{children:r})]},r))})]})]}),3===J&&e.jsxs(i.div,{className:"modal-step",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[e.jsxs("div",{className:"step-title",children:[e.jsx("h4",{children:"‚úÖ Best√§tigung"}),e.jsx("p",{children:"√úberpr√ºfen Sie Ihre Eingaben vor dem Erstellen."})]}),e.jsxs("div",{className:"confirmation-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Name:"})," ",fe.name]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Kategorie:"})," ",fe.kategorie]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Schwierigkeitsgrad:"})," ",fe.schwierigkeitsgrad]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Altersgruppe:"})," ",fe.altergruppe]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Trainingsdauer:"})," ",fe.trainingsdauer," Minuten"]}),fe.beschreibung&&e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Beschreibung:"})," ",fe.beschreibung]}),fe.ausruestung.length>0&&e.jsxs("div",{className:"summary-item",children:[e.jsx("strong",{children:"Ausr√ºstung:"})," ",fe.ausruestung.join(", ")]})]}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{className:"form-label",children:[e.jsx("input",{type:"checkbox",checked:fe.aktiv,onChange:e=>Ie("aktiv",e.target.checked)}),"Stil ist sofort aktiv und verf√ºgbar"]})})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>Ae(),className:"btn btn-secondary",disabled:N,children:"Abbrechen"}),e.jsxs("div",{className:"step-navigation",children:[J>1&&e.jsx("button",{onClick:()=>H(J-1),className:"btn btn-outline",disabled:N,children:"‚Üê Zur√ºck"}),J<3?e.jsx("button",{onClick:()=>H(J+1),className:"btn btn-primary",disabled:!fe.name.trim()||N,children:"Weiter ‚Üí"}):e.jsx("button",{onClick:async()=>{if(fe.name.trim()){_(!0);try{const e=await fetch(`${ye}/stile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fe)});if(e.ok){const r=await e.json();S([...v,r]),A(`Stil "${fe.name}" erfolgreich erstellt!`),O(!1),je({name:"",beschreibung:"",aktiv:!0}),setTimeout(()=>A(""),3e3),console.log("‚úÖ Stil erstellt:",r)}else{const r=await e.json().catch(()=>({error:"Unbekannter Fehler"}));D(r.error||"Fehler beim Erstellen des Stils")}}catch(e){console.error("‚ùå Fehler beim Erstellen des Stils:",e),D("Stil konnte nicht erstellt werden. Bitte Server pr√ºfen.")}finally{_(!1)}}else D("Stil-Name ist erforderlich")},className:"btn btn-success",disabled:!fe.name.trim()||N,children:N?"Wird erstellt...":"‚úÖ Stil anlegen"})]})]})]})})}),e.jsx(r,{children:V&&q&&e.jsx(i.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Te,children:e.jsxs(i.div,{className:"modal-content stil-modal",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Graduierung bearbeiten"}),e.jsx("button",{className:"modal-close",onClick:Te,title:"Schlie√üen",children:"√ó"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Name:"}),e.jsx("input",{type:"text",value:q.name,onChange:e=>X({...q,name:e.target.value}),placeholder:"Graduierungsname",className:"form-input"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Reihenfolge:"}),e.jsx("input",{type:"number",min:"1",value:q.reihenfolge||"",onChange:e=>X({...q,reihenfolge:parseInt(e.target.value)||1}),placeholder:"Reihenfolge (z.B. 1, 2, 3...)",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Trainingsstunden (min.):"}),e.jsx("input",{type:"number",min:"0",value:q.trainingsstunden_min||"",onChange:e=>X({...q,trainingsstunden_min:parseInt(e.target.value)||0}),placeholder:"Mindest-Trainingsstunden",className:"form-input"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Mindestzeit (Monate):"}),e.jsx("input",{type:"number",min:"0",value:q.mindestzeit_monate||"",onChange:e=>X({...q,mindestzeit_monate:parseInt(e.target.value)||0}),placeholder:"Mindestzeit in Monaten",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Prim√§rfarbe:"}),e.jsx("input",{type:"color",value:q.farbe_hex||"#FFFFFF",onChange:e=>X({...q,farbe_hex:e.target.value}),className:"color-picker"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Sekund√§rfarbe (optional):"}),e.jsx("input",{type:"color",value:q.farbe_sekundaer||"",onChange:e=>X({...q,farbe_sekundaer:e.target.value}),className:"color-picker"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Kategorie (optional):"}),e.jsxs("select",{value:q.kategorie||"",onChange:e=>{const r=e.target.value||null;let i=q.mindestzeit_monate;"grundstufe"===r&&(null==z?void 0:z.wartezeit_grundstufe)?i=z.wartezeit_grundstufe:"mittelstufe"===r&&(null==z?void 0:z.wartezeit_mittelstufe)?i=z.wartezeit_mittelstufe:"oberstufe"===r&&(null==z?void 0:z.wartezeit_oberstufe)&&(i=z.wartezeit_oberstufe),X({...q,kategorie:r,mindestzeit_monate:i})},className:"form-select",children:[e.jsx("option",{value:"",children:"Keine Kategorie"}),e.jsx("option",{value:"grundstufe",children:"Grundstufe"}),e.jsx("option",{value:"mittelstufe",children:"Mittelstufe"}),e.jsx("option",{value:"oberstufe",children:"Oberstufe"}),e.jsx("option",{value:"meister",children:"Meister"})]})]})]}),e.jsxs("div",{className:"belt-preview-section",children:[e.jsx("h4",{children:"G√ºrtel-Vorschau:"}),e.jsxs("div",{className:"selected-belt-preview",children:[e.jsx(ve,{primaer:q.farbe_hex||"#FFFFFF",sekundaer:q.farbe_sekundaer||"",size:"large"}),e.jsxs("div",{className:"belt-info",children:[e.jsx("strong",{children:q.name||"Unbenannte Graduierung"}),e.jsxs("div",{className:"color-codes",children:[e.jsxs("span",{children:["Prim√§r: ",q.farbe_hex||"#FFFFFF"]}),q.farbe_sekundaer&&e.jsxs("span",{children:["Sekund√§r: ",q.farbe_sekundaer]})]})]})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:Te,className:"btn btn-secondary",disabled:N,children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{var e;if(q&&(null==(e=q.name)?void 0:e.trim())){_(!0);try{const e={name:q.name.trim(),reihenfolge:q.reihenfolge||1,trainingsstunden_min:q.trainingsstunden_min||0,mindestzeit_monate:q.mindestzeit_monate||0,farbe_hex:q.farbe_hex||"#FFFFFF",farbe_sekundaer:q.farbe_sekundaer||null,kategorie:q.kategorie||null,dan_grad:q.dan_grad||null,aktiv:!1!==q.aktiv?1:0};console.log("üíæ Speichere Graduierung:",e);const r=await fetch(`${ye}/stile/graduierungen/${q.graduierung_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok)A("Graduierung erfolgreich aktualisiert!"),Y(!1),X(null),setTimeout(async()=>{z&&await _e(z.stil_id)},100);else{const e=await r.json();D(e.error||"Fehler beim Speichern der Graduierung")}}catch(r){console.error("‚ùå Fehler beim Speichern der Graduierung:",r),D("Netzwerkfehler beim Speichern")}finally{_(!1)}}else D("Name ist erforderlich")},className:"btn btn-primary",disabled:!(null==(j=q.name)?void 0:j.trim())||N,children:N?"Wird gespeichert...":"‚úÖ Speichern"})]})]})})}),e.jsx(Oe,{}),e.jsx(Je,{})]})})};export{B as default};
