import{j as e}from"./animation-1wuIdCBS.js";import{r as s}from"./vendor-router-BhMXg4Z-.js";import{g as a}from"./index-BJCk5MxH.js";import{e as n,p as r,aW as i,o as t,k as l}from"./icons-C6KFH58b.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";const c=()=>{var c,d;const[o,m]=s.useState([]),[h,j]=s.useState(null),[u,x]=s.useState(!0),[v,g]=s.useState("recent"),[N,p]=s.useState("all");s.useEffect(()=>{(async()=>{try{const e=await fetch(`${a.apiBaseUrl}/admin/course-ratings`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();m(s.ratings||[])}}catch(e){console.error("Fehler beim Laden der Bewertungen:",e)}})(),(async()=>{try{const e=await fetch(`${a.apiBaseUrl}/admin/rating-stats`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();j(s)}}catch(e){console.error("Fehler beim Laden der Statistiken:",e)}})(),x(!1)},[]);const b=o.filter(e=>"all"===N||e.bewertung.toString()===N),f=s=>Array.from({length:5},(a,r)=>e.jsx(n,{size:16,className:r<s?"filled":"empty",style:{color:r<s?"#ffd700":"rgba(255, 255, 255, 0.3)",fill:r<s?"#ffd700":"none"}},r));return u?e.jsxs("div",{className:"course-rating-admin",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Lade Bewertungen..."})]}):e.jsxs("div",{className:"course-rating-admin",children:[e.jsxs("div",{className:"admin-header",children:[e.jsxs("h1",{children:[e.jsx(n,{size:28}),"Kurs-Bewertungen - Admin"]}),e.jsx("p",{children:"Übersicht aller Kursbewertungen und Statistiken"})]}),h&&e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(n,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:h.overall.total_ratings}),e.jsx("div",{className:"stat-label",children:"Gesamtbewertungen"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(r,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:(null==(c=h.overall.average_rating)?void 0:c.toFixed(1))||"0.0"}),e.jsx("div",{className:"stat-label",children:"Durchschnittsbewertung"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(i,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:h.overall.with_comments}),e.jsx("div",{className:"stat-label",children:"Mit Kommentaren"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(t,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:(null==(d=h.byCourse)?void 0:d.length)||0}),e.jsx("div",{className:"stat-label",children:"Bewertete Kurse"})]})]})]}),e.jsxs("div",{className:"admin-tabs",children:[e.jsx("button",{className:"tab "+("recent"===v?"active":""),onClick:()=>g("recent"),children:"Neueste Bewertungen"}),e.jsx("button",{className:"tab "+("courses"===v?"active":""),onClick:()=>g("courses"),children:"Nach Kursen"})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("label",{children:"Bewertung filtern:"}),e.jsxs("select",{value:N,onChange:e=>p(e.target.value),children:[e.jsx("option",{value:"all",children:"Alle Bewertungen"}),e.jsx("option",{value:"5",children:"5 Sterne"}),e.jsx("option",{value:"4",children:"4 Sterne"}),e.jsx("option",{value:"3",children:"3 Sterne"}),e.jsx("option",{value:"2",children:"2 Sterne"}),e.jsx("option",{value:"1",children:"1 Stern"})]})]}),"recent"===v&&e.jsxs("div",{className:"ratings-list",children:[e.jsx("h2",{children:"Neueste Bewertungen"}),b.length>0?e.jsx("div",{className:"ratings-grid",children:b.map(s=>{return e.jsxs("div",{className:"rating-card",children:[e.jsxs("div",{className:"rating-header",children:[e.jsxs("div",{className:"course-info",children:[e.jsx("h3",{children:s.kurs_name}),e.jsxs("span",{className:"course-time",children:[s.uhrzeit," • ",s.raum]})]}),e.jsx("div",{className:"rating-stars",children:f(s.bewertung)})]}),e.jsxs("div",{className:"rating-details",children:[e.jsxs("div",{className:"member-info",children:[e.jsxs("strong",{children:[s.mitglied_vorname," ",s.mitglied_nachname]}),e.jsx("span",{children:(a=s.erstellt_am,new Date(a).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.jsx("div",{className:"trainer-info",children:e.jsxs("span",{children:["Trainer: ",s.trainer_vorname," ",s.trainer_nachname]})})]}),s.kommentar&&e.jsxs("div",{className:"rating-comment",children:[e.jsx(i,{size:16}),e.jsxs("p",{children:['"',s.kommentar,'"']})]})]},s.id);var a})}):e.jsxs("div",{className:"no-data",children:[e.jsx(l,{size:48}),e.jsx("p",{children:"Keine Bewertungen gefunden"})]})]}),"courses"===v&&h&&e.jsxs("div",{className:"courses-stats",children:[e.jsx("h2",{children:"Bewertungen nach Kursen"}),e.jsx("div",{className:"courses-grid",children:h.byCourse.map(s=>{var a;return e.jsxs("div",{className:"course-stat-card",children:[e.jsxs("div",{className:"course-header",children:[e.jsx("h3",{children:s.kurs_name}),e.jsxs("div",{className:"course-rating",children:[f(Math.round(s.average_rating)),e.jsx("span",{className:"rating-number",children:null==(a=s.average_rating)?void 0:a.toFixed(1)})]})]}),e.jsx("div",{className:"course-stats",children:e.jsxs("span",{children:[s.rating_count," Bewertung",1!==s.rating_count?"en":""]})})]},s.kurs_name)})})]})]})};export{c as default};
