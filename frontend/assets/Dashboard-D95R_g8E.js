import{j as e}from"./animation-1wuIdCBS.js";import{r as s,b as a,e as r,u as n,O as i}from"./vendor-router-BhMXg4Z-.js";import{a as t,u as l,b as d,c,d as o,e as h,f as m,g as x,S as u,h as p,i as j,j as g}from"./index-BJCk5MxH.js";import{j as b}from"./index-CkXcCt97.js";/* empty css                  */import{D as v,S as f,T as y,A as N}from"./TrialBanner-XVMCSMGu.js";import k from"./MemberDashboard-Df-JwT5Q.js";import{m as z,n as S,o as w,A as D,D as _,p as A,k as C,g as E,q as B,T as F,F as T,r as R,d as L,s as M,t as I,u as P,P as U,v as V,w as $,x as K,G as W,y as O,z as Z,a as G,b as H,J,K as q,N as Y,O as Q,Q as X,R as ee}from"./icons-C6KFH58b.js";import{R as se,A as ae,C as re,X as ne,Y as ie,T as te,a as le,B as de,b as ce,P as oe,c as he,d as me,L as xe}from"./charts-CuVbSI8O.js";import ue from"./VerbandDashboard-Co4B13cV.js";import{A as pe}from"./AgbStatusWidget-DvDtnFRB.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./MemberHeader-Byiis1Cp.js";/* empty css                      */import"./index-B7BewSvP.js";const je=["#FFD700","#FFA500","#FF6B35","#4ECDC4","#45B7D1","#96CEB4"],ge=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],be=(e,s=0)=>{const a=parseFloat(e);return isNaN(a)||null==e?s>0?"0,00":"0":a.toLocaleString("de-DE",{minimumFractionDigits:s,maximumFractionDigits:s})},ve=({icon:s,title:a,subtitle:r})=>e.jsxs("div",{className:"empty-state",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"rgba(255,255,255,0.5)",textAlign:"center"},children:[e.jsx(s,{size:48,style:{marginBottom:"16px",opacity:.5}}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:500,marginBottom:"8px"},children:a}),e.jsx("div",{style:{fontSize:"0.9rem",opacity:.7},children:r})]}),fe=({token:a})=>{const[r,n]=s.useState(!0),[i,l]=s.useState(""),[d,c]=s.useState(null);s.useEffect(()=>{o()},[]);const o=async()=>{var e,s;n(!0),l("");try{const e=await t.get("/admin/statistics",{headers:{Authorization:`Bearer ${a}`}});c(e.data.statistics),console.log("✅ Statistiken geladen:",e.data.statistics)}catch(r){console.error("❌ Fehler beim Laden der Statistiken:",r),l((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.message)||"Fehler beim Laden der Statistiken")}finally{n(!1)}};if(r)return e.jsxs("div",{className:"statistics-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Statistiken..."})]});if(i)return e.jsxs("div",{className:"statistics-error",children:[e.jsx("p",{children:i}),e.jsx("button",{onClick:o,className:"btn btn-primary",children:"Erneut versuchen"})]});if(!d)return e.jsx("div",{className:"statistics-tab",children:e.jsx(ve,{icon:z,title:"Noch keine Statistiken verfügbar",subtitle:"Sobald Daten vorliegen, werden hier Statistiken angezeigt"})});const h=d.memberStatus||{aktiv:0,inaktiv:0},m=d.trialStats||{trial:0,active:0},x=Array.isArray(d.revenuePerDojo)?d.revenuePerDojo:[],u=(Array.isArray(d.revenueTrend)?d.revenueTrend:[]).map(e=>({monat:ge[(e.monat||1)-1],umsatz:parseFloat(e.umsatz)||0})),p=(j=x,g="umsatz",Array.isArray(j)&&0!==j.length?j.reduce((e,s)=>e+(parseFloat(s[g])||0),0):0);var j,g;const b=p>0||u.some(e=>e.umsatz>0);return e.jsxs("div",{className:"statistics-tab",children:[e.jsxs("div",{className:"stats-kpi-grid",children:[e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(S,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Conversion Rate"}),e.jsxs("div",{className:"kpi-value",children:[be(d.conversionRate||0),"%"]}),e.jsx("div",{className:"kpi-sublabel",children:"Trial → Active"})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon primary",children:e.jsx(w,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Aktive Mitglieder"}),e.jsx("div",{className:"kpi-value",children:be(h.aktiv)}),e.jsxs("div",{className:"kpi-sublabel",children:["von ",be((h.aktiv||0)+(h.inaktiv||0))," gesamt"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon warning",children:e.jsx(D,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Trial Dojos"}),e.jsx("div",{className:"kpi-value",children:be(m.trial)}),e.jsxs("div",{className:"kpi-sublabel",children:[be(m.active)," aktive Abos"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(_,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsxs("div",{className:"kpi-label",children:["Gesamt-Umsatz ",(new Date).getFullYear()]}),e.jsx("div",{className:"kpi-value",children:p>0?`${be(p,2)} €`:"Noch keine Umsätze"}),e.jsx("div",{className:"kpi-sublabel",children:x.length>0?`${x.length} Dojos`:"Keine Daten"})]})]})]}),e.jsxs("div",{className:"charts-grid",children:[e.jsxs("div",{className:"chart-card",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(A,{size:18}),"Umsatz-Entwicklung ",(new Date).getFullYear()]}),u.length>0&&b?e.jsx(se,{width:"100%",height:300,children:e.jsxs(ae,{data:u,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUmsatz",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#FFD700",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#FFD700",stopOpacity:0})]})}),e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(ne,{dataKey:"monat",stroke:"#fff"}),e.jsx(ie,{stroke:"#fff"}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},labelStyle:{color:"#FFD700"},formatter:e=>[`${be(e,2)} €`,"Umsatz"]}),e.jsx(le,{type:"monotone",dataKey:"umsatz",stroke:"#FFD700",fillOpacity:1,fill:"url(#colorUmsatz)"})]})}):e.jsx(ve,{icon:A,title:"Noch keine Umsätze",subtitle:"Umsatzdaten werden hier angezeigt, sobald Einnahmen verbucht werden"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(_,{size:18}),"Umsatz pro Dojo"]}),x.length>0&&p>0?e.jsx(se,{width:"100%",height:300,children:e.jsxs(de,{data:x,children:[e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(ne,{dataKey:"dojoname",stroke:"#fff",angle:-45,textAnchor:"end",height:100}),e.jsx(ie,{stroke:"#fff"}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},labelStyle:{color:"#FFD700"},formatter:e=>[`${be(e,2)} €`,"Umsatz"]}),e.jsx(ce,{dataKey:"umsatz",fill:"#FFD700"})]})}):e.jsx(ve,{icon:_,title:"Noch keine Umsätze pro Dojo",subtitle:"Hier werden Umsätze nach Dojo aufgeschlüsselt"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(D,{size:18}),"Subscription Status"]}),Array.isArray(d.subscriptionDistribution)&&d.subscriptionDistribution.length>0?e.jsx(se,{width:"100%",height:300,children:e.jsxs(oe,{children:[e.jsx(he,{data:d.subscriptionDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({status:e,anzahl:s})=>`${e}: ${be(s)}`,outerRadius:100,fill:"#8884d8",dataKey:"anzahl",nameKey:"status",children:d.subscriptionDistribution.map((s,a)=>e.jsx(me,{fill:je[a%je.length]},`cell-${a}`))}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"}})]})}):e.jsx(ve,{icon:D,title:"Keine Abonnements",subtitle:"Hier wird die Verteilung der Abo-Status angezeigt"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(w,{size:18}),"Top Dojos nach Mitgliedern"]}),Array.isArray(d.topDojos)&&d.topDojos.length>0?e.jsx(se,{width:"100%",height:300,children:e.jsxs(de,{data:d.topDojos,layout:"vertical",children:[e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(ne,{type:"number",stroke:"#fff"}),e.jsx(ie,{dataKey:"dojoname",type:"category",stroke:"#fff",width:150}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},labelStyle:{color:"#FFD700"}}),e.jsx(ce,{dataKey:"mitglieder",fill:"#4ECDC4"})]})}):e.jsx(ve,{icon:w,title:"Noch keine Dojos mit Mitgliedern",subtitle:"Top Dojos werden hier angezeigt, sobald Mitglieder registriert sind"})]})]})]})},ye=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],Ne=(e,s=0)=>{const a=parseFloat(e);return isNaN(a)||null==e?s>0?"0,00":"0":a.toLocaleString("de-DE",{minimumFractionDigits:s,maximumFractionDigits:s})},ke=({icon:s,title:a,subtitle:r})=>e.jsxs("div",{className:"empty-state",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"rgba(255,255,255,0.5)",textAlign:"center"},children:[e.jsx(s,{size:48,style:{marginBottom:"16px",opacity:.5}}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:500,marginBottom:"8px"},children:a}),e.jsx("div",{style:{fontSize:"0.9rem",opacity:.7},children:r})]}),ze=({token:a})=>{var r,n,i,l,d,c,o,h,m;const[x,u]=s.useState(!0),[p,j]=s.useState(""),[g,b]=s.useState(null);s.useEffect(()=>{v()},[]);const v=async()=>{var e,s;u(!0),j("");try{const e=await t.get("/admin/finance",{headers:{Authorization:`Bearer ${a}`}});b(e.data.finance),console.log("✅ Finanzdaten geladen:",e.data.finance)}catch(r){console.error("❌ Fehler beim Laden der Finanzdaten:",r),j((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.message)||"Fehler beim Laden der Finanzdaten")}finally{u(!1)}};if(x)return e.jsxs("div",{className:"statistics-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Finanzdaten..."})]});if(p)return e.jsxs("div",{className:"statistics-error",children:[e.jsx("p",{children:p}),e.jsx("button",{onClick:v,className:"btn btn-primary",children:"Erneut versuchen"})]});if(!g)return null;const f=g.monthlyRevenue.map(e=>({monat:ye[e.monat-1],bezahlt:e.bezahlt,offen:e.offen,gesamt:e.umsatz})),y=[{name:"Pünktlich",value:g.paymentBehavior.onTimeCount,color:"#4ECDC4"},{name:"Verspätet",value:g.paymentBehavior.lateCount,color:"#FFA500"},{name:"Offen",value:g.paymentBehavior.overdueCount,color:"#FF6B35"}];return e.jsxs("div",{className:"statistics-tab finance-tab",children:[e.jsxs("div",{className:"stats-kpi-grid",children:[e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(_,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsxs("div",{className:"kpi-label",children:["Gesamt-Umsatz ",(new Date).getFullYear()]}),e.jsxs("div",{className:"kpi-value",children:[Ne(null==(r=null==g?void 0:g.overview)?void 0:r.totalRevenue,2)," €"]}),e.jsxs("div",{className:"kpi-sublabel",children:[Ne(null==(n=null==g?void 0:g.overview)?void 0:n.totalInvoices)," Rechnungen"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon primary",children:e.jsx(A,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"MRR (Monthly Recurring Revenue)"}),e.jsxs("div",{className:"kpi-value",children:[Ne(null==(i=null==g?void 0:g.subscriptionRevenue)?void 0:i.monthlyRecurringRevenue,2)," €"]}),e.jsxs("div",{className:"kpi-sublabel",children:["ARR: ",Ne(null==(l=null==g?void 0:g.subscriptionRevenue)?void 0:l.annualRecurringRevenue,2)," €"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon warning",children:e.jsx(C,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Offene Rechnungen"}),e.jsxs("div",{className:"kpi-value",children:[Ne(null==(d=null==g?void 0:g.overview)?void 0:d.unpaidAmount,2)," €"]}),e.jsxs("div",{className:"kpi-sublabel",children:[Ne(null==(c=null==g?void 0:g.overview)?void 0:c.unpaidInvoices)," Rechnungen"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(E,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Zahlungsmoral"}),e.jsxs("div",{className:"kpi-value",children:[Ne(null==(o=null==g?void 0:g.paymentBehavior)?void 0:o.onTimeRate),"%"]}),e.jsx("div",{className:"kpi-sublabel",children:"Pünktlich bezahlt"})]})]})]}),e.jsxs("div",{className:"charts-grid",children:[e.jsxs("div",{className:"chart-card chart-wide",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(A,{size:18}),"Monatliche Umsatz-Entwicklung ",(new Date).getFullYear()]}),f.length>0&&f.some(e=>e.bezahlt>0||e.offen>0)?e.jsx(se,{width:"100%",height:300,children:e.jsxs(ae,{data:f,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorBezahlt",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#4ECDC4",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#4ECDC4",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"colorOffen",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#FF6B35",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#FF6B35",stopOpacity:.1})]})]}),e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(ne,{dataKey:"monat",stroke:"#fff"}),e.jsx(ie,{stroke:"#fff"}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},labelStyle:{color:"#FFD700"}}),e.jsx(xe,{}),e.jsx(le,{type:"monotone",dataKey:"bezahlt",stackId:"1",stroke:"#4ECDC4",fill:"url(#colorBezahlt)",name:"Bezahlt"}),e.jsx(le,{type:"monotone",dataKey:"offen",stackId:"1",stroke:"#FF6B35",fill:"url(#colorOffen)",name:"Offen"})]})}):e.jsx(ke,{icon:A,title:"Noch keine Umsätze",subtitle:"Umsatzdaten werden hier angezeigt, sobald Einnahmen verbucht werden"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(_,{size:18}),"Umsatz pro Dojo"]}),Array.isArray(g.revenuePerDojo)&&g.revenuePerDojo.length>0?e.jsx(se,{width:"100%",height:300,children:e.jsxs(de,{data:g.revenuePerDojo,children:[e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(ne,{dataKey:"dojoname",stroke:"#fff",angle:-45,textAnchor:"end",height:100}),e.jsx(ie,{stroke:"#fff"}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},labelStyle:{color:"#FFD700"}}),e.jsx(xe,{}),e.jsx(ce,{dataKey:"bezahlt",stackId:"a",fill:"#4ECDC4",name:"Bezahlt"}),e.jsx(ce,{dataKey:"offen",stackId:"a",fill:"#FF6B35",name:"Offen"})]})}):e.jsx(ke,{icon:_,title:"Noch keine Dojo-Umsätze",subtitle:"Hier werden Umsätze nach Dojo aufgeschlüsselt"})]}),e.jsxs("div",{className:"chart-card",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(B,{size:18}),"Zahlungsverhalten"]}),y.some(e=>e.value>0)?e.jsxs(e.Fragment,{children:[e.jsx(se,{width:"100%",height:300,children:e.jsxs(oe,{children:[e.jsx(he,{data:y,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,value:s})=>`${e}: ${s}`,outerRadius:100,fill:"#8884d8",dataKey:"value",nameKey:"name",children:y.map((s,a)=>e.jsx(me,{fill:s.color},`cell-${a}`))}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"}})]})}),e.jsx("div",{className:"payment-stats",children:e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-label",children:"Durchschn. Tage bis Zahlung:"}),e.jsxs("span",{className:"stat-value",children:[Ne(null==(h=null==g?void 0:g.paymentBehavior)?void 0:h.avgDaysToPayment)," Tage"]})]})})]}):e.jsx(ke,{icon:B,title:"Noch keine Zahlungsdaten",subtitle:"Hier wird das Zahlungsverhalten analysiert"})]})]}),e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(_,{size:18}),"Subscription Revenue Details"]}),Array.isArray(null==(m=null==g?void 0:g.subscriptionRevenue)?void 0:m.breakdown)&&g.subscriptionRevenue.breakdown.length>0?e.jsx("div",{className:"subscription-grid",children:g.subscriptionRevenue.breakdown.map((s,a)=>e.jsxs("div",{className:"subscription-card",children:[e.jsx("div",{className:"sub-plan",children:s.plan_name||"Standard Plan"}),e.jsxs("div",{className:"sub-details",children:[e.jsxs("div",{className:"sub-count",children:[Ne(s.anzahl)," Dojos"]}),e.jsxs("div",{className:"sub-price",children:[Ne(s.preis_monatlich,2)," € / Monat"]}),e.jsxs("div",{className:"sub-total",children:["= ",Ne((parseFloat(s.preis_monatlich)||0)*(parseInt(s.anzahl)||0),2)," € / Monat"]})]})]},a))}):e.jsx(ke,{icon:_,title:"Keine Subscriptions",subtitle:"Hier werden die aktiven Abo-Pläne angezeigt"})]}),e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(C,{size:18}),"Top 10 Offene/Überfällige Rechnungen"]}),Array.isArray(null==g?void 0:g.openInvoices)&&g.openInvoices.length>0?e.jsx("div",{className:"finance-table-container",children:e.jsxs("table",{className:"finance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Rechnung"}),e.jsx("th",{children:"Dojo"}),e.jsx("th",{children:"Mitglied"}),e.jsx("th",{children:"Betrag"}),e.jsx("th",{children:"Fällig am"}),e.jsx("th",{children:"Überfällig"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:g.openInvoices.map((s,a)=>e.jsxs("tr",{className:s.tage_ueberfaellig>0?"overdue":"",children:[e.jsx("td",{className:"invoice-number",children:s.rechnungsnummer}),e.jsx("td",{children:s.dojoname}),e.jsxs("td",{children:[s.vorname," ",s.nachname]}),e.jsxs("td",{className:"amount",children:[Ne(s.gesamtsumme,2)," €"]}),e.jsx("td",{children:s.faellig_am?new Date(s.faellig_am).toLocaleDateString("de-DE"):"-"}),e.jsx("td",{className:"overdue-days",children:s.tage_ueberfaellig>0?`${s.tage_ueberfaellig} Tage`:"-"}),e.jsx("td",{children:e.jsx("span",{className:"status-badge "+(s.tage_ueberfaellig>0?"overdue":"pending"),children:s.tage_ueberfaellig>0?"Überfällig":"Offen"})})]},a))})]})}):e.jsx(ke,{icon:E,title:"Keine offenen Rechnungen",subtitle:"Alle Rechnungen sind bezahlt - super!"})]}),e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(_,{size:18}),"Durchschnittlicher Umsatz pro Mitglied"]}),Array.isArray(null==g?void 0:g.avgRevenuePerMember)&&g.avgRevenuePerMember.length>0?e.jsx("div",{className:"avg-revenue-grid",children:g.avgRevenuePerMember.map((s,a)=>e.jsxs("div",{className:"avg-revenue-card",children:[e.jsx("div",{className:"dojo-name",children:s.dojoname}),e.jsxs("div",{className:"avg-amount",children:[Ne(s.avg_umsatz_pro_mitglied,2)," €"]}),e.jsxs("div",{className:"member-count",children:[Ne(s.aktive_mitglieder)," aktive Mitglieder"]})]},a))}):e.jsx(ke,{icon:z,title:"Noch keine Daten",subtitle:"Hier wird der durchschnittliche Umsatz pro Mitglied angezeigt"})]})]})},Se=["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],we=({token:a})=>{var r,n,i,l,d,c;const[o,h]=s.useState(!0),[m,x]=s.useState(""),[u,p]=s.useState(null);s.useEffect(()=>{j()},[]);const j=async()=>{var e,s;h(!0),x("");try{const e=await t.get("/admin/contracts",{headers:{Authorization:`Bearer ${a}`}});p(e.data.contracts),console.log("✅ Vertragsdaten geladen:",e.data.contracts)}catch(r){console.error("❌ Fehler beim Laden der Vertragsdaten:",r),x((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.message)||"Fehler beim Laden der Vertragsdaten")}finally{h(!1)}};if(o)return e.jsxs("div",{className:"statistics-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Vertragsdaten..."})]});if(m)return e.jsxs("div",{className:"statistics-error",children:[e.jsx("p",{children:m}),e.jsx("button",{onClick:j,className:"btn btn-primary",children:"Erneut versuchen"})]});if(!u)return null;const g=u.monthlyContracts.map(e=>({monat:Se[e.monat-1],vertraege:e.anzahl_vertraege,aktiv:e.aktiv,abgelaufen:e.abgelaufen})),b=(null==(n=null==(r=u.contractStats)?void 0:r.active)?void 0:n.anzahl)||0,v=(null==(l=null==(i=u.contractStats)?void 0:i.trial)?void 0:l.anzahl)||0;return null==(c=null==(d=u.contractStats)?void 0:d.expired)||c.anzahl,e.jsxs("div",{className:"statistics-tab contracts-tab",children:[e.jsxs("div",{className:"stats-kpi-grid",children:[e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(E,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Aktive Verträge"}),e.jsx("div",{className:"kpi-value",children:b}),e.jsxs("div",{className:"kpi-sublabel",children:[v," in Trial-Phase"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon warning",children:e.jsx(B,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Ablaufend (30 Tage)"}),e.jsx("div",{className:"kpi-value",children:u.upcomingRenewals.next30Days.length}),e.jsxs("div",{className:"kpi-sublabel",children:[u.upcomingRenewals.count90Days," in 90 Tagen"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon primary",children:e.jsx(A,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Ø Vertragslaufzeit"}),e.jsxs("div",{className:"kpi-value",children:[Math.round(u.avgContractDuration.avg_tage/30)," Monate"]}),e.jsxs("div",{className:"kpi-sublabel",children:[u.avgContractDuration.avg_tage," Tage"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(D,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Verlängerungs-Rate"}),e.jsxs("div",{className:"kpi-value",children:[u.renewalRate,"%"]}),e.jsx("div",{className:"kpi-sublabel",children:"Verträge erneuert"})]})]})]}),e.jsx("div",{className:"charts-grid",children:e.jsxs("div",{className:"chart-card chart-wide",children:[e.jsxs("h3",{className:"chart-title",children:[e.jsx(A,{size:18}),"Vertragsabschlüsse 2026"]}),e.jsx(se,{width:"100%",height:300,children:e.jsxs(de,{data:g,children:[e.jsx(re,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(ne,{dataKey:"monat",stroke:"#fff"}),e.jsx(ie,{stroke:"#fff"}),e.jsx(te,{contentStyle:{backgroundColor:"#1a1a2e",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},labelStyle:{color:"#FFD700"}}),e.jsx(xe,{}),e.jsx(ce,{dataKey:"aktiv",fill:"#4ECDC4",name:"Aktiv"}),e.jsx(ce,{dataKey:"abgelaufen",fill:"#FF6B35",name:"Abgelaufen"})]})})]})}),u.upcomingRenewals.next30Days.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(F,{size:18}),"Bald ablaufende Verträge (nächste 30 Tage)"]}),e.jsx("div",{className:"finance-table-container",children:e.jsxs("table",{className:"finance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Dojo"}),e.jsx("th",{children:"Plan"}),e.jsx("th",{children:"Endet am"}),e.jsx("th",{children:"Verbleibend"}),e.jsx("th",{children:"Preis"})]})}),e.jsx("tbody",{children:u.upcomingRenewals.next30Days.map((s,a)=>e.jsxs("tr",{className:s.tage_bis_ende<=7?"urgent":"",children:[e.jsx("td",{className:"dojo-name",children:s.dojoname}),e.jsx("td",{children:s.subscription_plan||"Standard"}),e.jsx("td",{children:new Date(s.subscription_end).toLocaleDateString("de-DE")}),e.jsxs("td",{className:s.tage_bis_ende<=7?"urgent-text":"warning-text",children:[s.tage_bis_ende," Tage"]}),e.jsx("td",{children:s.custom_pricing?e.jsxs("span",{className:"custom-price",children:[s.custom_pricing.toFixed(2)," € (Custom)"]}):e.jsx("span",{children:"Standard"})})]},a))})]})})]}),e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(E,{size:18}),"Aktive Verträge (",u.activeContracts.length,")"]}),e.jsx("div",{className:"finance-table-container",children:e.jsxs("table",{className:"finance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Dojo"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Plan"}),e.jsx("th",{children:"Start"}),e.jsx("th",{children:"Ende"}),e.jsx("th",{children:"Mitglieder"}),e.jsx("th",{children:"Bemerkungen"})]})}),e.jsx("tbody",{children:u.activeContracts.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"dojo-name",children:s.dojoname}),e.jsx("td",{children:e.jsx("span",{className:"status-badge "+("trial"===s.subscription_status?"warning":"success"),children:"trial"===s.subscription_status?"Trial":"Aktiv"})}),e.jsx("td",{children:s.subscription_plan||"Standard"}),e.jsx("td",{children:s.subscription_start?new Date(s.subscription_start).toLocaleDateString("de-DE"):"-"}),e.jsx("td",{children:s.subscription_end?new Date(s.subscription_end).toLocaleDateString("de-DE"):"-"}),e.jsx("td",{className:"member-count",children:s.mitglied_count}),e.jsxs("td",{className:"notes-cell",children:[s.custom_pricing&&e.jsxs("span",{className:"custom-badge",children:["Custom: ",s.custom_pricing.toFixed(2)," €"]}),s.custom_notes&&e.jsxs("span",{className:"notes-text",title:s.custom_notes,children:[s.custom_notes.substring(0,50),s.custom_notes.length>50?"...":""]})]})]},a))})]})})]}),u.customContracts.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(T,{size:18}),"Verträge mit individueller Preisgestaltung (",u.customContracts.length,")"]}),e.jsx("div",{className:"custom-contracts-grid",children:u.customContracts.map((s,a)=>e.jsxs("div",{className:"custom-contract-card",children:[e.jsxs("div",{className:"contract-header",children:[e.jsx("h4",{children:s.dojoname}),e.jsx("span",{className:"status-badge "+("active"===s.subscription_status?"success":"warning"),children:s.subscription_status})]}),e.jsxs("div",{className:"contract-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Plan:"}),e.jsx("span",{className:"value",children:s.subscription_plan||"Standard"})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Custom Preis:"}),e.jsxs("span",{className:"value custom-price",children:[s.custom_pricing.toFixed(2)," € / Monat"]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"label",children:"Laufzeit:"}),e.jsxs("span",{className:"value",children:[new Date(s.subscription_start).toLocaleDateString("de-DE")," - ",new Date(s.subscription_end).toLocaleDateString("de-DE")]})]}),s.custom_notes&&e.jsxs("div",{className:"detail-row notes-row",children:[e.jsx("span",{className:"label",children:"Notizen:"}),e.jsx("span",{className:"value notes",children:s.custom_notes})]})]})]},a))})]}),u.trialConversions.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(D,{size:18}),"Trial Conversions (Letzte 90 Tage)"]}),e.jsx("div",{className:"trial-conversions-grid",children:u.trialConversions.map((s,a)=>e.jsxs("div",{className:"trial-conversion-card",children:[e.jsx("div",{className:"conversion-dojo",children:s.dojoname}),e.jsxs("div",{className:"conversion-timeline",children:[e.jsxs("div",{className:"timeline-item",children:[e.jsx("span",{className:"timeline-label",children:"Trial Ende:"}),e.jsx("span",{className:"timeline-date",children:new Date(s.trial_end).toLocaleDateString("de-DE")})]}),e.jsx("div",{className:"timeline-arrow",children:"→"}),e.jsxs("div",{className:"timeline-item",children:[e.jsx("span",{className:"timeline-label",children:"Aktiviert:"}),e.jsx("span",{className:"timeline-date",children:new Date(s.subscription_start).toLocaleDateString("de-DE")})]})]}),e.jsxs("div",{className:"conversion-duration",children:["Trial-Dauer: ",s.trial_dauer_tage," Tage"]})]},a))})]}),u.expiredContracts.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(F,{size:18}),"Abgelaufene Verträge (Letzte 90 Tage)"]}),e.jsx("div",{className:"finance-table-container",children:e.jsxs("table",{className:"finance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Dojo"}),e.jsx("th",{children:"Plan"}),e.jsx("th",{children:"Abgelaufen am"}),e.jsx("th",{children:"Tage seit Ablauf"})]})}),e.jsx("tbody",{children:u.expiredContracts.map((s,a)=>e.jsxs("tr",{className:"expired",children:[e.jsx("td",{className:"dojo-name",children:s.dojoname}),e.jsx("td",{children:s.subscription_plan||"Standard"}),e.jsx("td",{children:new Date(s.subscription_end).toLocaleDateString("de-DE")}),e.jsxs("td",{className:"expired-days",children:[s.tage_abgelaufen," Tage"]})]},a))})]})})]})]})},De=({token:a})=>{var r,n;const[i,l]=s.useState(!0),[d,c]=s.useState(""),[o,h]=s.useState(null);s.useEffect(()=>{m()},[]);const m=async()=>{var e,s;l(!0),c("");try{const e=await t.get("/admin/users",{headers:{Authorization:`Bearer ${a}`}});h(e.data.users),console.log("✅ Benutzerdaten geladen:",e.data.users)}catch(r){console.error("❌ Fehler beim Laden der Benutzerdaten:",r),c((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.message)||"Fehler beim Laden der Benutzerdaten")}finally{l(!1)}};if(i)return e.jsxs("div",{className:"statistics-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Benutzerdaten..."})]});if(d)return e.jsxs("div",{className:"statistics-error",children:[e.jsx("p",{children:d}),e.jsx("button",{onClick:m,className:"btn btn-primary",children:"Erneut versuchen"})]});if(!o)return null;const x={super_admin:"Super-Admin",admin:"Administrator",mitarbeiter:"Mitarbeiter",eingeschraenkt:"Eingeschränkt"};return e.jsxs("div",{className:"statistics-tab users-tab",children:[e.jsxs("div",{className:"stats-kpi-grid",children:[e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon primary",children:e.jsx(w,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Gesamt Benutzer"}),e.jsx("div",{className:"kpi-value",children:o.userStats.total+o.dojoUsers.length}),e.jsxs("div",{className:"kpi-sublabel",children:[o.userStats.total," Admin + ",o.dojoUsers.length," Dojo"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon success",children:e.jsx(E,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Aktive Benutzer"}),e.jsx("div",{className:"kpi-value",children:o.userStats.active}),e.jsxs("div",{className:"kpi-sublabel",children:[o.activeUsers.length," in letzten 7 Tagen"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon warning",children:e.jsx(R,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Logins (30 Tage)"}),e.jsx("div",{className:"kpi-value",children:o.loginStats.total_logins}),e.jsxs("div",{className:"kpi-sublabel",children:["Ø ",o.loginStats.avg_per_day," pro Tag"]})]})]}),e.jsxs("div",{className:"kpi-card",children:[e.jsx("div",{className:"kpi-icon primary",children:e.jsx(L,{size:24})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-label",children:"Super-Admins"}),e.jsx("div",{className:"kpi-value",children:(null==(r=o.userStats.byRole)?void 0:r.super_admin)||0}),e.jsxs("div",{className:"kpi-sublabel",children:[(null==(n=o.userStats.byRole)?void 0:n.admin)||0," Admins gesamt"]})]})]})]}),o.adminUsers.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(M,{size:18}),"Admin-Benutzer (",o.adminUsers.length,")"]}),e.jsx("div",{className:"finance-table-container",children:e.jsxs("table",{className:"finance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Benutzername"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rolle"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Letzter Login"}),e.jsx("th",{children:"Erstellt"})]})}),e.jsx("tbody",{children:o.adminUsers.map((s,a)=>e.jsxs("tr",{className:s.aktiv?"":"inactive-user",children:[e.jsx("td",{className:"username",children:s.username}),e.jsxs("td",{children:[s.vorname," ",s.nachname]}),e.jsx("td",{className:"email-cell",children:s.email}),e.jsx("td",{children:e.jsx("span",{className:`role-badge ${s.rolle}`,children:x[s.rolle]||s.rolle})}),e.jsx("td",{children:s.aktiv?e.jsxs("span",{className:"status-badge success",children:[e.jsx(E,{size:14})," Aktiv"]}):e.jsxs("span",{className:"status-badge inactive",children:[e.jsx(I,{size:14})," Inaktiv"]})}),e.jsx("td",{children:s.letzter_login?e.jsxs(e.Fragment,{children:[new Date(s.letzter_login).toLocaleDateString("de-DE"),e.jsx("span",{className:"time-cell",children:new Date(s.letzter_login).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})]}):e.jsx("span",{className:"no-data",children:"Noch nie"})}),e.jsx("td",{children:new Date(s.erstellt_am).toLocaleDateString("de-DE")})]},a))})]})})]}),o.activeUsers.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(R,{size:18}),"Kürzlich aktive Benutzer (Letzte 7 Tage)"]}),e.jsx("div",{className:"active-users-grid",children:o.activeUsers.map((s,a)=>{var r,n;return e.jsxs("div",{className:"active-user-card",children:[e.jsxs("div",{className:"user-avatar",children:[((null==(r=s.vorname)?void 0:r[0])||"?").toUpperCase(),((null==(n=s.nachname)?void 0:n[0])||"?").toUpperCase()]}),e.jsxs("div",{className:"user-info",children:[e.jsxs("div",{className:"user-name",children:[s.vorname," ",s.nachname]}),e.jsxs("div",{className:"user-username",children:["@",s.username]}),e.jsxs("div",{className:"user-activity",children:[e.jsx(B,{size:12}),0===s.tage_seit_login?"Heute":`Vor ${s.tage_seit_login} Tagen`]})]})]},a)})})]}),o.dojoUsers.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(w,{size:18}),"Dojo-Administratoren (",o.dojoUsers.length,")"]}),e.jsx("div",{className:"dojo-users-container",children:Object.entries(o.usersByDojo).map(([s,a],r)=>e.jsxs("div",{className:"dojo-users-group",children:[e.jsxs("h4",{className:"dojo-group-title",children:[s," (",a.length,")"]}),e.jsx("div",{className:"finance-table-container",children:e.jsxs("table",{className:"finance-table compact",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Benutzername"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Aktivität (30 Tage)"}),e.jsx("th",{children:"Erstellt"})]})}),e.jsx("tbody",{children:a.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"username",children:s.benutzername}),e.jsx("td",{className:"email-cell",children:s.email}),e.jsx("td",{className:"activity-cell",children:s.activity_last_30_days>0?e.jsxs("span",{className:"activity-badge active",children:[s.activity_last_30_days," Aktionen"]}):e.jsx("span",{className:"activity-badge inactive",children:"Keine Aktivität"})}),e.jsx("td",{children:new Date(s.created_at).toLocaleDateString("de-DE")})]},a))})]})})]},r))})]}),o.recentActivity.length>0&&e.jsxs("div",{className:"finance-section",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx(R,{size:18}),"Letzte Aktivitäten (50)"]}),e.jsx("div",{className:"activity-log-container",children:o.recentActivity.map((s,a)=>e.jsxs("div",{className:"activity-log-item",children:[e.jsx("div",{className:"activity-icon",children:e.jsx(R,{size:16})}),e.jsxs("div",{className:"activity-content",children:[e.jsxs("div",{className:"activity-header",children:[e.jsx("span",{className:"activity-user",children:s.username}),e.jsx("span",{className:"activity-action",children:s.aktion}),e.jsxs("span",{className:"activity-bereich",children:["in ",s.bereich]})]}),s.beschreibung&&e.jsx("div",{className:"activity-description",children:s.beschreibung}),e.jsx("div",{className:"activity-time",children:new Date(s.erstellt_am).toLocaleString("de-DE")})]})]},a))})]})]})},_e=({token:a})=>{const[r,n]=s.useState([]),[i,l]=s.useState([]),[d,c]=s.useState([]),[o,h]=s.useState(!0),[m,x]=s.useState(!1),[u,p]=s.useState(!1),[j,g]=s.useState(null),[b,v]=s.useState({kontoinhaber:"",iban:"",bic:"",mandats_datum:(new Date).toISOString().split("T")[0]}),[f,y]=s.useState("");s.useEffect(()=>{N()},[]);const N=async()=>{h(!0);try{const[e,s,r]=await Promise.all([t.get("/admin/sepa/mandate",{headers:{Authorization:`Bearer ${a}`}}),t.get("/admin/sepa/batches",{headers:{Authorization:`Bearer ${a}`}}),t.get("/admin/sepa/dojos-without-mandate",{headers:{Authorization:`Bearer ${a}`}})]);n(e.data.mandate||[]),l(s.data.batches||[]),c(r.data.dojos||[])}catch(e){console.error("Fehler beim Laden:",e)}finally{h(!1)}},k=async(e,s)=>{try{await t.put(`/admin/sepa/mandate/${e}`,{status:s},{headers:{Authorization:`Bearer ${a}`}}),N()}catch(r){alert("Fehler beim Aktualisieren")}},z=s=>{const a={aktiv:{bg:"rgba(16,185,129,0.2)",color:"#10b981"},pausiert:{bg:"rgba(251,191,36,0.2)",color:"#fbbf24"},widerrufen:{bg:"rgba(239,68,68,0.2)",color:"#ef4444"},erstellt:{bg:"rgba(59,130,246,0.2)",color:"#3b82f6"},exportiert:{bg:"rgba(16,185,129,0.2)",color:"#10b981"},eingereicht:{bg:"rgba(139,92,246,0.2)",color:"#8b5cf6"},ausgefuehrt:{bg:"rgba(16,185,129,0.3)",color:"#10b981"}}[s]||{bg:"rgba(156,163,175,0.2)",color:"#9ca3af"};return e.jsx("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",background:a.bg,color:a.color},children:s})};return o?e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Lade SEPA-Daten..."}):e.jsxs("div",{className:"sepa-tab",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"2rem"},children:[e.jsx("div",{style:{background:"var(--bg-secondary)",padding:"1.25rem",borderRadius:"12px",border:"1px solid var(--border-default)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{background:"rgba(16,185,129,0.2)",padding:"0.75rem",borderRadius:"8px"},children:e.jsx(w,{size:20,color:"#10b981"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Aktive Mandate"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--primary)"},children:r.filter(e=>"aktiv"===e.status).length})]})]})}),e.jsx("div",{style:{background:"var(--bg-secondary)",padding:"1.25rem",borderRadius:"12px",border:"1px solid var(--border-default)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{background:"rgba(251,191,36,0.2)",padding:"0.75rem",borderRadius:"8px"},children:e.jsx(B,{size:20,color:"#fbbf24"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Ohne Mandat"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#fbbf24"},children:d.length})]})]})}),e.jsx("div",{style:{background:"var(--bg-secondary)",padding:"1.25rem",borderRadius:"12px",border:"1px solid var(--border-default)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{background:"rgba(59,130,246,0.2)",padding:"0.75rem",borderRadius:"8px"},children:e.jsx(T,{size:20,color:"#3b82f6"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Batches"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#3b82f6"},children:i.length})]})]})}),e.jsx("div",{style:{background:"var(--bg-secondary)",padding:"1.25rem",borderRadius:"12px",border:"1px solid var(--border-default)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("div",{style:{background:"rgba(16,185,129,0.2)",padding:"0.75rem",borderRadius:"8px"},children:e.jsx(P,{size:20,color:"#10b981"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"MRR (SEPA)"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--primary)"},children:[r.filter(e=>"aktiv"===e.status).reduce((e,s)=>e+parseFloat(s.monthly_price||0),0).toFixed(0)," EUR"]})]})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("button",{onClick:()=>x(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.25rem",background:"var(--primary)",color:"#000",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:[e.jsx(U,{size:18})," Neues Mandat"]}),e.jsxs("button",{onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.25rem",background:"rgba(59,130,246,0.2)",color:"#3b82f6",border:"1px solid #3b82f6",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:[e.jsx(T,{size:18})," Lastschrift-Batch erstellen"]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",color:"var(--primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(V,{size:20})," SEPA-Mandate"]}),e.jsx("div",{style:{background:"var(--bg-secondary)",borderRadius:"12px",border:"1px solid var(--border-default)",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-default)"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Dojo"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Kontoinhaber"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"IBAN"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Plan"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Betrag"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Status"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Aktion"})]})}),e.jsx("tbody",{children:0===r.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"Keine Mandate vorhanden"})}):r.map(s=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-default)"},children:[e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-primary)"},children:s.dojoname}),e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-primary)"},children:s.kontoinhaber}),e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-secondary)",fontFamily:"monospace",fontSize:"0.85rem"},children:s.iban}),e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-secondary)"},children:s.plan_type}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:"var(--primary)",fontWeight:"600"},children:[parseFloat(s.monthly_price||0).toFixed(2)," EUR"]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:z(s.status)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:"aktiv"===s.status?e.jsx("button",{onClick:()=>k(s.id,"pausiert"),style:{background:"rgba(251,191,36,0.2)",color:"#fbbf24",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem"},children:"Pausieren"}):"pausiert"===s.status?e.jsx("button",{onClick:()=>k(s.id,"aktiv"),style:{background:"rgba(16,185,129,0.2)",color:"#10b981",border:"none",padding:"0.25rem 0.5rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem"},children:"Aktivieren"}):null})]},s.id))})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{marginBottom:"1rem",color:"var(--primary)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(T,{size:20})," Lastschrift-Batches"]}),e.jsx("div",{style:{background:"var(--bg-secondary)",borderRadius:"12px",border:"1px solid var(--border-default)",overflow:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-default)"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Referenz"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Erstellt"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Ausfuehrung"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Transaktionen"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Betrag"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Status"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",color:"var(--text-secondary)",fontSize:"0.85rem"},children:"XML"})]})}),e.jsx("tbody",{children:0===i.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:"2rem",textAlign:"center",color:"var(--text-secondary)"},children:"Keine Batches vorhanden"})}):i.map(s=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--border-default)"},children:[e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-primary)",fontFamily:"monospace",fontSize:"0.85rem"},children:s.batch_referenz}),e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-secondary)"},children:new Date(s.erstelldatum).toLocaleDateString("de-DE")}),e.jsx("td",{style:{padding:"0.75rem",color:"var(--text-primary)"},children:new Date(s.ausfuehrungsdatum).toLocaleDateString("de-DE")}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",color:"var(--text-primary)"},children:s.anzahl_transaktionen}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",color:"var(--primary)",fontWeight:"600"},children:[parseFloat(s.gesamtbetrag).toFixed(2)," EUR"]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:z(s.status)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center"},children:e.jsxs("button",{onClick:()=>(async e=>{try{const s=await t.get(`/admin/sepa/batch/${e}/xml`,{headers:{Authorization:`Bearer ${a}`},responseType:"blob"}),r=window.URL.createObjectURL(new Blob([s.data])),n=document.createElement("a");n.href=r,n.setAttribute("download",`SEPA-Lastschrift-${e}.xml`),document.body.appendChild(n),n.click(),n.remove(),N()}catch(s){alert("Fehler beim Download")}})(s.id),style:{background:"rgba(16,185,129,0.2)",color:"#10b981",border:"none",padding:"0.4rem 0.75rem",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem",margin:"0 auto"},children:[e.jsx($,{size:14})," XML"]})})]},s.id))})]})})]}),m&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>x(!1),children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"var(--bg-primary)",borderRadius:"16px",width:"90%",maxWidth:"500px",border:"1px solid var(--border-default)"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border-default)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0,color:"var(--primary)"},children:"Neues SEPA-Mandat"}),e.jsx("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:"var(--text-primary)",fontSize:"1.5rem",cursor:"pointer"},children:"x"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)"},children:"Dojo auswaehlen *"}),e.jsxs("select",{value:(null==j?void 0:j.id)||"",onChange:e=>g(d.find(s=>s.id===parseInt(e.target.value))),style:{width:"100%",padding:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)"},children:[e.jsx("option",{value:"",children:"-- Dojo waehlen --"}),d.map(s=>e.jsxs("option",{value:s.id,children:[s.dojoname," (",s.plan_type," - ",s.monthly_price," EUR)"]},s.id))]})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)"},children:"Kontoinhaber *"}),e.jsx("input",{type:"text",value:b.kontoinhaber,onChange:e=>v({...b,kontoinhaber:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)"},children:"IBAN *"}),e.jsx("input",{type:"text",value:b.iban,onChange:e=>v({...b,iban:e.target.value}),placeholder:"DE89 3704 0044 0532 0130 00",style:{width:"100%",padding:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)",fontFamily:"monospace"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)"},children:"BIC"}),e.jsx("input",{type:"text",value:b.bic,onChange:e=>v({...b,bic:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)"},children:"Mandatsdatum"}),e.jsx("input",{type:"date",value:b.mandats_datum,onChange:e=>v({...b,mandats_datum:e.target.value}),style:{width:"100%",padding:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)"}})]})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-default)",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[e.jsx("button",{onClick:()=>x(!1),style:{padding:"0.75rem 1.5rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer"},children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{var e,s;if(j&&b.kontoinhaber&&b.iban)try{await t.post("/admin/sepa/mandate",{dojo_id:j.id,...b},{headers:{Authorization:`Bearer ${a}`}}),alert("SEPA-Mandat erfolgreich erstellt"),x(!1),v({kontoinhaber:"",iban:"",bic:"",mandats_datum:(new Date).toISOString().split("T")[0]}),g(null),N()}catch(r){alert("Fehler: "+((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.error)||r.message))}else alert("Bitte alle Pflichtfelder ausfuellen")},style:{padding:"0.75rem 1.5rem",background:"var(--primary)",border:"none",borderRadius:"8px",color:"#000",fontWeight:"600",cursor:"pointer"},children:"Mandat erstellen"})]})]})}),u&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>p(!1),children:e.jsxs("div",{onClick:e=>e.stopPropagation(),style:{background:"var(--bg-primary)",borderRadius:"16px",width:"90%",maxWidth:"450px",border:"1px solid var(--border-default)"},children:[e.jsxs("div",{style:{padding:"1.25rem",borderBottom:"1px solid var(--border-default)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0,color:"var(--primary)"},children:"Lastschrift-Batch erstellen"}),e.jsx("button",{onClick:()=>p(!1),style:{background:"none",border:"none",color:"var(--text-primary)",fontSize:"1.5rem",cursor:"pointer"},children:"x"})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"1rem"},children:"Es werden alle aktiven Mandate mit laufenden Subscriptions einbezogen."}),e.jsxs("p",{style:{color:"var(--text-primary)",marginBottom:"1.5rem"},children:[e.jsx("strong",{children:r.filter(e=>"aktiv"===e.status).length})," Mandate aktiv"]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-secondary)"},children:"Gewuenschtes Einzugsdatum *"}),e.jsx("input",{type:"date",value:f,onChange:e=>y(e.target.value),min:new Date(Date.now()+432e6).toISOString().split("T")[0],style:{width:"100%",padding:"0.75rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)"}}),e.jsx("small",{style:{color:"var(--text-secondary)"},children:"Mind. 5 Werktage in der Zukunft"})]})]}),e.jsxs("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid var(--border-default)",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[e.jsx("button",{onClick:()=>p(!1),style:{padding:"0.75rem 1.5rem",background:"var(--bg-secondary)",border:"1px solid var(--border-default)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer"},children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{var e,s;if(f)try{const e=await t.post("/admin/sepa/batch/create",{ausfuehrungsdatum:f},{headers:{Authorization:`Bearer ${a}`}});alert(`Batch erstellt: ${e.data.anzahl} Lastschriften, Gesamt: ${e.data.gesamtbetrag.toFixed(2)} EUR`),p(!1),N()}catch(r){alert("Fehler: "+((null==(s=null==(e=r.response)?void 0:e.data)?void 0:s.error)||r.message))}else alert("Bitte Ausfuehrungsdatum waehlen")},style:{padding:"0.75rem 1.5rem",background:"#3b82f6",border:"none",borderRadius:"8px",color:"#fff",fontWeight:"600",cursor:"pointer"},children:"Batch erstellen"})]})]})})]})},Ae=()=>{var r,n,i,d,c,o,h,m,x;const{token:u}=l(),[p,j]=s.useState(!0),[g,b]=s.useState(""),[v,f]=s.useState(null),[y,N]=s.useState(null),[k,z]=s.useState([]),[S,D]=s.useState(!1),[_,C]=s.useState(!1),[T,L]=s.useState(null),[M,P]=s.useState(!1),[$,Q]=s.useState(!1),[X,ee]=s.useState(14),[se,ae]=s.useState("starter"),[re,ne]=s.useState("monthly"),[ie,te]=s.useState(12),[le,de]=s.useState(""),[ce,oe]=s.useState(""),[he,me]=s.useState(!1),[xe,ue]=s.useState(new Set),[pe,je]=s.useState("overview"),[ge,be]=s.useState([]),[ve,ye]=s.useState(null),[Ne,ke]=s.useState(!1);s.useEffect(()=>{if(u)try{const e=JSON.parse(atob(u.split(".")[1]));me("admin"===e.username||1===e.user_id)}catch(e){console.error("Token decode error:",e)}},[u]),s.useEffect(()=>{Se(),Ae()},[]);const Se=async()=>{var e,s;j(!0),b("");try{const[e,s,a]=await Promise.all([t.get("/admin/tda-stats",{headers:{Authorization:`Bearer ${u}`}}),t.get("/admin/global-stats",{headers:{Authorization:`Bearer ${u}`}}),t.get("/admin/dojos",{headers:{Authorization:`Bearer ${u}`}})]);f(e.data.stats),N(s.data.stats),z(a.data.dojos),console.log("✅ Super-Admin Daten geladen")}catch(a){console.error("❌ Fehler beim Laden der Super-Admin Daten:",a),b((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.message)||"Fehler beim Laden der Daten")}finally{j(!1)}},Ae=async()=>{try{ke(!0);const e=await t.get("/admin/subscription-plans",{headers:{Authorization:`Bearer ${u}`}});e.data.success&&be(e.data.plans)}catch(e){console.error("Fehler beim Laden der Pläne:",e)}finally{ke(!1)}},Ee=s=>{const a={trial:{label:"Trial",className:"info",icon:e.jsx(B,{size:14})},active:{label:"Aktiv",className:"success",icon:e.jsx(E,{size:14})},expired:{label:"Abgelaufen",className:"danger",icon:e.jsx(I,{size:14})},cancelled:{label:"Gekündigt",className:"warning",icon:e.jsx(F,{size:14})},suspended:{label:"Gesperrt",className:"danger",icon:e.jsx(I,{size:14})}},r=a[s.subscription_status]||a.trial;return e.jsxs("span",{className:`status-badge ${r.className}`,children:[r.icon," ",r.label]})},Be=s=>{if("trial"===s.subscription_status){const a=s.trial_days_remaining;return null===a?"-":a<0?e.jsx("span",{className:"text-danger",children:"Abgelaufen"}):0===a?e.jsx("span",{className:"text-danger",children:"Heute"}):a<=3?e.jsxs("span",{className:"text-danger",children:[a," Tage"]}):a<=7?e.jsxs("span",{className:"text-warning",children:[a," Tage"]}):e.jsxs("span",{children:[a," Tage"]})}if("active"===s.subscription_status){const a=s.subscription_days_remaining;if(null===a)return"-";if(a<0)return e.jsx("span",{className:"text-danger",children:"Abgelaufen"});if(0===a)return e.jsx("span",{className:"text-danger",children:"Heute"});if(a<=14)return e.jsxs("span",{className:"text-warning",children:[a," Tage"]});return new Date(s.subscription_ends_at).toLocaleDateString("de-DE")}return"-"},Fe=e=>{ue(s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})};if(p)return e.jsx("div",{className:"super-admin-dashboard",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Lade Super-Admin Dashboard..."})]})});if(g)return e.jsx("div",{className:"super-admin-dashboard",children:e.jsxs("div",{className:"error-container",children:[e.jsx(I,{size:48}),e.jsx("h2",{children:"Fehler"}),e.jsx("p",{children:g}),e.jsx("button",{onClick:Se,className:"btn btn-primary",children:"Erneut versuchen"})]})});return e.jsxs("div",{className:"super-admin-dashboard",children:[e.jsx("div",{className:"dashboard-tabs",children:[{id:"overview",label:"Übersicht",icon:"📊"},{id:"statistics",label:"Statistiken",icon:"📈"},{id:"finance",label:"Finanzen",icon:"💰"},{id:"contracts",label:"Verträge",icon:"📄"},{id:"users",label:"Benutzer",icon:"👤"},{id:"plans",label:"Pläne & Preise",icon:"💳"},{id:"sepa",label:"SEPA Lastschrift",icon:"€"}].map(s=>e.jsxs("button",{className:"dashboard-tab "+(pe===s.id?"active":""),onClick:()=>je(s.id),children:[e.jsx("span",{className:"tab-icon",children:s.icon}),e.jsx("span",{className:"tab-label",children:s.label})]},s.id))}),e.jsxs("div",{className:"tab-content",children:["overview"===pe&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"stats-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(K,{size:20}),"TDA International Statistiken"]}),e.jsx("div",{className:"stats-grid",children:e.jsxs("div",{className:"stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(w,{size:32})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:(null==(r=null==v?void 0:v.members)?void 0:r.active_members)||0}),e.jsx("div",{className:"stat-label",children:"Aktive Mitglieder"}),e.jsxs("div",{className:"stat-sublabel",children:["von ",(null==(n=null==v?void 0:v.members)?void 0:n.total_members)||0," gesamt"]})]})]})})]}),e.jsxs("section",{className:"stats-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(W,{size:20}),"Verbandsstatistiken (Alle Dojos)"]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card global-primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(K,{size:32})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:(null==(i=null==y?void 0:y.dojos)?void 0:i.active_dojos)||0}),e.jsx("div",{className:"stat-label",children:"Aktive Dojos"}),e.jsxs("div",{className:"stat-sublabel",children:["von ",(null==(d=null==y?void 0:y.dojos)?void 0:d.total_dojos)||0," gesamt"]})]})]}),e.jsxs("div",{className:"stat-card global-success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(w,{size:32})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:(null==(c=null==y?void 0:y.members)?void 0:c.active_members)||0}),e.jsx("div",{className:"stat-label",children:"Mitglieder (Verband)"}),e.jsxs("div",{className:"stat-sublabel",children:["in ",(null==(o=null==y?void 0:y.members)?void 0:o.dojos_with_members)||0," Dojos"]})]})]}),e.jsxs("div",{className:"stat-card global-warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(O,{size:32})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-value",children:[(null==(h=null==y?void 0:y.storage)?void 0:h.used_gb)||"0"," / ",(null==(m=null==y?void 0:y.storage)?void 0:m.total_gb)||"0"," GB"]}),e.jsx("div",{className:"stat-label",children:"Server-Speicher"}),e.jsxs("div",{className:"stat-sublabel",children:[(null==(x=null==y?void 0:y.storage)?void 0:x.percent_used)||0,"% belegt"]})]})]})]})]}),e.jsxs("section",{className:"dojos-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(Z,{size:20}),"Dojo-Verwaltung"]}),e.jsx("div",{className:"header-actions",children:e.jsxs("button",{onClick:()=>{L(null),D(!0)},className:"btn btn-primary",children:[e.jsx(U,{size:16}),"Neues Dojo anlegen"]})})]}),e.jsxs("div",{className:"dojos-table-container",children:[e.jsxs("table",{className:"dojos-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"40px"}}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Dojo-Name"}),e.jsx("th",{children:"Subdomain"}),e.jsx("th",{children:"Inhaber"}),e.jsx("th",{children:"Ort"}),e.jsx("th",{className:"text-center",children:"Mitglieder"}),e.jsx("th",{className:"text-center",children:"Kurse"}),e.jsx("th",{className:"text-center",children:"Speicher"}),e.jsx("th",{className:"text-center",children:"Abo-Status"}),e.jsx("th",{className:"text-center",children:"Trial/Abo Ende"})]})}),e.jsx("tbody",{children:k.map(s=>{const r=xe.has(s.id);return e.jsxs(a.Fragment,{children:[e.jsxs("tr",{className:`dojo-row ${s.ist_aktiv?"":"inactive"} ${r?"expanded":""}`,onClick:()=>Fe(s.id),style:{cursor:"pointer"},children:[e.jsx("td",{children:e.jsx("button",{className:"expand-toggle",onClick:e=>{e.stopPropagation(),Fe(s.id)},children:r?e.jsx(G,{size:16}):e.jsx(H,{size:16})})}),e.jsx("td",{children:s.ist_aktiv?e.jsxs("span",{className:"status-badge active",children:[e.jsx(E,{size:14})," Aktiv"]}):e.jsxs("span",{className:"status-badge inactive",children:[e.jsx(I,{size:14})," Inaktiv"]})}),e.jsx("td",{className:"font-bold",children:s.dojoname}),e.jsx("td",{children:e.jsx("code",{className:"subdomain",children:s.subdomain})}),e.jsx("td",{children:s.inhaber}),e.jsx("td",{children:s.ort||"-"}),e.jsx("td",{className:"text-center",children:s.mitglieder_count||0}),e.jsx("td",{className:"text-center",children:s.kurse_count||0}),e.jsx("td",{className:"text-center",children:s.storage_mb>=1024?`${s.storage_gb} GB`:`${s.storage_mb} MB`}),e.jsx("td",{className:"text-center",children:Ee(s)}),e.jsx("td",{className:"text-center",children:Be(s)})]}),r&&e.jsx("tr",{className:"expandable-row",children:e.jsx("td",{colSpan:11,className:"expandable-cell",children:e.jsxs("div",{className:"expandable-content",children:[e.jsxs("div",{className:"expandable-section",children:[e.jsx("h4",{children:"Kontaktdaten"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"E-Mail:"})," ",s.email||"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Telefon:"})," ",s.telefon||"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Straße:"})," ",s.strasse||"-"," ",s.hausnummer||""]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"PLZ:"})," ",s.plz||"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Ort:"})," ",s.ort||"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Land:"})," ",s.land||"-"]})]})]}),e.jsxs("div",{className:"expandable-section",children:[e.jsx("h4",{children:"Abonnement Details"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Status:"})," ",Ee(s)]}),"trial"===s.subscription_status&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Trial Start:"})," ",s.trial_starts_at?new Date(s.trial_starts_at).toLocaleDateString("de-DE"):"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Trial Ende:"})," ",s.trial_ends_at?new Date(s.trial_ends_at).toLocaleDateString("de-DE"):"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Verbleibende Tage:"})," ",null!==s.trial_days_remaining?`${s.trial_days_remaining} Tage`:"-"]})]}),"active"===s.subscription_status&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Plan:"})," ",s.subscription_plan||"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Intervall:"})," ",s.subscription_interval||"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Abo Start:"})," ",s.subscription_starts_at?new Date(s.subscription_starts_at).toLocaleDateString("de-DE"):"-"]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Abo Ende:"})," ",s.subscription_ends_at?new Date(s.subscription_ends_at).toLocaleDateString("de-DE"):"-"]}),null!==s.subscription_days_remaining&&e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Verbleibende Tage:"})," ",s.subscription_days_remaining," Tage"]})]})]})]}),e.jsxs("div",{className:"expandable-section",children:[e.jsx("h4",{children:"Aktionen"}),e.jsxs("div",{className:"action-buttons",children:["trial"===s.subscription_status&&e.jsxs("button",{onClick:e=>{e.stopPropagation(),(e=>{L(e),ee(14),P(!0)})(s)},className:"btn btn-sm btn-warning",title:"Trial verlängern",children:[e.jsx(B,{size:14})," Trial verlängern"]}),("trial"===s.subscription_status||"expired"===s.subscription_status)&&e.jsxs("button",{onClick:e=>{e.stopPropagation(),(e=>{L(e),ae("basic"),ne("monthly"),te(12),de(""),oe(""),Q(!0)})(s)},className:"btn btn-sm btn-success",title:"Abo aktivieren",children:[e.jsx(E,{size:14})," Abo aktivieren"]}),e.jsxs("button",{onClick:e=>{e.stopPropagation(),(e=>{L(e),C(!0)})(s)},className:"btn btn-sm btn-secondary",title:"Bearbeiten",children:[e.jsx(J,{size:14})," Bearbeiten"]}),2!==s.id&&e.jsxs("button",{onClick:e=>{e.stopPropagation(),(async e=>{var s,a;if(confirm(`Möchten Sie "${e.dojoname}" wirklich deaktivieren?`))try{await t.delete(`/admin/dojos/${e.id}`,{headers:{Authorization:`Bearer ${u}`}}),alert(`Dojo "${e.dojoname}" wurde deaktiviert`),Se()}catch(r){console.error("❌ Fehler beim Löschen:",r),alert((null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.error)||"Fehler beim Löschen")}})(s)},className:"btn btn-sm btn-danger",title:"Deaktivieren",children:[e.jsx(q,{size:14})," Deaktivieren"]})]})]})]})})})]},s.id)})})]}),0===k.length&&e.jsxs("div",{className:"empty-state",children:[e.jsx(K,{size:48}),e.jsx("p",{children:"Keine Dojos gefunden"})]})]})]}),(null==y?void 0:y.top_dojos)&&y.top_dojos.length>0&&e.jsxs("section",{className:"top-dojos-section",children:[e.jsxs("h2",{className:"section-title",children:[e.jsx(A,{size:20}),"Top Dojos nach Mitgliederzahl"]}),e.jsx("div",{className:"top-dojos-grid",children:y.top_dojos.slice(0,5).map((s,a)=>e.jsxs("div",{className:"top-dojo-card",children:[e.jsxs("div",{className:"ranking-badge",children:["#",a+1]}),e.jsxs("div",{className:"dojo-info",children:[e.jsx("h3",{children:s.dojoname}),e.jsxs("div",{className:"dojo-stats",children:[e.jsxs("span",{children:[e.jsx(w,{size:14})," ",s.member_count," Mitglieder"]}),e.jsxs("span",{children:[e.jsx(R,{size:14})," ",s.course_count," Kurse"]})]})]})]},s.id))})]})]}),"statistics"===pe&&e.jsx(fe,{token:u}),"finance"===pe&&e.jsx(ze,{token:u}),"contracts"===pe&&e.jsx(we,{token:u}),"plans"===pe&&e.jsxs("div",{className:"plans-management",children:[e.jsxs("h2",{className:"section-title",style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(V,{size:24})," Pläne & Preise verwalten"]}),e.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"2rem"},children:"Änderungen hier werden automatisch auf der Pricing-Seite und im Vertragsmodul übernommen."}),Ne?e.jsx("p",{children:"Lade Pläne..."}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem"},children:ge.map(s=>e.jsxs("div",{className:"plan-card",style:{background:"var(--bg-secondary)",borderRadius:"12px",padding:"1.5rem",border:"1px solid var(--border-default)",opacity:s.is_visible?1:.6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,color:"var(--primary)"},children:s.display_name}),e.jsxs("button",{onClick:()=>ye(ve===s.plan_id?null:s.plan_id),style:{background:"var(--bg-tertiary)",border:"1px solid var(--border-default)",borderRadius:"6px",padding:"0.4rem 0.8rem",cursor:"pointer",color:"var(--text-primary)"},children:[e.jsx(J,{size:14})," ",ve===s.plan_id?"Abbrechen":"Bearbeiten"]})]}),ve===s.plan_id?e.jsx("form",{onSubmit:e=>{e.preventDefault();const a=new FormData(e.target);(async(e,s)=>{try{(await t.put(`/admin/subscription-plans/${e}`,s,{headers:{Authorization:`Bearer ${u}`}})).data.success&&(Ae(),ye(null),alert("Plan erfolgreich aktualisiert"))}catch(a){console.error("Fehler beim Aktualisieren:",a),alert("Fehler beim Aktualisieren des Plans")}})(s.plan_id,{display_name:a.get("display_name"),description:a.get("description"),price_monthly:parseFloat(a.get("price_monthly")),price_yearly:parseFloat(a.get("price_yearly")),max_members:parseInt(a.get("max_members")),max_dojos:parseInt(a.get("max_dojos")),storage_limit_mb:parseInt(a.get("storage_limit_mb")),feature_verkauf:"on"===a.get("feature_verkauf"),feature_buchfuehrung:"on"===a.get("feature_buchfuehrung"),feature_events:"on"===a.get("feature_events"),feature_multidojo:"on"===a.get("feature_multidojo"),feature_api:"on"===a.get("feature_api"),is_visible:"on"===a.get("is_visible")})},children:e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Anzeigename"}),e.jsx("input",{name:"display_name",defaultValue:s.display_name,className:"form-control",style:{width:"100%",background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Beschreibung"}),e.jsx("input",{name:"description",defaultValue:s.description,className:"form-control",style:{width:"100%",background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Preis/Monat"}),e.jsx("input",{name:"price_monthly",type:"number",step:"0.01",defaultValue:s.price_monthly,className:"form-control",style:{background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Preis/Jahr"}),e.jsx("input",{name:"price_yearly",type:"number",step:"0.01",defaultValue:s.price_yearly,className:"form-control",style:{background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Max Mitglieder"}),e.jsx("input",{name:"max_members",type:"number",defaultValue:s.max_members,className:"form-control",style:{background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Max Dojos"}),e.jsx("input",{name:"max_dojos",type:"number",defaultValue:s.max_dojos,className:"form-control",style:{background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Speicher MB"}),e.jsx("input",{name:"storage_limit_mb",type:"number",defaultValue:s.storage_limit_mb,className:"form-control",style:{background:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("input",{name:"feature_verkauf",type:"checkbox",defaultChecked:s.feature_verkauf})," Verkauf"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("input",{name:"feature_buchfuehrung",type:"checkbox",defaultChecked:s.feature_buchfuehrung})," Buchführung"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("input",{name:"feature_events",type:"checkbox",defaultChecked:s.feature_events})," Events"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("input",{name:"feature_multidojo",type:"checkbox",defaultChecked:s.feature_multidojo})," Multi-Dojo"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("input",{name:"feature_api",type:"checkbox",defaultChecked:s.feature_api})," API"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.3rem",fontSize:"0.85rem"},children:[e.jsx("input",{name:"is_visible",type:"checkbox",defaultChecked:s.is_visible})," Sichtbar"]})]}),e.jsxs("button",{type:"submit",style:{marginTop:"1rem",background:"var(--primary)",color:"#000",border:"none",borderRadius:"6px",padding:"0.6rem 1rem",cursor:"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center"},children:[e.jsx(Y,{size:16})," Speichern"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem",marginBottom:"1rem"},children:s.description}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"0.75rem",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Monatlich"}),e.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--primary)"},children:[s.price_monthly,"€"]})]}),e.jsxs("div",{style:{background:"var(--bg-tertiary)",padding:"0.75rem",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Jährlich"}),e.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"700",color:"var(--primary)"},children:[s.price_yearly,"€"]})]})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:[e.jsxs("div",{children:["Max. ",s.max_members>=999999?"Unbegrenzt":s.max_members," Mitglieder"]}),e.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[s.feature_verkauf?e.jsx("span",{style:{background:"rgba(16,185,129,0.2)",color:"#10b981",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:"Verkauf"}):null,s.feature_buchfuehrung?e.jsx("span",{style:{background:"rgba(16,185,129,0.2)",color:"#10b981",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:"Buchführung"}):null,s.feature_events?e.jsx("span",{style:{background:"rgba(16,185,129,0.2)",color:"#10b981",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:"Events"}):null,s.feature_multidojo?e.jsx("span",{style:{background:"rgba(16,185,129,0.2)",color:"#10b981",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:"Multi-Dojo"}):null,s.feature_api?e.jsx("span",{style:{background:"rgba(16,185,129,0.2)",color:"#10b981",padding:"0.2rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem"},children:"API"}):null]})]})]})]},s.plan_id))})]}),"sepa"===pe&&e.jsx(_e,{token:u}),"users"===pe&&e.jsx(De,{token:u})]}),S&&e.jsx(Ce,{onClose:()=>D(!1),onSuccess:()=>{D(!1),Se()},token:u}),_&&T&&e.jsx(Ce,{dojo:T,onClose:()=>C(!1),onSuccess:()=>{C(!1),Se()},token:u}),M&&T&&e.jsx("div",{className:"modal-overlay",onClick:()=>P(!1),children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[e.jsx(B,{size:24}),"Trial verlängern"]}),e.jsx("button",{onClick:()=>P(!1),className:"modal-close",children:e.jsx(I,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Dojo:"})," ",T.dojoname]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Aktuelles Trial-Ende:"})," ",new Date(T.trial_ends_at).toLocaleDateString("de-DE")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Verbleibende Tage:"})," ",T.trial_days_remaining," Tage"]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1.5rem"},children:[e.jsx("label",{children:"Trial verlängern um (Tage):"}),e.jsx("input",{type:"number",min:"1",max:"365",value:X,onChange:e=>ee(parseInt(e.target.value)),className:"form-control"}),e.jsxs("small",{style:{color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",display:"block"},children:["Neues Trial-Ende: ",new Date(new Date(T.trial_ends_at).getTime()+24*X*60*60*1e3).toLocaleDateString("de-DE")]})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>P(!1),className:"btn btn-secondary",children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{var e,s;if(T)try{await t.put(`/admin/dojos/${T.id}/extend-trial`,{days:X},{headers:{Authorization:`Bearer ${u}`}}),alert(`Trial für "${T.dojoname}" um ${X} Tage verlängert`),P(!1),Se()}catch(a){console.error("❌ Fehler beim Verlängern:",a),alert((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.error)||"Fehler beim Verlängern des Trials")}},className:"btn btn-warning",children:"Trial verlängern"})]})]})}),$&&T&&e.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[e.jsx(E,{size:24}),"Abonnement aktivieren"]}),e.jsx("button",{onClick:()=>Q(!1),className:"modal-close",children:e.jsx(I,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Dojo:"})," ",T.dojoname]}),e.jsxs("div",{className:"form-group",style:{marginTop:"1.5rem"},children:[e.jsx("label",{children:"Abo-Plan:"}),e.jsxs("select",{value:se,onChange:e=>ae(e.target.value),className:"form-control",children:[e.jsx("option",{value:"starter",children:"Starter (49€/Monat)"}),e.jsx("option",{value:"professional",children:"Professional (89€/Monat)"}),e.jsx("option",{value:"premium",children:"Premium (149€/Monat)"}),e.jsx("option",{value:"enterprise",children:"Enterprise (249€/Monat)"}),he&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"free",children:"🎁 Kostenloser Account (Lifetime)"}),e.jsx("option",{value:"custom",children:"⚙️ Flexibel/Custom"})]})]})]}),"custom"===se&&he&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Custom Preis (€):"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:le,onChange:e=>de(e.target.value),className:"form-control",placeholder:"z.B. 39.99"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notizen/Details:"}),e.jsx("textarea",{value:ce,onChange:e=>oe(e.target.value),className:"form-control",rows:"3",placeholder:"z.B. Sonderkonditionen, Rabatte, besondere Vereinbarungen..."})]})]}),"free"!==se&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Zahlungsintervall:"}),e.jsxs("select",{value:re,onChange:e=>ne(e.target.value),className:"form-control",children:[e.jsx("option",{value:"monthly",children:"Monatlich"}),e.jsx("option",{value:"quarterly",children:"Quartalsweise"}),e.jsx("option",{value:"yearly",children:"Jährlich"})]})]}),"free"!==se&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Laufzeit (Monate):"}),e.jsx("input",{type:"number",min:"1",max:"60",value:ie,onChange:e=>te(parseInt(e.target.value)),className:"form-control"}),e.jsxs("small",{style:{color:"rgba(255,255,255,0.6)",marginTop:"0.5rem",display:"block"},children:["Abo-Ende: ",new Date((new Date).setMonth((new Date).getMonth()+ie)).toLocaleDateString("de-DE")]})]}),"free"===se&&e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",padding:"1rem",marginTop:"1rem",color:"rgba(255, 255, 255, 0.9)"},children:[e.jsx("strong",{children:"🎁 Kostenloser Account"}),e.jsx("br",{}),"Dieser Account hat unbegrenzten Zugriff ohne Ablaufdatum."]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:()=>Q(!1),className:"btn btn-secondary",children:"Abbrechen"}),e.jsx("button",{onClick:async()=>{var e,s;if(T)try{const e={plan:se,interval:re,duration_months:ie};he&&("free"===se?e.is_free=!0:"custom"===se&&(e.custom_price=le,e.custom_notes=ce)),await t.put(`/admin/dojos/${T.id}/activate-subscription`,e,{headers:{Authorization:`Bearer ${u}`}});const s="free"===se?`Kostenloser Account für "${T.dojoname}" aktiviert (unbegrenzt)`:"custom"===se?`Custom Abo für "${T.dojoname}" aktiviert (${le}€, ${ie} Monate)`:`Abonnement für "${T.dojoname}" aktiviert (${se}, ${ie} Monate)`;alert(s),Q(!1),Se()}catch(a){console.error("❌ Fehler beim Aktivieren:",a),alert((null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.error)||"Fehler beim Aktivieren des Abonnements")}},className:"btn btn-success",children:"Abo aktivieren"})]})]})})]})},Ce=({dojo:a,onClose:r,onSuccess:n,token:i})=>{const l=!!a,[d,c]=s.useState({dojoname:(null==a?void 0:a.dojoname)||"",subdomain:(null==a?void 0:a.subdomain)||"",inhaber:(null==a?void 0:a.inhaber)||"",email:(null==a?void 0:a.email)||"",telefon:(null==a?void 0:a.telefon)||"",strasse:(null==a?void 0:a.strasse)||"",hausnummer:(null==a?void 0:a.hausnummer)||"",plz:(null==a?void 0:a.plz)||"",ort:(null==a?void 0:a.ort)||"",land:(null==a?void 0:a.land)||"Deutschland"}),[o,h]=s.useState(!1),[m,x]=s.useState(""),u=e=>{const{name:s,value:a}=e.target;c(e=>({...e,[s]:a}))};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:l?"Dojo bearbeiten":"Neues Dojo anlegen"}),e.jsx("button",{onClick:r,className:"modal-close",children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{var s,r;e.preventDefault(),h(!0),x("");try{l?(await t.put(`/admin/dojos/${a.id}`,d,{headers:{Authorization:`Bearer ${i}`}}),alert("Dojo erfolgreich aktualisiert!")):(await t.post("/admin/dojos",d,{headers:{Authorization:`Bearer ${i}`}}),alert("Dojo erfolgreich angelegt!")),n()}catch(c){console.error("❌ Fehler beim Speichern:",c),x((null==(r=null==(s=c.response)?void 0:s.data)?void 0:r.error)||"Fehler beim Speichern")}finally{h(!1)}},className:"dojo-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dojo-Name *"}),e.jsx("input",{type:"text",name:"dojoname",value:d.dojoname,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subdomain *"}),e.jsx("input",{type:"text",name:"subdomain",value:d.subdomain,onChange:u,placeholder:"z.B. mein-dojo",required:!0}),e.jsx("small",{children:".dojo.tda-intl.org"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Inhaber *"}),e.jsx("input",{type:"text",name:"inhaber",value:d.inhaber,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"E-Mail"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Telefon"}),e.jsx("input",{type:"tel",name:"telefon",value:d.telefon,onChange:u})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group flex-2",children:[e.jsx("label",{children:"Straße"}),e.jsx("input",{type:"text",name:"strasse",value:d.strasse,onChange:u})]}),e.jsxs("div",{className:"form-group flex-1",children:[e.jsx("label",{children:"Hausnr."}),e.jsx("input",{type:"text",name:"hausnummer",value:d.hausnummer,onChange:u})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PLZ"}),e.jsx("input",{type:"text",name:"plz",value:d.plz,onChange:u})]}),e.jsxs("div",{className:"form-group flex-2",children:[e.jsx("label",{children:"Ort"}),e.jsx("input",{type:"text",name:"ort",value:d.ort,onChange:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Land"}),e.jsx("input",{type:"text",name:"land",value:d.land,onChange:u})]})]}),m&&e.jsxs("div",{className:"error-message",children:[e.jsx(I,{size:16}),m]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",onClick:r,className:"btn btn-secondary",disabled:o,children:"Abbrechen"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?"Speichere...":l?"Aktualisieren":"Anlegen"})]})]})]})})};function Ee(){const a=r(),z=n(),{token:S,logout:w}=l(),{getDojoFilterParam:D,selectedDojo:_}=d(),{standorte:A}=c(),{updateTrigger:C}=o(),{theme:E,setTheme:B,isDarkMode:F,toggleDarkMode:T,themes:R}=h(),[L,M]=s.useState({mitglieder:0,anwesenheit:0,kurse:0,trainer:0,beitraege:0,checkins_heute:0,stile:0,termine:0,inventar:0,personal:0,buddy_gruppen:0,tarife:0,zahlungszyklen:0}),[I,P]=s.useState([]),[U,V]=s.useState(!1),[$,K]=s.useState(""),[W,O]=s.useState(""),[Z,G]=s.useState("checkin");let H="mitglied",J=!1;try{if(S){const e=b(S);H=e.role||"mitglied",J=1===e.id||1===e.user_id||"admin"===e.username}}catch(me){console.error("Fehler beim Dekodieren des Tokens:",me)}const q=async()=>{V(!0),K("");try{const e=D(),s=await p(S,e);if(M({...s.stats,checkins_heute:s.stats.checkins_heute||0,stile:s.stats.stile||0,termine:s.stats.termine||0,inventar:s.stats.inventar||0,personal:s.stats.personal||0,buddy_gruppen:s.stats.buddy_gruppen||0,tarife:s.stats.tarife||0,zahlungszyklen:s.stats.zahlungszyklen||0}),s.activities){const e=s.activities.activities||s.activities||[];P(e)}}catch(e){console.error("Fehler beim Laden der Dashboard-Statistiken:",e),K("Fehler beim Laden der Statistiken: "+e.message);try{const e=D(),[s,a]=await Promise.all([j(S,e),g(S,e)]);M({...s,checkins_heute:s.checkins_heute||0,stile:s.stile||0,termine:s.termine||0,inventar:s.inventar||0,personal:s.personal||0,buddy_gruppen:s.buddy_gruppen||0,tarife:s.tarife||0,zahlungszyklen:s.zahlungszyklen||0});const r=a.activities||a||[];P(r),K("")}catch(s){console.error("Fallback fehlgeschlagen:",s)}}finally{V(!1)}};s.useEffect(()=>{S&&q()},[S,D,C]),s.useEffect(()=>{(async()=>{try{if(S){const s=b(S);if("admin"===s.role)O(s.username||"Admin");else if(s.email)try{const e=await t.get(`/mitglieder/by-email/${encodeURIComponent(s.email)}`);if(e.data){const a=`${e.data.vorname||""} ${e.data.nachname||""}`.trim();O(a||s.username||"Mitglied")}}catch(e){console.error("Fehler beim Laden des Mitgliedsnamens:",e),O(s.username||"Mitglied")}}}catch(me){console.error("Fehler beim Dekodieren des Tokens:",me)}})()},[S]);const Y=()=>{w(),z("/login")},se=e=>{if("/dashboard/stundenplan"===e)try{z(e)}catch(me){console.error("❌ Stundenplan Navigation Fehler:",me),window.location.href=e}else z(e)},ae=[{id:"checkin",label:"Check-in Systeme",icon:"📱"},{id:"mitglieder",label:"Mitgliederverwaltung",icon:"👥"},{id:"pruefungswesen",label:"Prüfungswesen",icon:"🏆"},{id:"events",label:"Events",icon:"📅"},{id:"finanzen",label:"Finanzen",icon:"💰"},{id:"artikelverwaltung",label:"Artikelverwaltung",icon:"📦"},{id:"verwaltung",label:"Dojo-Verwaltung",icon:"🔧"},{id:"personal",label:"Personal",icon:"👨‍🏫"},{id:"berichte",label:"Berichte",icon:"📊"},{id:"einstellungen",label:"Einstellungen",icon:"⚙️"},{id:"schnellaktionen",label:"Schnellaktionen",icon:"⚡"},{id:"info",label:"Info",icon:"ℹ️"}],re=e=>0===e?"0":e.toLocaleString("de-DE"),ne="/dashboard"===a.pathname,ie="admin"===H?"Dojo Admin Dashboard":"Mitglieder Dashboard",te=[{icon:"👥",title:"Mitglieder",description:"Verwalten Sie alle Dojo-Mitglieder",path:"/dashboard/mitglieder",count:L.mitglieder},{icon:"👥",title:"Buddy-Gruppen",description:"Freunde-Einladungen und Gruppenverwaltung",path:"/dashboard/buddy-gruppen",badge:"NEU",featured:!0,count:L.buddy_gruppen||0},{icon:"📧",title:"Newsletter & Benachrichtigungen",description:"Email-Versand, Push-Nachrichten & Server-Einstellungen",path:"/dashboard/notifications",badge:"NEU",featured:!0},{icon:"👋",title:"Ehemalige",description:"Ehemalige Mitglieder verwalten",path:"/dashboard/ehemalige",badge:"NEU",count:L.ehemalige||0},{icon:"💼",title:"Interessenten",description:"Potenzielle Mitglieder und Leads",path:"/dashboard/interessenten",badge:"NEU",count:L.interessenten||0}],le=[{icon:"🥋",title:"Kurse",description:"Kurse und Gruppen verwalten",path:"/dashboard/kurse",count:L.kurse},{icon:"📋",title:"Stundenplan",description:"Stundenplan und Kurszeiten verwalten",path:"/dashboard/stundenplan",featured:!0},{icon:"🎖️",title:"Stil-Verwaltung",description:"Kampfkunst-Stile, Prüfungen & Techniken",path:"/dashboard/stile",badge:"NEU",featured:!0,count:L.stile||0},{icon:"👥",title:"Gruppen",description:"Trainingsgruppen verwalten",path:"/dashboard/gruppen"},{icon:"📍",title:"Standorte",description:"Standorte & Filialen verwalten",path:"/dashboard/standorte",count:(null==A?void 0:A.length)||0}],de=[{icon:"👨‍🏫",title:"Trainer",description:"Trainer und Qualifikationen verwalten",path:"/dashboard/trainer",count:L.trainer},{icon:"🧑‍💼",title:"Personal",description:"Mitarbeiter & Personalverwaltung",path:"/dashboard/personal",count:L.personal,badge:"NEU",featured:!0}],ce=[{icon:"📊",title:"Finanzcockpit",description:"Übersicht über alle Finanzkennzahlen",path:"/dashboard/finanzcockpit",featured:!0},{icon:"📈",title:"EÜR",description:"Einnahmen-Überschuss-Rechnung",path:"/dashboard/euer",badge:"NEU",featured:!0},{icon:"📉",title:"Ausgaben",description:"Betriebsausgaben erfassen",path:"/dashboard/ausgaben",badge:"NEU",featured:!0},{icon:"💰",title:"Beiträge",description:"Mitgliedsbeiträge und Zahlungen",path:"/dashboard/beitraege",count:L.beitraege,featured:!0},{icon:"🧾",title:"Rechnungen",description:"Rechnungen erstellen und verwalten",path:"/dashboard/rechnungen",featured:!0},{icon:"💳",title:"Lastschriftlauf",description:"SEPA-Lastschriften generieren und verwalten",path:"/dashboard/lastschriftlauf",featured:!0},{icon:"📋",title:"SEPA-Mandate",description:"SEPA-Einzugsermächtigungen verwalten",path:"/dashboard/sepa-mandate",featured:!0},{icon:"⚠️",title:"Mahnwesen",description:"Offene Rechnungen und Mahnungen",path:"/dashboard/mahnwesen",featured:!0},{icon:"🎯",title:"Tarife & Preise",description:"Mitgliedschaftstarife und Preisgestaltung",path:"/dashboard/tarife",featured:!0},{icon:"🔄",title:"Zahlungszyklen",description:"Automatische Beitragszahlungen verwalten",path:"/dashboard/zahlungszyklen",badge:"NEU",featured:!0},{icon:"⚙️",title:"Zahlungseinstellungen",description:"Stripe & DATEV Integration",path:"/dashboard/einstellungen/zahlungen",badge:"NEU",featured:!0},{icon:"📊",title:"DATEV Export",description:"Buchungsdaten für Steuerberater exportieren",path:"/dashboard/datev-export",badge:"NEU",featured:!0}],oe=[{icon:"🎯",title:"Prüfung durchführen",description:"Live-Ansicht für Prüfungstag - Ergebnisse eintragen",path:"/dashboard/pruefung-durchfuehren",badge:"LIVE",featured:!0},{icon:"🏆",title:"Prüfungen & Termine",description:"Events, Prüfungen und Termine verwalten",path:"/dashboard/termine",badge:"NEU",featured:!0,count:L.termine||0},{icon:"🏅",title:"Auszeichnungen",description:"Badges vergeben und verwalten",path:"/dashboard/badges",badge:"NEU",featured:!0}],he=[{icon:"📊",title:"Auswertungen",description:"Statistiken und Berichte erstellen",path:"/dashboard/auswertungen",badge:"NEU",featured:!0},{icon:"📄",title:"Berichte & Dokumente",description:"PDF-Berichte erstellen, ändern & verwalten",path:"/dashboard/berichte",badge:"NEU",featured:!0},{icon:"📋",title:"Vertragsdokumente",description:"AGB, Datenschutz & Hausordnung verwalten",path:"/dashboard/vertragsdokumente",badge:"NEU",featured:!0},{icon:"🥊",title:"Equipment",description:"Inventar und Ausrüstung verwalten",path:"/dashboard/inventar",badge:"NEU",featured:!0,count:L.inventar||0}];return"admin"!==H&&ne?e.jsx(k,{}):(console.log("🔍 Super-Admin Dashboard Check:",{role:H,selectedDojo:_,isMainDashboard:ne,pathname:a.pathname}),"admin"===H&&"super-admin"===_?(console.log("✅ Zeige Super-Admin Dashboard für TDA Int'l Org"),e.jsxs("div",{className:"dashboard-container "+("tda-vib"===E?"dashboard-tda-vib":""),children:[e.jsxs("header",{className:"dashboard-header",style:{background:F?"rgba(15, 15, 35, 0.85)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[e.jsxs("div",{className:"dashboard-header-left",children:[e.jsx("img",{src:m,alt:"DojoSoftware Logo",className:"dashboard-logo dojo-software-logo"}),e.jsx("h2",{children:"🏆 TDA Int'l Org - Super-Admin"}),e.jsxs("span",{className:"version-badge",children:["v",x.app.version]})]}),e.jsxs("div",{className:"dashboard-header-right",children:[e.jsx(v,{}),!ne&&window.history.length>1&&e.jsxs("button",{onClick:()=>z(-1),className:"back-button",title:"Zur vorherigen Seite",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.85rem",fontWeight:"500",transition:"all 0.2s ease"},children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Zurück"})]}),!ne&&e.jsx("button",{onClick:()=>z("/dashboard"),className:"logout-button",children:"← Dashboard"}),e.jsxs("button",{className:"theme-toggle-button",onClick:T,title:F?"Zu hellem Theme wechseln":"Zu dunklem Theme wechseln",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:F?"rgba(255, 215, 0, 0.15)":"rgba(0, 0, 0, 0.1)",border:"1px solid "+(F?"rgba(255, 215, 0, 0.3)":"rgba(0, 0, 0, 0.2)"),borderRadius:"8px",color:F?"#ffd700":"#333",cursor:"pointer",transition:"all 0.3s ease",fontSize:"0.85rem",fontWeight:"500"},children:[F?e.jsx(X,{size:16}):e.jsx(ee,{size:16}),e.jsx("span",{children:F?"Hell":"Dunkel"})]}),W&&e.jsxs("div",{className:"user-display",children:[e.jsx("span",{className:"user-greeting",children:"Willkommen"}),e.jsx("span",{className:"user-name",children:W})]}),e.jsxs("button",{className:"logout-button",onClick:Y,children:[e.jsx("svg",{className:"logout-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{className:"logout-text",children:"Logout"})]})]})]}),e.jsx("main",{className:"dashboard-main",children:e.jsx(Ae,{})})]})):"admin"===H&&"verband"===_?(console.log("✅ Zeige Verband Dashboard für TDA Verband"),e.jsxs("div",{className:"dashboard-container "+("tda-vib"===E?"dashboard-tda-vib":""),children:[e.jsxs("header",{className:"dashboard-header",style:{background:F?"rgba(15, 15, 35, 0.85)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[e.jsxs("div",{className:"dashboard-header-left",children:[e.jsx("img",{src:m,alt:"DojoSoftware Logo",className:"dashboard-logo dojo-software-logo"}),e.jsx("h2",{children:"🌐 TDA Verband"}),e.jsxs("span",{className:"version-badge",children:["v",x.app.version]})]}),e.jsxs("div",{className:"dashboard-header-right",children:[e.jsx(v,{}),e.jsxs("button",{className:"theme-toggle-button",onClick:T,title:F?"Zu hellem Theme wechseln":"Zu dunklem Theme wechseln",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:F?"rgba(255, 215, 0, 0.15)":"rgba(0, 0, 0, 0.1)",border:"1px solid "+(F?"rgba(255, 215, 0, 0.3)":"rgba(0, 0, 0, 0.2)"),borderRadius:"8px",color:F?"#ffd700":"#333",cursor:"pointer",transition:"all 0.3s ease",fontSize:"0.85rem",fontWeight:"500"},children:[F?e.jsx(X,{size:16}):e.jsx(ee,{size:16}),e.jsx("span",{children:F?"Hell":"Dunkel"})]}),W&&e.jsxs("div",{className:"user-display",children:[e.jsx("span",{className:"user-greeting",children:"Willkommen"}),e.jsx("span",{className:"user-name",children:W})]}),e.jsxs("button",{className:"logout-button",onClick:Y,children:[e.jsx("svg",{className:"logout-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{className:"logout-text",children:"Logout"})]})]})]}),e.jsx("main",{className:"dashboard-main",children:e.jsx(ue,{})})]})):e.jsxs("div",{className:"dashboard-container "+("tda-vib"===E?"dashboard-tda-vib":""),children:[e.jsxs("header",{className:"dashboard-header",children:[e.jsxs("div",{className:"dashboard-header-left",children:[e.jsx("img",{src:m,alt:"DojoSoftware Logo",className:"dashboard-logo dojo-software-logo"}),e.jsx("h2",{children:ie}),e.jsxs("span",{className:"version-badge",children:["v",x.app.version]})]}),e.jsxs("div",{className:"dashboard-header-right",children:["admin"===H&&e.jsx(v,{}),"admin"===H&&e.jsx(f,{}),!ne&&window.history.length>1&&e.jsxs("button",{onClick:()=>z(-1),className:"back-button",title:"Zur vorherigen Seite",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.85rem",fontWeight:"500",transition:"all 0.2s ease"},children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Zurück"})]}),!ne&&e.jsx("button",{onClick:()=>z("/dashboard"),className:"logout-button",children:"← Dashboard"}),e.jsxs("button",{className:"theme-toggle-button",onClick:T,title:F?"Zu hellem Theme wechseln":"Zu dunklem Theme wechseln",style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 12px",background:F?"rgba(255, 215, 0, 0.15)":"rgba(0, 0, 0, 0.1)",border:"1px solid "+(F?"rgba(255, 215, 0, 0.3)":"rgba(0, 0, 0, 0.2)"),borderRadius:"8px",color:F?"#ffd700":"#333",cursor:"pointer",transition:"all 0.3s ease",fontSize:"0.85rem",fontWeight:"500"},children:[F?e.jsx(X,{size:16}):e.jsx(ee,{size:16}),e.jsx("span",{children:F?"Hell":"Dunkel"})]}),W&&e.jsxs("div",{className:"user-display",children:[e.jsx("span",{className:"user-greeting",children:"Willkommen"}),e.jsx("span",{className:"user-name",children:W})]}),e.jsxs("button",{className:"logout-button",onClick:Y,children:[e.jsx("svg",{className:"logout-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{className:"logout-text",children:"Logout"})]})]})]}),e.jsx("div",{className:"dashboard-content",children:e.jsx("main",{className:"dashboard-main",children:ne?e.jsxs("div",{className:"content-card",children:[$&&e.jsxs("div",{className:"error-message",children:["⚠️ ",$,e.jsx("button",{onClick:q,className:"btn btn-neutral btn-small",style:{marginLeft:"10px"},children:"🔄 Erneut versuchen"})]}),e.jsx(y,{stats:L}),"admin"===H&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"dashboard-tabs",children:ae.map(s=>e.jsxs("button",{className:"dashboard-tab "+(Z===s.id?"active":""),onClick:()=>G(s.id),children:[e.jsx("span",{className:"tab-icon",children:s.icon}),e.jsx("span",{className:"tab-label",children:s.label})]},s.id))})}),e.jsx("div",{className:"dashboard-navigation",children:"admin"===H?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tab-content",children:["checkin"===Z&&e.jsxs("div",{className:"nav-cards",children:[e.jsxs("div",{onClick:()=>se("/dashboard/checkin"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge live",children:"LIVE"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"📱"}),e.jsxs("h3",{children:["Mitglieder Check-in",e.jsxs("span",{className:"nav-count",children:["(",re(L.checkins_heute),")"]})]})]}),e.jsx("p",{children:"Touch & QR-Code Check-in für Mitglieder"})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]}),e.jsxs("div",{onClick:()=>se("/dashboard/anwesenheit"),className:"nav-card clickable",children:[e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"✅"}),e.jsxs("h3",{children:["Anwesenheit",e.jsxs("span",{className:"nav-count",children:["(",re(L.anwesenheit),")"]})]})]}),e.jsx("p",{children:"Anwesenheitsverfolgung und Statistiken"})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]}),e.jsxs("div",{onClick:()=>se("/dashboard/personal-checkin"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge new",children:"NEU"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"👥"}),e.jsxs("h3",{children:["Personal Check-in",e.jsxs("span",{className:"nav-count",children:["(",re(L.personal_checkins_heute||0),")"]})]})]}),e.jsx("p",{children:"Arbeitszeit-Erfassung für Personal"})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]}),e.jsxs("div",{onClick:()=>window.open("/public-checkin","_blank","fullscreen=yes,scrollbars=yes"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge live",children:"LIVE"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"🖥️"}),e.jsxs("h3",{children:["Check-in Anzeige",e.jsx("span",{className:"nav-count",children:"(LIVE)"})]})]}),e.jsx("p",{children:"Check-in Display für 2. Monitor"})]}),e.jsx("div",{className:"nav-arrow",children:"↗"})]}),e.jsxs("div",{onClick:()=>window.open("/public-timetable","_blank","fullscreen=yes,scrollbars=yes"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge live",children:"LIVE"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"📚"}),e.jsxs("h3",{children:["Stundenplan Anzeige",e.jsx("span",{className:"nav-count",children:"(AUTO)"})]})]}),e.jsx("p",{children:"Rotierender Stundenplan für 2. Monitor"})]}),e.jsx("div",{className:"nav-arrow",children:"↗"})]}),e.jsxs("div",{onClick:()=>se("/dashboard/kasse"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge new",children:"NEU"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"💰"}),e.jsx("h3",{children:"Barverkauf"})]}),e.jsx("p",{children:"Touch-Kasse für Verkäufe und Barzahlungen"})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]}),e.jsxs("div",{onClick:()=>se("/dashboard/tresen"),className:"nav-card clickable featured",children:[e.jsx("div",{className:"nav-badge live",children:"LIVE"}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:"🏪"}),e.jsx("h3",{children:"Tresen-Übersicht"})]}),e.jsx("p",{children:"Empfang, Checkin & Tagesübersicht"})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]})]}),"mitglieder"===Z&&e.jsx("div",{className:"nav-cards",children:te.map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"live"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsxs("h3",{children:[s.title,void 0!==s.count&&e.jsxs("span",{className:"nav-count",children:["(",re(s.count),")"]})]})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"pruefungswesen"===Z&&e.jsx("div",{className:"nav-cards",children:oe.map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"LIVE"===s.badge?"live":"admin"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsxs("h3",{children:[s.title,void 0!==s.count&&e.jsxs("span",{className:"nav-count",children:["(",re(s.count),")"]})]})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"events"===Z&&e.jsx("div",{className:"nav-cards",children:[{icon:"📅",title:"Events verwalten",description:"Veranstaltungen, Wettkämpfe und besondere Termine",path:"/dashboard/events",badge:"NEU",featured:!0}].map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"LIVE"===s.badge?"live":"admin"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsx("h3",{children:s.title})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"finanzen"===Z&&e.jsx("div",{className:"nav-cards",children:ce.map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"live"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsxs("h3",{children:[s.title,void 0!==s.count&&e.jsxs("span",{className:"nav-count",children:["(",re(s.count),")"]})]})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"artikelverwaltung"===Z&&e.jsx("div",{className:"nav-cards",children:[{icon:"📁",title:"Artikelgruppen",description:"Kampfsport-Kategorien und Unterkategorien",path:"/dashboard/artikelgruppen",badge:"NEU",featured:!0},{icon:"📦",title:"Artikelverwaltung",description:"Sortiment und Lagerbestände verwalten",path:"/dashboard/artikel",badge:"NEU",featured:!0}].map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"LIVE"===s.badge?"live":"admin"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsx("h3",{children:s.title})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"verwaltung"===Z&&e.jsx("div",{className:"nav-cards",children:le.map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"live"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsxs("h3",{children:[s.title,void 0!==s.count&&e.jsxs("span",{className:"nav-count",children:["(",re(s.count),")"]})]})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"personal"===Z&&e.jsx("div",{className:"nav-cards",children:de.map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"live"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsxs("h3",{children:[s.title,void 0!==s.count&&e.jsxs("span",{className:"nav-count",children:["(",re(s.count),")"]})]})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"berichte"===Z&&e.jsx("div",{className:"nav-cards",children:he.map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"LIVE"===s.badge?"live":"admin"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsxs("h3",{children:[s.title,void 0!==s.count&&e.jsxs("span",{className:"nav-count",children:["(",re(s.count),")"]})]})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"einstellungen"===Z&&e.jsx("div",{className:"nav-cards",children:[{icon:"🏯",title:"Dojo-Verwaltung",description:"Dojos verwalten, Design, Theme, Verträge & Steuern",path:"/dashboard/dojos",badge:"DESIGN",featured:!0},{icon:"📥",title:"MagicLine Import",description:"Mitglieder & Verträge aus MagicLine importieren",path:"/dashboard/magicline-import",badge:"IMPORT",featured:!0},{icon:"📋",title:"Audit-Log",description:"Alle Änderungen nachverfolgen - Wer hat wann was geändert?",path:"/dashboard/audit-log",badge:"NEU",featured:!1},{icon:"🔗",title:"Webhooks & Zapier",description:"Automatisierungen mit externen Services",path:"/dashboard/webhooks",badge:"NEU",featured:!0},{icon:"🔌",title:"Integrationen",description:"PayPal, LexOffice, DATEV konfigurieren",path:"/dashboard/integrationen",badge:"NEU",featured:!0},{icon:"📅",title:"Kalender-Synchronisation",description:"iCal-Links für Google, Outlook, Apple",path:"/dashboard/kalender-sync",badge:"NEU",featured:!0}].map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable "+(s.featured?"featured":""),children:[s.badge&&e.jsx("div",{className:"nav-badge "+("NEU"===s.badge?"new":"LIVE"===s.badge?"live":"admin"),children:s.badge}),e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsx("h3",{children:s.title})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))}),"schnellaktionen"===Z&&e.jsxs("div",{className:"nav-section",children:[e.jsxs("h2",{className:"section-header quick-actions-header",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",backgroundImage:"none",WebkitBackgroundClip:"unset",WebkitTextFillColor:"#FFD700",backgroundClip:"unset",color:"#FFD700",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"2rem"},children:[e.jsx("span",{style:{fontSize:"1.5rem",filter:"drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3))",position:"relative",zIndex:10,lineHeight:1,display:"inline-block",flexShrink:0},children:"⚡"}),e.jsx("span",{style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#FFD700 !important",WebkitTextFillColor:"#FFD700 !important",backgroundImage:"none !important",WebkitBackgroundClip:"unset !important",backgroundClip:"unset !important"},children:"Schnellaktionen"})]}),"admin"===H?e.jsx("div",{className:"quick-actions",children:[{label:"➕ Neues Mitglied",path:"/dashboard/mitglieder/neu",className:"primary"},{label:"🎖️ Neuen Stil anlegen",path:"/dashboard/stile/neu",className:"info"},{label:"✅ Anwesenheit erfassen",path:"/dashboard/anwesenheit",className:"secondary"},{label:"🥋 Prüfung verwalten",path:"/dashboard/stile/pruefungen",className:"warning"},{label:"👥 Buddy-Gruppe erstellen",path:"/dashboard/buddy-gruppen",className:"success"},{label:"🎯 Neuen Tarif anlegen",path:"/dashboard/tarife",className:"info"},{label:"📦 Artikel hinzufügen",path:"/dashboard/artikel",className:"success"},{label:"💰 Barverkauf",path:"/dashboard/kasse",className:"primary"},{label:"💰 Zahlungseinstellungen",path:"/dashboard/einstellungen/zahlungen",className:"warning"}].map((s,a)=>e.jsx("button",{onClick:()=>se(s.path),className:`quick-action-btn ${s.className}`,children:s.label},a))}):e.jsx("div",{className:"quick-actions",children:[{label:"📅 Kurs buchen",path:"/dashboard/kurse",className:"primary"},{label:"👤 Daten bearbeiten",path:"/dashboard/meine-daten",className:"secondary"}].map((s,a)=>e.jsx("button",{onClick:()=>se(s.path),className:`quick-action-btn ${s.className}`,children:s.label},a))}),e.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},children:e.jsxs("button",{onClick:q,className:"quick-action-btn info",disabled:U,children:["🔄 ",U?"Lädt...":"Statistiken aktualisieren"]})})]}),"info"===Z&&e.jsxs("div",{className:"nav-section",children:[e.jsx("h2",{className:"section-header",children:"ℹ️ System & Status"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))",gap:"1.5rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("div",{style:{gridColumn:"span 1",background:"var(--glass-bg)",borderRadius:"16px",border:"1px solid var(--border-accent)",overflow:"hidden"},children:e.jsx(pe,{})}),e.jsxs("div",{style:{background:"var(--glass-bg)",borderRadius:"16px",padding:"1.5rem",border:"1px solid var(--border-accent)"},children:[e.jsx("h3",{style:{color:"var(--primary)",marginBottom:"1rem",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"📊 Dojo Statistiken"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("div",{style:{background:"rgba(255,215,0,0.1)",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"var(--primary)"},children:re(L.mitglieder)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Mitglieder"})]}),e.jsxs("div",{style:{background:"rgba(96,165,250,0.1)",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#60A5FA"},children:re(L.kurse)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Kurse"})]}),e.jsxs("div",{style:{background:"rgba(52,211,153,0.1)",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#34D399"},children:re(L.trainer)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Trainer"})]}),e.jsxs("div",{style:{background:"rgba(244,114,182,0.1)",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"700",color:"#F472B6"},children:re(L.checkins_heute)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Check-ins heute"})]})]})]}),e.jsxs("div",{style:{background:"var(--glass-bg)",borderRadius:"16px",padding:"1.5rem",border:"1px solid var(--border-accent)"},children:[e.jsx("h3",{style:{color:"var(--primary)",marginBottom:"1rem",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"⚙️ System"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid var(--border-accent)"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Version"}),e.jsxs("span",{style:{color:"var(--text-primary)",fontWeight:"600"},children:["v",x.app.version]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid var(--border-accent)"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Build"}),e.jsx("span",{style:{color:"var(--text-primary)"},children:x.app.buildDate})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0",borderBottom:"1px solid var(--border-accent)"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Entwickler"}),e.jsx("span",{style:{color:"var(--text-primary)"},children:x.app.author})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.5rem 0"},children:[e.jsx("span",{style:{color:"var(--text-secondary)"},children:"Support"}),e.jsx("a",{href:`mailto:${x.app.contactEmail}`,style:{color:"var(--primary)"},children:x.app.contactEmail})]})]})]}),e.jsxs("div",{style:{background:"var(--glass-bg)",borderRadius:"16px",padding:"1.5rem",border:"1px solid var(--border-accent)"},children:[e.jsx("h3",{style:{color:"var(--primary)",marginBottom:"1rem",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"🔗 Schnellzugriff"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsxs("button",{onClick:()=>se("/dashboard/einstellungen"),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(255,255,255,0.05)",border:"1px solid var(--border-accent)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",textAlign:"left",width:"100%"},children:[e.jsx("span",{children:"🏯"}),e.jsx("span",{children:"Dojo-Einstellungen"})]}),e.jsxs("button",{onClick:()=>se("/dashboard/audit-log"),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(255,255,255,0.05)",border:"1px solid var(--border-accent)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",textAlign:"left",width:"100%"},children:[e.jsx("span",{children:"📋"}),e.jsx("span",{children:"Audit-Log"})]}),e.jsxs("button",{onClick:()=>se("/dashboard/vertragsdokumente"),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1rem",background:"rgba(255,255,255,0.05)",border:"1px solid var(--border-accent)",borderRadius:"8px",color:"var(--text-primary)",cursor:"pointer",textAlign:"left",width:"100%"},children:[e.jsx("span",{children:"📄"}),e.jsx("span",{children:"AGB & Datenschutz bearbeiten"})]})]})]}),e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx(u,{maxItems:3})})]})]})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"nav-section",children:[e.jsx("h2",{className:"section-header",children:"🥋 Meine Dojo-Bereiche"}),e.jsx("div",{className:"nav-cards",children:[{icon:"✅",title:"Meine Anwesenheit",description:"Ihre Trainingshistorie einsehen",path:"/dashboard/meine-anwesenheit"},{icon:"🥋",title:"Meine Kurse",description:"Angemeldete Kurse und Termine",path:"/dashboard/meine-kurse"},{icon:"👤",title:"Meine Daten",description:"Persönliche Daten bearbeiten",path:"/dashboard/meine-daten"},{icon:"🎖️",title:"Meine Prüfungen",description:"Prüfungsstatus und nächste Gürtelprüfung",path:"/dashboard/meine-pruefungen"},{icon:"💰",title:"Meine Beiträge",description:"Zahlungshistorie und offene Beiträge",path:"/dashboard/meine-beitraege"}].map((s,a)=>e.jsxs("div",{onClick:()=>se(s.path),className:"nav-card clickable",children:[e.jsxs("div",{className:"nav-content",children:[e.jsxs("div",{className:"nav-card-header",children:[e.jsx("span",{className:"nav-icon",children:s.icon}),e.jsx("h3",{children:s.title})]}),e.jsx("p",{children:s.description})]}),e.jsx("div",{className:"nav-arrow",children:"→"})]},a))})]})})})]}):e.jsx("div",{className:"content-card",children:e.jsx(i,{})})})}),"admin"===H&&e.jsx(N,{})]}))}export{Ee as default};
