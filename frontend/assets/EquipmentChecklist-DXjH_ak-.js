import{j as e}from"./animation-1wuIdCBS.js";import{r as s}from"./vendor-router-BhMXg4Z-.js";import i from"./MemberHeader-Byiis1Cp.js";import{u as n,a as r}from"./index-BJCk5MxH.js";import{aF as a,C as t,g as c,aX as d,I as l}from"./icons-C6KFH58b.js";import"./vendor-react-DtuzQOD1.js";/* empty css                  */import"./query-Bs1dTGah.js";const h=()=>{const[h,m]=s.useState([]),[o,u]=s.useState([]),[j,p]=s.useState({}),[g,x]=s.useState(!0),{user:v}=n(),N=[{id:1,name:"Trainingskleidung (Gi/Anzug)",description:"Saubere Trainingskleidung fÃ¼r dein Training",category:"Kleidung",required:!0},{id:2,name:"Handtuch",description:"Handtuch fÃ¼r nach dem Training",category:"Hygiene",required:!1},{id:3,name:"Wasserflasche",description:"Ausreichend Wasser fÃ¼r das Training",category:"Verpflegung",required:!0},{id:4,name:"SchutzausrÃ¼stung",description:"Falls fÃ¼r deinen Kurs erforderlich (z.B. Handschuhe, Schienbeinschoner)",category:"SchutzausrÃ¼stung",required:!1}];s.useEffect(()=>{(async()=>{x(!0);try{if(!(null==v?void 0:v.email))return console.error("Kein User angemeldet"),void x(!1);const e=(await r.get(`/mitglieder/by-email/${encodeURIComponent(v.email)}`)).data.mitglied_id,s=(await r.get(`/stundenplan/member/${e}/termine`)).data,i=(new Date).toISOString().split("T")[0],n=s.filter(e=>e.datum===i).map(e=>({id:e.stundenplan_id,kurs_name:e.title,trainer_name:e.trainer,uhrzeit:e.zeit,raum:e.raum,datum:e.datum}));m(n),u(N);const a=localStorage.getItem("equipment-checklist");a&&p(JSON.parse(a))}catch(e){console.error("Fehler beim Laden der Kursdaten:",e),m([]),u(N)}finally{x(!1)}})()},[v]);const f=(()=>{const e=o.filter(e=>j[e.id]).length;return{checked:e,total:o.length,percentage:o.length>0?Math.round(e/o.length*100):100}})(),q=o.reduce((e,s)=>{const i=s.category;return e[i]||(e[i]=[]),e[i].push(s),e},{});return g?e.jsxs("div",{className:"dashboard-container",children:[e.jsx(i,{}),e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"equipment-checklist-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Lade Equipment-Checkliste..."})]})})]}):e.jsxs("div",{className:"dashboard-container",children:[e.jsx(i,{}),e.jsx("div",{className:"dashboard-content",children:e.jsxs("div",{className:"equipment-checklist",children:[e.jsx("div",{className:"checklist-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx(a,{size:24}),e.jsx("h1",{children:"Equipment-Checkliste"}),e.jsx("p",{children:"Was brauche ich heute fÃ¼r mein Training?"})]})}),h.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"progress-section",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("h2",{children:"Heutige Vorbereitung"}),e.jsxs("div",{className:"progress-badge",children:[f.checked,"/",f.total," âœ“"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${f.percentage}%`}})}),e.jsx("div",{className:"progress-text",children:100===f.percentage?e.jsx("span",{className:"complete",children:"ğŸ‰ Alles bereit fÃ¼r dein Training!"}):e.jsxs("span",{children:["Noch ",f.total-f.checked," GegenstÃ¤nde fehlen"]})})]}),e.jsxs("div",{className:"today-courses",children:[e.jsxs("h3",{children:[e.jsx(t,{size:20}),"Heutige Kurse"]}),e.jsx("div",{className:"courses-list",children:h.map(s=>e.jsx("div",{className:"course-item",children:e.jsxs("div",{className:"course-info",children:[e.jsx("h4",{children:s.kurs_name}),e.jsxs("div",{className:"course-details",children:[e.jsxs("span",{children:["ğŸ‘¨â€ğŸ« ",s.trainer_name]}),e.jsxs("span",{children:["ğŸ• ",s.uhrzeit]}),e.jsxs("span",{children:["ğŸ“ ",s.raum]})]})]})},s.id))})]}),e.jsxs("div",{className:"equipment-categories",children:[e.jsxs("h3",{children:[e.jsx(a,{size:20}),"BenÃ¶tigtes Equipment"]}),Object.entries(q).map(([s,i])=>e.jsxs("div",{className:"equipment-category",children:[e.jsx("h4",{children:s}),e.jsx("div",{className:"equipment-items",children:i.map(s=>e.jsxs("div",{className:"equipment-item "+(j[s.id]?"checked":""),children:[e.jsx("button",{className:"check-button",onClick:()=>{return e=s.id,void p(s=>{const i={...s,[e]:!s[e]};return localStorage.setItem("equipment-checklist",JSON.stringify(i)),i});var e},children:j[s.id]?e.jsx(c,{size:20}):e.jsx(d,{size:20})}),e.jsxs("div",{className:"equipment-info",children:[e.jsx("h5",{children:s.name}),e.jsx("p",{children:s.description}),s.required&&e.jsx("span",{className:"required-badge",children:"Empfohlen"})]})]},s.id))})]},s))]})]}):e.jsxs("div",{className:"no-courses",children:[e.jsx(l,{size:48}),e.jsx("h3",{children:"Keine Kurse heute"}),e.jsx("p",{children:"Du hast heute keine geplanten Kurse. Zeit fÃ¼r ein freies Training! ğŸ’ª"})]}),e.jsxs("div",{className:"equipment-tips",children:[e.jsx("h3",{children:"ğŸ’¡ Tipps"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Kontrolliere dein Equipment rechtzeitig vor dem Training"}),e.jsx("li",{children:"Diese Liste zeigt empfohlenes Equipment fÃ¼r dein Training"}),e.jsx("li",{children:"Bei Fragen zum benÃ¶tigten Equipment wende dich an deinen Trainer"}),e.jsx("li",{children:"Deine Checkliste wird automatisch gespeichert"})]})]})]})})]})};export{h as default};
