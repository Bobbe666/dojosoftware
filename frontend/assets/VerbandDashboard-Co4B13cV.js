import{j as e}from"./animation-1wuIdCBS.js";import{r as s,u as n}from"./vendor-router-BhMXg4Z-.js";import{u as t,a,g as i}from"./index-BJCk5MxH.js";import{ax as l,A as r,P as d,x as o,U as c,u as h,T as u,aH as x,c as p,aI as g,C as m,v as j,F as b,N as v,av as f,b as y,X as k,V as z,aJ as N,aK as _,M as S,Y as C,W as w,w as B,aA as I,d as T,aL as D,K as F,q as L,aM as M,k as A,am as R,aF as E,e as G,aN as V,aO as W,aP as P,a0 as $,aQ as O,aR as K,ak as H,G as U,z as J,o as Z,a2 as q,g as X,l as Y,r as Q,ah as ee}from"./icons-C6KFH58b.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";const se=()=>{var n,i,M,A;const{token:R,user:E}=t(),G="admin"===(null==E?void 0:E.rolle)||"admin"===(null==E?void 0:E.role),[V,W]=s.useState("dojos"),[P,$]=s.useState([]),[O,K]=s.useState([]),[H,U]=s.useState({}),[J,Z]=s.useState(!0),[q,X]=s.useState(""),[Y,Q]=s.useState(""),[ee,se]=s.useState(""),[te,ae]=s.useState([]),[ie,le]=s.useState(!1),[re,de]=s.useState("preise"),[oe,ce]=s.useState({}),[he,ue]=s.useState(!1),[xe,pe]=s.useState({}),[ge,me]=s.useState(!1),[je,be]=s.useState(!1),[ve,fe]=s.useState(!1),[ye,ke]=s.useState(!1),[ze,Ne]=s.useState(!1),[_e,Se]=s.useState(null),[Ce,we]=s.useState([]),[Be,Ie]=s.useState("info"),[Te,De]=s.useState({iban:"",bic:"",kontoinhaber:""}),[Fe,Le]=s.useState([]),[Me,Ae]=s.useState([]),[Re,Ee]=s.useState(null),Ge=s.useRef(null),[Ve,We]=s.useState(!1),[Pe,$e]=s.useState(null),[Oe,Ke]=s.useState({agb:!1,dsgvo:!1,widerruf:!1}),[He,Ue]=s.useState({typ:"dojo",dojo_id:"",neues_dojo:!1,neues_dojo_name:"",neues_dojo_inhaber:"",neues_dojo_email:"",neues_dojo_strasse:"",neues_dojo_plz:"",neues_dojo_ort:"",neues_dojo_land:"Deutschland",person_vorname:"",person_nachname:"",person_email:"",person_telefon:"",person_strasse:"",person_plz:"",person_ort:"",person_land:"Deutschland",person_geburtsdatum:"",zahlungsart:"rechnung",notizen:""}),Je=a.create({baseURL:"/api",headers:{Authorization:`Bearer ${R}`}}),Ze=async()=>{Z(!0),X("");try{const[e,s,n]=await Promise.all([Je.get("/verbandsmitgliedschaften"),Je.get("/verbandsmitgliedschaften/stats"),Je.get("/verbandsmitgliedschaften/vorteile/liste")]);$(e.data),U(s.data),K(n.data)}catch(e){console.error("Fehler beim Laden:",e),X("Fehler beim Laden der Daten")}finally{Z(!1)}},qe=async()=>{le(!0);try{const e=await Je.get("/verbandsmitgliedschaften/einstellungen/alle");ae(e.data),ce({})}catch(e){console.error("Fehler beim Laden der Einstellungen:",e)}finally{le(!1)}},Xe=async()=>{try{const e=await Je.get("/verbandsmitgliedschaften/einstellungen-config");pe(e.data)}catch(e){console.error("Fehler beim Laden der Konfiguration:",e)}},Ye=(e,s)=>{ce(n=>({...n,[e]:s}))},Qe=e=>{if(oe.hasOwnProperty(e))return oe[e];const s=te.find(s=>s.einstellung_key===e);return(null==s?void 0:s.einstellung_value)??""};s.useEffect(()=>{Ze(),Xe()},[]),s.useEffect(()=>{ge&&"dojo"===He.typ&&(async()=>{try{const e=await Je.get("/verbandsmitgliedschaften/dojos-ohne-mitgliedschaft");we(e.data)}catch(e){console.error("Fehler beim Laden der Dojos:",e)}})()},[ge,He.typ]),s.useEffect(()=>{(ve||ze)&&setTimeout(()=>ts(),100)},[ve,ze]),s.useEffect(()=>{"einstellungen"===V&&qe()},[V]);const es=()=>{Ue({typ:"dojo",dojo_id:"",neues_dojo:!1,neues_dojo_name:"",neues_dojo_inhaber:"",neues_dojo_email:"",neues_dojo_strasse:"",neues_dojo_plz:"",neues_dojo_ort:"",neues_dojo_land:"Deutschland",person_vorname:"",person_nachname:"",person_email:"",person_telefon:"",person_strasse:"",person_plz:"",person_ort:"",person_land:"Deutschland",person_geburtsdatum:"",zahlungsart:"rechnung",notizen:""})},ss=async e=>{try{const s=await Je.get(`/verbandsmitgliedschaften/${e}/sepa`);Le(s.data)}catch(s){console.error("Fehler beim Laden der SEPA-Mandate:",s)}},ns=async e=>{try{const s=await Je.get(`/verbandsmitgliedschaften/dokumente/${e}`);Ee(s.data),ke(!0)}catch(s){alert("Dokument nicht gefunden")}},ts=()=>{const e=Ge.current;if(!e)return;const s=e.getContext("2d");s.fillStyle="#fff",s.fillRect(0,0,e.width,e.height),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round"},as=e=>{var s,n,t,a;const i=Ge.current,l=i.getContext("2d"),r=i.getBoundingClientRect(),d=(e.clientX||(null==(n=null==(s=e.touches)?void 0:s[0])?void 0:n.clientX))-r.left,o=(e.clientY||(null==(a=null==(t=e.touches)?void 0:t[0])?void 0:a.clientY))-r.top;l.beginPath(),l.moveTo(d,o),We(!0)},is=e=>{var s,n,t,a;if(!Ve)return;const i=Ge.current,l=i.getContext("2d"),r=i.getBoundingClientRect(),d=(e.clientX||(null==(n=null==(s=e.touches)?void 0:s[0])?void 0:n.clientX))-r.left,o=(e.clientY||(null==(a=null==(t=e.touches)?void 0:t[0])?void 0:a.clientY))-r.top;l.lineTo(d,o),l.stroke()},ls=()=>{if(Ve){We(!1);const e=Ge.current;$e(e.toDataURL("image/png"))}},rs=()=>{ts(),$e(null)},ds=async e=>{try{const[s,n]=await Promise.all([Je.get(`/verbandsmitgliedschaften/${e.id}`),Je.get(`/verbandsmitgliedschaften/${e.id}/zahlungen`)]);Se({...s.data,zahlungen:n.data}),Ie("info"),ss(e.id),(async()=>{try{const e=await Je.get("/verbandsmitgliedschaften/dokumente/liste");Ae(e.data)}catch(e){console.error("Fehler beim Laden der Dokumente:",e)}})(),be(!0)}catch(s){alert("Fehler beim Laden der Details")}},os=P.filter(e=>{var s;if("dojos"===V&&"dojo"!==e.typ)return!1;if("einzelpersonen"===V&&"einzelperson"!==e.typ)return!1;if(ee&&e.status!==ee)return!1;if(Y){const n=Y.toLowerCase();if(!("dojo"===e.typ?e.dojo_name||"":`${e.person_vorname||""} ${e.person_nachname||""}`).toLowerCase().includes(n)&&!(null==(s=e.mitgliedsnummer)?void 0:s.toLowerCase().includes(n)))return!1}return!0}),cs=s=>{const n={aktiv:{color:"#10b981",bg:"rgba(16, 185, 129, 0.15)",icon:z,label:"Aktiv"},ausstehend:{color:"#f59e0b",bg:"rgba(245, 158, 11, 0.15)",icon:L,label:"Ausstehend"},abgelaufen:{color:"#ef4444",bg:"rgba(239, 68, 68, 0.15)",icon:u,label:"Abgelaufen"},gekuendigt:{color:"#6b7280",bg:"rgba(107, 114, 128, 0.15)",icon:k,label:"Gekündigt"},vertragsfrei:{color:"#8b5cf6",bg:"rgba(139, 92, 246, 0.15)",icon:T,label:"Vertragsfrei"}},t=n[s]||n.ausstehend,a=t.icon;return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"6px",background:t.bg,color:t.color,fontSize:"0.8rem",fontWeight:"600"},children:[e.jsx(a,{size:14}),t.label]})},hs=e=>e?new Date(e).toLocaleDateString("de-DE"):"-",us=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e);return J?e.jsx("div",{style:ne.container,children:e.jsxs("div",{style:ne.loading,children:[e.jsx(l,{size:32,className:"spin"}),e.jsx("span",{children:"Lade Verbandsmitglieder..."})]})}):e.jsxs("div",{style:ne.container,children:[e.jsxs("div",{style:ne.header,children:[e.jsxs("div",{children:[e.jsxs("h1",{style:ne.title,children:[e.jsx(r,{size:28,color:"#ffd700"}),"TDA Verbandsmitglieder"]}),e.jsx("p",{style:ne.subtitle,children:"Dojo- und Einzelmitgliedschaften verwalten"})]}),e.jsxs("button",{style:ne.primaryButton,onClick:()=>me(!0),children:[e.jsx(d,{size:18}),"Neue Mitgliedschaft"]})]}),e.jsxs("div",{style:ne.statsGrid,children:[e.jsxs("div",{style:ne.statCard,children:[e.jsx(o,{size:24,color:"#3b82f6"}),e.jsxs("div",{children:[e.jsx("div",{style:ne.statValue,children:H.dojos||0}),e.jsx("div",{style:ne.statLabel,children:"Dojo-Mitglieder"})]})]}),e.jsxs("div",{style:ne.statCard,children:[e.jsx(c,{size:24,color:"#10b981"}),e.jsxs("div",{children:[e.jsx("div",{style:ne.statValue,children:H.einzelpersonen||0}),e.jsx("div",{style:ne.statLabel,children:"Einzelmitglieder"})]})]}),e.jsxs("div",{style:ne.statCard,children:[e.jsx(h,{size:24,color:"#ffd700"}),e.jsxs("div",{children:[e.jsx("div",{style:ne.statValue,children:us(H.jahresumsatz||0)}),e.jsx("div",{style:ne.statLabel,children:"Jahresumsatz"})]})]}),e.jsxs("div",{style:ne.statCard,children:[e.jsx(u,{size:24,color:"#f59e0b"}),e.jsxs("div",{children:[e.jsx("div",{style:ne.statValue,children:H.auslaufend||0}),e.jsx("div",{style:ne.statLabel,children:"Laufen aus (30 Tage)"})]})]})]}),e.jsxs("div",{style:ne.tabs,children:[e.jsxs("button",{style:{...ne.tab,..."dojos"===V?ne.tabActive:{}},onClick:()=>W("dojos"),children:[e.jsx(o,{size:16}),"Dojos (",P.filter(e=>"dojo"===e.typ).length,")"]}),e.jsxs("button",{style:{...ne.tab,..."einzelpersonen"===V?ne.tabActive:{}},onClick:()=>W("einzelpersonen"),children:[e.jsx(c,{size:16}),"Einzelpersonen (",P.filter(e=>"einzelperson"===e.typ).length,")"]}),e.jsxs("button",{style:{...ne.tab,..."vorteile"===V?ne.tabActive:{}},onClick:()=>W("vorteile"),children:[e.jsx(x,{size:16}),"Vorteile & Rabatte"]}),e.jsxs("button",{style:{...ne.tab,..."einstellungen"===V?ne.tabActive:{}},onClick:()=>W("einstellungen"),children:[e.jsx(p,{size:16}),"Einstellungen"]})]}),"vorteile"===V&&e.jsxs("div",{style:ne.vorteileContainer,children:[e.jsx("h3",{style:ne.sectionTitle,children:"Mitgliedschaftsvorteile"}),e.jsx("div",{style:ne.vorteileGrid,children:O.map(s=>e.jsxs("div",{style:ne.vorteilCard,children:[e.jsxs("div",{style:ne.vorteilHeader,children:[e.jsx(g,{size:20,color:"#ffd700"}),e.jsx("span",{style:ne.vorteilTitel,children:s.titel})]}),e.jsx("p",{style:ne.vorteilBeschreibung,children:s.beschreibung}),e.jsxs("div",{style:ne.vorteilMeta,children:[e.jsxs("span",{style:ne.vorteilRabatt,children:["prozent"===s.rabatt_typ?`${s.rabatt_wert}%`:us(s.rabatt_wert)," Rabatt"]}),e.jsx("span",{style:ne.vorteilKategorie,children:s.kategorie}),e.jsx("span",{style:{...ne.vorteilGilt,background:"dojo"===s.gilt_fuer?"rgba(59, 130, 246, 0.2)":"einzelperson"===s.gilt_fuer?"rgba(16, 185, 129, 0.2)":"rgba(255, 215, 0, 0.2)"},children:"beide"===s.gilt_fuer?"Alle":"dojo"===s.gilt_fuer?"Dojos":"Einzelpersonen"})]})]},s.id))})]}),"einstellungen"===V&&e.jsxs("div",{style:ne.einstellungenContainer,children:[e.jsx("div",{style:ne.einstellungenTabs,children:[{key:"preise",label:"Preise",icon:h},{key:"laufzeiten",label:"Laufzeiten",icon:m},{key:"zahlungen",label:"Zahlungen",icon:j},{key:"nummern",label:"Nummern",icon:b},{key:"verband",label:"Verband",icon:o}].map(({key:s,label:n,icon:t})=>e.jsxs("button",{style:{...ne.einstellungenTab,...re===s?ne.einstellungenTabActive:{}},onClick:()=>de(s),children:[e.jsx(t,{size:16}),n]},s))}),ie?e.jsxs("div",{style:ne.loading,children:[e.jsx(l,{size:24,className:"spin"}),e.jsx("span",{children:"Lade Einstellungen..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:ne.einstellungenGrid,children:te.filter(e=>e.kategorie===re).map(s=>e.jsxs("div",{style:ne.einstellungItem,children:[e.jsxs("label",{style:ne.einstellungLabel,children:[s.label,s.beschreibung&&e.jsx("span",{style:ne.einstellungHint,children:s.beschreibung})]}),"boolean"===s.einstellung_typ?e.jsxs("label",{style:ne.toggleLabel,children:[e.jsx("input",{type:"checkbox",checked:!0===Qe(s.einstellung_key),onChange:e=>Ye(s.einstellung_key,e.target.checked),style:ne.toggleInput}),e.jsx("span",{style:{...ne.toggleSwitch,background:Qe(s.einstellung_key)?"#10b981":"#ef4444"},children:e.jsx("span",{style:{position:"absolute",top:"2px",left:"2px",width:"20px",height:"20px",background:"#fff",borderRadius:"50%",transition:"transform 0.2s",transform:Qe(s.einstellung_key)?"translateX(24px)":"translateX(0)"}})}),e.jsx("span",{style:{...ne.toggleText,color:Qe(s.einstellung_key)?"#10b981":"#ef4444",fontWeight:"600"},children:Qe(s.einstellung_key)?"Aktiv":"Inaktiv"})]}):"number"===s.einstellung_typ?e.jsx("input",{type:"number",value:Qe(s.einstellung_key),onChange:e=>Ye(s.einstellung_key,parseFloat(e.target.value)||0),style:ne.einstellungInput,step:s.einstellung_key.includes("preis")||s.einstellung_key.includes("mwst")?"0.01":"1"}):"json"===s.einstellung_typ?e.jsx("textarea",{value:"object"==typeof Qe(s.einstellung_key)?JSON.stringify(Qe(s.einstellung_key),null,2):Qe(s.einstellung_key),onChange:e=>{try{Ye(s.einstellung_key,JSON.parse(e.target.value))}catch{}},style:{...ne.einstellungInput,minHeight:"80px",fontFamily:"monospace"}}):e.jsx("input",{type:"text",value:Qe(s.einstellung_key),onChange:e=>Ye(s.einstellung_key,e.target.value),style:ne.einstellungInput}),oe.hasOwnProperty(s.einstellung_key)&&e.jsx("span",{style:ne.changedBadge,children:"Geändert"})]},s.einstellung_key))}),Object.keys(oe).length>0&&e.jsxs("div",{style:ne.einstellungenFooter,children:[e.jsxs("span",{style:ne.changesCount,children:[Object.keys(oe).length," Änderung(en)"]}),e.jsx("button",{style:ne.cancelButton,onClick:()=>{ce({}),qe()},children:"Verwerfen"}),e.jsx("button",{style:ne.submitButton,onClick:async()=>{ue(!0);try{const e=Object.entries(oe).map(([e,s])=>({key:e,value:s}));if(0===e.length)return void alert("Keine Änderungen vorhanden");await Je.put("/verbandsmitgliedschaften/einstellungen",{einstellungen:e}),alert("Einstellungen gespeichert!"),ce({}),qe(),Xe()}catch(e){alert("Fehler beim Speichern")}finally{ue(!1)}},disabled:he,children:he?e.jsxs(e.Fragment,{children:[e.jsx(l,{size:16,className:"spin"})," Speichern..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16})," Speichern"]})})]})]})]}),"vorteile"!==V&&"einstellungen"!==V&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:ne.filterBar,children:[e.jsxs("div",{style:ne.searchBox,children:[e.jsx(f,{size:18,color:"#888"}),e.jsx("input",{type:"text",placeholder:"Suchen...",value:Y,onChange:e=>Q(e.target.value),style:ne.searchInput})]}),e.jsxs("select",{value:ee,onChange:e=>se(e.target.value),style:ne.select,children:[e.jsx("option",{value:"",children:"Alle Status"}),e.jsx("option",{value:"aktiv",children:"Aktiv"}),e.jsx("option",{value:"ausstehend",children:"Ausstehend"}),e.jsx("option",{value:"abgelaufen",children:"Abgelaufen"}),e.jsx("option",{value:"gekuendigt",children:"Gekündigt"})]}),e.jsx("button",{style:ne.iconButton,onClick:Ze,children:e.jsx(l,{size:18})})]}),e.jsx("div",{style:ne.list,children:0===os.length?e.jsxs("div",{style:ne.emptyState,children:[e.jsx(o,{size:48,color:"#666"}),e.jsx("p",{children:"Keine Mitgliedschaften gefunden"})]}):os.map(s=>e.jsxs("div",{style:ne.listItem,onClick:()=>ds(s),children:[e.jsx("div",{style:ne.listItemIcon,children:"dojo"===s.typ?e.jsx(o,{size:24,color:"#3b82f6"}):e.jsx(c,{size:24,color:"#10b981"})}),e.jsxs("div",{style:ne.listItemContent,children:[e.jsxs("div",{style:ne.listItemHeader,children:[e.jsx("span",{style:ne.listItemName,children:"dojo"===s.typ?s.dojo_name:`${s.person_vorname} ${s.person_nachname}`}),cs(s.status)]}),e.jsxs("div",{style:ne.listItemMeta,children:[e.jsxs("span",{children:[e.jsx(b,{size:12})," ",s.mitgliedsnummer]}),e.jsxs("span",{children:[e.jsx(m,{size:12})," Bis: ",hs(s.gueltig_bis)]}),e.jsxs("span",{children:[e.jsx(h,{size:12})," ",us(s.jahresbeitrag),"/Jahr"]})]})]}),e.jsx(y,{size:20,color:"#888"})]},s.id))})]}),ge&&e.jsx("div",{style:ne.modalOverlay,onClick:()=>me(!1),children:e.jsxs("div",{style:ne.modal,onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:ne.modalHeader,children:[e.jsx("h2",{style:ne.modalTitle,children:"Neue Mitgliedschaft"}),e.jsx("button",{style:ne.closeButton,onClick:()=>me(!1),children:e.jsx(k,{size:20})})]}),e.jsxs("form",{onSubmit:async e=>{var s,n,t;if(e.preventDefault(),"dojo"===He.typ){if(!He.neues_dojo&&!He.dojo_id)return void alert("Bitte wähle ein Dojo aus oder lege ein neues an.");if(He.neues_dojo&&(!He.neues_dojo_name||!He.neues_dojo_email))return void alert("Bitte Dojo-Name und E-Mail ausfüllen.")}if("einzelperson"!==He.typ||He.person_vorname&&He.person_nachname&&He.person_email)try{let e={...He};if("dojo"===He.typ&&He.neues_dojo){const n=await Je.post("/admin/dojos",{dojoname:He.neues_dojo_name,inhaber:He.neues_dojo_inhaber,email:He.neues_dojo_email,strasse:He.neues_dojo_strasse,plz:He.neues_dojo_plz,ort:He.neues_dojo_ort,land:He.neues_dojo_land});e.dojo_id=n.data.id||(null==(s=n.data.dojo)?void 0:s.id),e.neues_dojo=!1}await Je.post("/verbandsmitgliedschaften",e),me(!1),es(),Ze()}catch(a){alert((null==(t=null==(n=a.response)?void 0:n.data)?void 0:t.error)||"Fehler beim Anlegen")}else alert("Bitte Vorname, Nachname und E-Mail ausfüllen.")},children:[e.jsxs("div",{style:ne.typSelector,children:[e.jsxs("button",{type:"button",style:{...ne.typButton,..."dojo"===He.typ?ne.typButtonActive:{}},onClick:()=>Ue({...He,typ:"dojo"}),children:[e.jsx(o,{size:24}),e.jsx("span",{children:"Dojo"}),e.jsxs("span",{style:ne.typPrice,children:[us(xe.preis_dojo_mitgliedschaft||99),"/Jahr"]})]}),e.jsxs("button",{type:"button",style:{...ne.typButton,..."einzelperson"===He.typ?ne.typButtonActiveGreen:{}},onClick:()=>Ue({...He,typ:"einzelperson"}),children:[e.jsx(c,{size:24}),e.jsx("span",{children:"Einzelperson"}),e.jsxs("span",{style:ne.typPrice,children:[us(xe.preis_einzel_mitgliedschaft||49),"/Jahr"]})]})]}),"dojo"===He.typ&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Dojo *"}),e.jsxs("select",{value:He.neues_dojo?"neu":He.dojo_id,onChange:e=>{"neu"===e.target.value?Ue({...He,neues_dojo:!0,dojo_id:""}):Ue({...He,neues_dojo:!1,dojo_id:e.target.value})},style:ne.input,children:[e.jsx("option",{value:"",children:"-- Dojo wählen --"}),Ce.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.ort?`(${s.ort})`:""]},s.id)),e.jsx("option",{value:"neu",style:{fontWeight:"bold",borderTop:"1px solid #ccc"},children:"➕ Neues Dojo anlegen..."})]})]}),He.neues_dojo&&e.jsxs("div",{style:{...ne.card,background:"rgba(255, 215, 0, 0.1)",marginBottom:"1rem"},children:[e.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#ffd700"},children:"Neues Dojo anlegen"}),e.jsxs("div",{style:ne.formRow,children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Dojo-Name *"}),e.jsx("input",{type:"text",value:He.neues_dojo_name,onChange:e=>Ue({...He,neues_dojo_name:e.target.value}),style:ne.input,placeholder:"z.B. Kampfsportschule Muster"})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Inhaber *"}),e.jsx("input",{type:"text",value:He.neues_dojo_inhaber,onChange:e=>Ue({...He,neues_dojo_inhaber:e.target.value}),style:ne.input,placeholder:"Vor- und Nachname"})]})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"E-Mail *"}),e.jsx("input",{type:"email",value:He.neues_dojo_email,onChange:e=>Ue({...He,neues_dojo_email:e.target.value}),style:ne.input,placeholder:"info@dojo.de"})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Straße"}),e.jsx("input",{type:"text",value:He.neues_dojo_strasse,onChange:e=>Ue({...He,neues_dojo_strasse:e.target.value}),style:ne.input,placeholder:"Musterstraße 123"})]}),e.jsxs("div",{style:ne.formRow,children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"PLZ"}),e.jsx("input",{type:"text",value:He.neues_dojo_plz,onChange:e=>Ue({...He,neues_dojo_plz:e.target.value}),style:ne.input,placeholder:"12345"})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Ort"}),e.jsx("input",{type:"text",value:He.neues_dojo_ort,onChange:e=>Ue({...He,neues_dojo_ort:e.target.value}),style:ne.input,placeholder:"Musterstadt"})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Land"}),e.jsx("input",{type:"text",value:He.neues_dojo_land,onChange:e=>Ue({...He,neues_dojo_land:e.target.value}),style:ne.input})]})]})]})]}),"einzelperson"===He.typ&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:ne.formRow,children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Vorname *"}),e.jsx("input",{type:"text",value:He.person_vorname,onChange:e=>Ue({...He,person_vorname:e.target.value}),style:ne.input})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Nachname *"}),e.jsx("input",{type:"text",value:He.person_nachname,onChange:e=>Ue({...He,person_nachname:e.target.value}),style:ne.input})]})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"E-Mail *"}),e.jsx("input",{type:"email",value:He.person_email,onChange:e=>Ue({...He,person_email:e.target.value}),style:ne.input})]}),e.jsxs("div",{style:ne.formRow,children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Telefon"}),e.jsx("input",{type:"tel",value:He.person_telefon,onChange:e=>Ue({...He,person_telefon:e.target.value}),style:ne.input})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Geburtsdatum"}),e.jsx("input",{type:"date",value:He.person_geburtsdatum,onChange:e=>Ue({...He,person_geburtsdatum:e.target.value}),style:ne.input})]})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Straße"}),e.jsx("input",{type:"text",value:He.person_strasse,onChange:e=>Ue({...He,person_strasse:e.target.value}),style:ne.input})]}),e.jsxs("div",{style:ne.formRow,children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"PLZ"}),e.jsx("input",{type:"text",value:He.person_plz,onChange:e=>Ue({...He,person_plz:e.target.value}),style:ne.input})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Ort"}),e.jsx("input",{type:"text",value:He.person_ort,onChange:e=>Ue({...He,person_ort:e.target.value}),style:ne.input})]})]})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Zahlungsart"}),e.jsxs("select",{value:He.zahlungsart,onChange:e=>Ue({...He,zahlungsart:e.target.value}),style:ne.input,children:[e.jsx("option",{value:"rechnung",children:"Rechnung"}),e.jsx("option",{value:"lastschrift",children:"SEPA-Lastschrift"}),e.jsx("option",{value:"paypal",children:"PayPal"}),e.jsx("option",{value:"ueberweisung",children:"Überweisung"})]})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Notizen"}),e.jsx("textarea",{value:He.notizen,onChange:e=>Ue({...He,notizen:e.target.value}),style:{...ne.input,minHeight:"80px"}})]}),e.jsxs("div",{style:ne.modalFooter,children:[e.jsx("button",{type:"button",style:ne.cancelButton,onClick:()=>me(!1),children:"Abbrechen"}),e.jsxs("button",{type:"submit",style:ne.submitButton,children:[e.jsx(z,{size:18}),"Mitgliedschaft anlegen"]})]})]})]})}),je&&_e&&e.jsx("div",{style:ne.modalOverlay,onClick:()=>be(!1),children:e.jsxs("div",{style:{...ne.modal,maxWidth:"800px"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:ne.modalHeader,children:[e.jsx("h2",{style:ne.modalTitle,children:"dojo"===_e.typ?e.jsxs(e.Fragment,{children:[e.jsx(o,{size:24,color:"#3b82f6"})," ",_e.dojo_name]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{size:24,color:"#10b981"})," ",_e.person_vorname," ",_e.person_nachname]})}),e.jsx("button",{style:ne.closeButton,onClick:()=>be(!1),children:e.jsx(k,{size:20})})]}),e.jsxs("div",{style:ne.detailTabs,children:[e.jsxs("button",{style:{...ne.detailTab,..."info"===Be?ne.detailTabActive:{}},onClick:()=>Ie("info"),children:[e.jsx(c,{size:16})," Info"]}),e.jsxs("button",{style:{...ne.detailTab,..."vertrag"===Be?ne.detailTabActive:{}},onClick:()=>Ie("vertrag"),children:[e.jsx(b,{size:16})," Vertrag"]}),e.jsxs("button",{style:{...ne.detailTab,..."sepa"===Be?ne.detailTabActive:{}},onClick:()=>Ie("sepa"),children:[e.jsx(N,{size:16})," SEPA"]}),e.jsxs("button",{style:{...ne.detailTab,..."historie"===Be?ne.detailTabActive:{}},onClick:()=>Ie("historie"),children:[e.jsx(_,{size:16})," Historie"]})]}),e.jsxs("div",{style:ne.detailContent,children:["info"===Be&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:ne.detailRow,children:[e.jsxs("div",{style:ne.detailItem,children:[e.jsx("span",{style:ne.detailLabel,children:"Mitgliedsnummer"}),e.jsx("span",{style:ne.detailValue,children:_e.mitgliedsnummer})]}),e.jsxs("div",{style:ne.detailItem,children:[e.jsx("span",{style:ne.detailLabel,children:"Status"}),e.jsxs("select",{value:_e.status,onChange:e=>(async(e,s)=>{var n,t;try{if(await Je.put(`/verbandsmitgliedschaften/${e}/status`,{status:s}),Ze(),_e){const e=await Je.get(`/verbandsmitgliedschaften/${_e.id}`);Se(e.data)}}catch(a){alert((null==(t=null==(n=a.response)?void 0:n.data)?void 0:t.error)||"Fehler beim Status ändern")}})(_e.id,e.target.value),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",background:"aktiv"===_e.status?"rgba(16, 185, 129, 0.2)":"ausstehend"===_e.status?"rgba(245, 158, 11, 0.2)":"vertragsfrei"===_e.status?"rgba(107, 114, 128, 0.2)":"rgba(239, 68, 68, 0.2)",color:"aktiv"===_e.status?"#10b981":"ausstehend"===_e.status?"#f59e0b":"vertragsfrei"===_e.status?"#6b7280":"#ef4444",fontWeight:"600",cursor:"pointer"},children:[e.jsx("option",{value:"ausstehend",children:"Ausstehend"}),e.jsx("option",{value:"aktiv",children:"Aktiv"}),e.jsx("option",{value:"gekuendigt",children:"Gekündigt"}),e.jsx("option",{value:"abgelaufen",children:"Abgelaufen"}),e.jsx("option",{value:"vertragsfrei",children:"Vertragsfrei"})]})]}),e.jsxs("div",{style:ne.detailItem,children:[e.jsx("span",{style:ne.detailLabel,children:"Vertrag"}),_e.unterschrift_digital?e.jsxs("span",{style:{color:"#10b981",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(z,{size:14})," Unterschrieben"]}):e.jsxs("span",{style:{color:"#f59e0b",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(u,{size:14})," Ausstehend"]})]})]}),e.jsxs("div",{style:ne.detailRow,children:[e.jsxs("div",{style:ne.detailItem,children:[e.jsx("span",{style:ne.detailLabel,children:"Gültig von"}),e.jsx("span",{style:ne.detailValue,children:hs(_e.gueltig_von)})]}),e.jsxs("div",{style:ne.detailItem,children:[e.jsx("span",{style:ne.detailLabel,children:"Gültig bis"}),e.jsx("span",{style:ne.detailValue,children:hs(_e.gueltig_bis)})]}),e.jsxs("div",{style:ne.detailItem,children:[e.jsx("span",{style:ne.detailLabel,children:"Jahresbeitrag"}),e.jsx("span",{style:ne.detailValue,children:us(_e.jahresbeitrag)})]})]}),"einzelperson"===_e.typ&&e.jsxs("div",{style:ne.detailSection,children:[e.jsx("h4",{style:ne.detailSectionTitle,children:"Kontaktdaten"}),e.jsxs("div",{style:ne.detailRow,children:[e.jsxs("div",{style:ne.detailItem,children:[e.jsx(S,{size:14}),e.jsx("span",{children:_e.person_email||"-"})]}),e.jsxs("div",{style:ne.detailItem,children:[e.jsx(C,{size:14}),e.jsx("span",{children:_e.person_telefon||"-"})]})]}),_e.person_strasse&&e.jsxs("div",{style:ne.detailItem,children:[e.jsx(w,{size:14}),e.jsxs("span",{children:[_e.person_strasse,", ",_e.person_plz," ",_e.person_ort]})]})]}),"vertragsfrei"!==_e.status&&e.jsxs("div",{style:ne.detailSection,children:[e.jsx("h4",{style:ne.detailSectionTitle,children:"Zahlungen"}),0===(null==(n=_e.zahlungen)?void 0:n.length)?e.jsx("p",{style:ne.hint,children:"Keine Zahlungen vorhanden"}):e.jsx("div",{style:ne.zahlungenList,children:null==(i=_e.zahlungen)?void 0:i.map(s=>e.jsxs("div",{style:ne.zahlungItem,children:[e.jsxs("div",{style:ne.zahlungMain,children:[e.jsx("span",{style:ne.zahlungNummer,children:s.rechnungsnummer}),e.jsx("span",{style:ne.zahlungBetrag,children:us(s.betrag_brutto)}),e.jsx("span",{style:{...ne.zahlungStatus,color:"bezahlt"===s.status?"#10b981":"offen"===s.status?"#f59e0b":"#ef4444"},children:"bezahlt"===s.status?"Bezahlt":"offen"===s.status?"Offen":s.status})]}),e.jsxs("div",{style:ne.zahlungMeta,children:[e.jsxs("span",{children:["Fällig: ",hs(s.faellig_am)]}),s.bezahlt_am&&e.jsxs("span",{children:["Bezahlt: ",hs(s.bezahlt_am)]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:["offen"===s.status&&e.jsxs("button",{style:ne.smallButton,onClick:()=>(async e=>{try{if(await Je.post(`/verbandsmitgliedschaften/zahlungen/${e}/bezahlt`),Ze(),_e){const e=await Je.get(`/verbandsmitgliedschaften/${_e.id}`);Se(e.data)}}catch(s){alert("Fehler beim Markieren als bezahlt")}})(s.id),children:[e.jsx(z,{size:14})," Als bezahlt markieren"]}),("offen"===s.status||"bezahlt"===s.status)&&e.jsxs("button",{style:{...ne.smallButton,backgroundColor:"#ef4444",color:"#fff"},onClick:()=>(async e=>{if(window.confirm("Möchten Sie diese Zahlung wirklich stornieren?"))try{if(await Je.post(`/verbandsmitgliedschaften/zahlungen/${e}/stornieren`,{grund:"Manuelle Stornierung"}),Ze(),_e){const e=await Je.get(`/verbandsmitgliedschaften/${_e.id}`);Se(e.data)}}catch(s){alert("Fehler beim Stornieren der Zahlung")}})(s.id),children:[e.jsx(k,{size:14})," Stornieren"]}),e.jsxs("button",{style:{...ne.smallButton,backgroundColor:"#3b82f6",color:"#fff"},onClick:()=>(async(e,s)=>{try{const n=(await a.get(`/verbandsmitgliedschaften/zahlungen/${e}/pdf`,{responseType:"blob"})).data,t=window.URL.createObjectURL(n),i=document.createElement("a");i.href=t,i.download=`Rechnung_${s||e}.pdf`,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(t)}catch(n){console.error("PDF Download Fehler:",n),alert("Fehler beim Download der Rechnung")}})(s.id,s.rechnungsnummer),children:[e.jsx(B,{size:14})," Rechnung PDF"]})]})]},s.id))})]}),_e.notizen&&e.jsxs("div",{style:ne.detailSection,children:[e.jsx("h4",{style:ne.detailSectionTitle,children:"Notizen"}),e.jsx("p",{style:ne.notizen,children:_e.notizen})]})]}),"vertrag"===Be&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:ne.vertragActions,children:[e.jsxs("button",{style:ne.actionButton,onClick:()=>(async e=>{try{window.open(`/api/verbandsmitgliedschaften/${e}/pdf`,"_blank")}catch(s){alert("Fehler beim Download")}})(_e.id),children:[e.jsx(B,{size:18}),"Vertrag als PDF"]}),!_e.unterschrift_digital&&e.jsxs("button",{style:{...ne.actionButton,...ne.actionButtonPrimary},onClick:()=>Ne(!0),children:[e.jsx(I,{size:18}),"Jetzt unterschreiben"]})]}),e.jsxs("div",{style:ne.vertragInfo,children:[e.jsx("h4",{style:ne.detailSectionTitle,children:"Vertragsstatus"}),e.jsxs("div",{style:ne.vertragStatusGrid,children:[e.jsxs("div",{style:ne.vertragStatusItem,children:[e.jsx(T,{size:20,color:_e.agb_akzeptiert?"#10b981":"#666"}),e.jsx("span",{children:"AGB akzeptiert"}),_e.agb_akzeptiert?e.jsx(z,{size:16,color:"#10b981"}):e.jsx(k,{size:16,color:"#666"})]}),e.jsxs("div",{style:ne.vertragStatusItem,children:[e.jsx(D,{size:20,color:_e.dsgvo_akzeptiert?"#10b981":"#666"}),e.jsx("span",{children:"DSGVO akzeptiert"}),_e.dsgvo_akzeptiert?e.jsx(z,{size:16,color:"#10b981"}):e.jsx(k,{size:16,color:"#666"})]}),e.jsxs("div",{style:ne.vertragStatusItem,children:[e.jsx(b,{size:20,color:_e.widerrufsrecht_akzeptiert?"#10b981":"#666"}),e.jsx("span",{children:"Widerrufsbelehrung"}),_e.widerrufsrecht_akzeptiert?e.jsx(z,{size:16,color:"#10b981"}):e.jsx(k,{size:16,color:"#666"})]}),e.jsxs("div",{style:ne.vertragStatusItem,children:[e.jsx(I,{size:20,color:_e.unterschrift_digital?"#10b981":"#666"}),e.jsx("span",{children:"Unterschrieben"}),_e.unterschrift_digital?e.jsx(z,{size:16,color:"#10b981"}):e.jsx(k,{size:16,color:"#666"})]})]}),_e.unterschrift_datum&&e.jsxs("p",{style:ne.hint,children:["Unterschrieben am: ",hs(_e.unterschrift_datum)]})]}),e.jsxs("div",{style:ne.detailSection,children:[e.jsx("h4",{style:ne.detailSectionTitle,children:"Rechtliche Dokumente"}),e.jsxs("div",{style:ne.dokumenteListe,children:[e.jsxs("button",{style:ne.dokumentButton,onClick:()=>ns("agb"),children:[e.jsx(T,{size:16})," AGB ansehen"]}),e.jsxs("button",{style:ne.dokumentButton,onClick:()=>ns("dsgvo"),children:[e.jsx(D,{size:16})," DSGVO ansehen"]}),e.jsxs("button",{style:ne.dokumentButton,onClick:()=>ns("widerrufsbelehrung"),children:[e.jsx(b,{size:16})," Widerrufsbelehrung"]}),e.jsxs("button",{style:ne.dokumentButton,onClick:()=>ns("beitragsordnung"),children:[e.jsx(h,{size:16})," Beitragsordnung"]})]})]})]}),"sepa"===Be&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:ne.vertragActions,children:e.jsxs("button",{style:{...ne.actionButton,...ne.actionButtonPrimary},onClick:()=>fe(!0),children:[e.jsx(d,{size:18}),"Neues SEPA-Mandat"]})}),0===Fe.length?e.jsxs("div",{style:ne.emptyState,children:[e.jsx(N,{size:48,color:"#666"}),e.jsx("p",{children:"Kein SEPA-Mandat vorhanden"}),e.jsx("p",{style:ne.hint,children:"Mit einem SEPA-Mandat können Beiträge automatisch eingezogen werden."})]}):e.jsx("div",{style:ne.sepaListe,children:Fe.map(s=>e.jsxs("div",{style:ne.sepaItem,children:[e.jsxs("div",{style:ne.sepaHeader,children:[e.jsx("span",{style:ne.sepaMandatsref,children:s.mandatsreferenz}),e.jsx("span",{style:{...ne.sepaStatus,background:"aktiv"===s.status?"rgba(16, 185, 129, 0.2)":"rgba(239, 68, 68, 0.2)",color:"aktiv"===s.status?"#10b981":"#ef4444"},children:"aktiv"===s.status?"Aktiv":"Inaktiv"})]}),e.jsxs("div",{style:ne.sepaDetails,children:[e.jsxs("div",{children:[e.jsx("strong",{children:"IBAN:"})," ",s.iban]}),s.bic&&e.jsxs("div",{children:[e.jsx("strong",{children:"BIC:"})," ",s.bic]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Kontoinhaber:"})," ",s.kontoinhaber]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Erstellt:"})," ",hs(s.erstellt_am)]})]}),s.unterschrift_digital&&e.jsxs("div",{style:ne.sepaSignedBadge,children:[e.jsx(z,{size:14})," Digital unterschrieben"]})]},s.id))})]}),"historie"===Be&&e.jsx(e.Fragment,{children:e.jsxs("div",{style:ne.detailSection,children:[e.jsx("h4",{style:ne.detailSectionTitle,children:"Vertragshistorie"}),e.jsx("div",{style:ne.historieListe,children:(null==(M=_e.historie)?void 0:M.length)>0?_e.historie.map((s,n)=>e.jsxs("div",{style:ne.historieItem,children:[e.jsx("div",{style:ne.historieDatum,children:new Date(s.created_at).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{style:ne.historieText,children:s.beschreibung})]},s.id||n)):e.jsx("p",{style:ne.hint,children:"Noch keine Historie-Einträge vorhanden."})})]})})]}),e.jsxs("div",{style:ne.modalFooter,children:[G&&"vertragsfrei"!==_e.status&&e.jsxs("button",{style:{...ne.dangerButton,backgroundColor:"#7f1d1d"},onClick:()=>(async e=>{var s,n;if(confirm('Mitgliedschaft auf "vertragsfrei" setzen?'))try{await Je.delete(`/verbandsmitgliedschaften/${e}/vertragsfrei`),Ze();const s=await Je.get(`/verbandsmitgliedschaften/${e}`);Se(s.data)}catch(t){alert((null==(n=null==(s=t.response)?void 0:s.data)?void 0:n.error)||"Fehler beim Löschen")}})(_e.id),children:[e.jsx(F,{size:16})," Vertragsfrei"]}),"gekuendigt"!==_e.status&&"vertragsfrei"!==_e.status&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{style:ne.dangerButton,onClick:()=>(async e=>{var s,n;if(confirm("Mitgliedschaft wirklich kündigen?"))try{await Je.delete(`/verbandsmitgliedschaften/${e}`),Ze(),be(!1)}catch(t){alert((null==(n=null==(s=t.response)?void 0:s.data)?void 0:n.error)||"Fehler beim Kündigen")}})(_e.id),children:[e.jsx(F,{size:16})," Kündigen"]}),e.jsxs("button",{style:ne.submitButton,onClick:()=>(async e=>{var s,n;if(confirm("Mitgliedschaft um ein Jahr verlängern?"))try{await Je.post(`/verbandsmitgliedschaften/${e}/verlaengern`),Ze(),be(!1)}catch(t){alert((null==(n=null==(s=t.response)?void 0:s.data)?void 0:n.error)||"Fehler bei Verlängerung")}})(_e.id),children:[e.jsx(l,{size:16})," Verlängern"]})]})]})]})}),ve&&_e&&e.jsx("div",{style:ne.modalOverlay,onClick:()=>fe(!1),children:e.jsxs("div",{style:{...ne.modal,maxWidth:"550px"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:ne.modalHeader,children:[e.jsxs("h2",{style:ne.modalTitle,children:[e.jsx(N,{size:24,color:"#ffd700"})," SEPA-Mandat erstellen"]}),e.jsx("button",{style:ne.closeButton,onClick:()=>fe(!1),children:e.jsx(k,{size:20})})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"IBAN *"}),e.jsx("input",{type:"text",value:Te.iban,onChange:e=>De({...Te,iban:e.target.value.toUpperCase()}),style:ne.input,placeholder:"DE89 3704 0044 0532 0130 00"})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"BIC (optional)"}),e.jsx("input",{type:"text",value:Te.bic,onChange:e=>De({...Te,bic:e.target.value.toUpperCase()}),style:ne.input,placeholder:"COBADEFFXXX"})]}),e.jsxs("div",{style:ne.formGroup,children:[e.jsx("label",{style:ne.label,children:"Kontoinhaber *"}),e.jsx("input",{type:"text",value:Te.kontoinhaber,onChange:e=>De({...Te,kontoinhaber:e.target.value}),style:ne.input,placeholder:"Max Mustermann"})]}),e.jsxs("div",{style:ne.signatureSection,children:[e.jsx("label",{style:ne.label,children:"Digitale Unterschrift"}),e.jsx("canvas",{ref:Ge,width:460,height:120,style:ne.signatureCanvas,onMouseDown:as,onMouseMove:is,onMouseUp:ls,onMouseLeave:ls,onTouchStart:as,onTouchMove:is,onTouchEnd:ls}),e.jsx("button",{type:"button",style:ne.clearSignatureButton,onClick:rs,children:"Unterschrift löschen"})]}),e.jsxs("div",{style:ne.sepaHinweis,children:[e.jsx(T,{size:16,color:"#ffd700"}),e.jsx("p",{children:"Mit dem SEPA-Lastschriftmandat ermächtigen Sie uns, den Jahresbeitrag von Ihrem Konto einzuziehen."})]})]}),e.jsxs("div",{style:ne.modalFooter,children:[e.jsx("button",{style:ne.cancelButton,onClick:()=>fe(!1),children:"Abbrechen"}),e.jsxs("button",{style:ne.submitButton,onClick:async()=>{var e,s;if(Te.iban&&Te.kontoinhaber)try{await Je.post(`/verbandsmitgliedschaften/${_e.id}/sepa`,{...Te,unterschrift_digital:Pe}),fe(!1),De({iban:"",bic:"",kontoinhaber:""}),$e(null),ss(_e.id),Ze(),alert("SEPA-Mandat erfolgreich angelegt")}catch(n){alert((null==(s=null==(e=n.response)?void 0:e.data)?void 0:s.error)||"Fehler beim Anlegen")}else alert("IBAN und Kontoinhaber sind erforderlich")},children:[e.jsx(z,{size:18})," Mandat erstellen"]})]})]})}),ye&&Re&&e.jsx("div",{style:ne.modalOverlay,onClick:()=>ke(!1),children:e.jsxs("div",{style:{...ne.modal,maxWidth:"700px"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:ne.modalHeader,children:[e.jsxs("h2",{style:ne.modalTitle,children:[e.jsx(D,{size:24,color:"#ffd700"})," ",Re.titel]}),e.jsx("button",{style:ne.closeButton,onClick:()=>ke(!1),children:e.jsx(k,{size:20})})]}),e.jsxs("div",{style:ne.dokumentContent,children:[e.jsxs("div",{style:ne.dokumentMeta,children:[e.jsxs("span",{children:["Version: ",Re.version]}),e.jsxs("span",{children:["Gültig ab: ",hs(Re.gueltig_ab)]})]}),e.jsx("div",{style:ne.dokumentText,dangerouslySetInnerHTML:{__html:null==(A=Re.inhalt)?void 0:A.replace(/\n/g,"<br/>")}})]}),e.jsx("div",{style:ne.modalFooter,children:e.jsx("button",{style:ne.submitButton,onClick:()=>ke(!1),children:"Schließen"})})]})}),ze&&_e&&e.jsx("div",{style:ne.modalOverlay,onClick:()=>Ne(!1),children:e.jsxs("div",{style:{...ne.modal,maxWidth:"600px"},onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{style:ne.modalHeader,children:[e.jsxs("h2",{style:ne.modalTitle,children:[e.jsx(I,{size:24,color:"#ffd700"})," Vertrag unterschreiben"]}),e.jsx("button",{style:ne.closeButton,onClick:()=>Ne(!1),children:e.jsx(k,{size:20})})]}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("p",{style:ne.signatureIntro,children:["Mit Ihrer Unterschrift bestätigen Sie den Mitgliedsvertrag für die TDA Verbandsmitgliedschaft zum Jahresbeitrag von ",us(_e.jahresbeitrag),"."]}),e.jsxs("div",{style:ne.akzeptanzSection,children:[e.jsxs("label",{style:ne.checkbox,children:[e.jsx("input",{type:"checkbox",checked:Oe.agb,onChange:e=>Ke({...Oe,agb:e.target.checked})}),e.jsxs("span",{children:["Ich akzeptiere die ",e.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),ns("agb")},children:"AGB"})," *"]})]}),e.jsxs("label",{style:ne.checkbox,children:[e.jsx("input",{type:"checkbox",checked:Oe.dsgvo,onChange:e=>Ke({...Oe,dsgvo:e.target.checked})}),e.jsxs("span",{children:["Ich akzeptiere die ",e.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),ns("dsgvo")},children:"Datenschutzerklärung"})," *"]})]}),e.jsxs("label",{style:ne.checkbox,children:[e.jsx("input",{type:"checkbox",checked:Oe.widerruf,onChange:e=>Ke({...Oe,widerruf:e.target.checked})}),e.jsxs("span",{children:["Ich habe die ",e.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),ns("widerrufsbelehrung")},children:"Widerrufsbelehrung"})," zur Kenntnis genommen *"]})]})]}),e.jsxs("div",{style:ne.signatureSection,children:[e.jsx("label",{style:ne.label,children:"Ihre Unterschrift *"}),e.jsx("canvas",{ref:Ge,width:520,height:150,style:ne.signatureCanvas,onMouseDown:as,onMouseMove:is,onMouseUp:ls,onMouseLeave:ls,onTouchStart:as,onTouchMove:is,onTouchEnd:ls}),e.jsx("button",{type:"button",style:ne.clearSignatureButton,onClick:rs,children:"Unterschrift löschen"})]})]}),e.jsxs("div",{style:ne.modalFooter,children:[e.jsx("button",{style:ne.cancelButton,onClick:()=>Ne(!1),children:"Abbrechen"}),e.jsxs("button",{style:ne.submitButton,onClick:async()=>{var e,s;if(Pe)if(Oe.agb&&Oe.dsgvo&&Oe.widerruf)try{await Je.post(`/verbandsmitgliedschaften/${_e.id}/unterschreiben`,{unterschrift_digital:Pe,agb_akzeptiert:Oe.agb,dsgvo_akzeptiert:Oe.dsgvo,widerrufsrecht_akzeptiert:Oe.widerruf}),Ne(!1),$e(null),Ke({agb:!1,dsgvo:!1,widerruf:!1}),Ze(),alert("Vertrag erfolgreich unterschrieben")}catch(n){alert((null==(s=null==(e=n.response)?void 0:e.data)?void 0:s.error)||"Fehler beim Unterschreiben")}else alert("Bitte akzeptieren Sie alle Bedingungen");else alert("Bitte unterschreiben Sie im Unterschriftsfeld")},children:[e.jsx(I,{size:18})," Verbindlich unterschreiben"]})]})]})})]})},ne={container:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},loading:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",padding:"4rem",color:"#888"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},title:{display:"flex",alignItems:"center",gap:"12px",color:"#fff",margin:0,fontSize:"1.8rem"},subtitle:{color:"#888",margin:"4px 0 0 40px",fontSize:"0.9rem"},primaryButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"linear-gradient(135deg, #ffd700, #ffaa00)",border:"none",borderRadius:"10px",color:"#000",fontWeight:"600",cursor:"pointer",transition:"transform 0.2s"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},statCard:{display:"flex",alignItems:"center",gap:"16px",padding:"1.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},statValue:{fontSize:"1.5rem",fontWeight:"700",color:"#fff"},statLabel:{fontSize:"0.85rem",color:"#888"},tabs:{display:"flex",gap:"8px",marginBottom:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",paddingBottom:"8px"},tab:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"transparent",border:"none",borderRadius:"8px",color:"#888",cursor:"pointer",transition:"all 0.2s"},tabActive:{background:"rgba(255, 215, 0, 0.15)",color:"#ffd700"},filterBar:{display:"flex",gap:"12px",marginBottom:"1.5rem",flexWrap:"wrap"},searchBox:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",flex:"1",minWidth:"200px"},searchInput:{background:"transparent",border:"none",outline:"none",color:"#fff",width:"100%",fontSize:"0.9rem"},select:{padding:"10px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",cursor:"pointer"},iconButton:{padding:"10px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#888",cursor:"pointer"},list:{display:"flex",flexDirection:"column",gap:"8px"},listItem:{display:"flex",alignItems:"center",gap:"16px",padding:"16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},listItemIcon:{width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.05)",borderRadius:"10px"},listItemContent:{flex:1},listItemHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},listItemName:{color:"#fff",fontWeight:"600",fontSize:"1rem"},listItemMeta:{display:"flex",gap:"16px",color:"#888",fontSize:"0.8rem"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",padding:"4rem",color:"#666"},vorteileContainer:{marginTop:"1rem"},sectionTitle:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.1rem"},vorteileGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},vorteilCard:{padding:"1.5rem",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px"},vorteilHeader:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},vorteilTitel:{color:"#fff",fontWeight:"600"},vorteilBeschreibung:{color:"#aaa",fontSize:"0.85rem",marginBottom:"12px"},vorteilMeta:{display:"flex",gap:"8px",flexWrap:"wrap"},vorteilRabatt:{padding:"4px 10px",background:"rgba(255, 215, 0, 0.2)",color:"#ffd700",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600"},vorteilKategorie:{padding:"4px 10px",background:"rgba(255, 255, 255, 0.1)",color:"#888",borderRadius:"6px",fontSize:"0.8rem",textTransform:"capitalize"},vorteilGilt:{padding:"4px 10px",borderRadius:"6px",fontSize:"0.8rem",color:"#fff"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},modal:{background:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"550px",maxHeight:"90vh",overflow:"auto",border:"1px solid rgba(255, 215, 0, 0.2)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},modalTitle:{display:"flex",alignItems:"center",gap:"10px",color:"#fff",margin:0,fontSize:"1.2rem"},closeButton:{background:"transparent",border:"none",color:"#888",cursor:"pointer",padding:"8px"},typSelector:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"1.5rem"},typButton:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"20px",background:"rgba(255, 255, 255, 0.05)",border:"2px solid transparent",borderRadius:"12px",color:"#888",cursor:"pointer",transition:"all 0.2s"},typButtonActive:{borderColor:"#3b82f6",background:"rgba(59, 130, 246, 0.15)",color:"#3b82f6"},typButtonActiveGreen:{borderColor:"#10b981",background:"rgba(16, 185, 129, 0.15)",color:"#10b981"},typPrice:{fontSize:"0.85rem",opacity:.7},formGroup:{padding:"0 1.5rem",marginBottom:"1rem"},formRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",padding:"0 1.5rem",marginBottom:"1rem"},label:{display:"block",color:"#888",fontSize:"0.85rem",marginBottom:"6px"},input:{width:"100%",padding:"10px 12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem",outline:"none"},hint:{color:"#666",fontSize:"0.8rem",marginTop:"6px"},modalFooter:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"1.5rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},cancelButton:{padding:"10px 20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"#888",cursor:"pointer"},submitButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"linear-gradient(135deg, #ffd700, #ffaa00)",border:"none",borderRadius:"8px",color:"#000",fontWeight:"600",cursor:"pointer"},dangerButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",color:"#ef4444",cursor:"pointer"},detailContent:{padding:"1.5rem"},detailRow:{display:"flex",gap:"24px",marginBottom:"16px",flexWrap:"wrap"},detailItem:{display:"flex",flexDirection:"column",gap:"4px"},detailLabel:{color:"#666",fontSize:"0.75rem",textTransform:"uppercase"},detailValue:{color:"#fff",fontSize:"0.95rem"},detailSection:{marginTop:"20px",paddingTop:"16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},detailSectionTitle:{color:"#ffd700",fontSize:"0.9rem",marginBottom:"12px"},zahlungenList:{display:"flex",flexDirection:"column",gap:"10px"},zahlungItem:{padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px"},zahlungMain:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},zahlungNummer:{color:"#fff",fontWeight:"500"},zahlungBetrag:{color:"#ffd700",fontWeight:"600"},zahlungStatus:{fontWeight:"600",fontSize:"0.85rem"},zahlungMeta:{display:"flex",gap:"16px",color:"#666",fontSize:"0.8rem"},smallButton:{display:"flex",alignItems:"center",gap:"6px",marginTop:"8px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"6px",color:"#10b981",fontSize:"0.8rem",cursor:"pointer"},notizen:{color:"#aaa",fontSize:"0.9rem",whiteSpace:"pre-wrap"},detailTabs:{display:"flex",gap:"4px",padding:"0 1.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},detailTab:{display:"flex",alignItems:"center",gap:"6px",padding:"12px 16px",background:"transparent",border:"none",borderBottom:"2px solid transparent",color:"#888",cursor:"pointer",transition:"all 0.2s"},detailTabActive:{color:"#ffd700",borderBottomColor:"#ffd700"},vertragActions:{display:"flex",gap:"12px",marginBottom:"1.5rem",flexWrap:"wrap"},actionButton:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",color:"#fff",cursor:"pointer",transition:"all 0.2s"},actionButtonPrimary:{background:"linear-gradient(135deg, #ffd700, #ffaa00)",border:"none",color:"#000",fontWeight:"600"},vertragInfo:{marginBottom:"1.5rem"},vertragStatusGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginTop:"12px"},vertragStatusItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",color:"#fff",fontSize:"0.9rem"},dokumenteListe:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"12px"},dokumentButton:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",color:"#aaa",cursor:"pointer",transition:"all 0.2s"},sepaListe:{display:"flex",flexDirection:"column",gap:"12px"},sepaItem:{padding:"16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px"},sepaHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},sepaMandatsref:{color:"#fff",fontWeight:"600",fontFamily:"monospace"},sepaStatus:{padding:"4px 10px",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"600"},sepaDetails:{display:"flex",flexDirection:"column",gap:"6px",color:"#aaa",fontSize:"0.9rem"},sepaSignedBadge:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"12px",padding:"6px 12px",background:"rgba(16, 185, 129, 0.15)",color:"#10b981",borderRadius:"6px",fontSize:"0.85rem"},sepaHinweis:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"16px",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"10px",marginTop:"1.5rem"},historieListe:{display:"flex",flexDirection:"column",gap:"12px",marginTop:"16px"},historieItem:{display:"flex",alignItems:"center",gap:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",borderLeft:"3px solid #ffd700"},historieDatum:{color:"#888",fontSize:"0.8rem",minWidth:"100px"},historieText:{color:"#fff",fontSize:"0.9rem"},signatureSection:{marginTop:"1.5rem"},signatureCanvas:{width:"100%",background:"#fff",borderRadius:"8px",cursor:"crosshair",touchAction:"none"},clearSignatureButton:{marginTop:"8px",padding:"8px 16px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"#888",cursor:"pointer",fontSize:"0.85rem"},signatureIntro:{color:"#aaa",fontSize:"0.95rem",lineHeight:1.6,marginBottom:"1.5rem"},akzeptanzSection:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"1.5rem"},checkbox:{display:"flex",alignItems:"center",gap:"10px",color:"#fff",cursor:"pointer"},dokumentContent:{padding:"1.5rem",maxHeight:"60vh",overflow:"auto"},dokumentMeta:{display:"flex",gap:"20px",marginBottom:"1rem",color:"#888",fontSize:"0.85rem"},dokumentText:{color:"#ccc",fontSize:"0.9rem",lineHeight:1.7,whiteSpace:"pre-wrap"},einstellungenContainer:{marginTop:"1rem"},einstellungenTabs:{display:"flex",gap:"8px",marginBottom:"1.5rem",flexWrap:"wrap"},einstellungenTab:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#888",cursor:"pointer",transition:"all 0.2s"},einstellungenTabActive:{background:"rgba(255, 215, 0, 0.15)",borderColor:"rgba(255, 215, 0, 0.3)",color:"#ffd700"},einstellungenGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},einstellungItem:{position:"relative",padding:"1rem",background:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)"},einstellungLabel:{display:"block",color:"#fff",fontWeight:"500",marginBottom:"8px",fontSize:"0.95rem"},einstellungHint:{display:"block",color:"#666",fontSize:"0.8rem",fontWeight:"400",marginTop:"4px"},einstellungInput:{width:"100%",padding:"10px 14px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"8px",color:"#fff",fontSize:"0.95rem",outline:"none"},toggleLabel:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},toggleInput:{display:"none"},toggleSwitch:{position:"relative",width:"48px",height:"24px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",transition:"background 0.2s"},toggleText:{color:"#888",fontSize:"0.9rem"},changedBadge:{position:"absolute",top:"8px",right:"8px",padding:"2px 8px",background:"rgba(255, 215, 0, 0.2)",color:"#ffd700",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"600"},einstellungenFooter:{display:"flex",alignItems:"center",gap:"12px",marginTop:"2rem",padding:"1rem",background:"rgba(255, 215, 0, 0.1)",borderRadius:"12px",border:"1px solid rgba(255, 215, 0, 0.2)"},changesCount:{flex:1,color:"#ffd700",fontWeight:"500"}},te={BadgeCheck:O,Award:r,Medal:$,ScrollText:D,Package:E,FileText:b,BookOpen:P,Star:G,Tag:W},ae=()=>{var n;const{token:i,user:l}=t(),[r,o]=s.useState([]),[c,u]=s.useState([]),[x,p]=s.useState("alle"),[g,m]=s.useState(""),[v,y]=s.useState([]),[N,_]=s.useState(!1),[S,C]=s.useState(!1),[w,B]=s.useState(null),[I,D]=s.useState({}),[W,P]=s.useState(!1),[$,O]=s.useState(!1),[U,J]=s.useState(!0),[Z,q]=s.useState(null),[X,Y]=s.useState({vorname:(null==l?void 0:l.vorname)||"",nachname:(null==l?void 0:l.nachname)||"",email:(null==l?void 0:l.email)||"",strasse:"",plz:"",ort:"",land:"Deutschland",telefon:"",anmerkungen:"",zahlungsart:"rechnung"});s.useEffect(()=>{(async()=>{try{J(!0),q(null);const[e,s]=await Promise.all([a.get("/shop/kategorien"),a.get("/shop/produkte")]),n=[];e.data.forEach(e=>{e.parent_id||(n.push({id:e.slug,dbId:e.id,name:e.name,icon:te[e.icon]||E,color:e.farbe,isParent:!0}),e.children&&e.children.length>0&&e.children.forEach(s=>{n.push({id:s.slug,dbId:s.id,name:s.name,icon:te[s.icon]||E,color:s.farbe,parentId:e.id,parentSlug:e.slug})}))}),u(n);const t=s.data.map(e=>({id:e.id,kategorie:e.kategorie_slug,name:e.name,beschreibung:e.beschreibung,preis:parseFloat(e.preis),bild:e.bild_url,details:e.details||[],optionen:e.optionen||null,lieferzeit:e.lieferzeit,featured:1===e.featured}));o(t)}catch(e){console.error("Fehler beim Laden der Shop-Daten:",e),q("Shop-Daten konnten nicht geladen werden")}finally{J(!1)}})()},[]),s.useEffect(()=>{const e=localStorage.getItem("tda_shop_warenkorb");if(e)try{y(JSON.parse(e))}catch(s){console.error("Fehler beim Laden des Warenkorbs:",s)}},[]),s.useEffect(()=>{localStorage.setItem("tda_shop_warenkorb",JSON.stringify(v))},[v]);const Q=r.filter(e=>{const s="alle"===x||e.kategorie===x,n=""===g||e.name.toLowerCase().includes(g.toLowerCase())||e.beschreibung.toLowerCase().includes(g.toLowerCase());return s&&n}),ee=r.filter(e=>e.featured),se=(e,s={})=>{const n={id:`${e.id}-${Date.now()}`,produktId:e.id,name:e.name,preis:e.preis,menge:1,optionen:s,bild:e.bild};y(e=>[...e,n]),B(null),D({})},ne=(e,s)=>{s<1?ae(e):y(n=>n.map(n=>n.id===e?{...n,menge:s}:n))},ae=e=>{y(s=>s.filter(s=>s.id!==e))},ie=v.reduce((e,s)=>e+s.preis*s.menge,0),le=v.reduce((e,s)=>e+s.menge,0),re=ie>=50?0:4.95,de=ie+re,oe=async()=>{O(!0);try{const e={positionen:v.map(e=>({produkt_id:e.produktId,menge:e.menge,optionen:e.optionen})),lieferadresse:{vorname:X.vorname,nachname:X.nachname,strasse:X.strasse,plz:X.plz,ort:X.ort,land:X.land,telefon:X.telefon},rechnungsadresse:{vorname:X.vorname,nachname:X.nachname,email:X.email,strasse:X.strasse,plz:X.plz,ort:X.ort,land:X.land},anmerkungen:X.anmerkungen};await a.post("/shop/bestellungen",e,{headers:{Authorization:`Bearer ${i}`}}),P(!0),y([]),C(!1)}catch(e){console.error("Bestellfehler:",e),alert("Fehler bei der Bestellung. Bitte versuchen Sie es erneut.")}finally{O(!1)}},ce=({kategorie:s,size:n=20})=>{const t=c.find(e=>e.id===s);if(!t)return e.jsx(E,{size:n});const a=t.icon;return e.jsx(a,{size:n,style:{color:t.color}})},he=({produkt:s})=>{var n;return e.jsxs("div",{className:"shop-produkt-karte "+(s.featured?"featured":""),onClick:()=>B(s),children:[s.featured&&e.jsxs("div",{className:"featured-badge",children:[e.jsx(G,{size:12})," Beliebt"]}),e.jsx("div",{className:"produkt-bild",children:e.jsx(ce,{kategorie:s.kategorie,size:48})}),e.jsxs("div",{className:"produkt-info",children:[e.jsx("span",{className:"produkt-kategorie",children:null==(n=c.find(e=>e.id===s.kategorie))?void 0:n.name}),e.jsx("h3",{className:"produkt-name",children:s.name}),e.jsx("p",{className:"produkt-beschreibung",children:s.beschreibung}),e.jsxs("div",{className:"produkt-footer",children:[e.jsxs("span",{className:"produkt-preis",children:[s.preis.toFixed(2)," €"]}),e.jsx("button",{className:"btn-add-cart",onClick:e=>{e.stopPropagation(),s.optionen?B(s):se(s)},children:e.jsx(R,{size:16})})]})]})]})},ue=({produkt:s})=>{var n;return e.jsx("div",{className:"modal-overlay",onClick:()=>B(null),children:e.jsxs("div",{className:"modal-content produkt-detail-modal",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{className:"modal-close",onClick:()=>B(null),children:e.jsx(k,{size:24})}),e.jsxs("div",{className:"produkt-detail-grid",children:[e.jsx("div",{className:"produkt-detail-bild",children:e.jsx(ce,{kategorie:s.kategorie,size:120})}),e.jsxs("div",{className:"produkt-detail-info",children:[e.jsx("span",{className:"produkt-kategorie-badge",children:null==(n=c.find(e=>e.id===s.kategorie))?void 0:n.name}),e.jsx("h2",{children:s.name}),e.jsx("p",{className:"produkt-detail-beschreibung",children:s.beschreibung}),s.details&&e.jsx("ul",{className:"produkt-details-liste",children:s.details.map((s,n)=>e.jsxs("li",{children:[e.jsx(z,{size:14})," ",s]},n))}),s.optionen&&e.jsx("div",{className:"produkt-optionen",children:s.optionen.map((s,n)=>e.jsxs("div",{className:"option-gruppe",children:[e.jsx("label",{children:s.name}),e.jsxs("select",{value:I[s.name]||"",onChange:e=>D(n=>({...n,[s.name]:e.target.value})),children:[e.jsx("option",{value:"",children:"Bitte wählen..."}),s.werte.map((s,n)=>e.jsx("option",{value:s,children:s},n))]})]},n))}),e.jsxs("div",{className:"produkt-detail-footer",children:[e.jsx("div",{className:"produkt-meta",children:e.jsxs("span",{className:"lieferzeit",children:[e.jsx(V,{size:14})," ",s.lieferzeit]})}),e.jsxs("div",{className:"produkt-kaufen",children:[e.jsxs("span",{className:"preis-gross",children:[s.preis.toFixed(2)," €"]}),e.jsxs("button",{className:"btn-kaufen",onClick:()=>{if(s.optionen){if(!s.optionen.every(e=>I[e.name]))return void alert("Bitte alle Optionen auswählen")}se(s,I)},children:[e.jsx(R,{size:18})," In den Warenkorb"]})]})]})]})]})]})})},xe=()=>e.jsxs("div",{className:"warenkorb-sidebar "+(N?"open":""),children:[e.jsxs("div",{className:"warenkorb-header",children:[e.jsxs("h3",{children:[e.jsx(R,{size:20})," Warenkorb"]}),e.jsx("button",{className:"btn-close",onClick:()=>_(!1),children:e.jsx(k,{size:20})})]}),0===v.length?e.jsxs("div",{className:"warenkorb-leer",children:[e.jsx(R,{size:48}),e.jsx("p",{children:"Ihr Warenkorb ist leer"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"warenkorb-items",children:v.map(s=>e.jsxs("div",{className:"warenkorb-item",children:[e.jsxs("div",{className:"item-info",children:[e.jsx("span",{className:"item-name",children:s.name}),Object.keys(s.optionen).length>0&&e.jsx("span",{className:"item-optionen",children:Object.entries(s.optionen).map(([e,s])=>`${e}: ${s}`).join(", ")}),e.jsxs("span",{className:"item-preis",children:[s.preis.toFixed(2)," €"]})]}),e.jsxs("div",{className:"item-actions",children:[e.jsxs("div",{className:"menge-control",children:[e.jsx("button",{onClick:()=>ne(s.id,s.menge-1),children:e.jsx(K,{size:14})}),e.jsx("span",{children:s.menge}),e.jsx("button",{onClick:()=>ne(s.id,s.menge+1),children:e.jsx(d,{size:14})})]}),e.jsx("button",{className:"btn-remove",onClick:()=>ae(s.id),children:e.jsx(F,{size:16})})]})]},s.id))}),e.jsxs("div",{className:"warenkorb-summe",children:[e.jsxs("div",{className:"summe-zeile",children:[e.jsx("span",{children:"Zwischensumme"}),e.jsxs("span",{children:[ie.toFixed(2)," €"]})]}),e.jsxs("div",{className:"summe-zeile",children:[e.jsx("span",{children:"Versand"}),e.jsx("span",{children:0===re?"Kostenlos":`${re.toFixed(2)} €`})]}),ie<50&&e.jsxs("div",{className:"versand-hinweis",children:[e.jsx(V,{size:14})," Noch ",(50-ie).toFixed(2)," € bis zum kostenlosen Versand"]}),e.jsxs("div",{className:"summe-zeile total",children:[e.jsx("span",{children:"Gesamt"}),e.jsxs("span",{children:[de.toFixed(2)," €"]})]})]}),e.jsx("div",{className:"warenkorb-actions",children:e.jsxs("button",{className:"btn-checkout",onClick:()=>{_(!1),C(!0)},children:["Zur Kasse ",e.jsx(H,{size:18})]})})]})]}),pe=()=>e.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:e.jsxs("div",{className:"modal-content checkout-modal",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{className:"modal-close",onClick:()=>C(!1),children:e.jsx(k,{size:24})}),e.jsxs("h2",{children:[e.jsx(j,{size:24})," Bestellung abschließen"]}),e.jsxs("div",{className:"checkout-grid",children:[e.jsxs("div",{className:"checkout-section",children:[e.jsxs("h3",{children:[e.jsx(V,{size:18})," Lieferadresse"]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Vorname *"}),e.jsx("input",{type:"text",value:X.vorname,onChange:e=>Y(s=>({...s,vorname:e.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nachname *"}),e.jsx("input",{type:"text",value:X.nachname,onChange:e=>Y(s=>({...s,nachname:e.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group full",children:[e.jsx("label",{children:"E-Mail *"}),e.jsx("input",{type:"email",value:X.email,onChange:e=>Y(s=>({...s,email:e.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group full",children:[e.jsx("label",{children:"Straße & Hausnummer *"}),e.jsx("input",{type:"text",value:X.strasse,onChange:e=>Y(s=>({...s,strasse:e.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PLZ *"}),e.jsx("input",{type:"text",value:X.plz,onChange:e=>Y(s=>({...s,plz:e.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ort *"}),e.jsx("input",{type:"text",value:X.ort,onChange:e=>Y(s=>({...s,ort:e.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Land"}),e.jsxs("select",{value:X.land,onChange:e=>Y(s=>({...s,land:e.target.value})),children:[e.jsx("option",{value:"Deutschland",children:"Deutschland"}),e.jsx("option",{value:"Österreich",children:"Österreich"}),e.jsx("option",{value:"Schweiz",children:"Schweiz"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Telefon"}),e.jsx("input",{type:"tel",value:X.telefon,onChange:e=>Y(s=>({...s,telefon:e.target.value}))})]})]})]}),e.jsxs("div",{className:"checkout-section",children:[e.jsxs("h3",{children:[e.jsx(j,{size:18})," Zahlungsart"]}),e.jsxs("div",{className:"zahlungsarten",children:[e.jsxs("label",{className:"zahlungsart "+("rechnung"===X.zahlungsart?"selected":""),children:[e.jsx("input",{type:"radio",name:"zahlungsart",value:"rechnung",checked:"rechnung"===X.zahlungsart,onChange:e=>Y(s=>({...s,zahlungsart:e.target.value}))}),e.jsx(b,{size:20}),e.jsxs("div",{children:[e.jsx("span",{className:"za-name",children:"Rechnung"}),e.jsx("span",{className:"za-info",children:"Zahlung nach Erhalt der Ware"})]})]}),e.jsxs("label",{className:"zahlungsart "+("vorkasse"===X.zahlungsart?"selected":""),children:[e.jsx("input",{type:"radio",name:"zahlungsart",value:"vorkasse",checked:"vorkasse"===X.zahlungsart,onChange:e=>Y(s=>({...s,zahlungsart:e.target.value}))}),e.jsx(h,{size:20}),e.jsxs("div",{children:[e.jsx("span",{className:"za-name",children:"Vorkasse"}),e.jsx("span",{className:"za-info",children:"Überweisung vor Versand"})]})]})]})]}),e.jsxs("div",{className:"checkout-section bestellung-uebersicht",children:[e.jsxs("h3",{children:[e.jsx(E,{size:18})," Ihre Bestellung"]}),e.jsx("div",{className:"bestellung-items",children:v.map(s=>e.jsxs("div",{className:"bestellung-item",children:[e.jsxs("span",{className:"item-menge",children:[s.menge,"x"]}),e.jsx("span",{className:"item-name",children:s.name}),e.jsxs("span",{className:"item-preis",children:[(s.preis*s.menge).toFixed(2)," €"]})]},s.id))}),e.jsxs("div",{className:"bestellung-summen",children:[e.jsxs("div",{className:"summe-zeile",children:[e.jsx("span",{children:"Zwischensumme"}),e.jsxs("span",{children:[ie.toFixed(2)," €"]})]}),e.jsxs("div",{className:"summe-zeile",children:[e.jsx("span",{children:"Versand"}),e.jsx("span",{children:0===re?"Kostenlos":`${re.toFixed(2)} €`})]}),e.jsxs("div",{className:"summe-zeile total",children:[e.jsx("span",{children:"Gesamtsumme"}),e.jsxs("span",{children:[de.toFixed(2)," €"]})]})]})]}),e.jsxs("div",{className:"checkout-section full",children:[e.jsx("label",{children:"Anmerkungen zur Bestellung"}),e.jsx("textarea",{value:X.anmerkungen,onChange:e=>Y(s=>({...s,anmerkungen:e.target.value})),placeholder:"Besondere Wünsche oder Hinweise...",rows:3})]})]}),e.jsxs("div",{className:"checkout-footer",children:[e.jsxs("p",{className:"agb-hinweis",children:[e.jsx(T,{size:14})," Mit der Bestellung akzeptieren Sie unsere AGB und Datenschutzerklärung."]}),e.jsx("button",{className:"btn-bestellen",onClick:oe,disabled:$||!X.vorname||!X.nachname||!X.email||!X.strasse||!X.plz||!X.ort,children:$?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:18,className:"spin"})," Wird verarbeitet..."]}):e.jsxs(e.Fragment,{children:["Kostenpflichtig bestellen (",de.toFixed(2)," €)"]})})]})]})}),ge=()=>e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content erfolg-modal",children:[e.jsx("div",{className:"erfolg-icon",children:e.jsx(z,{size:48})}),e.jsx("h2",{children:"Bestellung erfolgreich!"}),e.jsx("p",{children:"Vielen Dank für Ihre Bestellung. Sie erhalten in Kürze eine Bestätigung per E-Mail."}),e.jsxs("div",{className:"erfolg-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx(L,{size:18}),e.jsx("span",{children:"Bearbeitung: 1-2 Werktage"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(V,{size:18}),e.jsx("span",{children:"Lieferung: 3-7 Werktage"})]})]}),e.jsx("button",{className:"btn-primary",onClick:()=>P(!1),children:"Weiter einkaufen"})]})});return U?e.jsx("div",{className:"verband-shop",children:e.jsxs("div",{className:"shop-loading",children:[e.jsx(M,{size:48,className:"spin"}),e.jsx("p",{children:"Shop wird geladen..."})]})}):Z?e.jsx("div",{className:"verband-shop",children:e.jsxs("div",{className:"shop-error",children:[e.jsx(A,{size:48}),e.jsx("p",{children:Z}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Erneut versuchen"})]})}):e.jsxs("div",{className:"verband-shop",children:[e.jsxs("div",{className:"shop-header",children:[e.jsxs("div",{className:"shop-search",children:[e.jsx(f,{size:18}),e.jsx("input",{type:"text",placeholder:"Produkte suchen...",value:g,onChange:e=>m(e.target.value)})]}),e.jsxs("button",{className:"btn-warenkorb",onClick:()=>_(!0),children:[e.jsx(R,{size:20}),le>0&&e.jsx("span",{className:"warenkorb-badge",children:le})]})]}),e.jsxs("div",{className:"shop-kategorien",children:[e.jsxs("button",{className:"kategorie-btn "+("alle"===x?"active":""),onClick:()=>p("alle"),children:[e.jsx(E,{size:18}),e.jsx("span",{children:"Alle Produkte"})]}),c.map(s=>e.jsxs("button",{className:"kategorie-btn "+(x===s.id?"active":""),onClick:()=>p(s.id),style:{"--kat-color":s.color},children:[e.jsx(s.icon,{size:18}),e.jsx("span",{children:s.name})]},s.id))]}),"alle"===x&&""===g&&e.jsxs("div",{className:"shop-featured",children:[e.jsxs("h2",{children:[e.jsx(G,{size:20})," Beliebte Produkte"]}),e.jsx("div",{className:"featured-grid",children:ee.map(s=>e.jsx(he,{produkt:s},s.id))})]}),e.jsxs("div",{className:"shop-produkte",children:["alle"!==x&&e.jsxs("h2",{children:[e.jsx(ce,{kategorie:x,size:24}),null==(n=c.find(e=>e.id===x))?void 0:n.name]}),g&&e.jsxs("p",{className:"search-results",children:[Q.length,' Ergebnis(se) für "',g,'"']}),e.jsx("div",{className:"produkte-grid",children:Q.map(s=>e.jsx(he,{produkt:s},s.id))}),0===Q.length&&e.jsxs("div",{className:"keine-produkte",children:[e.jsx(E,{size:48}),e.jsx("p",{children:"Keine Produkte gefunden"})]})]}),e.jsxs("div",{className:"shop-versand-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx(V,{size:24}),e.jsxs("div",{children:[e.jsx("strong",{children:"Kostenloser Versand"}),e.jsx("span",{children:"ab 50 € Bestellwert"})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(T,{size:24}),e.jsxs("div",{children:[e.jsx("strong",{children:"Sichere Zahlung"}),e.jsx("span",{children:"Rechnung oder Vorkasse"})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(L,{size:24}),e.jsxs("div",{children:[e.jsx("strong",{children:"Schnelle Lieferung"}),e.jsx("span",{children:"3-7 Werktage"})]})]})]}),w&&e.jsx(ue,{produkt:w}),e.jsx(xe,{}),S&&e.jsx(pe,{}),W&&e.jsx(ge,{}),N&&e.jsx("div",{className:"sidebar-overlay",onClick:()=>_(!1)})]})},ie=()=>{const{token:r}=t();n();const[d,c]=s.useState(!0),[x,p]=s.useState(""),[g,v]=s.useState("overview"),[f,y]=s.useState({mitgliedsschulen:0,einzelmitglieder:0,aktiveMitgliedschaften:0,pendingMitgliedschaften:0,turniere:0,events:0,jahresbeitraege:0,offeneBeitraege:0}),[k,z]=s.useState([]),[N,_]=s.useState([]),[S,C]=s.useState([]);s.useEffect(()=>{w()},[]);const w=async()=>{c(!0),p("");try{const[e,s,n]=await Promise.all([a.get(`${i.apiBaseUrl}/verbandsmitgliedschaften/stats`,{headers:{Authorization:`Bearer ${r}`}}).catch(()=>({data:{success:!1}})),a.get(`${i.apiBaseUrl}/verbandsmitgliedschaften?limit=5`,{headers:{Authorization:`Bearer ${r}`}}).catch(()=>({data:{success:!1,mitgliedschaften:[]}})),a.get(`${i.apiBaseUrl}/events?public=true&limit=5`,{headers:{Authorization:`Bearer ${r}`}}).catch(()=>({data:{success:!1,events:[]}}))]);if(e.data.success){const s=e.data.stats||{};y({mitgliedsschulen:s.dojos||0,einzelmitglieder:s.einzelpersonen||0,aktiveMitgliedschaften:s.aktiv||0,pendingMitgliedschaften:s.pending||0,turniere:s.turniere||0,events:s.events||0,jahresbeitraege:s.jahresbeitraege||0,offeneBeitraege:s.offene_beitraege||0})}s.data.success&&z(s.data.mitgliedschaften||[]),n.data.success&&_(n.data.events||[])}catch(e){console.error("Fehler beim Laden der Verbandsdaten:",e),p("Fehler beim Laden der Verbandsdaten")}finally{c(!1)}},B=[{id:"overview",label:"Übersicht",icon:J},{id:"mitglieder",label:"Mitglieder",icon:Z},{id:"shop",label:"Shop",icon:R},{id:"turniere",label:"Turniere",icon:q},{id:"events",label:"Events",icon:m},{id:"finanzen",label:"Finanzen",icon:h}],I=({status:s})=>{const n={aktiv:{color:"#22c55e",bg:"rgba(34, 197, 94, 0.2)",label:"Aktiv"},pending:{color:"#f59e0b",bg:"rgba(245, 158, 11, 0.2)",label:"Ausstehend"},inaktiv:{color:"#6b7280",bg:"rgba(107, 114, 128, 0.2)",label:"Inaktiv"},gekuendigt:{color:"#ef4444",bg:"rgba(239, 68, 68, 0.2)",label:"Gekündigt"}},t=n[s]||n.pending;return e.jsx("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:600,color:t.color,background:t.bg},children:t.label})},T=()=>e.jsxs("div",{className:"verband-overview",children:[e.jsxs("div",{className:"verband-stats-grid",children:[e.jsxs("div",{className:"verband-stat-card primary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(o,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:f.mitgliedsschulen}),e.jsx("span",{className:"stat-label",children:"Mitgliedsschulen"})]}),e.jsx("div",{className:"stat-badge",children:e.jsx("span",{className:"badge-text",children:"99€/Jahr"})})]}),e.jsxs("div",{className:"verband-stat-card secondary",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(Z,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:f.einzelmitglieder}),e.jsx("span",{className:"stat-label",children:"Einzelmitglieder"})]}),e.jsx("div",{className:"stat-badge",children:e.jsx("span",{className:"badge-text",children:"49€/Jahr"})})]}),e.jsxs("div",{className:"verband-stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(X,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:f.aktiveMitgliedschaften}),e.jsx("span",{className:"stat-label",children:"Aktive Mitgliedschaften"})]})]}),e.jsxs("div",{className:"verband-stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(L,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:f.pendingMitgliedschaften}),e.jsx("span",{className:"stat-label",children:"Ausstehend"})]})]}),e.jsxs("div",{className:"verband-stat-card gold",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:f.turniere}),e.jsx("span",{className:"stat-label",children:"Turniere"})]})]}),e.jsxs("div",{className:"verband-stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(h,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("span",{className:"stat-value",children:[f.jahresbeitraege.toLocaleString("de-DE"),"€"]}),e.jsx("span",{className:"stat-label",children:"Jahresbeiträge"})]})]})]}),e.jsxs("div",{className:"verband-content-grid",children:[e.jsxs("div",{className:"verband-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h3",{children:[e.jsx(Z,{size:18})," Neueste Mitgliedschaften"]}),e.jsxs("button",{className:"btn-link",onClick:()=>v("mitglieder"),children:["Alle anzeigen ",e.jsx(H,{size:14})]})]}),e.jsx("div",{className:"panel-content",children:k.length>0?e.jsx("div",{className:"mitgliedschaft-list",children:k.map(s=>e.jsxs("div",{className:"mitgliedschaft-item",children:[e.jsx("div",{className:"mitgliedschaft-icon",children:"dojo"===s.typ?e.jsx(o,{size:20}):e.jsx(Z,{size:20})}),e.jsxs("div",{className:"mitgliedschaft-info",children:[e.jsx("span",{className:"mitgliedschaft-name",children:"dojo"===s.typ?s.dojo_name:`${s.person_vorname} ${s.person_nachname}`}),e.jsxs("span",{className:"mitgliedschaft-meta",children:[s.mitgliedsnummer," • seit ",new Date(s.beitritt_datum).toLocaleDateString("de-DE")]})]}),e.jsx(I,{status:s.status})]},s.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx(Z,{size:32}),e.jsx("p",{children:"Keine Mitgliedschaften vorhanden"})]})})]}),e.jsxs("div",{className:"verband-panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h3",{children:[e.jsx(m,{size:18})," Kommende Events"]}),e.jsxs("button",{className:"btn-link",onClick:()=>v("events"),children:["Alle anzeigen ",e.jsx(H,{size:14})]})]}),e.jsx("div",{className:"panel-content",children:N.length>0?e.jsx("div",{className:"event-list",children:N.map(s=>e.jsxs("div",{className:"event-item",children:[e.jsxs("div",{className:"event-date",children:[e.jsx("span",{className:"date-day",children:new Date(s.datum).getDate()}),e.jsx("span",{className:"date-month",children:new Date(s.datum).toLocaleDateString("de-DE",{month:"short"})})]}),e.jsxs("div",{className:"event-info",children:[e.jsx("span",{className:"event-title",children:s.titel}),e.jsx("span",{className:"event-location",children:s.ort||"Online"})]})]},s.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx(m,{size:32}),e.jsx("p",{children:"Keine kommenden Events"})]})})]})]}),e.jsxs("div",{className:"verband-quick-actions",children:[e.jsx("h3",{children:"Schnellzugriff"}),e.jsxs("div",{className:"quick-action-grid",children:[e.jsxs("button",{className:"quick-action-btn",onClick:()=>v("mitglieder"),children:[e.jsx(Y,{size:24}),e.jsx("span",{children:"Neues Mitglied"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>window.open("https://events.tda-intl.org","_blank"),children:[e.jsx(q,{size:24}),e.jsx("span",{children:"Turnier erstellen"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>v("finanzen"),children:[e.jsx(b,{size:24}),e.jsx("span",{children:"Beiträge verwalten"})]}),e.jsxs("button",{className:"quick-action-btn",onClick:()=>window.open("https://www.tda-intl.com","_blank"),children:[e.jsx(U,{size:24}),e.jsx("span",{children:"Verbandswebsite"})]})]})]})]}),D=()=>e.jsxs("div",{className:"verband-turniere",children:[e.jsxs("div",{className:"info-banner",children:[e.jsx(q,{size:24}),e.jsxs("div",{children:[e.jsx("h4",{children:"Turnierverwaltung"}),e.jsx("p",{children:"Die Turniere werden über die separate Turniersoftware verwaltet."}),e.jsxs("a",{href:"https://events.tda-intl.org",target:"_blank",rel:"noopener noreferrer",className:"btn-primary",children:["Zur Turniersoftware ",e.jsx(H,{size:16})]})]})]}),e.jsx("div",{className:"verband-stats-grid",style:{marginTop:"2rem"},children:e.jsxs("div",{className:"verband-stat-card gold",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(q,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("span",{className:"stat-value",children:f.turniere}),e.jsx("span",{className:"stat-label",children:"Turniere gesamt"})]})]})})]}),F=()=>e.jsxs("div",{className:"verband-events",children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("h3",{children:[e.jsx(m,{size:20})," Verbands-Events"]}),e.jsxs("button",{className:"btn-secondary",children:[e.jsx(Q,{size:16})," Event erstellen"]})]}),N.length>0?e.jsx("div",{className:"events-list-full",children:N.map(s=>e.jsxs("div",{className:"event-card",children:[e.jsxs("div",{className:"event-card-date",children:[e.jsx("span",{className:"date-day",children:new Date(s.datum).getDate()}),e.jsx("span",{className:"date-month",children:new Date(s.datum).toLocaleDateString("de-DE",{month:"long"})}),e.jsx("span",{className:"date-year",children:new Date(s.datum).getFullYear()})]}),e.jsxs("div",{className:"event-card-content",children:[e.jsx("h4",{children:s.titel}),e.jsx("p",{children:s.beschreibung}),e.jsx("div",{className:"event-meta",children:e.jsxs("span",{children:[e.jsx(m,{size:14})," ",s.ort||"Online"]})})]})]},s.id))}):e.jsxs("div",{className:"empty-state large",children:[e.jsx(m,{size:48}),e.jsx("h4",{children:"Keine Events geplant"}),e.jsx("p",{children:"Erstellen Sie neue Events für den Verband."})]})]}),A=()=>e.jsxs("div",{className:"verband-finanzen",children:[e.jsxs("div",{className:"verband-stats-grid",children:[e.jsxs("div",{className:"verband-stat-card success",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(h,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("span",{className:"stat-value",children:[f.jahresbeitraege.toLocaleString("de-DE"),"€"]}),e.jsx("span",{className:"stat-label",children:"Eingegangene Beiträge"})]})]}),e.jsxs("div",{className:"verband-stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(u,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("span",{className:"stat-value",children:[f.offeneBeitraege.toLocaleString("de-DE"),"€"]}),e.jsx("span",{className:"stat-label",children:"Offene Beiträge"})]})]}),e.jsxs("div",{className:"verband-stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(j,{size:24})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("span",{className:"stat-value",children:[99*f.mitgliedsschulen+49*f.einzelmitglieder,"€"]}),e.jsx("span",{className:"stat-label",children:"Erwartete Jahresbeiträge"})]})]})]}),e.jsxs("div",{className:"info-banner",style:{marginTop:"2rem"},children:[e.jsx(ee,{size:24}),e.jsxs("div",{children:[e.jsx("h4",{children:"Beitragsstruktur"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mitgliedsschulen (Dojos):"})," 99€ pro Jahr",e.jsx("br",{}),e.jsx("strong",{children:"Einzelmitglieder:"})," 49€ pro Jahr"]})]})]})]});return d?e.jsx("div",{className:"verband-dashboard loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx(M,{size:40,className:"spin"}),e.jsx("p",{children:"Lade Verbandsdaten..."})]})}):e.jsxs("div",{className:"verband-dashboard",children:[e.jsxs("div",{className:"verband-subheader",children:[e.jsxs("div",{className:"subheader-left",children:[e.jsx(U,{size:20,className:"subheader-icon"}),e.jsx("span",{children:"Verbandsverwaltung"})]}),e.jsxs("button",{className:"btn-refresh-small",onClick:w,children:[e.jsx(l,{size:14})," Aktualisieren"]})]}),x&&e.jsxs("div",{className:"error-banner",children:[e.jsx(u,{size:20}),e.jsx("span",{children:x})]}),e.jsx("div",{className:"verband-tabs",children:B.map(s=>e.jsxs("button",{className:"verband-tab "+(g===s.id?"active":""),onClick:()=>v(s.id),children:[e.jsx(s.icon,{size:18}),e.jsx("span",{children:s.label})]},s.id))}),e.jsxs("div",{className:"verband-tab-content",children:["overview"===g&&e.jsx(T,{}),"mitglieder"===g&&e.jsx(se,{}),"shop"===g&&e.jsx(ae,{}),"turniere"===g&&e.jsx(D,{}),"events"===g&&e.jsx(F,{}),"finanzen"===g&&e.jsx(A,{})]})]})};export{ie as default};
