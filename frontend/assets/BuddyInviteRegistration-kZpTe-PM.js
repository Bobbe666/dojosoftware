import{j as e}from"./animation-1wuIdCBS.js";import{g as i,u as n,r as s}from"./vendor-router-BhMXg4Z-.js";import r from"./PublicRegistration-B0iiDVXm.js";import"./vendor-react-DtuzQOD1.js";import"./index-BJCk5MxH.js";import"./query-Bs1dTGah.js";import"./icons-C6KFH58b.js";const t=()=>{var t,d;const{token:a}=i(),l=n(),[c,o]=s.useState(null),[h,u]=s.useState(!0),[m,j]=s.useState(""),[x,g]=s.useState(!1);s.useEffect(()=>{a?(async()=>{try{u(!0),j("");const e=await fetch(`/buddy/invitation/${a}`),i=await e.json();if(!e.ok)return void("INVITATION_NOT_FOUND"===i.code?j("Diese Einladung ist nicht mehr gÃ¼ltig oder bereits abgelaufen."):j(i.error||"Fehler beim Laden der Einladung"));o(i.invitation)}catch(e){console.error("Fehler beim Laden der Einladung:",e),j("Verbindungsfehler. Bitte versuche es spÃ¤ter erneut.")}finally{u(!1)}})():(j("UngÃ¼ltiger Einladungslink"),u(!1))},[a]);const p=async e=>{try{if(!(await fetch(`/buddy/invitation/${a}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Fehler bei der Buddy-Registrierung");l("/registration-success?source=buddy",{replace:!0})}catch(i){console.error("Fehler bei Buddy-Registrierung:",i),j("Fehler bei der Registrierung. Bitte versuche es erneut."),g(!1)}};return h?e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner-large"}),e.jsx("p",{children:"Einladung wird geladen..."})]}):m?e.jsx("div",{className:"error-container",children:e.jsxs("div",{className:"error-content",children:[e.jsx("h2",{children:"âŒ Einladung nicht verfÃ¼gbar"}),e.jsx("p",{children:m}),e.jsxs("div",{className:"error-actions",children:[e.jsx("button",{onClick:()=>l("/home"),className:"btn btn-primary",children:"Zur Startseite"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"Erneut versuchen"})]})]})}):x?e.jsx(r,{invitationData:{token:a,buddyGroup:c.gruppe_name,inviterName:c.ersteller_name,prefilledData:{vorname:(null==(t=c.freund_name)?void 0:t.split(" ")[0])||"",nachname:(null==(d=c.freund_name)?void 0:d.split(" ").slice(1).join(" "))||"",email:c.freund_email}},onComplete:p,onCancel:()=>g(!1)}):e.jsxs("div",{className:"buddy-invite-page",children:[e.jsx("div",{className:"buddy-invite-header",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"ğŸ¥‹ Buddy-Gruppen Einladung"}),e.jsx("p",{children:"Du wurdest zu einer Kampfkunst-Gruppe eingeladen!"})]})}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"buddy-invite-content",children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("h2",{children:["Hallo ",c.freund_name,"!"]}),e.jsxs("p",{children:[e.jsx("strong",{children:c.ersteller_name||"Ein Freund"})," hat dich zur Buddy-Gruppe ",e.jsxs("strong",{children:['"',c.gruppe_name||"Kampfkunst-Freunde",'"']})," eingeladen."]})]}),e.jsxs("div",{className:"buddy-benefits",children:[e.jsx("h3",{children:"ğŸ¯ Vorteile einer Buddy-Mitgliedschaft"}),e.jsxs("div",{className:"benefits-grid",children:[e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ğŸ‘¥"}),e.jsx("h4",{children:"Gemeinsames Training"}),e.jsx("p",{children:"Trainiere zusammen mit deinen Freunden und motiviert euch gegenseitig"})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ğŸš€"}),e.jsx("h4",{children:"Gegenseitige Motivation"}),e.jsx("p",{children:"Erreiche deine Ziele schneller durch UnterstÃ¼tzung der Gruppe"})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ğŸ‰"}),e.jsx("h4",{children:"Spezielle Events"}),e.jsx("p",{children:"Exklusive Buddy-Workshops, Veranstaltungen und Gruppenrabatte"})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ğŸ†"}),e.jsx("h4",{children:"Teamgeist"}),e.jsx("p",{children:"Entwickle Kameradschaft und feiere gemeinsame Erfolge"})]})]})]}),e.jsxs("div",{className:"invitation-info",children:[e.jsx("h3",{children:"ğŸ“‹ Einladungsdetails"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Gruppe:"}),e.jsx("span",{children:c.gruppe_name||"Kampfkunst-Freunde"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Eingeladen von:"}),e.jsx("span",{children:c.ersteller_name||"Freund"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"Deine Email:"}),e.jsx("span",{children:c.freund_email})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("strong",{children:"GÃ¼ltig bis:"}),e.jsx("span",{children:new Date(c.token_gueltig_bis).toLocaleDateString("de-DE")})]})]})]}),e.jsxs("div",{className:"registration-actions",children:[e.jsx("h3",{children:"ğŸš€ Bereit zum Beitreten?"}),e.jsx("p",{children:"Starte jetzt deine Registrierung und werde Teil der Gruppe!"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:()=>{g(!0)},className:"btn btn-primary btn-large",children:"âœ¨ Jetzt registrieren"}),e.jsx("button",{onClick:()=>l("/home"),className:"btn btn-secondary",children:"ğŸ“– Mehr erfahren"})]}),e.jsx("div",{className:"registration-note",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Hinweis:"})," Die Registrierung ist komplett kostenlos und unverbindlich. Du kannst alle Details eingeben und entscheidest am Ende, ob du beitreten mÃ¶chtest."]})})]}),e.jsxs("div",{className:"security-notice",children:[e.jsx("h4",{children:"ğŸ”’ Deine Daten sind sicher"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Alle Daten werden DSGVO-konform behandelt"}),e.jsx("li",{children:"Keine Weitergabe an Dritte"}),e.jsx("li",{children:"Jederzeit widerrufbar"}),e.jsx("li",{children:"Sichere SSL-VerschlÃ¼sselung"})]})]})]})})]})};export{t as default};
