import{j as e}from"./animation-1wuIdCBS.js";import{r}from"./vendor-router-BhMXg4Z-.js";import{u as n,a}from"./index-BJCk5MxH.js";import t from"./MemberHeader-Byiis1Cp.js";import{C as l,q as s,W as i,o as d,g as o,X as m,k as g}from"./icons-C6KFH58b.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";/* empty css                  */const c=()=>{const{user:c}=n(),[h,p]=r.useState([]),[x,u]=r.useState(!0),[b,y]=r.useState(null),[v,j]=r.useState(null);r.useEffect(()=>{(null==c?void 0:c.email)&&f()},[null==c?void 0:c.email]);const f=async()=>{u(!0);try{const e=(await a.get(`/mitglieder/by-email/${encodeURIComponent(c.email)}`)).data;y(e);const r=await a.get(`/events/member/${e.mitglied_id}`);p(r.data.events||[])}catch(e){console.error("Fehler beim Laden der Events:",e)}finally{u(!1)}},_=e=>new Date(e).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),F=e=>e?e.slice(0,5):"",z=e=>({Seminar:"ðŸ“š",Wettkampf:"ðŸ†","PrÃ¼fung":"ðŸ¥‹",Workshop:"ðŸŽ¯",Lehrgang:"ðŸ‘¥",Sonstiges:"ðŸ“…"}[e]||"ðŸ“…");return x?e.jsxs("div",{className:"member-page",children:[e.jsx(t,{}),e.jsx("div",{className:"page-content",style:{padding:"2rem",textAlign:"center"},children:e.jsx("p",{children:"Lade Events..."})})]}):e.jsxs("div",{className:"member-page",children:[e.jsx(t,{}),e.jsxs("div",{className:"page-content",style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{className:"page-header",style:{marginBottom:"2rem"},children:[e.jsxs("h1",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"#FFD700"},children:[e.jsx(l,{size:32}),"Veranstaltungen & Events"]}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",marginTop:"0.5rem"},children:"Melden Sie sich fÃ¼r kommende Events an"})]}),0===h.length?e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"12px",padding:"3rem",textAlign:"center"},children:[e.jsx(l,{size:48,style:{color:"rgba(255, 215, 0, 0.5)",margin:"0 auto 1rem"}}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.1rem"},children:"Derzeit sind keine Events geplant."})]}):e.jsx("div",{style:{display:"grid",gap:"1.5rem"},children:h.map(r=>{return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(30, 30, 40, 0.9) 0%, rgba(20, 20, 30, 0.9) 100%)",border:"1px solid "+(r.ist_angemeldet?"rgba(16, 185, 129, 0.3)":"rgba(255, 215, 0, 0.2)"),borderRadius:"16px",padding:"1.5rem",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{position:"absolute",top:"1rem",right:"1rem",background:(n=r.event_typ,{Seminar:"#10B981",Wettkampf:"#F59E0B","PrÃ¼fung":"#8B5CF6",Workshop:"#06B6D4",Lehrgang:"#EF4444",Sonstiges:"#6B7280"}[n]||"#6B7280"),color:"#fff",padding:"0.5rem 1rem",borderRadius:"8px",fontSize:"0.85rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{children:z(r.event_typ)}),r.event_typ]}),e.jsx("h3",{style:{color:"#FFD700",fontSize:"1.5rem",marginBottom:"1rem",paddingRight:"150px"},children:r.titel}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(l,{size:18,style:{color:"#FFD700"}}),e.jsx("span",{style:{color:"rgba(255, 255, 255, 0.9)"},children:_(r.datum)})]}),r.uhrzeit_beginn&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(s,{size:18,style:{color:"#FFD700"}}),e.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[F(r.uhrzeit_beginn)," - ",F(r.uhrzeit_ende)]})]}),r.ort&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(i,{size:18,style:{color:"#FFD700"}}),e.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[r.ort," ",r.raum_name?`(${r.raum_name})`:""]})]}),r.max_teilnehmer&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx(d,{size:18,style:{color:"#FFD700"}}),e.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.9)"},children:[r.anzahl_anmeldungen||0," / ",r.max_teilnehmer," Teilnehmer"]})]})]}),r.beschreibung&&e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.7)",marginBottom:"1.5rem",lineHeight:"1.6"},children:r.beschreibung}),r.teilnahmegebuehr&&parseFloat(r.teilnahmegebuehr)>0&&e.jsxs("div",{style:{background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"8px",padding:"0.75rem",marginBottom:"1.5rem"},children:[e.jsx("strong",{style:{color:"#FFD700"},children:"TeilnahmegebÃ¼hr:"})," ",e.jsxs("span",{style:{color:"#fff"},children:[parseFloat(r.teilnahmegebuehr).toFixed(2)," â‚¬"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[r.ist_angemeldet?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",padding:"0.75rem 1rem",color:"#10B981",fontWeight:"600"},children:[e.jsx(o,{size:18}),"Angemeldet"]}),e.jsxs("button",{onClick:()=>(async e=>{var r,n;if(b&&window.confirm("MÃ¶chten Sie sich wirklich von diesem Event abmelden?")){j(e);try{const r=await a.delete(`/events/${e}/anmelden`,{data:{mitglied_id:b.mitglied_id}});r.data.success&&(alert("âœ… "+r.data.message),f())}catch(t){console.error("Fehler bei Event-Abmeldung:",t),alert("âŒ "+((null==(n=null==(r=t.response)?void 0:r.data)?void 0:n.error)||"Fehler bei der Abmeldung"))}finally{j(null)}}})(r.event_id),disabled:v===r.event_id,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"0.75rem 1.5rem",color:"#EF4444",cursor:v===r.event_id?"not-allowed":"pointer",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.3s ease"},onMouseEnter:e=>{v!==r.event_id&&(e.currentTarget.style.background="rgba(239, 68, 68, 0.3)")},onMouseLeave:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},children:[e.jsx(m,{size:18}),v===r.event_id?"Wird abgemeldet...":"Abmelden"]})]}):e.jsx("button",{onClick:()=>(async e=>{var r,n;if(b){j(e);try{const r=await a.post(`/events/${e}/anmelden`,{mitglied_id:b.mitglied_id});r.data.success&&(alert("âœ… "+r.data.message),f())}catch(t){console.error("Fehler bei Event-Anmeldung:",t),alert("âŒ "+((null==(n=null==(r=t.response)?void 0:r.data)?void 0:n.error)||"Fehler bei der Anmeldung"))}finally{j(null)}}})(r.event_id),disabled:v===r.event_id||r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer,style:{background:r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer?"rgba(107, 114, 128, 0.2)":"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",border:"none",borderRadius:"8px",padding:"0.75rem 2rem",color:r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer?"#9CA3AF":"#000",cursor:v===r.event_id||r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer?"not-allowed":"pointer",fontWeight:"700",fontSize:"1rem",transition:"all 0.3s ease",boxShadow:r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer?"none":"0 4px 12px rgba(255, 215, 0, 0.3)"},onMouseEnter:e=>{v===r.event_id||r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer||(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(255, 215, 0, 0.4)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(255, 215, 0, 0.3)"},children:v===r.event_id?"Wird angemeldet...":r.max_teilnehmer&&r.anzahl_anmeldungen>=r.max_teilnehmer?"Ausgebucht":"Jetzt anmelden"}),r.anmeldefrist&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"rgba(255, 215, 0, 0.8)",fontSize:"0.9rem"},children:[e.jsx(g,{size:16}),"Anmeldefrist: ",_(r.anmeldefrist)]})]})]},r.event_id);var n})})]})]})};export{c as default};
