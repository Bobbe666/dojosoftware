import{j as e}from"./animation-1wuIdCBS.js";import{r}from"./vendor-router-BhMXg4Z-.js";import{b as s,k as n,g as l}from"./index-BJCk5MxH.js";import{F as i,g as t,T as a,d,f as o,H as c,o as g,a as p,b as x}from"./icons-C6KFH58b.js";const m=()=>{const{selectedDojo:m}=s(),[k,S]=r.useState(!0),[B,F]=r.useState(null),[_,A]=r.useState(null),[D,G]=r.useState(!1);r.useEffect(()=>{R()},[m]);const R=async()=>{const e=null===(null==m?void 0:m.id)?"all":(null==m?void 0:m.id)||localStorage.getItem("activeDojoId");if(!e||"all"!==e&&("null"===e||"undefined"===e))return A({count:0,members:[],noDojoSelected:!0}),void S(!1);try{S(!0);const r=await n(`${l.apiBaseUrl}/agb/${e}/members-need-acceptance`);if(r.ok){const e=await r.json();A(e)}else F("Konnte AGB-Status nicht laden")}catch(r){console.error("Fehler beim Laden des AGB-Status:",r),F("Verbindungsfehler")}finally{S(!1)}};if(k)return e.jsxs("div",{style:h,children:[e.jsxs("div",{style:u,children:[e.jsx(i,{size:20}),e.jsx("span",{children:"AGB/DSGVO Status"})]}),e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255,255,255,0.5)"},children:"Lade..."})]});if(B)return e.jsxs("div",{style:h,children:[e.jsxs("div",{style:u,children:[e.jsx(i,{size:20}),e.jsx("span",{children:"AGB/DSGVO Status"})]}),e.jsx("div",{style:{padding:"1rem",color:"#FCA5A5"},children:B})]});const w=(null==_?void 0:_.count)||0,V=(null==_?void 0:_.members)||[],I=0===w&&!(null==_?void 0:_.noDojoSelected);return(null==_?void 0:_.noDojoSelected)?null:e.jsxs("div",{style:h,children:[e.jsxs("div",{style:u,children:[I?e.jsx(t,{size:20,style:{color:"#86EFAC"}}):e.jsx(a,{size:20,style:{color:"#FBBF24"}}),e.jsx("span",{children:"AGB/DSGVO Status"}),w>0&&e.jsx("span",{style:j,children:w})]}),e.jsx("div",{style:b,children:I?e.jsxs("div",{style:{color:"#86EFAC",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(t,{size:16}),"Alle Mitglieder haben die aktuellen Versionen akzeptiert"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"0.75rem",color:"rgba(255,255,255,0.9)"},children:[e.jsxs("strong",{children:[w," Mitglied",1!==w?"er":""]})," ",1!==w?"haben":"hat"," noch nicht die aktuelle Version akzeptiert:"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",flexWrap:"wrap"},children:[e.jsxs("div",{style:f,children:[e.jsx(i,{size:14,style:{color:"#FFD700"}}),e.jsxs("span",{children:[V.filter(e=>e.agb_akzeptanz_fehlt).length," AGB"]})]}),e.jsxs("div",{style:f,children:[e.jsx(d,{size:14,style:{color:"#60A5FA"}}),e.jsxs("span",{children:[V.filter(e=>e.dsgvo_akzeptanz_fehlt).length," DSGVO"]})]}),e.jsxs("div",{style:f,children:[e.jsx(o,{size:14,style:{color:"#34D399"}}),e.jsxs("span",{children:[V.filter(e=>e.dojo_regeln_akzeptanz_fehlt).length," Regeln"]})]}),e.jsxs("div",{style:f,children:[e.jsx(c,{size:14,style:{color:"#F472B6"}}),e.jsxs("span",{children:[V.filter(e=>e.hausordnung_akzeptanz_fehlt).length," Hausordnung"]})]})]}),e.jsxs("button",{onClick:()=>G(!D),style:y,children:[e.jsx(g,{size:14}),D?"Liste ausblenden":"Mitglieder anzeigen",D?e.jsx(p,{size:14}):e.jsx(x,{size:14})]}),D&&e.jsxs("div",{style:z,children:[V.slice(0,10).map(r=>e.jsxs("div",{style:v,children:[e.jsxs("a",{href:`/dashboard/mitglieder/${r.mitglied_id}`,style:{color:"#FFD700",textDecoration:"none"},children:[r.vorname," ",r.nachname]}),e.jsxs("div",{style:{display:"flex",gap:"0.25rem",fontSize:"0.7rem",flexWrap:"wrap"},children:[1===r.agb_akzeptanz_fehlt&&e.jsx("span",{style:{color:"#FBBF24",padding:"0 0.25rem",background:"rgba(251,191,36,0.1)",borderRadius:"3px"},children:"AGB"}),1===r.dsgvo_akzeptanz_fehlt&&e.jsx("span",{style:{color:"#60A5FA",padding:"0 0.25rem",background:"rgba(96,165,250,0.1)",borderRadius:"3px"},children:"DSGVO"}),1===r.dojo_regeln_akzeptanz_fehlt&&e.jsx("span",{style:{color:"#34D399",padding:"0 0.25rem",background:"rgba(52,211,153,0.1)",borderRadius:"3px"},children:"Regeln"}),1===r.hausordnung_akzeptanz_fehlt&&e.jsx("span",{style:{color:"#F472B6",padding:"0 0.25rem",background:"rgba(244,114,182,0.1)",borderRadius:"3px"},children:"Haus"})]})]},r.mitglied_id)),V.length>10&&e.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",marginTop:"0.5rem"},children:["...und ",V.length-10," weitere"]})]})]})})]})},h={background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden",marginTop:"1rem"},u={display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1rem",background:"rgba(255, 255, 255, 0.05)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontWeight:"600",fontSize:"0.9rem"},j={marginLeft:"auto",background:"#FBBF24",color:"#000",padding:"0.15rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"700"},b={padding:"1rem"},f={display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"0.85rem"},y={display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.8)",cursor:"pointer",fontSize:"0.85rem",width:"100%",justifyContent:"center"},z={marginTop:"0.75rem",maxHeight:"200px",overflowY:"auto",padding:"0.5rem",background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px"},v={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"};export{m as A};
