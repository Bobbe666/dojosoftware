import{j as e}from"./animation-1wuIdCBS.js";import{r,u as t}from"./vendor-router-BhMXg4Z-.js";import{b as s,a}from"./index-BJCk5MxH.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";import"./icons-C6KFH58b.js";const i=()=>{const{getDojoFilterParam:i}=s(),[n,l]=r.useState([]),[d,o]=r.useState([]),[m,c]=r.useState(!0),[g,h]=r.useState(""),[u,x]=r.useState(""),j=t();r.useEffect(()=>{p()},[]);const p=async()=>{try{c(!0);const e=i(),r=e?`/ehemalige?${e}`:"/ehemalige",t=await a.get(r);l(t.data),o(t.data),c(!1)}catch(e){console.error("Fehler beim Laden der ehemaligen Mitglieder:",e),h("Fehler beim Laden der Daten"),c(!1)}};return r.useEffect(()=>{if(""===u)o(n);else{const e=n.filter(e=>`${e.vorname} ${e.nachname}`.toLowerCase().includes(u.toLowerCase()));o(e)}},[u,n]),m?e.jsx("div",{className:"dashboard-container",children:e.jsx("div",{className:"loading",children:"Lade ehemalige Mitglieder..."})}):g?e.jsx("div",{className:"dashboard-container",children:e.jsx("div",{className:"error",children:g})}):e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{margin:0},children:"Ehemalige Mitglieder"}),e.jsx("button",{className:"primary-button",onClick:()=>j("/dashboard/mitglieder"),children:"Zurück zu Mitgliedern"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:"Suchen nach Name...",value:u,onChange:e=>x(e.target.value),style:{flex:1,padding:"0.75rem",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(31, 41, 55, 0.6)",color:"white"}}),e.jsxs("div",{style:{color:"rgba(255, 255, 255, 0.7)"},children:[d.length," von ",n.length," angezeigt"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:d.length>0?d.map(r=>e.jsxs("div",{className:"stat-card",style:{padding:"1rem",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},children:[e.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:"600",margin:"0 0 0.5rem 0",color:"#ffd700"},children:[r.nachname,", ",r.vorname]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:"1.6"},children:[r.austrittsdatum&&e.jsxs("p",{style:{margin:"0.2rem 0"},children:[e.jsx("strong",{children:"Austritt:"})," ",new Date(r.austrittsdatum).toLocaleDateString("de-DE")]}),r.email&&e.jsxs("p",{style:{margin:"0.2rem 0"},children:[e.jsx("strong",{children:"Email:"})," ",r.email]}),r.letzter_guertel&&e.jsxs("p",{style:{margin:"0.2rem 0"},children:[e.jsx("strong",{children:"Letzter Gürtel:"})," ",r.letzter_guertel]}),r.austrittsgrund&&e.jsxs("p",{style:{margin:"0.2rem 0"},children:[e.jsx("strong",{children:"Grund:"})," ",r.austrittsgrund]})]})]},r.id)):e.jsxs("div",{className:"stat-card",style:{gridColumn:"1 / -1",padding:"2rem",textAlign:"center"},children:[e.jsx("h3",{children:"Keine ehemaligen Mitglieder gefunden"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)"},children:"Es sind noch keine ehemaligen Mitglieder im System erfasst."})]})})]})};export{i as default};
