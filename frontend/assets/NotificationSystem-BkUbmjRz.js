import{j as e}from"./animation-1wuIdCBS.js";import{r as i}from"./vendor-router-BhMXg4Z-.js";import{b as r,u as t,k as a,g as s}from"./index-BJCk5MxH.js";import{j as n}from"./index-CkXcCt97.js";import{c as l}from"./sanitizer-DJNv4htu.js";import o from"./NewsVerwaltung-CyYMd3Uf.js";import{g as c,M as d,aD as m,c as g,aK as p,be as h,t as u}from"./icons-C6KFH58b.js";import{R as b,f,C as x,X as y,Y as j,T as v,L as _,g as S,P as w,c as k,d as N,B as z,b as C}from"./charts-CuVbSI8O.js";import"./vendor-react-DtuzQOD1.js";import"./query-Bs1dTGah.js";/* empty css             */const T=()=>{const{activeDojo:T,filter:B}=r(),{token:E}=t(),[$,P]=i.useState("dashboard");let F=!1;try{if(E){const e=n(E);F=1===e.id||1===e.user_id||"admin"===e.username}}catch($e){console.error("Token decode error:",$e)}const[M,R]=i.useState(!1),[A,W]=i.useState(""),[I,L]=i.useState(""),[D,U]=i.useState({stats:{},recentNotifications:[],settings:{}}),[O,V]=i.useState({email_enabled:!1,push_enabled:!1,email_config:{protocol:"smtp",smtp_host:"",smtp_port:587,imap_host:"",imap_port:993,pop3_host:"",pop3_port:995,smtp_secure:!1,smtp_user:"",smtp_password:""},push_config:{},default_from_email:"",default_from_name:"Dojo Software"}),[K,H]=i.useState({recipients:[],subject:"",message:"",template_type:"general"}),[G,J]=i.useState({recipients:[],title:"",message:"",icon:"",badge:"",url:""}),[q,Y]=i.useState([]),[Z,X]=i.useState(""),[Q,ee]=i.useState([]),[ie,re]=i.useState({mitglieder:[],trainer:[],personal:[],admin:[],alle:[]}),[te,ae]=i.useState([]),[se,ne]=i.useState({notifications:[],pagination:{}}),[le,oe]=i.useState({}),[ce,de]=i.useState([]);i.useEffect(()=>{me(),ge(),pe(),ue(),be(),fe()},[]),i.useEffect(()=>{T&&pe()},[B,T]);const me=async()=>{try{const e=await a(`${s.apiBaseUrl}/notifications/dashboard`),i=await e.json();i.success&&U(i)}catch($e){console.error("âŒ Dashboard Daten Fehler:",$e)}},ge=async()=>{try{const e=await a(`${s.apiBaseUrl}/email-service/settings`),i=await e.json();if(i.success&&i.settings){const e=i.settings.email_config?"string"==typeof i.settings.email_config?JSON.parse(i.settings.email_config):i.settings.email_config:{},r={...i.settings,email_config:{protocol:e.protocol||"smtp",smtp_host:e.smtp_host||"smtp.alfahosting.de",smtp_port:e.smtp_port||587,imap_host:e.imap_host||"",imap_port:e.imap_port||993,pop3_host:e.pop3_host||"",pop3_port:e.pop3_port||995,smtp_secure:e.smtp_secure||!1,smtp_user:e.smtp_user||"",smtp_password:e.smtp_password||""}};return void V(r)}}catch($e){console.log("âš ï¸ Neue E-Mail-Service API nicht verfÃ¼gbar, versuche Fallback")}try{const e=await a(`${s.apiBaseUrl}/notifications/settings`),i=await e.json();if(i.success){const e=i.settings.email_config?JSON.parse(i.settings.email_config):{},r={...i.settings,email_config:{protocol:e.protocol||"smtp",smtp_host:e.smtp_host||"smtp.alfahosting.de",smtp_port:e.smtp_port||587,imap_host:e.imap_host||"",imap_port:e.imap_port||993,pop3_host:e.pop3_host||"",pop3_port:e.pop3_port||995,smtp_secure:e.smtp_secure||!1,smtp_user:e.smtp_user||"",smtp_password:e.smtp_password||""}};V(r)}}catch($e){console.error("âŒ Settings Fehler:",$e),V(e=>({...e,email_config:{protocol:"smtp",smtp_host:"smtp.alfahosting.de",smtp_port:587,imap_host:"",imap_port:993,pop3_host:"",pop3_port:995,smtp_secure:!1,smtp_user:"",smtp_password:""}}))}},pe=async()=>{var e,i,r;try{let t="";"all"===B?t="dojo_id=all":("current"===B&&T||T)&&(t=`dojo_id=${T.id}`);const n=t?`${s.apiBaseUrl}/notifications/recipients?${t}`:`${s.apiBaseUrl}/notifications/recipients`;console.log("ðŸ“§ Loading recipients with filter:",t||"no filter");const l=await a(n),o=await l.json();if(o.success)return re({mitglieder:o.recipients.mitglieder||[],trainer:o.recipients.trainer||[],personal:o.recipients.personal||[],admin:o.recipients.admin||[],alle:o.recipients.alle||[]}),void console.log("âœ… Loaded recipients from dashboard API:",{mitglieder:(null==(e=o.recipients.mitglieder)?void 0:e.length)||0,trainer:(null==(i=o.recipients.trainer)?void 0:i.length)||0,personal:(null==(r=o.recipients.personal)?void 0:r.length)||0,filter:t||"all"})}catch($e){console.log("âš ï¸ Mitglieder API failed, trying fallback")}try{const e=await a(`${s.apiBaseUrl}/notifications/recipients`),i=await e.json();i.success?re({mitglieder:i.recipients.mitglieder||[],trainer:i.recipients.trainer||[],personal:i.recipients.personal||[],admin:i.recipients.admin||[],alle:i.recipients.alle||[]}):await he()}catch($e){console.error("âŒ Recipients Fehler:",$e),await he()}},he=async()=>{try{let e=[];try{const i=await a(`${s.apiBaseUrl}/mitglieder`),r=await i.json();console.log("ðŸ“Š Raw members data:",Array.isArray(r)?r.slice(0,2):r),Array.isArray(r)?e=r.map(e=>({email:`${(e.vorname||"member").toLowerCase().replace(/[^a-z]/g,"")}.${(e.nachname||"test").toLowerCase().replace(/[^a-z]/g,"")}@dojo.local`,name:`${e.vorname||""} ${e.nachname||""}`.trim(),type:"mitglied"})):(console.warn("âš ï¸ membersData is not an array:",r),e=[]),console.log(`âœ… Created ${e.length} member emails`)}catch($e){console.log("âŒ Members API error:",$e),e=[]}const i=await a(`${s.apiBaseUrl}/trainer`),r=await i.json(),t=Array.isArray(r)?r.filter(e=>e.email&&""!==e.email).map(e=>({email:e.email,name:`${e.vorname||""} ${e.nachname||""}`.trim(),type:"trainer"})):[],n=await a(`${s.apiBaseUrl}/personal`),l=await n.json(),o=Array.isArray(l)?l.filter(e=>e.email&&""!==e.email).map(e=>({email:e.email,name:`${e.vorname||""} ${e.nachname||""}`.trim(),type:"personal"})):[];re({mitglieder:e,trainer:t,personal:o,admin:[],alle:[...e,...t,...o]}),console.log(`ðŸ“Š Loaded directly: ${e.length} members, ${t.length} trainers, ${o.length} personal`)}catch($e){console.error("âŒ Direct load error:",$e)}},ue=async()=>{try{const e=await a(`${s.apiBaseUrl}/notifications/templates`),i=await e.json();i.success&&ae(i.templates)}catch($e){console.error("âŒ Templates Fehler:",$e)}},be=async(e=1)=>{try{const i=await a(`${s.apiBaseUrl}/notifications/history?page=${e}&limit=20`),r=await i.json();r.success&&ne(r)}catch($e){console.error("âŒ History Fehler:",$e)}},fe=async()=>{try{const e=await a(`${s.apiBaseUrl}/notifications/push/subscriptions`),i=await e.json();i.success&&Y(i.subscriptions)}catch($e){console.error("âŒ Push Subscriptions Fehler:",$e)}},xe=async()=>{R(!0),W(""),L("");try{const e=await a(`${s.apiBaseUrl}/email-service/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email_enabled:O.email_enabled,email_config:O.email_config,default_from_email:O.default_from_email,default_from_name:O.default_from_name})}),i=await e.json();i.success?(L("âœ… E-Mail-Einstellungen erfolgreich gespeichert"),await ge(),await me()):W(i.message||"Fehler beim Speichern der Einstellungen")}catch($e){console.error("âŒ Settings Save Fehler:",$e),W("Fehler beim Speichern der Einstellungen: "+$e.message)}finally{R(!1)}},ye=async()=>{var e;const i=prompt("Test-Email-Adresse eingeben:");if(i){R(!0),W(""),L("");try{const r=await a(`${s.apiBaseUrl}/email-service/test`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:i,subject:"Test-Email von Dojo Software",message:`\n            <h2>Test-Email erfolgreich!</h2>\n            <p>Diese E-Mail wurde erfolgreich Ã¼ber das Dojo Software E-Mail-System gesendet.</p>\n            <p><strong>Zeitstempel:</strong> ${(new Date).toLocaleString("de-DE")}</p>\n            <p><strong>SMTP-Server:</strong> ${(null==(e=O.email_config)?void 0:e.smtp_host)||"Nicht konfiguriert"}</p>\n            <hr>\n            <p><em>Dojo Software - E-Mail-Service</em></p>\n          `})}),t=await r.json();t.success?(L(`âœ… Test-Email erfolgreich an ${i} gesendet!`),await me()):W(t.message||t.error||"Fehler beim Senden der Test-Email")}catch($e){console.error("âŒ Email Test Fehler:",$e),W("Fehler beim Senden der Test-Email: "+$e.message)}finally{R(!1)}}},je=async()=>{R(!0),W(""),L("");try{const e=await a(`${s.apiBaseUrl}/email-service/verify`),i=await e.json();i.success?L("âœ… SMTP-Verbindung erfolgreich getestet!"):W(i.message||i.error||"SMTP-Verbindung fehlgeschlagen")}catch($e){console.error("âŒ SMTP Verify Fehler:",$e),W("Fehler beim Testen der SMTP-Verbindung: "+$e.message)}finally{R(!1)}},ve=async()=>{if(K.recipients.length&&K.subject&&K.message){R(!0),W(""),L("");try{const e=await a(`${s.apiBaseUrl}/notifications/email/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)}),i=await e.json();i.success?(L(i.message),H({recipients:[],subject:"",message:"",template_type:"general"}),await me(),await be()):W(i.message||"Fehler beim Senden der Emails")}catch($e){W("Fehler beim Senden der Emails")}finally{R(!1)}}else W("Bitte fÃ¼llen Sie alle Felder aus")},_e=async()=>{if(G.title&&G.message){R(!0),W(""),L("");try{const e=await a(`${s.apiBaseUrl}/notifications/push/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)}),i=await e.json();i.success?(L(i.message),"Notification"in window&&"granted"===Notification.permission?new Notification(`âœ… ${G.title}`,{body:`${G.message}\n\n${i.message}`,icon:"/favicon.ico",tag:"push-sent-confirmation",requireInteraction:!0,silent:!1}):"Notification"in window&&"denied"!==Notification.permission&&Notification.requestPermission().then(e=>{"granted"===e&&new Notification(`âœ… ${G.title}`,{body:`${G.message}\n\n${i.message}`,icon:"/favicon.ico",tag:"push-sent-confirmation",requireInteraction:!0,silent:!1})}),J({recipients:[],title:"",message:"",icon:"",badge:"",url:""}),await me(),await be()):W(i.message||"Fehler beim Senden der Push-Nachrichten")}catch($e){W("Fehler beim Senden der Push-Nachrichten")}finally{R(!1)}}else W("Bitte fÃ¼llen Sie Titel und Nachricht aus")},Se=async()=>{if("Notification"in window){"granted"===await Notification.requestPermission()?L("Push-Benachrichtigungen aktiviert"):W("Push-Benachrichtigungen wurden abgelehnt")}else W("Push-Benachrichtigungen werden von diesem Browser nicht unterstÃ¼tzt")};return e.jsxs("div",{className:"notification-system",children:[e.jsxs("div",{className:"notification-tabs",children:[e.jsxs("button",{className:"tab-btn "+("dashboard"===$?"active":""),onClick:()=>P("dashboard"),children:[e.jsx(c,{size:20}),"Dashboard"]}),e.jsxs("button",{className:"tab-btn "+("email"===$?"active":""),onClick:()=>P("email"),children:[e.jsx(d,{size:20}),"Email versenden"]}),e.jsxs("button",{className:"tab-btn "+("push"===$?"active":""),onClick:()=>P("push"),children:[e.jsx(m,{size:20}),"Push-Nachrichten"]}),e.jsxs("button",{className:"tab-btn "+("settings"===$?"active":""),onClick:()=>P("settings"),children:[e.jsx(g,{size:20}),"Einstellungen"]}),e.jsxs("button",{className:"tab-btn "+("history"===$?"active":""),onClick:()=>P("history"),children:[e.jsx(p,{size:20}),"Verlauf"]}),F&&e.jsxs("button",{className:"tab-btn "+("news"===$?"active":""),onClick:()=>P("news"),children:[e.jsx(h,{size:20}),"News verwalten"]})]}),A&&e.jsxs("div",{className:"alert alert-error",children:[e.jsx(u,{size:20}),A]}),I&&e.jsxs("div",{className:"alert alert-success",children:[e.jsx(c,{size:20}),I]}),e.jsxs("div",{className:"tab-content",children:["dashboard"===$&&(()=>{var i;const r=[{name:"Emails",value:D.stats.email_notifications||0,color:"#60a5fa"},{name:"Push",value:D.stats.push_notifications||0,color:"#22c55e"}],t=[{name:"Erfolgreich",value:D.stats.sent_notifications||0,color:"#22c55e"},{name:"Fehlgeschlagen",value:D.stats.failed_notifications||0,color:"#ef4444"}];return e.jsxs("div",{className:"notification-dashboard",style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("div",{className:"dashboard-header",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"2.5rem",filter:"drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3))",position:"relative",zIndex:10,lineHeight:1,display:"inline-block",flexShrink:0},children:"ðŸ“§"}),e.jsx("h2",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFD700",margin:0,textShadow:"none",WebkitTextFillColor:"#FFD700",background:"none",WebkitBackgroundClip:"initial",backgroundClip:"initial",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"0.5px",position:"relative",zIndex:2},children:"Newsletter & Benachrichtigungen"})]}),e.jsx("p",{style:{color:"#a0a0b0",fontSize:"0.9rem"},children:"Verwalten Sie Email-Versand, Push-Nachrichten und Server-Einstellungen"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",style:{border:"1px solid rgba(96, 165, 250, 0.3)"},children:[e.jsx("div",{className:"stat-icon",children:"ðŸ“§"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{style:{color:"#60a5fa",margin:0},children:D.stats.email_notifications||0}),e.jsx("p",{children:"Emails gesendet (30 Tage)"})]})]}),e.jsxs("div",{className:"stat-card",style:{border:"1px solid rgba(34, 197, 94, 0.3)"},children:[e.jsx("div",{className:"stat-icon",children:"ðŸ“±"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{style:{color:"#22c55e",margin:0},children:D.stats.push_notifications||0}),e.jsx("p",{children:"Push-Nachrichten"})]})]}),e.jsxs("div",{className:"stat-card",style:{border:"1px solid rgba(34, 197, 94, 0.3)"},children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{style:{color:"#22c55e",margin:0},children:D.stats.sent_notifications||0}),e.jsx("p",{children:"Erfolgreich gesendet"})]})]}),e.jsxs("div",{className:"stat-card",style:{border:"1px solid rgba(239, 68, 68, 0.3)"},children:[e.jsx("div",{className:"stat-icon",children:"âŒ"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{style:{color:"#ef4444",margin:0},children:D.stats.failed_notifications||0}),e.jsx("p",{children:"Fehlgeschlagen"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1.2rem"},children:[e.jsx("h4",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1rem"},children:"ðŸ“ˆ Wochenverlauf"}),e.jsx(b,{width:"100%",height:200,children:e.jsxs(f,{data:ce,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),e.jsx(y,{dataKey:"tag",stroke:"#a0a0b0",style:{fontSize:"0.8rem"}}),e.jsx(j,{stroke:"#a0a0b0",style:{fontSize:"0.8rem"}}),e.jsx(v,{contentStyle:{background:"rgba(20, 20, 30, 0.95)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0"}}),e.jsx(_,{wrapperStyle:{color:"#e0e0e0",fontSize:"0.85rem"}}),e.jsx(S,{type:"monotone",dataKey:"emails",stroke:"#60a5fa",strokeWidth:2,name:"Emails"}),e.jsx(S,{type:"monotone",dataKey:"push",stroke:"#22c55e",strokeWidth:2,name:"Push"})]})})]}),e.jsxs("div",{style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1.2rem"},children:[e.jsx("h4",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1rem"},children:"ðŸ“Š Verteilung Typen"}),e.jsx(b,{width:"100%",height:200,children:e.jsxs(w,{children:[e.jsx(k,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:e=>`${e.name}: ${e.value}`,outerRadius:70,fill:"#8884d8",dataKey:"value",children:r.map((i,r)=>e.jsx(N,{fill:i.color},`cell-${r}`))}),e.jsx(v,{contentStyle:{background:"rgba(20, 20, 30, 0.95)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0"}})]})})]}),e.jsxs("div",{style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1.2rem"},children:[e.jsx("h4",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1rem"},children:"âœ… Erfolgsrate"}),e.jsx(b,{width:"100%",height:200,children:e.jsxs(z,{data:t,children:[e.jsx(x,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),e.jsx(y,{dataKey:"name",stroke:"#a0a0b0",style:{fontSize:"0.8rem"}}),e.jsx(j,{stroke:"#a0a0b0",style:{fontSize:"0.8rem"}}),e.jsx(v,{contentStyle:{background:"rgba(20, 20, 30, 0.95)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0"}}),e.jsx(C,{dataKey:"value",radius:[8,8,0,0],children:t.map((i,r)=>e.jsx(N,{fill:i.color},`cell-${r}`))})]})})]})]}),e.jsxs("div",{className:"recent-notifications",style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1.2rem"},children:[e.jsx("h3",{style:{color:"#ffd700",marginBottom:"1rem",fontSize:"1.1rem"},children:"ðŸ”” Letzte Benachrichtigungen"}),e.jsx("div",{className:"notifications-list",style:{display:"flex",flexDirection:"column",gap:"0.8rem"},children:null==(i=D.recentNotifications)?void 0:i.map((i,r)=>e.jsxs("div",{className:"notification-item",style:{background:"rgba(20, 20, 30, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"0.8rem",display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("div",{className:"notification-icon",style:{fontSize:"1.5rem"},children:"email"===i.type?"ðŸ“§":"ðŸ“±"}),e.jsxs("div",{className:"notification-content",style:{flex:1},children:[e.jsxs("div",{className:"notification-header",style:{display:"flex",justifyContent:"space-between",marginBottom:"0.3rem"},children:[e.jsx("span",{className:"notification-recipient",style:{color:"#e0e0e0",fontSize:"0.9rem",fontWeight:"600"},children:i.recipient}),e.jsx("span",{className:`notification-status ${i.status}`,style:{fontSize:"1rem"},children:"sent"===i.status?"âœ…":"failed"===i.status?"âŒ":"â³"})]}),e.jsx("div",{className:"notification-subject",style:{color:"#ffd700",fontSize:"0.85rem",marginBottom:"0.2rem"},children:i.subject}),e.jsx("div",{className:"notification-time",style:{color:"#808090",fontSize:"0.75rem"},children:new Date(i.created_at).toLocaleString("de-DE")})]})]},r))})]})]})})(),"email"===$&&e.jsxs("div",{className:"email-composer",children:[e.jsxs("div",{className:"composer-header",children:[e.jsx("h3",{children:"ðŸ“§ Email versenden"}),e.jsx("p",{children:"Erstellen und versenden Sie Emails an Ihre Mitglieder"})]}),T&&e.jsxs("div",{style:{background:"all"===B?"linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 107, 53, 0.15) 50%, rgba(59, 130, 246, 0.15) 100%)":`linear-gradient(135deg, ${T.farbe}33 0%, ${T.farbe}11 100%)`,border:"1px solid "+("all"===B?"rgba(255, 215, 0, 0.3)":`${T.farbe}66`),borderRadius:"10px",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.8rem"},children:[e.jsx("div",{style:{width:"8px",height:"40px",borderRadius:"4px",background:"all"===B?"linear-gradient(135deg, #FFD700 0%, #FF6B35 50%, #3B82F6 100%)":T.farbe}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#a0a0b0",marginBottom:"0.3rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"EmpfÃ¤nger-Filter aktiv"}),e.jsx("div",{style:{fontSize:"1rem",color:"#ffd700",fontWeight:"600"},children:"all"===B?"ðŸ¯ Alle Dojos":`ðŸ¯ ${T.dojoname}`}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#e0e0e0",marginTop:"0.3rem"},children:["VerfÃ¼gbare EmpfÃ¤nger: ",ie.mitglieder.length," Mitglieder, ",ie.trainer.length," Trainer, ",ie.personal.length," Mitarbeiter"]})]})]}),e.jsxs("div",{className:"composer-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"EmpfÃ¤nger auswÃ¤hlen"}),e.jsxs("div",{className:"recipient-selector",children:[e.jsxs("div",{className:"recipient-groups",children:[e.jsxs("button",{className:"recipient-group-btn "+(K.recipients.length===((null==(we=ie.mitglieder)?void 0:we.length)||0)?"active":""),onClick:()=>H({...K,recipients:(ie.mitglieder||[]).map(e=>e.email)}),children:["ðŸ‘¥ Alle Mitglieder (",(null==(ke=ie.mitglieder)?void 0:ke.length)||0,")"]}),e.jsxs("button",{className:"recipient-group-btn "+(K.recipients.length===((null==(Ne=ie.trainer)?void 0:Ne.length)||0)?"active":""),onClick:()=>H({...K,recipients:(ie.trainer||[]).map(e=>e.email)}),children:["ðŸ‘¨â€ðŸ« Alle Trainer (",(null==(ze=ie.trainer)?void 0:ze.length)||0,")"]}),e.jsxs("button",{className:"recipient-group-btn "+(K.recipients.length===((null==(Ce=ie.personal)?void 0:Ce.length)||0)?"active":""),onClick:()=>H({...K,recipients:(ie.personal||[]).map(e=>e.email)}),children:["ðŸ§‘â€ðŸ’¼ Alle Mitarbeiter (",(null==(Te=ie.personal)?void 0:Te.length)||0,")"]}),e.jsxs("button",{className:"recipient-group-btn "+(K.recipients.length===((null==(Be=ie.admin)?void 0:Be.length)||0)?"active":""),onClick:()=>H({...K,recipients:(ie.admin||[]).map(e=>e.email)}),children:["ðŸ‘‘ Alle Admins (",(null==(Ee=ie.admin)?void 0:Ee.length)||0,")"]})]}),e.jsxs("div",{className:"selected-recipients",children:[e.jsxs("strong",{children:["AusgewÃ¤hlte EmpfÃ¤nger: ",K.recipients.length]}),K.recipients.length>0&&e.jsxs("div",{className:"recipient-list",children:[K.recipients.slice(0,5).map((i,r)=>e.jsx("span",{className:"recipient-tag",children:i},r)),K.recipients.length>5&&e.jsxs("span",{className:"recipient-more",children:["+",K.recipients.length-5," weitere"]})]})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Betreff"}),e.jsx("input",{type:"text",value:K.subject,onChange:e=>H({...K,subject:e.target.value}),placeholder:"Betreff der Email...",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nachricht"}),e.jsx("textarea",{value:K.message,onChange:e=>H({...K,message:e.target.value}),placeholder:"Ihre Nachricht...",rows:"10",className:"form-textarea"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Template verwenden"}),e.jsxs("select",{value:K.template_type,onChange:e=>{const i=te.find(i=>i.id==e.target.value);i&&H({...K,subject:i.subject,message:i.content,template_type:e.target.value})},className:"form-select",children:[e.jsx("option",{value:"",children:"Kein Template"}),Array.isArray(te)&&te.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{onClick:ve,className:"btn btn-primary",disabled:M||!K.recipients.length||!K.subject||!K.message,children:M?"Senden...":"ðŸ“§ Email senden"})})]})]}),"push"===$&&(()=>{var i,r,t,a,s,n,l,o;return e.jsxs("div",{className:"email-composer",children:[e.jsxs("div",{className:"composer-header",children:[e.jsx("h3",{children:"ðŸ“± Push-Nachrichten versenden"}),e.jsx("p",{children:"Erstellen und versenden Sie Push-Benachrichtigungen an Ihre Mitglieder"})]}),T&&e.jsxs("div",{style:{background:"all"===B?"linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 107, 53, 0.15) 50%, rgba(59, 130, 246, 0.15) 100%)":`linear-gradient(135deg, ${T.farbe}33 0%, ${T.farbe}11 100%)`,border:"1px solid "+("all"===B?"rgba(255, 215, 0, 0.3)":`${T.farbe}66`),borderRadius:"10px",padding:"1rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.8rem"},children:[e.jsx("div",{style:{width:"8px",height:"40px",borderRadius:"4px",background:"all"===B?"linear-gradient(135deg, #FFD700 0%, #FF6B35 50%, #3B82F6 100%)":T.farbe}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#a0a0b0",marginBottom:"0.3rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"EmpfÃ¤nger-Filter aktiv"}),e.jsx("div",{style:{fontSize:"1rem",color:"#ffd700",fontWeight:"600"},children:"all"===B?"ðŸ¯ Alle Dojos":`ðŸ¯ ${T.dojoname}`}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#e0e0e0",marginTop:"0.3rem"},children:["VerfÃ¼gbare EmpfÃ¤nger: ",ie.mitglieder.length," Mitglieder, ",ie.trainer.length," Trainer, ",ie.personal.length," Mitarbeiter"]})]})]}),e.jsxs("div",{className:"composer-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Push-Berechtigung aktivieren"}),e.jsxs("div",{className:"push-permission-section",children:[e.jsx("button",{onClick:Se,className:"btn btn-secondary",children:"ðŸ”” Push-Benachrichtigungen aktivieren"}),e.jsxs("p",{className:"permission-info",children:["Aktive Abonnements: ",q.length]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"EmpfÃ¤nger auswÃ¤hlen"}),e.jsxs("div",{className:"recipient-selector",children:[e.jsxs("div",{className:"recipient-groups",children:[e.jsxs("button",{className:"recipient-group-btn "+(G.recipients.length===((null==(i=ie.mitglieder)?void 0:i.length)||0)?"active":""),onClick:()=>{ee([]),J({...G,recipients:(ie.mitglieder||[]).map(e=>e.email)})},children:["ðŸ‘¥ Alle Mitglieder (",(null==(r=ie.mitglieder)?void 0:r.length)||0,")"]}),e.jsxs("button",{className:"recipient-group-btn "+(G.recipients.length===((null==(t=ie.trainer)?void 0:t.length)||0)?"active":""),onClick:()=>{ee([]),J({...G,recipients:(ie.trainer||[]).map(e=>e.email)})},children:["ðŸ‘¨â€ðŸ« Alle Trainer (",(null==(a=ie.trainer)?void 0:a.length)||0,")"]}),e.jsxs("button",{className:"recipient-group-btn "+(G.recipients.length===((null==(s=ie.personal)?void 0:s.length)||0)?"active":""),onClick:()=>{ee([]),J({...G,recipients:(ie.personal||[]).map(e=>e.email)})},children:["ðŸ§‘â€ðŸ’¼ Alle Mitarbeiter (",(null==(n=ie.personal)?void 0:n.length)||0,")"]}),e.jsxs("button",{className:"recipient-group-btn "+(G.recipients.length===((null==(l=ie.admin)?void 0:l.length)||0)?"active":""),onClick:()=>{ee([]),J({...G,recipients:(ie.admin||[]).map(e=>e.email)})},children:["ðŸ‘‘ Alle Admins (",(null==(o=ie.admin)?void 0:o.length)||0,")"]})]}),e.jsxs("div",{className:"individual-selection",style:{marginTop:"1.5rem"},children:[e.jsx("label",{style:{marginBottom:"0.5rem",display:"block",fontWeight:"600"},children:"ðŸ” Einzelne Mitglieder auswÃ¤hlen"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:Z,onChange:e=>X(e.target.value),placeholder:"Nach Name oder Email suchen...",className:"form-input",style:{width:"100%",marginBottom:"0.5rem"}}),Z.length>0&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"2px solid #1976d2",borderRadius:"6px",maxHeight:"250px",overflowY:"auto",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.2)",marginTop:"0.25rem"},children:[ie.alle.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())||e.email.toLowerCase().includes(Z.toLowerCase())).slice(0,10).map((i,r)=>e.jsxs("div",{onClick:()=>{Q.find(e=>e.email===i.email)||(ee([...Q,i]),J({...G,recipients:[...new Set([...G.recipients,i.email])]})),X("")},style:{padding:"0.75rem 1rem",cursor:"pointer",borderBottom:"1px solid #e0e0e0",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#e3f2fd",e.currentTarget.style.borderLeftWidth="4px",e.currentTarget.style.borderLeftColor="#1976d2",e.currentTarget.style.borderLeftStyle="solid"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.borderLeftWidth="0"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1a1a1a",fontSize:"0.95rem",marginBottom:"0.25rem"},children:i.name}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#444"},children:[i.email,e.jsx("span",{style:{marginLeft:"0.5rem",padding:"3px 8px",backgroundColor:"#1976d2",color:"white",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"600"},children:i.type})]})]},r)),0===ie.alle.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())||e.email.toLowerCase().includes(Z.toLowerCase())).length&&e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#999"},children:"Keine Ergebnisse gefunden"})]})]}),Q.length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("strong",{style:{marginBottom:"0.5rem",display:"block"},children:["AusgewÃ¤hlte einzelne EmpfÃ¤nger (",Q.length,"):"]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Q.map((i,r)=>e.jsxs("span",{style:{backgroundColor:"#e3f2fd",padding:"0.4rem 0.8rem",borderRadius:"20px",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.name," (",i.email,")",e.jsx("button",{onClick:()=>{ee(Q.filter(e=>e.email!==i.email)),J({...G,recipients:G.recipients.filter(e=>e!==i.email)})},style:{background:"none",border:"none",color:"#666",cursor:"pointer",fontSize:"1rem",padding:0,lineHeight:1},children:"Ã—"})]},r))})]})]}),e.jsxs("div",{className:"selected-recipients",style:{marginTop:"1.5rem"},children:[e.jsxs("strong",{children:["Gesamt ausgewÃ¤hlte EmpfÃ¤nger: ",G.recipients.length]}),G.recipients.length>0&&e.jsxs("div",{className:"recipient-list",children:[G.recipients.slice(0,5).map((i,r)=>e.jsx("span",{className:"recipient-tag",children:i},r)),G.recipients.length>5&&e.jsxs("span",{className:"recipient-more",children:["+",G.recipients.length-5," weitere"]})]})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Titel"}),e.jsx("input",{type:"text",value:G.title,onChange:e=>J({...G,title:e.target.value}),placeholder:"Titel der Push-Nachricht...",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nachricht"}),e.jsx("textarea",{value:G.message,onChange:e=>J({...G,message:e.target.value}),placeholder:"Ihre Push-Nachricht...",rows:"4",className:"form-textarea"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Icon URL (optional)"}),e.jsx("input",{type:"url",value:G.icon,onChange:e=>J({...G,icon:e.target.value}),placeholder:"https://example.com/icon.png",className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Link URL (optional)"}),e.jsx("input",{type:"url",value:G.url,onChange:e=>J({...G,url:e.target.value}),placeholder:"https://example.com",className:"form-input"})]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{onClick:_e,className:"btn btn-primary",disabled:M||!G.title||!G.message,children:M?"Senden...":"ðŸ“± Push-Nachricht senden"})})]})]})})(),"settings"===$&&e.jsxs("div",{className:"notification-settings",style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("div",{className:"settings-header",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"2rem",filter:"drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3))",position:"relative",zIndex:10,lineHeight:1,display:"inline-block",flexShrink:0},children:"âš™ï¸"}),e.jsx("h3",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFD700",margin:0,textShadow:"none",WebkitTextFillColor:"#FFD700",background:"none",WebkitBackgroundClip:"initial",backgroundClip:"initial",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"0.5px",position:"relative",zIndex:2},children:"Server-Einstellungen"})]}),e.jsx("p",{style:{color:"#a0a0b0",fontSize:"0.9rem"},children:"Konfigurieren Sie Email- und Push-Notification-Einstellungen"})]}),e.jsxs("div",{className:"settings-section",style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1.2rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"section-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem",filter:"drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3))",position:"relative",zIndex:10,lineHeight:1,display:"inline-block",flexShrink:0},children:"ðŸ“§"}),e.jsx("h4",{style:{color:"#ffd700",margin:0,fontSize:"1.1rem",fontWeight:"600",textShadow:"none",WebkitTextFillColor:"#ffd700",background:"none",WebkitBackgroundClip:"initial",backgroundClip:"initial",position:"relative",zIndex:2},children:"Email-Konfiguration"})]}),e.jsxs("label",{className:"toggle-switch",style:{position:"relative",display:"inline-block",width:"50px",height:"24px"},children:[e.jsx("input",{type:"checkbox",checked:O.email_enabled,onChange:e=>V({...O,email_enabled:e.target.checked}),style:{opacity:0,width:0,height:0}}),e.jsx("span",{className:"toggle-slider",style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:O.email_enabled?"#22c55e":"#606070",transition:"0.4s",borderRadius:"24px"}})]})]}),O.email_enabled&&e.jsxs("div",{className:"email-config",children:[e.jsx("div",{className:"form-row",style:{marginBottom:"1rem"},children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"E-Mail Protokoll"}),e.jsxs("select",{value:O.email_config.protocol||"smtp",onChange:e=>V({...O,email_config:{...O.email_config,protocol:e.target.value}}),style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"},children:[e.jsx("option",{value:"smtp",children:"SMTP (Postausgang)"}),e.jsx("option",{value:"pop3",children:"POP3 (Posteingang)"}),e.jsx("option",{value:"imap",children:"IMAP (Posteingang)"})]})]})}),e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Postausgangsserver (SMTP)"}),e.jsx("input",{type:"text",value:O.email_config.smtp_host,onChange:e=>V({...O,email_config:{...O.email_config,smtp_host:e.target.value}}),placeholder:"smtp.alfahosting.de",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Postausgangsserver Port"}),e.jsx("input",{type:"number",value:O.email_config.smtp_port,onChange:e=>V({...O,email_config:{...O.email_config,smtp_port:parseInt(e.target.value)}}),placeholder:"587",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:["Posteingangsserver (","imap"===O.email_config.protocol?"IMAP":"pop3"===O.email_config.protocol?"POP3":"IMAP/POP3",")"]}),e.jsx("input",{type:"text",value:"imap"===O.email_config.protocol?O.email_config.imap_host:O.email_config.pop3_host,onChange:e=>V({...O,email_config:{...O.email_config,..."imap"===O.email_config.protocol?{imap_host:e.target.value}:{pop3_host:e.target.value}}}),placeholder:"imap"===O.email_config.protocol?"imap.alfahosting.de":"pop3.alfahosting.de",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Posteingangsserver Port"}),e.jsx("input",{type:"number",value:"imap"===O.email_config.protocol?O.email_config.imap_port:O.email_config.pop3_port,onChange:e=>V({...O,email_config:{...O.email_config,..."imap"===O.email_config.protocol?{imap_port:parseInt(e.target.value)}:{pop3_port:parseInt(e.target.value)}}}),placeholder:"imap"===O.email_config.protocol?"993":"995",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"SMTP Benutzername"}),e.jsx("input",{type:"text",value:O.email_config.smtp_user,onChange:e=>V({...O,email_config:{...O.email_config,smtp_user:e.target.value}}),placeholder:"ihre-email@ihre-domain.de",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"SMTP Passwort"}),e.jsx("input",{type:"password",value:O.email_config.smtp_password,onChange:e=>V({...O,email_config:{...O.email_config,smtp_password:e.target.value}}),placeholder:"App-Passwort",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Standard Absender-Email"}),e.jsx("input",{type:"email",value:O.default_from_email,onChange:e=>V({...O,default_from_email:e.target.value}),placeholder:"noreply@ihrdojo.de",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{style:{color:"#e0e0e0",fontSize:"0.9rem",marginBottom:"0.5rem",display:"block"},children:"Standard Absender-Name"}),e.jsx("input",{type:"text",value:O.default_from_name,onChange:e=>V({...O,default_from_name:e.target.value}),placeholder:"Dojo Software",style:{width:"100%",padding:"0.6rem",background:"rgba(20, 20, 30, 0.6)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:"#e0e0e0",fontSize:"0.9rem"}})]})]}),e.jsxs("div",{className:"form-actions",style:{marginTop:"1rem",display:"flex",gap:"0.8rem",flexWrap:"wrap"},children:[e.jsx("button",{onClick:je,disabled:M||!O.email_enabled,style:{padding:"0.7rem 1.5rem",background:"rgba(34, 197, 94, 0.2)",border:"1px solid rgba(34, 197, 94, 0.4)",borderRadius:"8px",color:"#22c55e",fontSize:"0.9rem",fontWeight:"600",cursor:M||!O.email_enabled?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:O.email_enabled?1:.5},onMouseEnter:e=>!M&&O.email_enabled&&(e.currentTarget.style.background="rgba(34, 197, 94, 0.3)"),onMouseLeave:e=>!M&&O.email_enabled&&(e.currentTarget.style.background="rgba(34, 197, 94, 0.2)"),title:"SMTP-Verbindung testen",children:"ðŸ”Œ SMTP-Verbindung testen"}),e.jsx("button",{onClick:ye,disabled:M||!O.email_enabled,style:{padding:"0.7rem 1.5rem",background:"rgba(96, 165, 250, 0.2)",border:"1px solid rgba(96, 165, 250, 0.4)",borderRadius:"8px",color:"#60a5fa",fontSize:"0.9rem",fontWeight:"600",cursor:M||!O.email_enabled?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:O.email_enabled?1:.5},onMouseEnter:e=>!M&&O.email_enabled&&(e.currentTarget.style.background="rgba(96, 165, 250, 0.3)"),onMouseLeave:e=>!M&&O.email_enabled&&(e.currentTarget.style.background="rgba(96, 165, 250, 0.2)"),title:"Test-E-Mail versenden",children:"ðŸ“§ Test-Email senden"})]})]})]}),e.jsxs("div",{className:"settings-section",style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1.2rem",marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"section-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("span",{style:{fontSize:"1.1rem",filter:"drop-shadow(0 2px 8px rgba(255, 215, 0, 0.3))",position:"relative",zIndex:10,lineHeight:1,display:"inline-block",flexShrink:0},children:"ðŸ“±"}),e.jsx("h4",{style:{color:"#ffd700",margin:0,fontSize:"1.1rem",fontWeight:"600",textShadow:"none",WebkitTextFillColor:"#ffd700",background:"none",WebkitBackgroundClip:"initial",backgroundClip:"initial",position:"relative",zIndex:2},children:"Push-Notifications"})]}),e.jsxs("label",{className:"toggle-switch",style:{position:"relative",display:"inline-block",width:"50px",height:"24px"},children:[e.jsx("input",{type:"checkbox",checked:O.push_enabled,onChange:e=>V({...O,push_enabled:e.target.checked}),style:{opacity:0,width:0,height:0}}),e.jsx("span",{className:"toggle-slider",style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:O.push_enabled?"#22c55e":"#606070",transition:"0.4s",borderRadius:"24px"}})]})]}),O.push_enabled&&e.jsx("div",{className:"push-config",children:e.jsx("p",{style:{color:"#a0a0b0",fontSize:"0.9rem"},children:"Push-Notification-Konfiguration wird hier implementiert..."})})]}),e.jsx("div",{className:"settings-actions",style:{textAlign:"right"},children:e.jsx("button",{onClick:xe,disabled:M,style:{padding:"0.8rem 2rem",background:"rgba(255, 215, 0, 0.2)",border:"1px solid rgba(255, 215, 0, 0.4)",borderRadius:"8px",color:"#ffd700",fontSize:"1rem",fontWeight:"600",cursor:M?"not-allowed":"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>!M&&(e.currentTarget.style.background="rgba(255, 215, 0, 0.3)"),onMouseLeave:e=>!M&&(e.currentTarget.style.background="rgba(255, 215, 0, 0.2)"),children:M?"Speichern...":"ðŸ’¾ Einstellungen speichern"})})]}),"history"===$&&(()=>{var i;const r={};null==(i=se.notifications)||i.forEach(e=>{const i=`${e.subject}_${e.created_at}`;r[i]||(r[i]={id:e.id,subject:e.subject,type:e.type,timestamp:e.created_at,message:e.message,recipient:e.recipient,total_sent:e.total_sent||1,total_read:e.total_read||0,status:e.status})});const t=Object.values(r);return e.jsxs("div",{className:"notification-history",style:{background:"rgba(20, 20, 30, 0.95)",borderRadius:"12px",padding:"1.5rem"},children:[e.jsxs("div",{className:"history-header",style:{marginBottom:"1.5rem"},children:[e.jsx("h3",{style:{color:"#ffd700",marginBottom:"0.5rem"},children:"ðŸ“‹ Benachrichtigungs-Verlauf"}),e.jsx("p",{style:{color:"#a0a0b0",fontSize:"0.9rem"},children:"Ãœbersicht Ã¼ber alle gesendeten Benachrichtigungen"})]}),e.jsx("div",{className:"history-list",style:{display:"flex",flexDirection:"column",gap:"1rem"},children:Array.isArray(t)&&t.map((i,r)=>{const t=`${i.subject}_${i.timestamp}`,n=le[t],o=i.total_sent>0?Math.round(i.total_read/i.total_sent*100):0;return e.jsxs("div",{style:{background:"rgba(30, 30, 45, 0.8)",border:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:"10px",padding:"1rem",transition:"all 0.3s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",marginBottom:"0.8rem"},children:[e.jsx("div",{style:{fontSize:"1.5rem"},children:"email"===i.type?"ðŸ“§":"ðŸ“±"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{color:"#ffd700",margin:0,fontSize:"1rem",fontWeight:"600"},children:i.subject}),e.jsx("div",{style:{color:"#808090",fontSize:"0.85rem",marginTop:"0.2rem"},children:new Date(i.timestamp).toLocaleString("de-DE")})]}),e.jsx("div",{style:{background:"sent"===i.status?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",color:"sent"===i.status?"#22c55e":"#ef4444",padding:"0.3rem 0.8rem",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},children:"sent"===i.status?"âœ… Gesendet":"failed"===i.status?"âŒ Fehlgeschlagen":"â³ Ausstehend"}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("MÃ¶chten Sie diese Benachrichtigung wirklich lÃ¶schen?"))try{const i=await a(`${s.apiBaseUrl}/notifications/history/${e}`,{method:"DELETE"}),r=await i.json();r.success?(L("Benachrichtigung erfolgreich gelÃ¶scht"),await be()):W(r.message||"Fehler beim LÃ¶schen der Benachrichtigung")}catch($e){W("Fehler beim LÃ¶schen der Benachrichtigung")}})(i.id),style:{background:"rgba(239, 68, 68, 0.2)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.4)",padding:"0.4rem 0.6rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.3rem"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.3)",e.currentTarget.style.borderColor="rgba(239, 68, 68, 0.6)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.2)",e.currentTarget.style.borderColor="rgba(239, 68, 68, 0.4)"},title:"Nur diesen EmpfÃ¤nger lÃ¶schen",children:"ðŸ—‘ï¸"}),e.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("âš ï¸ ACHTUNG: Diese Aktion lÃ¶scht die Benachrichtigung fÃ¼r ALLE EmpfÃ¤nger!\n\nMÃ¶chten Sie wirklich fortfahren?"))try{const i=await a(`${s.apiBaseUrl}/notifications/history/bulk/${e}`,{method:"DELETE"}),r=await i.json();r.success?(L(`${r.deletedCount} Benachrichtigung(en) erfolgreich gelÃ¶scht`),await be()):W(r.message||"Fehler beim LÃ¶schen der Benachrichtigungen")}catch($e){W("Fehler beim LÃ¶schen der Benachrichtigungen")}})(i.id),style:{background:"rgba(220, 38, 38, 0.3)",color:"#dc2626",border:"2px solid rgba(220, 38, 38, 0.5)",padding:"0.4rem 0.8rem",borderRadius:"8px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"700",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem",boxShadow:"0 2px 4px rgba(220, 38, 38, 0.2)"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(220, 38, 38, 0.4)",e.currentTarget.style.borderColor="rgba(220, 38, 38, 0.7)",e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(220, 38, 38, 0.3)",e.currentTarget.style.borderColor="rgba(220, 38, 38, 0.5)",e.currentTarget.style.transform="scale(1)"},title:"âš ï¸ FÃ¼r ALLE EmpfÃ¤nger lÃ¶schen",children:[e.jsx("span",{children:"ðŸ—‘ï¸ðŸ—‘ï¸"}),e.jsx("span",{style:{fontSize:"0.75rem"},children:"Alle"})]})]}),i.message&&e.jsxs("div",{style:{marginBottom:"0.8rem",padding:"0.8rem",background:"rgba(20, 20, 30, 0.5)",borderRadius:"8px",borderLeft:"3px solid #ffd700"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#a0a0b0",marginBottom:"0.4rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Nachricht"}),e.jsx("div",{style:{color:"#e0e0e0",fontSize:"0.9rem",lineHeight:"1.5",maxHeight:"100px",overflowY:"auto"},dangerouslySetInnerHTML:l(i.message)})]}),i.recipient&&e.jsxs("div",{style:{marginBottom:"0.8rem",padding:"0.6rem 0.8rem",background:"rgba(96, 165, 250, 0.1)",borderRadius:"6px",border:"1px solid rgba(96, 165, 250, 0.3)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1rem"},children:"ðŸ‘¤"}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#a0a0b0",fontWeight:"600",textTransform:"uppercase"},children:"EmpfÃ¤nger:"}),e.jsx("span",{style:{color:"#60a5fa",fontSize:"0.9rem",fontWeight:"500"},children:i.recipient})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.8rem",marginBottom:"0.8rem",padding:"0.8rem",background:"rgba(20, 20, 30, 0.5)",borderRadius:"8px"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#60a5fa"},children:i.total_sent}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#a0a0b0",marginTop:"0.2rem"},children:"Gesendet"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#22c55e"},children:i.total_read}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#a0a0b0",marginTop:"0.2rem"},children:"Gelesen"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:o>=50?"#22c55e":"#f59e0b"},children:[o,"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#a0a0b0",marginTop:"0.2rem"},children:"Gelesen"})]})]}),e.jsxs("button",{onClick:()=>(async(e,i)=>{const r=`${e}_${i}`;if(le[r])oe({...le,[r]:null});else try{const t=encodeURIComponent(e),s=encodeURIComponent(i),n=await a(`/dashboard/notification-recipients/${t}/${s}`),l=await n.json();l.success&&oe({...le,[r]:l.recipients})}catch($e){console.error("âŒ Fehler beim Laden der EmpfÃ¤nger:",$e)}})(i.subject,i.timestamp),style:{width:"100%",padding:"0.6rem",background:n?"rgba(255, 215, 0, 0.2)":"rgba(255, 255, 255, 0.05)",border:"1px solid "+(n?"rgba(255, 215, 0, 0.4)":"rgba(255, 255, 255, 0.1)"),borderRadius:"8px",color:n?"#ffd700":"#e0e0e0",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 215, 0, 0.3)",e.currentTarget.style.borderColor="rgba(255, 215, 0, 0.6)"},onMouseLeave:e=>{e.currentTarget.style.background=n?"rgba(255, 215, 0, 0.2)":"rgba(255, 255, 255, 0.05)",e.currentTarget.style.borderColor=n?"rgba(255, 215, 0, 0.4)":"rgba(255, 255, 255, 0.1)"},children:[e.jsx("span",{children:n?"â–¼":"â–¶"}),e.jsx("span",{children:"EmpfÃ¤nger anzeigen"})]}),n&&e.jsx("div",{style:{marginTop:"0.8rem",padding:"0.8rem",background:"rgba(20, 20, 30, 0.6)",borderRadius:"8px",maxHeight:"300px",overflowY:"auto"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.4rem"},children:n.map((i,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.5rem 0.8rem",background:i.read?"rgba(34, 197, 94, 0.1)":"rgba(255, 255, 255, 0.03)",border:"1px solid "+(i.read?"rgba(34, 197, 94, 0.3)":"rgba(255, 255, 255, 0.1)"),borderRadius:"6px",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{fontSize:"1rem"},children:i.read?"âœ…":"ðŸ“­"}),e.jsx("span",{style:{color:"#e0e0e0",fontSize:"0.9rem"},children:i.recipient})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:i.read?"#22c55e":"#808090",fontWeight:"600"},children:i.read?"Gelesen":"Ungelesen"})]},r))})})]},r)})}),se.pagination&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1rem",marginTop:"1.5rem",padding:"1rem 0"},children:[e.jsx("button",{onClick:()=>be(se.pagination.page-1),disabled:se.pagination.page<=1,style:{padding:"0.6rem 1.2rem",background:se.pagination.page<=1?"rgba(255, 255, 255, 0.05)":"rgba(255, 215, 0, 0.2)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:se.pagination.page<=1?"#606070":"#ffd700",fontSize:"0.9rem",fontWeight:"600",cursor:se.pagination.page<=1?"not-allowed":"pointer",transition:"all 0.2s ease"},children:"â† ZurÃ¼ck"}),e.jsxs("span",{style:{color:"#e0e0e0",fontSize:"0.9rem",fontWeight:"500"},children:["Seite ",se.pagination.page," von ",se.pagination.pages]}),e.jsx("button",{onClick:()=>be(se.pagination.page+1),disabled:se.pagination.page>=se.pagination.pages,style:{padding:"0.6rem 1.2rem",background:se.pagination.page>=se.pagination.pages?"rgba(255, 255, 255, 0.05)":"rgba(255, 215, 0, 0.2)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",color:se.pagination.page>=se.pagination.pages?"#606070":"#ffd700",fontSize:"0.9rem",fontWeight:"600",cursor:se.pagination.page>=se.pagination.pages?"not-allowed":"pointer",transition:"all 0.2s ease"},children:"Weiter â†’"})]})]})})(),"news"===$&&F&&e.jsx(o,{embedded:!0})]})]});var we,ke,Ne,ze,Ce,Te,Be,Ee};export{T as default};
